/**
 * almond 0.1.1 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*!
 * jQuery JavaScript Library v1.8.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Aug 09 2012 16:24:48 GMT-0400 (Eastern Daylight Time)
 */

/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2012 jQuery Foundation and other contributors
 *  Released under the MIT license
 *  http://sizzlejs.com/
 */

//     Underscore.js 1.3.3
//     (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore is freely distributable under the MIT license.
//     Portions of Underscore are inspired or borrowed from Prototype,
//     Oliver Steele's Functional, and John Resig's Micro-Templating.
//     For all details and documentation:
//     http://documentcloud.github.com/underscore

//     (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*
 ### jQuery XML to JSON Plugin v1.1 - 2008-07-01 ###
 * http://www.fyneworks.com/ - diego@fyneworks.com
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 ###
 Website: http://www.fyneworks.com/jquery/xml-to-json/
*/

/*
 *  jssha256 version 0.1  -  Copyright 2006 B. Poettering
 *
 *  This program is free software; you can redistribute it and/or
 *  modify it under the terms of the GNU General Public License as
 *  published by the Free Software Foundation; either version 2 of the
 *  License, or (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 *  General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program; if not, write to the Free Software
 *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
 *  02111-1307 USA
 */

/**
 * @license RequireJS text 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

// moment.js
// version : 1.7.0
// author : Tim Wood
// license : MIT
// momentjs.com

/** @license
 *
 * SoundManager 2: JavaScript Sound for the Web
 * ----------------------------------------------
 * http://schillmania.com/projects/soundmanager2/
 *
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License:
 * http://schillmania.com/projects/soundmanager2/license.txt
 *
 * V2.97a.20120318
 */

/**
 * FastClick: Set up handling of fast clicks
 *
 * On touch WebKit (eg Android, iPhone) onclick events are usually
 * delayed by ~300ms to ensure that they are clicks rather than other
 * interactions such as double-tap to zoom.
 *
 * To work around this, add a document listener which converts touches
 * to clicks on a global basis, excluding scrolls and gestures.  The
 * default click events are then cancelled to prevent double-clicks.
 *
 * This function automatically adapts if no action is required (eg if
 * touch events are not supported), and also handles functionality such
 * as preventing actions in the page while the section selector
 * is displaying.
 *
 * One alternative is to use ontouchend events for everything, but that
 * prevents non-touch interaction, and
 * requires checks everywhere to ensure that a touch wasn't a
 * scroll/swipe/etc.
 *
 * ------
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject
 * to the following conditions:
 *
 * The below copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS
 * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
 * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 * @licence MIT License (http://www.opensource.org/licenses/mit-license.php)
 * @copyright (c) 2011 Assanka Limited
 * @author Rowan Beentje <rowan@assanka.net>, Matt Caruana Galizia <matt@assanka.net>
 */

/* ===================================================
 * bootstrap-transition.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ============================================================
 * bootstrap-button.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#buttons
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* ============================================================
 * bootstrap-dropdown.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* =========================================================
 * bootstrap-modal.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

/* ===========================================================
 * bootstrap-tooltip.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ===========================================================
 * bootstrap-popover.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#popovers
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================== */

/**
 * Copyright (c) 2011 Felix Gnass [fgnass at neteye dot de]
 * Licensed under the MIT license
 */

/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2012 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.7.2
 *
 */

/*
 * HTML5 Sortable jQuery Plugin
 * http://farhadi.ir/projects/html5sortable
 * 
 * Copyright 2012, Ali Farhadi
 * Released under the MIT license.
 */

// Chosen, a Select Box Enhancer for jQuery and Protoype
// by Patrick Filler for Harvest, http://getharvest.com
// 
// Version 0.9.8
// Full source at https://github.com/harvesthq/chosen
// Copyright (c) 2011 Harvest http://getharvest.com

/*
Chosen source: generate output using 'cake build'
Copyright (c) 2011 by Harvest
*/

/*
Chosen source: generate output using 'cake build'
Copyright (c) 2011 by Harvest
*/

/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/

function encode64(e){var t="",n="",r,i,s="",o,u,a,f="",l=0;do r=e.charCodeAt(l++),i=e.charCodeAt(l++),s=e.charCodeAt(l++),o=r>>2,u=(r&3)<<4|i>>4,a=(i&15)<<2|s>>6,f=s&63,isNaN(i)?a=f=64:isNaN(s)&&(f=64),t=t+b64array.charAt(o)+b64array.charAt(u)+b64array.charAt(a)+b64array.charAt(f),r=i=s="",o=u=a=f="";while(l<e.length);return t}function decode64(e){var t="",n="",r,i,s="",o,u,a,f="",l=0,c=/[^A-Za-z0-9\+\/\=]/g;c.exec(e)&&alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do o=b64array.indexOf(e.charAt(l++)),u=b64array.indexOf(e.charAt(l++)),a=b64array.indexOf(e.charAt(l++)),f=b64array.indexOf(e.charAt(l++)),r=o<<2|u>>4,i=(u&15)<<4|a>>2,s=(a&3)<<6|f,t+=String.fromCharCode(r),a!=64&&(t+=String.fromCharCode(i)),f!=64&&(t+=String.fromCharCode(s)),r=i=s="",o=u=a=f="";while(l<e.length);return unescape(t)}function string_to_array(e){var t=e.length,n=new Array(t);for(var r=0;r<t;r++)n[r]=e.charCodeAt(r);return n}function array_to_hex_string(e){var t="";for(var n=0;n<e.length;n++)t+=SHA256_hexchars[e[n]>>4]+SHA256_hexchars[e[n]&15];return t}function array_to_string(e){var t="";for(var n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function SHA256_init(){SHA256_H=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),SHA256_buf=new Array,SHA256_len=0}function SHA256_write(e){typeof e=="string"?SHA256_buf=SHA256_buf.concat(string_to_array(e)):SHA256_buf=SHA256_buf.concat(e);for(var t=0;t+64<=SHA256_buf.length;t+=64)SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf.slice(t,t+64));SHA256_buf=SHA256_buf.slice(t),SHA256_len+=e.length}function SHA256_finalize(){SHA256_buf[SHA256_buf.length]=128;if(SHA256_buf.length>56){for(var e=SHA256_buf.length;e<64;e++)SHA256_buf[e]=0;SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf),SHA256_buf.length=0}for(var e=SHA256_buf.length;e<59;e++)SHA256_buf[e]=0;SHA256_buf[59]=SHA256_len>>>29&255,SHA256_buf[60]=SHA256_len>>>21&255,SHA256_buf[61]=SHA256_len>>>13&255,SHA256_buf[62]=SHA256_len>>>5&255,SHA256_buf[63]=SHA256_len<<3&255,SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf);var t=new Array(32);for(var e=0;e<8;e++)t[4*e+0]=SHA256_H[e]>>>24,t[4*e+1]=SHA256_H[e]>>16&255,t[4*e+2]=SHA256_H[e]>>8&255,t[4*e+3]=SHA256_H[e]&255;return delete SHA256_H,delete SHA256_buf,delete SHA256_len,t}function SHA256_hash(e){var t;return SHA256_init(),SHA256_write(e),t=SHA256_finalize(),array_to_hex_string(t)}function HMAC_SHA256_init(e){typeof e=="string"?HMAC_SHA256_key=string_to_array(e):HMAC_SHA256_key=(new Array).concat(e),HMAC_SHA256_key.length>64&&(SHA256_init(),SHA256_write(HMAC_SHA256_key),HMAC_SHA256_key=SHA256_finalize());for(var t=HMAC_SHA256_key.length;t<64;t++)HMAC_SHA256_key[t]=0;for(var t=0;t<64;t++)HMAC_SHA256_key[t]^=54;SHA256_init(),SHA256_write(HMAC_SHA256_key)}function HMAC_SHA256_write(e){SHA256_write(e)}function HMAC_SHA256_finalize(){var e=SHA256_finalize();for(var t=0;t<64;t++)HMAC_SHA256_key[t]^=106;SHA256_init(),SHA256_write(HMAC_SHA256_key),SHA256_write(e);for(var t=0;t<64;t++)HMAC_SHA256_key[t]=0;return delete HMAC_SHA256_key,SHA256_finalize()}function HMAC_SHA256_MAC(e,t){var n;return HMAC_SHA256_init(e),HMAC_SHA256_write(t),n=HMAC_SHA256_finalize(),array_to_hex_string(n)}function SHA256_sigma0(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function SHA256_sigma1(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}function SHA256_Sigma0(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function SHA256_Sigma1(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function SHA256_Ch(e,t,n){return n^e&(t^n)}function SHA256_Maj(e,t,n){return e&t^n&(e^t)}function SHA256_Hash_Word_Block(e,t){for(var n=16;n<64;n++)t[n]=SHA256_sigma1(t[n-2])+t[n-7]+SHA256_sigma0(t[n-15])+t[n-16]&4294967295;var r=(new Array).concat(e);for(var n=0;n<64;n++){var i=r[7]+SHA256_Sigma1(r[4])+SHA256_Ch(r[4],r[5],r[6])+SHA256_K[n]+t[n],s=SHA256_Sigma0(r[0])+SHA256_Maj(r[0],r[1],r[2]);r.pop(),r.unshift(i+s&4294967295),r[4]=r[4]+i&4294967295}for(var n=0;n<8;n++)e[n]=e[n]+r[n]&4294967295}function SHA256_Hash_Byte_Block(e,t){var n=new Array(16);for(var r=0;r<16;r++)n[r]=t[4*r+0]<<24|t[4*r+1]<<16|t[4*r+2]<<8|t[4*r+3];SHA256_Hash_Word_Block(e,n)}var requirejs,require,define;(function(e){function a(e,t){var n=t&&t.split("/"),i=r.map,s=i&&i["*"]||{},o,u,a,f,l,c,h;if(e&&e.charAt(0)==="."&&t){n=n.slice(0,n.length-1),e=n.concat(e.split("/"));for(l=0;h=e[l];l++)if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))return!0;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}if((n||s)&&i){o=e.split("/");for(l=o.length;l>0;l-=1){u=o.slice(0,l).join("/");if(n)for(c=n.length;c>0;c-=1){a=i[n.slice(0,c).join("/")];if(a){a=a[u];if(a){f=a;break}}}f=f||s[u];if(f){o.splice(0,l,f),e=o.join("/");break}}}return e}function f(t,n){return function(){return u.apply(e,s.call(arguments,0).concat([t,n]))}}function l(e){return function(t){return a(t,e)}}function c(e){return function(n){t[e]=n}}function h(r){if(n.hasOwnProperty(r)){var s=n[r];delete n[r],i[r]=!0,o.apply(e,s)}if(!t.hasOwnProperty(r))throw new Error("No "+r);return t[r]}function p(e,t){var n,r,i=e.indexOf("!");return i!==-1?(n=a(e.slice(0,i),t),e=e.slice(i+1),r=h(n),r&&r.normalize?e=r.normalize(e,l(t)):e=a(e,t)):e=a(e,t),{f:n?n+"!"+e:e,n:e,p:r}}function d(e){return function(){return r&&r.config&&r.config[e]||{}}}var t={},n={},r={},i={},s=[].slice,o,u;o=function(r,s,o,u){var a=[],l,v,m,g,y,b;u=u||r;if(typeof o=="function"){s=!s.length&&o.length?["require","exports","module"]:s;for(b=0;b<s.length;b++){y=p(s[b],u),m=y.f;if(m==="require")a[b]=f(r);else if(m==="exports")a[b]=t[r]={},l=!0;else if(m==="module")v=a[b]={id:r,uri:"",exports:t[r],config:d(r)};else if(t.hasOwnProperty(m)||n.hasOwnProperty(m))a[b]=h(m);else if(y.p)y.p.load(y.n,f(u,!0),c(m),{}),a[b]=t[m];else if(!i[m])throw new Error(r+" missing "+m)}g=o.apply(t[r],a);if(r)if(v&&v.exports!==e&&v.exports!==t[r])t[r]=v.exports;else if(g!==e||!l)t[r]=g}else r&&(t[r]=o)},requirejs=require=u=function(t,n,i,s){return typeof t=="string"?h(p(t,n).f):(t.splice||(r=t,n.splice?(t=n,n=i,i=null):t=e),n=n||function(){},s?o(e,t,n,i):setTimeout(function(){o(e,t,n,i)},15),u)},u.config=function(e){return r=e,u},define=function(e,t,r){t.splice||(r=t,t=[]),n[e]=[e,t,r]},define.amd={jQuery:!0}})(),define("libs/require/almond-0.1.1",function(){}),function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Kt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=$t.length;while(i--){t=$t[i]+n;if(t in e)return t}return r}function Qt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Gt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Qt(n)&&(i[s]=v._data(n,"olddisplay",tn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Yt(e,t,n){var r=qt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Zt(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+Vt[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+Vt[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+Vt[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+Vt[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+Vt[i]+"Width"))||0));return s}function en(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Rt.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+Zt(e,t,n||(s?"border":"content"),i)+"px"}function tn(e){if(zt[e])return zt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return zt[e]=n,n}function an(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||rn.test(e)?r(e,i):an(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)an(e+"["+i+"]",t[i],n,r);else r(e,t)}function Nn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function Cn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===En;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=Cn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=Cn(e,n,r,i,"*",o)),u}function kn(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function Ln(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function An(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function jn(){try{return new e.XMLHttpRequest}catch(t){}}function Fn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Vn(){return setTimeout(function(){In=t},0),In=v.now()}function $n(e,t){v.each(t,function(t,n){var r=(Xn[t]||[]).concat(Xn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Jn(e,t,n){var r,i=0,s=0,o=Wn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=In||Vn(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),i=0,s=f.tweens.length;for(;i<s;i++)f.tweens[i].run(r);return u.notifyWith(e,[f,r,n]),r<1&&s?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:In||Vn(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Kn(l,f.opts.specialEasing);for(;i<o;i++){r=Wn[i].call(f,e,l,f.opts);if(r)return r}return $n(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Kn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Qn(e,t,n){var r,i,s,o,u,a,f,l,c=this,h=e.style,p={},d=[],m=e.nodeType&&Qt(e);n.queue||(f=v._queueHooks(e,"fx"),f.unqueued==null&&(f.unqueued=0,l=f.empty.fire,f.empty.fire=function(){f.unqueued||l()}),f.unqueued++,c.always(function(){c.always(function(){f.unqueued--,v.queue(e,"fx").length||f.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||tn(e.nodeName)==="inline"?h.display="inline-block":h.zoom=1)),n.overflow&&(h.overflow="hidden",v.support.shrinkWrapBlocks||c.done(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Rn.exec(s)){delete t[r];if(s===(m?"hide":"show"))continue;d.push(r)}}o=d.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),m?v(e).show():c.done(function(){v(e).hide()}),c.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in p)v.style(e,t,p[t])});for(r=0;r<o;r++)i=d[r],a=c.createTween(i,m?u[i]:0),p[i]=u[i]||v.style(e,i),i in u||(u[i]=a.start,m&&(a.end=a.start,a.start=i==="width"||i==="height"?1:0))}}function Gn(e,t,n,r,i){return new Gn.prototype.init(e,t,n,r,i)}function Yn(e,t){var n,r={height:e},i=0;for(;i<4;i+=2-t)n=Vt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function er(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=g.test("Â ")?/^[\s\xA0]+|[\s\xA0]+$/g:/^\s+|\s+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.0",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":e.toString().replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||s.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete"||i.readyState!=="loading"&&i.addEventListener)setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){v.isFunction(n)&&(!e.unique||!c.has(n))?a.push(n):n&&n.length&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return typeof e=="object"?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0],r.style.cssText="top:1px;float:left;opacity:.5";if(!n||!n.length||!r)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/^(?:\{.*\}|\[.*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||++v.uuid:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")===0&&(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.shift(),i=v._queueHooks(e,t),s=function(){v.dequeue(e,t)};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),delete i.stop,r.call(e,s,i)),!n.length&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)(r=v._data(o[u],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)~s.indexOf(" "+t[o]+" ")||(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>-1)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(v.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!v.nodeName(i.parentNode,"optgroup"))){t=v(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?v(u[s]).val():o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,""+r),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,l,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=[].slice.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click")){o=v(this),o.context=this;for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){a={},l=[],o[0]=s;for(r=0;r<m;r++)c=d[r],h=c.selector,a[h]===t&&(a[h]=o.is(h)),a[h]&&l.push(c);l.length&&w.push({elem:s,matches:l})}}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){f=w[r],n.currentTarget=f.elem;for(i=0;i<f.matches.length&&!n.isImmediatePropagationStopped();i++){c=f.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,u=((v.event.special[c.origType]||{}).handle||c.handler).apply(f.elem,g),u!==t&&(n.result=u,u===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{ready:{setup:v.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function rt(e,t,n,r){var i=0,s=t.length;for(;i<s;i++)G(e,t[i],n,r)}function it(e,t,n,r,i,s){var o,u=Y.setFilters[t.toLowerCase()];return u||G.error(t),(e||!(o=i))&&rt(e||"*",r,o=[],i),o.length>0?u(o,n,s):[]}function st(e,n,r,i,s){var o,u,a,f,l,c,h,p,v=0,m=s.length,y=j.POS,b=new RegExp("^"+y.source+"(?!"+g+")","i"),w=function(){var e=1,n=arguments.length-2;for(;e<n;e++)arguments[e]===t&&(o[e]=t)};for(;v<m;v++){y.exec(""),e=s[v],f=[],a=0,l=i;while(o=y.exec(e)){p=y.lastIndex=o.index+o[0].length;if(p>a){h=e.slice(a,o.index),a=p,c=[n],k.test(h)&&(l&&(c=l),l=i);if(u=D.test(h))h=h.slice(0,-5).replace(k,"$&*");o.length>1&&o[0].replace(b,w),l=it(h,o[1],o[2],c,l,u)}}l?(f=f.concat(l),(h=e.slice(a))&&h!==")"?k.test(h)?rt(h,f,r,i):G(h,n,r,i?i.concat(l):l):d.apply(r,f)):G(e,n,r,i)}return m===1?r:G.uniqueSort(r)}function ot(e,t,n){var r,i,s,o=[],a=0,f=A.exec(e),l=!f.pop()&&!f.pop(),c=l&&e.match(L)||[""],h=Y.preFilter,p=Y.filter,d=!n&&t!==u;for(;(i=c[a])!=null&&l;a++){o.push(r=[]),d&&(i=" "+i);while(i){l=!1;if(f=k.exec(i))i=i.slice(f[0].length),l=r.push({part:f.pop().replace(C," "),captures:f});for(s in p)(f=j[s].exec(i))&&(!h[s]||(f=h[s](f,t,n)))&&(i=i.slice(f.shift().length),l=r.push({part:s,captures:f}));if(!l)break}}return l||G.error(e),o}function ut(e,t,i){var s=t.dir,o=h++;return e||(e=function(e){return e===i}),t.first?function(t,n){while(t=t[s])if(t.nodeType===1)return e(t,n)&&t}:function(t,i){var u,a=o+"."+r,f=a+"."+n;while(t=t[s])if(t.nodeType===1){if((u=t[m])===f)return t.sizset;if(typeof u=="string"&&u.indexOf(a)===0){if(t.sizset)return t}else{t[m]=f;if(e(t,i))return t.sizset=!0,t;t.sizset=!1}}}}function at(e,t){return e?function(n,r){var i=t(n,r);return i&&e(i===!0?n:i,r)}:t}function ft(e,t,n){var r,i,s=0;for(;r=e[s];s++)Y.relative[r.part]?i=ut(i,Y.relative[r.part],t):(r.captures.push(t,n),i=at(i,Y.filter[r.part].apply(null,r.captures)));return i}function lt(e){return function(t,n){var r,i=0;for(;r=e[i];i++)if(r(t,n))return!0;return!1}}var n,r,i,s,o,u=e.document,a=u.documentElement,f="undefined",l=!1,c=!0,h=0,p=[].slice,d=[].push,m=("sizcache"+Math.random()).replace(".",""),g="[\\x20\\t\\r\\n\\f]",y="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",b=y.replace("w","w#"),w="([*^$|!~]?=)",E="\\["+g+"*("+y+")"+g+"*(?:"+w+g+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+b+")|)|)"+g+"*\\]",S=":("+y+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|((?:[^,]|\\\\,|(?:,(?=[^\\[]*\\]))|(?:,(?=[^\\(]*\\))))*))\\)|)",x=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\)|)(?=[^-]|$)",T=g+"*([\\x20\\t\\r\\n\\f>+~])"+g+"*",N="(?=[^\\x20\\t\\r\\n\\f])(?:\\\\.|"+E+"|"+S.replace(2,7)+"|[^\\\\(),])+",C=new RegExp("^"+g+"+|((?:^|[^\\\\])(?:\\\\.)*)"+g+"+$","g"),k=new RegExp("^"+T),L=new RegExp(N+"?(?="+g+"*,|$)","g"),A=new RegExp("^(?:(?!,)(?:(?:^|,)"+g+"*"+N+")*?|"+g+"*(.*?))(\\)|$)"),O=new RegExp(N.slice(19,-6)+"\\x20\\t\\r\\n\\f>+~])+|"+T,"g"),M=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,_=/[\x20\t\r\n\f]*[+~]/,D=/:not\($/,P=/h\d/i,H=/input|select|textarea|button/i,B=/\\(?!\\)/g,j={ID:new RegExp("^#("+y+")"),CLASS:new RegExp("^\\.("+y+")"),NAME:new RegExp("^\\[name=['\"]?("+y+")['\"]?\\]"),TAG:new RegExp("^("+y.replace("[-","[-\\*")+")"),ATTR:new RegExp("^"+E),PSEUDO:new RegExp("^"+S),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+g+"*(even|odd|(([+-]|)(\\d*)n|)"+g+"*(?:([+-]|)"+g+"*(\\d+)|))"+g+"*\\)|)","i"),POS:new RegExp(x,"ig"),needsContext:new RegExp("^"+g+"*[>+~]|"+x,"i")},F={},I=[],q={},R=[],U=function(e){return e.sizzleFilter=!0,e},z=function(e){return function(t){return t.nodeName.toLowerCase()==="input"&&t.type===e}},W=function(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}},X=function(e){var t=!1,n=u.createElement("div");try{t=e(n)}catch(r){}return n=null,t},V=X(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),$=X(function(e){e.id=m+0,e.innerHTML="<a name='"+m+"'></a><div name='"+m+"'></div>",a.insertBefore(e,a.firstChild);var t=u.getElementsByName&&u.getElementsByName(m).length===2+u.getElementsByName(m+0).length;return o=!u.getElementById(m),a.removeChild(e),t}),J=X(function(e){return e.appendChild(u.createComment("")),e.getElementsByTagName("*").length===0}),K=X(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==f&&e.firstChild.getAttribute("href")==="#"}),Q=X(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||e.getElementsByClassName("e").length===0?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length!==1)}),G=function(e,t,n,r){n=n||[],t=t||u;var i,s,o,a,f=t.nodeType;if(f!==1&&f!==9)return[];if(!e||typeof e!="string")return n;o=et(t);if(!o&&!r)if(i=M.exec(e))if(a=i[1]){if(f===9){s=t.getElementById(a);if(!s||!s.parentNode)return n;if(s.id===a)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(a))&&tt(t,s)&&s.id===a)return n.push(s),n}else{if(i[2])return d.apply(n,p.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&Q&&t.getElementsByClassName)return d.apply(n,p.call(t.getElementsByClassName(a),0)),n}return ht(e,t,n,r,o)},Y=G.selectors={cacheLength:50,match:j,order:["ID","TAG"],attrHandle:{},createPseudo:U,find:{ID:o?function(e,t,n){if(typeof t.getElementById!==f&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==f&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==f&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:J?function(e,t){if(typeof t.getElementsByTagName!==f)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(B,""),e[3]=(e[4]||e[5]||"").replace(B,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||G.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&G.error(e[0]),e},PSEUDO:function(e){var t,n=e[4];return j.CHILD.test(e[0])?null:(n&&(t=A.exec(n))&&t.pop()&&(e[0]=e[0].slice(0,t[0].length-n.length-1),n=t[0].slice(0,-1)),e.splice(2,3,n||e[3]),e)}},filter:{ID:o?function(e){return e=e.replace(B,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(B,""),function(t){var n=typeof t.getAttributeNode!==f&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(B,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=F[e];return t||(t=F[e]=new RegExp("(^|"+g+")"+e+"("+g+"|$)"),I.push(e),I.length>Y.cacheLength&&delete F[I.shift()]),function(e){return t.test(e.className||typeof e.getAttribute!==f&&e.getAttribute("class")||"")}},ATTR:function(e,t,n){return t?function(r){var i=G.attr(r,e),s=i+"";if(i==null)return t==="!=";switch(t){case"=":return s===n;case"!=":return s!==n;case"^=":return n&&s.indexOf(n)===0;case"*=":return n&&s.indexOf(n)>-1;case"$=":return n&&s.substr(s.length-n.length)===n;case"~=":return(" "+s+" ").indexOf(n)>-1;case"|=":return s===n||s.substr(0,n.length+1)===n+"-"}}:function(t){return G.attr(t,e)!=null}},CHILD:function(e,t,n,r){if(e==="nth"){var i=h++;return function(e){var t,s,o=0,u=e;if(n===1&&r===0)return!0;t=e.parentNode;if(t&&(t[m]!==i||!e.sizset)){for(u=t.firstChild;u;u=u.nextSibling)if(u.nodeType===1){u.sizset=++o;if(u===e)break}t[m]=i}return s=e.sizset-r,n===0?s===0:s%n===0&&s/n>=0}}return function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t,n,r){var i=Y.pseudos[e]||Y.pseudos[e.toLowerCase()];return i||G.error("unsupported pseudo: "+e),i.sizzleFilter?i(t,n,r):i}},pseudos:{not:U(function(e,t,n){var r=ct(e.replace(C,"$1"),t,n);return function(e){return!r(e)}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!Y.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},contains:U(function(e){return function(t){return(t.textContent||t.innerText||nt(t)).indexOf(e)>-1}}),has:U(function(e){return function(t){return G(e,t).length>0}}),header:function(e){return P.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:z("radio"),checkbox:z("checkbox"),file:z("file"),password:z("password"),image:z("image"),submit:W("submit"),reset:W("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return H.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&(!!e.type||!!e.href)},active:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t,n){return n?e.slice(1):[e[0]]},last:function(e,t,n){var r=e.pop();return n?e:[r]},even:function(e,t,n){var r=[],i=n?1:0,s=e.length;for(;i<s;i+=2)r.push(e[i]);return r},odd:function(e,t,n){var r=[],i=n?0:1,s=e.length;for(;i<s;i+=2)r.push(e[i]);return r},lt:function(e,t,n){return n?e.slice(+t):e.slice(0,+t)},gt:function(e,t,n){return n?e.slice(0,+t+1):e.slice(+t+1)},eq:function(e,t,n){var r=e.splice(+t,1);return n?e:r}}};Y.setFilters.nth=Y.setFilters.eq,Y.filters=Y.pseudos,K||(Y.attrHandle={href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}}),$&&(Y.order.push("NAME"),Y.find.NAME=function(e,t){if(typeof t.getElementsByName!==f)return t.getElementsByName(e)}),Q&&(Y.order.splice(1,0,"CLASS"),Y.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!==f&&!n)return t.getElementsByClassName(e)});try{p.call(a.childNodes,0)[0].nodeType}catch(Z){p=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}var et=G.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},tt=G.contains=a.compareDocumentPosition?function(e,t){return!!(e.compareDocumentPosition(t)&16)}:a.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt=G.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=nt(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=nt(t);return n};G.attr=function(e,t){var n,r=et(e);return r||(t=t.toLowerCase()),Y.attrHandle[t]?Y.attrHandle[t](e):V||r?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},G.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},[0,0].sort(function(){return c=0}),a.compareDocumentPosition?i=function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:(i=function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],o=[],u=e.parentNode,a=t.parentNode,f=u;if(u===a)return s(e,t);if(!u)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)o.unshift(f),f=f.parentNode;n=i.length,r=o.length;for(var c=0;c<n&&c<r;c++)if(i[c]!==o[c])return s(i[c],o[c]);return c===n?s(e,o[c],-1):s(i[c],t,1)},s=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),G.uniqueSort=function(e){var t,n=1;if(i){l=c,e.sort(i);if(l)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1)}return e};var ct=G.compile=function(e,t,n){var r,i,s,o=q[e];if(o&&o.context===t)return o;i=ot(e,t,n);for(s=0;r=i[s];s++)i[s]=ft(r,t,n);return o=q[e]=lt(i),o.context=t,o.runs=o.dirruns=0,R.push(e),R.length>Y.cacheLength&&delete q[R.shift()],o};G.matches=function(e,t){return G(e,null,null,t)},G.matchesSelector=function(e,t){return G(t,null,null,[e]).length>0};var ht=function(e,t,i,s,o){e=e.replace(C,"$1");var u,a,f,l,c,h,v,m,g,y=e.match(L),b=e.match(O),w=t.nodeType;if(j.POS.test(e))return st(e,t,i,s,y);if(s)u=p.call(s,0);else if(y&&y.length===1){if(b.length>1&&w===9&&!o&&(y=j.ID.exec(b[0]))){t=Y.find.ID(y[1],t,o)[0];if(!t)return i;e=e.slice(b.shift().length)}m=(y=_.exec(b[0]))&&!y.index&&t.parentNode||t,g=b.pop(),h=g.split(":not")[0];for(f=0,l=Y.order.length;f<l;f++){v=Y.order[f];if(y=j[v].exec(h)){u=Y.find[v]((y[1]||"").replace(B,""),m,o);if(u==null)continue;h===g&&(e=e.slice(0,e.length-g.length)+h.replace(j[v],""),e||d.apply(i,p.call(u,0)));break}}}if(e){a=ct(e,t,o),r=a.dirruns++,u==null&&(u=Y.find.TAG("*",_.test(e)&&t.parentNode||t));for(f=0;c=u[f];f++)n=a.runs++,a(c,t)&&i.push(c)}return i};u.querySelectorAll&&function(){var e,t=ht,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[],s=[":active"],o=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.oMatchesSelector||a.msMatchesSelector;X(function(e){e.innerHTML="<select><option selected></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+g+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),X(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+g+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=i.length&&new RegExp(i.join("|")),ht=function(e,r,s,o,u){if(!o&&!u&&(!i||!i.test(e)))if(r.nodeType===9)try{return d.apply(s,p.call(r.querySelectorAll(e),0)),s}catch(a){}else if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){var f=r.getAttribute("id"),l=f||m,c=_.test(e)&&r.parentNode||r;f?l=l.replace(n,"\\$&"):r.setAttribute("id",l);try{return d.apply(s,p.call(c.querySelectorAll(e.replace(L,"[id='"+l+"'] $&")),0)),s}catch(a){}finally{f||r.removeAttribute("id")}}return t(e,r,s,o,u)},o&&(X(function(t){e=o.call(t,"div");try{o.call(t,"[test!='']:sizzle"),s.push(Y.match.PSEUDO)}catch(n){}}),s=new RegExp(s.join("|")),G.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!et(t)&&!s.test(n)&&(!i||!i.test(n)))try{var u=o.call(t,n);if(u||e||t.document&&t.document.nodeType!==11)return u}catch(a){}return G(n,null,null,[t]).length>0})}(),G.attr=v.attr,v.find=G,v.expr=G.selectors,v.expr[":"]=v.expr.pseudos,v.unique=G.uniqueSort,v.text=G.getText,v.isXMLDoc=G.isXML,v.contains=G.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=(n[0]||n).ownerDocument||n[0]||n,typeof n.createDocumentFragment=="undefined"&&(n=i),e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=0,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(o=t===i&&Ct;(u=e[y])!=null;y++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{o=o||lt(t),c=c||o.appendChild(t.createElement("div")),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(s=p.length-1;s>=0;--s)v.nodeName(p[s],"tbody")&&!p[s].childNodes.length&&p[s].parentNode.removeChild(p[s])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c=o.lastChild}u.nodeType?b.push(u):b=v.merge(b,u)}c&&(o.removeChild(c),u=c=o=null);if(!v.support.appendChecked)for(y=0;(u=b[y])!=null;y++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(y=0;(u=b[y])!=null;y++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[y+1,0].concat(g)),y+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^margin/,qt=new RegExp("^("+m+")(.*)$","i"),Rt=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),Ut=new RegExp("^([-+])=("+m+")","i"),zt={},Wt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:0,fontWeight:400,lineHeight:1},Vt=["Top","Right","Bottom","Left"],$t=["Webkit","O","Moz","ms"],Jt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Gt(this,!0)},hide:function(){return Gt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Jt.apply(this,arguments):this.each(function(){(n?e:Qt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Kt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=Ut.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Kt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Xt&&(s=Xt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(e,t){var n,r,i,s,o=getComputedStyle(e,null),u=e.style;return o&&(n=o[t],n===""&&!v.contains(e.ownerDocument.documentElement,e)&&(n=v.style(e,t)),Rt.test(n)&&It.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=n,n=o.width,u.width=r,u.minWidth=i,u.maxWidth=s)),n}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Rt.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth!==0||Dt(e,"display")!=="none"?en(e,t,r):v.swap(e,Wt,function(){return en(e,t,r)})},set:function(e,n,r){return Yt(e,n,r?Zt(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Rt.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+Vt[r]+t]=i[r]||i[r-2]||i[0];return s}},It.test(e)||(v.cssHooks[e+t].set=Yt)});var nn=/%20/g,rn=/\[\]$/,sn=/\r?\n/g,on=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,un=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||un.test(this.nodeName)||on.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(sn,"\r\n")}}):{name:t.name,value:n.replace(sn,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)an(r,e[r],n,s);return i.join("&").replace(nn,"+")};var fn,ln,cn=/#.*$/,hn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,pn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,dn=/^(?:GET|HEAD)$/,vn=/^\/\//,mn=/\?/,gn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,yn=/([?&])_=[^&]*/,bn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,wn=v.fn.load,En={},Sn={},xn=["*/"]+["*"];try{fn=s.href}catch(Tn){fn=i.createElement("a"),fn.href="",fn=fn.href}ln=bn.exec(fn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&wn)return wn.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(gn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?kn(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),kn(e,t),e},ajaxSettings:{url:fn,isLocal:pn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":xn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Nn(En),ajaxTransport:Nn(Sn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=Ln(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=An(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=""+(n||T),l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=hn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(cn,"").replace(vn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=bn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]==ln[1]&&a[2]==ln[2]&&(a[3]||(a[1]==="http:"?80:443))==(ln[3]||(ln[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),Cn(En,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!dn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(mn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(yn,"$1_="+N);c.url=C+(C===c.url?(mn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+xn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=Cn(Sn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var On=[],Mn=/\?/,_n=/(=)\?(?=&|$)|\?\?/,Dn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=On.pop()||v.expando+"_"+Dn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&_n.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&_n.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(_n,"$1"+s):h?n.data=a.replace(_n,"$1"+s):l&&(n.url+=(Mn.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,On.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Pn,Hn=e.ActiveXObject?function(){for(var e in Pn)Pn[e](0,1)}:!1,Bn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&jn()||Fn()}:jn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Hn&&delete Pn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(e){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++Bn,Hn&&(Pn||(Pn={},v(e).unload(Hn)),Pn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var In,qn,Rn=/^(?:toggle|show|hide)$/,Un=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),zn=/queueHooks$/,Wn=[Qn],Xn={"*":[function(e,t){var n,r,i,s=this.createTween(e,t),o=Un.exec(t),u=s.cur(),a=+u||0,f=1;if(o){n=+o[2],r=o[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&a){a=v.css(s.elem,e,!0)||n||1;do i=f=f||".5",a/=f,v.style(s.elem,e,a+r),f=s.cur()/u;while(f!==1&&f!==i)}s.unit=r,s.start=a,s.end=o[1]?a+(o[1]+1)*n:n}return s}]};v.Animation=v.extend(Jn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Xn[n]=Xn[n]||[],Xn[n].unshift(t)},prefilter:function(e,t){t?Wn.unshift(e):Wn.push(e)}}),v.Tween=Gn,Gn.prototype={constructor:Gn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Gn.propHooks[this.prop];return e&&e.get?e.get(this):Gn.propHooks._default.get(this)},run:function(e){var t,n=Gn.propHooks[this.prop];return this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration),this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Gn.propHooks._default.set(this),this}},Gn.prototype.init.prototype=Gn.prototype,Gn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Gn.propHooks.scrollTop=Gn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Yn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Qt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Jn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&zn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Yn("show"),slideUp:Yn("hide"),slideToggle:Yn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Gn.prototype.init,v.fx.tick=function(){var e,t=v.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||v.fx.stop()},v.fx.timer=function(e){e()&&v.timers.push(e)&&!qn&&(qn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(qn),qn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var Zn=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f,l,c,h=this[0],p=h&&h.ownerDocument;if(!p)return;return(i=p.body)===h?v.offset.bodyOffset(h):(r=p.documentElement,v.contains(r,h)?(n=h.getBoundingClientRect(),s=er(p),o=r.clientTop||i.clientTop||0,u=r.clientLeft||i.clientLeft||0,a=s.pageYOffset||r.scrollTop,f=s.pageXOffset||r.scrollLeft,l=n.top+a-o,c=n.left+f-u,{top:l,left:c}):{top:0,left:0})},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=Zn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!Zn.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=er(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})}(window),define("plex/control/init/jQueryInit",["jquery"],function(e){jQuery.support.cors||jQuery.ajaxPrefilter(function(e,t,n){if(e.crossDomain&&e.async){var r=e.type.toUpperCase();e.data&&(r=="GET"||r=="HEAD")&&(e.url+="?"+e.data,delete e.data),e.headers||(e.headers={});var i="X-Plex-",s=_.filter(_.keys(e.headers),function(e){return e.lastIndexOf(i,0)===0});_.each(s,function(t){e.headers["X-Plex-Proxy-"+t.slice(i.length)]=e.headers[t],delete e.headers[t]}),e.headers["X-Plex-Url"]=e.url,e.url="/system/proxy",e.crossDomain=!1;if(window.appModel){var o=window.appModel.get("primaryServer").get("accessToken");o&&(e.headers["X-Plex-Token"]=o)}}});var t=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified","Pragma","Link","Location"],n=jQuery.ajaxSettings.xhr;jQuery.ajaxSettings.xhr=function(){var e=n(),r=e.getAllResponseHeaders;return e.getAllResponseHeaders=function(){var n=r.apply(e);if(n)return n;var i=[];return _.each(t,function(t){var n=e.getResponseHeader(t);n&&i.push(t+": "+n)}),i.join("\n")},e}}),function(){function C(e,t,n){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual&&S.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&S.isFunction(t.isEqual))return t.isEqual(e);var r=a.call(e);if(r!=a.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var i=n.length;while(i--)if(n[i]==e)return!0;n.push(e);var s=0,o=!0;if(r=="[object Array]"){s=e.length,o=s==t.length;if(o)while(s--)if(!(o=s in e==s in t&&C(e[s],t[s],n)))break}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return!1;for(var u in e)if(S.has(e,u)){s++;if(!(o=S.has(t,u)&&C(e[u],t[u],n)))break}if(o){for(u in t)if(S.has(t,u)&&!(s--))break;o=!s}}return n.pop(),o}var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.slice,u=r.unshift,a=i.toString,f=i.hasOwnProperty,l=r.forEach,c=r.map,h=r.reduce,p=r.reduceRight,d=r.filter,v=r.every,m=r.some,g=r.indexOf,y=r.lastIndexOf,b=Array.isArray,w=Object.keys,E=s.bind,S=function(e){return new P(e)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.3.3";var x=S.each=S.forEach=function(e,t,r){if(e==null)return;if(l&&e.forEach===l)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(r,e[i],i,e)===n)return}else for(var o in e)if(S.has(e,o)&&t.call(r,e[o],o,e)===n)return};S.map=S.collect=function(e,t,n){var r=[];return e==null?r:c&&e.map===c?e.map(t,n):(x(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),e.length===+e.length&&(r.length=e.length),r)},S.reduce=S.foldl=S.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(h&&e.reduce===h)return r&&(t=S.bind(t,r)),i?e.reduce(t,n):e.reduce(t);x(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},S.reduceRight=S.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduceRight===p)return r&&(t=S.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=S.toArray(e).reverse();return r&&!i&&(t=S.bind(t,r)),i?S.reduce(s,t,n,r):S.reduce(s,t)},S.find=S.detect=function(e,t,n){var r;return T(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},S.filter=S.select=function(e,t,n){var r=[];return e==null?r:d&&e.filter===d?e.filter(t,n):(x(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},S.reject=function(e,t,n){var r=[];return e==null?r:(x(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},S.every=S.all=function(e,t,r){var i=!0;return e==null?i:v&&e.every===v?e.every(t,r):(x(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var T=S.some=S.any=function(e,t,r){t||(t=S.identity);var i=!1;return e==null?i:m&&e.some===m?e.some(t,r):(x(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};S.include=S.contains=function(e,t){var n=!1;return e==null?n:g&&e.indexOf===g?e.indexOf(t)!=-1:(n=T(e,function(e){return e===t}),n)},S.invoke=function(e,t){var n=o.call(arguments,2);return S.map(e,function(e){return(S.isFunction(t)?t||e:e[t]).apply(e,n)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-Infinity;var r={computed:-Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return Infinity;var r={computed:Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},S.shuffle=function(e){var t=[],n;return x(e,function(e,r,i){n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e}),t},S.sortBy=function(e,t,n){var r=S.isFunction(t)?t:function(e){return e[t]};return S.pluck(S.map(e,function(e,t,i){return{value:e,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n===void 0?1:r===void 0?-1:n<r?-1:n>r?1:0}),"value")},S.groupBy=function(e,t){var n={},r=S.isFunction(t)?t:function(e){return e[t]};return x(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},S.sortedIndex=function(e,t,n){n||(n=S.identity);var r=0,i=e.length;while(r<i){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},S.toArray=function(e){return e?S.isArray(e)?o.call(e):S.isArguments(e)?o.call(e):e.toArray&&S.isFunction(e.toArray)?e.toArray():S.values(e):[]},S.size=function(e){return S.isArray(e)?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,n){return t!=null&&!n?o.call(e,0,t):e[0]},S.initial=function(e,t,n){return o.call(e,0,e.length-(t==null||n?1:t))},S.last=function(e,t,n){return t!=null&&!n?o.call(e,Math.max(e.length-t,0)):e[e.length-1]},S.rest=S.tail=function(e,t,n){return o.call(e,t==null||n?1:t)},S.compact=function(e){return S.filter(e,function(e){return!!e})},S.flatten=function(e,t){return S.reduce(e,function(e,n){return S.isArray(n)?e.concat(t?n:S.flatten(n)):(e[e.length]=n,e)},[])},S.without=function(e){return S.difference(e,o.call(arguments,1))},S.uniq=S.unique=function(e,t,n){var r=n?S.map(e,n):e,i=[];return e.length<3&&(t=!0),S.reduce(r,function(n,r,s){if(t?S.last(n)!==r||!n.length:!S.include(n,r))n.push(r),i.push(e[s]);return n},[]),i},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=S.intersect=function(e){var t=o.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})},S.difference=function(e){var t=S.flatten(o.call(arguments,1),!0);return S.filter(e,function(e){return!S.include(t,e)})},S.zip=function(){var e=o.call(arguments),t=S.max(S.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=S.pluck(e,""+r);return n},S.indexOf=function(e,t,n){if(e==null)return-1;var r,i;if(n)return r=S.sortedIndex(e,t),e[r]===t?r:-1;if(g&&e.indexOf===g)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(r in e&&e[r]===t)return r;return-1},S.lastIndexOf=function(e,t){if(e==null)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);var n=e.length;while(n--)if(n in e&&e[n]===t)return n;return-1},S.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var N=function(){};S.bind=function(t,n){var r,i;if(t.bind===E&&E)return E.apply(t,o.call(arguments,1));if(!S.isFunction(t))throw new TypeError;return i=o.call(arguments,2),r=function(){if(this instanceof r){N.prototype=t.prototype;var e=new N,s=t.apply(e,i.concat(o.call(arguments)));return Object(s)===s?s:e}return t.apply(n,i.concat(o.call(arguments)))}},S.bindAll=function(e){var t=o.call(arguments,1);return t.length==0&&(t=S.functions(e)),x(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var r=t.apply(this,arguments);return S.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},S.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(o.call(arguments,1)))},S.throttle=function(e,t){var n,r,i,s,o,u,a=S.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var f=function(){i=null,o&&e.apply(n,r),a()};return i||(i=setTimeout(f,t)),s?o=!0:u=e.apply(n,r),a(),s=!0,u}},S.debounce=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,n||e.apply(i,s)};n&&!r&&e.apply(i,s),clearTimeout(r),r=setTimeout(o,t)}},S.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},S.wrap=function(e,t){return function(){var n=[e].concat(o.call(arguments,0));return t.apply(this,n)}},S.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},S.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)S.has(e,n)&&(t[t.length]=n);return t},S.values=function(e){return S.map(e,S.identity)},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return x(o.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},S.pick=function(e){var t={};return x(S.flatten(o.call(arguments,1)),function(n){n in e&&(t[n]=e[n])}),t},S.defaults=function(e){return x(o.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e},S.isEqual=function(e,t){return C(e,t,[])},S.isEmpty=function(e){if(e==null)return!0;if(S.isArray(e)||S.isString(e))return e.length===0;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!!e&&e.nodeType==1},S.isArray=b||function(e){return a.call(e)=="[object Array]"},S.isObject=function(e){return e===Object(e)},S.isArguments=function(e){return a.call(e)=="[object Arguments]"},S.isArguments(arguments)||(S.isArguments=function(e){return!!e&&!!S.has(e,"callee")}),S.isFunction=function(e){return a.call(e)=="[object Function]"},S.isString=function(e){return a.call(e)=="[object String]"},S.isNumber=function(e){return a.call(e)=="[object Number]"},S.isFinite=function(e){return S.isNumber(e)&&isFinite(e)},S.isNaN=function(e){return e!==e},S.isBoolean=function(e){return e===!0||e===!1||a.call(e)=="[object Boolean]"},S.isDate=function(e){return a.call(e)=="[object Date]"},S.isRegExp=function(e){return a.call(e)=="[object RegExp]"},S.isNull=function(e){return e===null},S.isUndefined=function(e){return e===void 0},S.has=function(e,t){return f.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},S.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},S.result=function(e,t){if(e==null)return null;var n=e[t];return S.isFunction(n)?n.call(e):n},S.mixin=function(e){x(S.functions(e),function(t){B(t,S[t]=e[t])})};var k=0;S.uniqueId=function(e){var t=k++;return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/.^/,A={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var O in A)A[A[O]]=O;var M=/\\|'|\r|\n|\t|\u2028|\u2029/g,_=/\\(\\|'|r|n|t|u2028|u2029)/g,D=function(e){return e.replace(_,function(e,t){return A[t]})};S.template=function(e,t,n){n=S.defaults(n||{},S.templateSettings);var r="__p+='"+e.replace(M,function(e){return"\\"+A[e]}).replace(n.escape||L,function(e,t){return"'+\n_.escape("+D(t)+")+\n'"}).replace(n.interpolate||L,function(e,t){return"'+\n("+D(t)+")+\n'"}).replace(n.evaluate||L,function(e,t){return"';\n"+D(t)+"\n;__p+='"})+"';\n";n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+r+"return __p;\n";var i=new Function(n.variable||"obj","_",r);if(t)return i(t,S);var s=function(e){return i.call(this,e,S)};return s.source="function("+(n.variable||"obj")+"){\n"+r+"}",s},S.chain=function(e){return S(e).chain()};var P=function(e){this._wrapped=e};S.prototype=P.prototype;var H=function(e,t){return t?S(e).chain():e},B=function(e,t){P.prototype[e]=function(){var e=o.call(arguments);return u.call(e,this._wrapped),H(t.apply(S,e),this._chain)}};S.mixin(S),x(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];P.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return(e=="shift"||e=="splice")&&r===0&&delete n[0],H(n,this._chain)}}),x(["concat","join","slice"],function(e){var t=r[e];P.prototype[e]=function(){return H(t.apply(this._wrapped,arguments),this._chain)}}),P.prototype.chain=function(){return this._chain=!0,this},P.prototype.value=function(){return this._wrapped}}.call(this),define("underscore",function(){}),function(){var e=this,t=e.Backbone,n=Array.prototype.slice,r=Array.prototype.splice,i;typeof exports!="undefined"?i=exports:i=e.Backbone={},i.VERSION="0.9.2";var s=e._;!s&&typeof require!="undefined"&&(s=require("underscore"));var o=e.jQuery||e.Zepto||e.ender;i.setDomLibrary=function(e){o=e},i.noConflict=function(){return e.Backbone=t,this},i.emulateHTTP=!1,i.emulateJSON=!1;var u=/\s+/,a=i.Events={on:function(e,t,n){var r,i,s,o,a;if(!t)return this;e=e.split(u),r=this._callbacks||(this._callbacks={});while(i=e.shift())a=r[i],s=a?a.tail:{},s.next=o={},s.context=n,s.callback=t,r[i]={tail:o,next:a?a.next:s};return this},off:function(e,t,n){var r,i,o,a,f,l;if(!(i=this._callbacks))return;if(!(e||t||n))return delete this._callbacks,this;e=e?e.split(u):s.keys(i);while(r=e.shift()){o=i[r],delete i[r];if(!o||!t&&!n)continue;a=o.tail;while((o=o.next)!==a)f=o.callback,l=o.context,(t&&f!==t||n&&l!==n)&&this.on(r,f,l)}return this},trigger:function(e){var t,r,i,s,o,a,f;if(!(i=this._callbacks))return this;a=i.all,e=e.split(u),f=n.call(arguments,1);while(t=e.shift()){if(r=i[t]){s=r.tail;while((r=r.next)!==s)r.callback.apply(r.context||this,f)}if(r=a){s=r.tail,o=[t].concat(f);while((r=r.next)!==s)r.callback.apply(r.context||this,o)}}return this}};a.bind=a.on,a.unbind=a.off;var f=i.Model=function(e,t){var n;e||(e={}),t&&t.parse&&(e=this.parse(e));if(n=C(this,"defaults"))e=s.extend({},n,e);t&&t.collection&&(this.collection=t.collection),this.attributes={},this._escapedAttributes={},this.cid=s.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(e,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=s.clone(this.attributes),this.initialize.apply(this,arguments)};s.extend(f.prototype,a,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return s.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var n=this.get(e);return this._escapedAttributes[e]=s.escape(n==null?"":""+n)},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,o;s.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n||(n={});if(!r)return this;r instanceof f&&(r=r.attributes);if(n.unset)for(i in r)r[i]=void 0;if(!this._validate(r,n))return!1;this.idAttribute in r&&(this.id=r[this.idAttribute]);var u=n.changes={},a=this.attributes,l=this._escapedAttributes,c=this._previousAttributes||{};for(i in r){o=r[i];if(!s.isEqual(a[i],o)||n.unset&&s.has(a,i))delete l[i],(n.silent?this._silent:u)[i]=!0;n.unset?delete a[i]:a[i]=o,!s.isEqual(c[i],o)||s.has(a,i)!=s.has(c,i)?(this.changed[i]=o,n.silent||(this._pending[i]=!0)):(delete this.changed[i],delete this._pending[i])}return n.silent||this.change(n),this},unset:function(e,t){return(t||(t={})).unset=!0,this.set(e,null,t)},clear:function(e){return(e||(e={})).unset=!0,this.set(s.clone(this.attributes),e)},fetch:function(e){e=e?s.clone(e):{};var t=this,n=e.success;return e.success=function(r,i,s){if(!t.set(t.parse(r,s),e))return!1;n&&n(t,r)},e.error=i.wrapError(e.error,t,e),(this.sync||i.sync).call(this,"read",this,e)},save:function(e,t,n){var r,o;s.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n=n?s.clone(n):{};if(n.wait){if(!this._validate(r,n))return!1;o=s.clone(this.attributes)}var u=s.extend({},n,{silent:!0});if(r&&!this.set(r,n.wait?u:n))return!1;var a=this,f=n.success;n.success=function(e,t,i){var o=a.parse(e,i);n.wait&&(delete n.wait,o=s.extend(r||{},o));if(!a.set(o,n))return!1;f?f(a,e):a.trigger("sync",a,e,n)},n.error=i.wrapError(n.error,a,n);var l=this.isNew()?"create":"update",c=(this.sync||i.sync).call(this,l,this,n);return n.wait&&this.set(o,u),c},destroy:function(e){e=e?s.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(this.isNew())return r(),!1;e.success=function(i){e.wait&&r(),n?n(t,i):t.trigger("sync",t,i,e)},e.error=i.wrapError(e.error,t,e);var o=(this.sync||i.sync).call(this,"delete",this,e);return e.wait||r(),o},url:function(){var e=C(this,"urlRoot")||C(this.collection,"url")||k();return this.isNew()?e:e+(e.charAt(e.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(e){e||(e={});var t=this._changing;this._changing=!0;for(var n in this._silent)this._pending[n]=!0;var r=s.extend({},e.changes,this._silent);this._silent={};for(var n in r)this.trigger("change:"+n,this,this.get(n),e);if(t)return this;while(!s.isEmpty(this._pending)){this._pending={},this.trigger("change",this,e);for(var n in this.changed){if(this._pending[n]||this._silent[n])continue;delete this.changed[n]}this._previousAttributes=s.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(e){return arguments.length?s.has(this.changed,e):!s.isEmpty(this.changed)},changedAttributes:function(e){if(!e)return this.hasChanged()?s.clone(this.changed):!1;var t,n=!1,r=this._previousAttributes;for(var i in e){if(s.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return s.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=s.extend({},this.attributes,e);var n=this.validate(e,t);return n?(t&&t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1):!0}});var l=i.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,{silent:!0,parse:t.parse})};s.extend(l.prototype,a,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},add:function(e,t){var n,i,o,u,a,f,l={},c={},h=[];t||(t={}),e=s.isArray(e)?e.slice():[e];for(n=0,o=e.length;n<o;n++){if(!(u=e[n]=this._prepareModel(e[n],t)))throw new Error("Can't add an invalid model to a collection");a=u.cid,f=u.id;if(l[a]||this._byCid[a]||f!=null&&(c[f]||this._byId[f])){h.push(n);continue}l[a]=c[f]=u}n=h.length;while(n--)e.splice(h[n],1);for(n=0,o=e.length;n<o;n++)(u=e[n]).on("all",this._onModelEvent,this),this._byCid[u.cid]=u,u.id!=null&&(this._byId[u.id]=u);this.length+=o,i=t.at!=null?t.at:this.models.length,r.apply(this.models,[i,0].concat(e)),this.comparator&&this.sort({silent:!0});if(t.silent)return this;for(n=0,o=this.models.length;n<o;n++){if(!l[(u=this.models[n]).cid])continue;t.index=n,u.trigger("add",u,this,t)}return this},remove:function(e,t){var n,r,i,o;t||(t={}),e=s.isArray(e)?e.slice():[e];for(n=0,r=e.length;n<r;n++){o=this.getByCid(e[n])||this.get(e[n]);if(!o)continue;delete this._byId[o.id],delete this._byCid[o.cid],i=this.indexOf(o),this.models.splice(i,1),this.length--,t.silent||(t.index=i,o.trigger("remove",o,this,t)),this._removeReference(o)}return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,t),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,s.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},where:function(e){return s.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){e||(e={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");var t=s.bind(this.comparator,this);return this.comparator.length==1?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return s.map(this.models,function(t){return t.get(e)})},reset:function(e,t){e||(e=[]),t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return this._reset(),this.add(e,s.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?s.clone(e):{},e.parse===undefined&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r,i,s){t[e.add?"add":"reset"](t.parse(r,s),e),n&&n(t,r)},e.error=i.wrapError(e.error,t,e),(this.sync||i.sync).call(this,"read",this,e)},create:function(e,t){var n=this;t=t?s.clone(t):{},e=this._prepareModel(e,t);if(!e)return!1;t.wait||n.add(e,t);var r=t.success;return t.success=function(i,s,o){t.wait&&n.add(i,t),r?r(i,s):i.trigger("sync",e,s,t)},e.save(null,t),e},parse:function(e,t){return e},chain:function(){return s(this.models).chain()},_reset:function(e){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){t||(t={});if(e instanceof f)e.collection||(e.collection=this);else{var n=e;t.collection=this,e=new this.model(n,t),e._validate(e.attributes,t)||(e=!1)}return e},_removeReference:function(e){this==e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e=="add"||e=="remove")&&n!=this)return;e=="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments)}});var c=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];s.each(c,function(e){l.prototype[e]=function(){return s[e].apply(s,[this.models].concat(s.toArray(arguments)))}});var h=i.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},p=/:\w+/g,d=/\*\w+/g,v=/[-[\]{}()+?.,\\^$|#\s]/g;s.extend(h.prototype,a,{initialize:function(){},route:function(e,t,n){return i.history||(i.history=new m),s.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),i.history.route(e,s.bind(function(r){var s=this._extractParameters(e,r);n&&n.apply(this,s),this.trigger.apply(this,["route:"+t].concat(s)),i.history.trigger("route",this,t,s)},this)),this},navigate:function(e,t){i.history.navigate(e,t)},_bindRoutes:function(){if(!this.routes)return;var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,r=e.length;n<r;n++)this.route(e[n][0],e[n][1],this[e[n][1]])},_routeToRegExp:function(e){return e=e.replace(v,"\\$&").replace(p,"([^/]+)").replace(d,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var m=i.History=function(){this.handlers=[],s.bindAll(this,"checkUrl")},g=/^[#\/]/,y=/msie [\w.]+/;m.started=!1,s.extend(m.prototype,a,{interval:50,getHash:function(e){var t=e?e.location:window.location,n=t.href.match(/#(.*)$/);return n?n[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||t){e=window.location.pathname;var n=window.location.search;n&&(e+=n)}else e=this.getHash();return e.indexOf(this.options.root)||(e=e.substr(this.options.root.length)),e.replace(g,"")},start:function(e){if(m.started)throw new Error("Backbone.history has already been started");m.started=!0,this.options=s.extend({},{root:"/"},this.options,e),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var t=this.getFragment(),n=document.documentMode,r=y.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);r&&(this.iframe=o('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=window.location,u=i.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!u)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&u&&i.hash&&(this.fragment=this.getHash().replace(g,""),window.history.replaceState({},document.title,i.protocol+"//"+i.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){o(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),m.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t==this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t==this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=s.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!m.started)return!1;if(!t||t===!0)t={trigger:t};var n=(e||"").replace(g,"");if(this.fragment==n)return;this._hasPushState?(n.indexOf(this.options.root)!=0&&(n=this.options.root+n),this.fragment=n,window.history[t.replace?"replaceState":"pushState"]({},document.title,n)):this._wantsHashChange?(this.fragment=n,this._updateHash(window.location,n,t.replace),this.iframe&&n!=this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,n,t.replace))):window.location.assign(this.options.root+e),t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){n?e.replace(e.toString().replace(/(javascript:|#).*$/,"")+"#"+t):e.hash=t}});var b=i.View=function(e){this.cid=s.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName"];s.extend(b.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(e,t,n){var r=document.createElement(e);return t&&o(r).attr(t),n&&o(r).html(n),r},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o?e:o(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=C(this,"events")))return;this.undelegateEvents();for(var t in e){var n=e[t];s.isFunction(n)||(n=this[e[t]]);if(!n)throw new Error('Method "'+e[t]+'" does not exist');var r=t.match(w),i=r[1],o=r[2];n=s.bind(n,this),i+=".delegateEvents"+this.cid,o===""?this.$el.bind(i,n):this.$el.delegate(o,i,n)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=s.extend({},this.options,e));for(var t=0,n=E.length;t<n;t++){var r=E[t];e[r]&&(this[r]=e[r])}this.options=e},_ensureElement:function(){if(!this.el){var e=C(this,"attributes")||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.setElement(this.make(this.tagName,e),!1)}else this.setElement(this.el,!1)}});var S=function(e,t){var n=N(this,e,t);return n.extend=this.extend,n};f.extend=l.extend=h.extend=b.extend=S;var x={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};i.sync=function(e,t,n){var r=x[e];n||(n={});var u={type:r,dataType:"json"};return n.url||(u.url=C(t,"url")||k()),n.data===undefined&&t&&(e=="create"||e=="update")&&(u.contentType="application/json",u.data=JSON.stringify(t.toJSON())),i.emulateJSON&&(u.contentType="application/x-www-form-urlencoded",u.data=u.data?{model:u.data}:{}),i.emulateHTTP&&(r==="PUT"||r==="DELETE")&&(i.emulateJSON&&(u.data._method=r),u.type="POST",u.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r)}),u.type!=="GET"&&!i.emulateJSON&&(u.processData=!1),o.ajax(s.extend(u,n))},i.wrapError=function(e,t,n){return function(r,i){i=r===t?i:r,e?e(t,i,n):t.trigger("error",t,i,n)}};var T=function(){},N=function(e,t,n){var r;return t&&t.hasOwnProperty("constructor")?r=t.constructor:r=function(){return e.apply(this,arguments)},s.extend(r,e),T.prototype=e.prototype,r.prototype=new T,t&&s.extend(r.prototype,t),n&&s.extend(r,n),r.prototype.constructor=r,r.__super__=e.prototype,r},C=function(e,t){return!e||!e[t]?null:s.isFunction(e[t])?e[t]():e[t]},k=function(){throw new Error('A "url" property or function must be specified')}}.call(this),define("backbone",function(){}),define("plex/control/Dispatcher",["backbone"],function(){return _.clone(Backbone.Events)}),define("plex/control/init/BackboneInit",["plex/control/Dispatcher","backbone"],function(e){var t=Backbone.sync;Backbone.sync=function(n,r,i){var s=i.server||r.server||r.get("server");!i.url&&r.url&&(i.url=_.isFunction(r.url)?r.url():r.url),_.defaults(i,{url:"",dataType:"text",processData:!1,timeout:2e4}),s&&(i.url=s.resolveUrl(i.url),i.headers||(i.headers={}),_.extend(i.headers,s.getHeaders()));var o=t(n,r,i);return i.hideLoadingAlert||(e.trigger("command:ShowLoading",!0),o.always(function(){e.trigger("command:ShowLoading",!1)})),o}}),define("plex/control/utils/StringUtil",[],function(){return{truncate:function(e,t){if(!e)return"";if(e.length>t){var n=e.substring(0,t);while(/\w/.test(n.charAt(n.length-1))===!1)n=n.slice(0,-1);return n+"..."}return e},truncateMiddle:function(e,t,n){if(e.length>t){n=n||Math.floor((t-3)/2);var r=t-3-n;return e.substr(0,n)+"..."+e.substr(e.length-r)}return e}}}),define("plex/control/utils/NumberUtil",[],function(){return{formatBytes:function(e,t){var n=["B","KB","MB","GB","TB"],r=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return(e/Math.pow(1024,r)).toFixed(t)+" "+n[r]},formatBitrate:function(e,t){var n=["bps","kbps","Mbps","Gbps","Tbps"],r=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return(e/Math.pow(1024,r)).toFixed(t)+" "+n[r+1]}}}),define("plex/model/LocalStorageModel",["backbone"],function(){var e=Backbone.Model.extend({populated:!1,storageClass:window.localStorage,save:function(e,t,n){var r,i,s=_.isFunction(this.storageKey)?this.storageKey():this.storageKey;_.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n=n?_.clone(n):{},n.error=Backbone.wrapError(n.error,this,n),this.set(r,n);try{var o=JSON.stringify(this.toJSON());this.storageClass.setItem(s,o),n.success&&n.success(this,!0)}catch(u){n.error(this,"Failed to save model to localStorage.")}return this},populate:function(e){return this.populated?this:this.fetch(e)},fetch:function(e){var t=_.isFunction(this.storageKey)?this.storageKey():this.storageKey;e=e?_.clone(e):{},e.error=Backbone.wrapError(e.error,this,e);try{var n=this.storageClass.getItem(t);this.populated=!0,this.set(this.parse(n),e),e.success&&e.success(this,n)}catch(r){e.error(this,"Failed to get model from localStorage.")}return this},parse:function(e){return $.parseJSON(e)},destroy:function(e){var t=_.isFunction(this.storageKey)?this.storageKey():this.storageKey;e=e?_.clone(e):{},e.error=Backbone.wrapError(e.error,this,e);try{this.storageClass.removeItem(t),this.trigger("destroy",this,this.collection,e),e.success&&e.success(this)}catch(n){e.error(this,"Failed to remove model from localStorage.")}return this}});return e}),define("plex/model/SettingsModel",["plex/model/LocalStorageModel"],function(e){var t=e.extend({storageKey:"settings",defaults:{quality:7,listType:"poster-tile-list",debug:1},initialize:function(){this.populate()}});return new t}),define("plex/model/DebugInfoModel",["backbone","jquery"],function(e){var t=function(e){return e?"True":"False"},n=Backbone.Model.extend({initialize:function(){this.set("host",window.location.host),this.set("userAgent",navigator.userAgent),this.set("browser",JSON.stringify($.browser)),this.set("clientVersion",$("body script")[0].src)},setAppModel:function(e){this.appModel=e},toJSON:function(){if(this.appModel){var e=this.appModel.get("primaryServer"),n=this.appModel.get("myPlex");this.set("isAuthorized",t(this.appModel.get("isAuthorized"))),this.set("isAvailable",t(!this.appModel.get("isUnavailable"))),this.set("primaryServerUrl",e.url()),this.set("primaryServerAuthToken",t(e.get("accessToken"))),this.set("primaryServerVersion",e.get("version")),this.set("myPlexUrl",n.url()),this.set("myPlexFeatures",_.keys(n.get("features")).join(", ")),this.set("myPlexUsername",n.get("username")),this.set("myPlexAuthToken",t(n.get("authToken")))}return Backbone.Model.prototype.toJSON.apply(this,arguments)}});return new n}),window.jQuery&&function(e){e.extend({xml2json:function(t,n){function r(t,s){if(!t)return null;var u="",a=null,f=null,l=t.nodeType,c=i(t.localName||t.nodeName),h=t.text||t.nodeValue||"";t.childNodes&&t.childNodes.length>0&&e.each(t.childNodes,function(e,t){var n=t.nodeType,s=i(t.localName||t.nodeName),f=t.text||t.nodeValue||"";if(n==8)return;if(n==3||n==4||!s){if(f.match(/^\s+$/))return;u+=f.replace(/^\s+/,"").replace(/\s+$/,"")}else a=a||{},a[s]?(a[s].length||(a[s]=o(a[s])),a[s]=o(a[s]),a[s][a[s].length]=r(t,!0),a[s].length=a[s].length):a[s]=r(t)}),t.attributes&&t.attributes.length>0&&(f={},a=a||{},e.each(t.attributes,function(e,t){var n=i(t.name),r=t.value;a[n]?f[n]&&(a[n]=o(a[n]),a[n][a[n].length]=r):(a[n]=r,f[n]=r)})),a&&(a=e.extend(u!=""?new String(u):{},a||{}),u=a.text?(typeof a.text=="object"?a.text:[a.text||""]).concat([u]):u,u&&(a.text=u),u="");var p=a||u;return n&&(u&&(p={}),u=p.text||u||"",u&&(p.text=u),s||(p=o(p))),p}function s(e){var t=/^((-)?([0-9]+)(([\.\,]{0,1})([0-9]+))?$)/;return typeof e=="number"||t.test(String(e&&typeof e=="string"?jQuery.trim(e):""))}if(!t)return{};var i=function(e){return String(e||"").replace(/-/g,"_")},o=function(t){return e.isArray(t)||(t=[t]),t.length=t.length,t};typeof t=="string"&&(t=e.text2xml(t));if(!t.nodeType)return;if(t.nodeType==3||t.nodeType==4)return t.nodeValue;var u=t.nodeType==9?t.documentElement:t,a=r(u,!0);return t=null,u=null,a},text2xml:function(t){var n;try{var r=e.browser.msie?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser;r.async=!1}catch(i){throw new Error("XML Parser could not be instantiated")}try{e.browser.msie?n=r.loadXML(t)?r:!1:n=r.parseFromString(t,"text/xml")}catch(i){throw new Error("Error parsing XML string")}return n}})}(jQuery),define("xml2json",function(){}),define("plex/model/BaseModel",["plex/control/init/BackboneInit","backbone","xml2json"],function(){var e=Backbone.Model.extend({_cache:{},constructor:function(e,t){t=_.extend({},t),e||(e={}),this.server=t.server||t.collection&&t.collection.server,this.section=t.section||t.collection&&t.collection.section,this.media=t.media||t.collection&&t.collection.media,e._cacheKey!==null&&(t.parse||!e._cacheKey)&&(e=this.parse(e),t=_.clone(t),t.parse=!1);var n=e._cacheKey===null?null:e._cacheKey||e.id;if(n&&this._cache[n]&&!t.skipCache){var r=this._cache[n];return r.set(e),r.server=this.server||r.server,r.section=this.section||r.section,r.media=this.media||r.media,r}if(t.onlyIfCached)return{};Backbone.Model.prototype.constructor.apply(this,arguments),n&&(this._cache[n]=this),this.on("change:_cacheKey",function(e,t){this._cache[t]=this},this)},populate:function(e){return this.populatePromise||(this.populatePromise=this.fetch(e)),this.populatePromise},fetch:function(){var e=Backbone.Model.prototype.fetch.apply(this,arguments),t=$.Deferred();return e.done(_.bind(function(e){t.resolveWith(this,[this,e])},this)),e.fail(_.bind(function(e){t.rejectWith(this,[this,e])},this)),this.populatePromise=t.promise(),this.populatePromise},save:function(e,t,n){var r,i;_.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n=n?_.clone(n):{};if(n.wait){if(!this._validate(r,n))return!1;i=_.clone(this.attributes)}var s=this.getSaveParams(r,n);_.extend(s,n.data);if(_.isEmpty(s))return n.success&&n.success(this),$.Deferred().resolve(this);var o=_.extend({},n,{silent:!0});if(r&&!this.set(r,n.wait?o:n))return!1;var u=this,a=n.success;n.success=function(e,t,i){var s={};if(e){s=u.parse(e,i);var o=s._cacheKey===null?null:s._cacheKey||u.id;o&&(u._cache[o]=u)}if(n.wait){delete n.wait;if(!u.set(_.extend({},r,s),n))return!1}a&&a(u,e)};var f=_.isFunction(this.url)?this.url():this.url;n.url=f+"?"+$.param(s,!0),n.data="",n.error=Backbone.wrapError(n.error,u,n);var l=this.isNew()?"create":"update",c=(this.sync||Backbone.sync).call(this,l,this,n);return n.wait&&this.set(i,o),c},getSaveParams:function(e,t){return this.isNew()?e||this.toJSON():this.changedAttributes(e)||{}}});return e.extend=function(){var e=Backbone.Model.extend.apply(this,arguments);return e.prototype._cache={},e},e}),define("plex/model/collections/BaseCollection",["plex/control/init/BackboneInit","backbone","xml2json"],function(){var e=Backbone.Collection.extend({populate:function(e){return this.populatePromise||(this.populatePromise=this.fetch(e)),this.populatePromise},fetch:function(){var e=Backbone.Collection.prototype.fetch.apply(this,arguments),t=$.Deferred();return e.done(_.bind(function(e){t.resolveWith(this,[this,e])},this)),e.fail(_.bind(function(e){t.rejectWith(this,[this,e])},this)),this.populatePromise=t.promise(),this.populatePromise}});return e}),define("plex/model/LogEntryModel",["plex/model/LocalStorageModel"],function(e){var t=e.extend({storageClass:window.sessionStorage,storageKey:function(){return"LogEntry!"+this.cid},initialize:function(){this.time||this.set("time",new Date)}});return t}),define("plex/model/collections/LogEntryCollection",["plex/model/SettingsModel","plex/model/DebugInfoModel","plex/model/collections/BaseCollection","plex/model/LogEntryModel","backbone"],function(e,t,n,r){var i=new RegExp("(auth_token=|X-Plex-Token=)(\\w+)"),s=new RegExp("(password=)([^&]+)"),o=function(e){return e=e.replace(i,"$1TOKEN"),e.replace(s,"$1PASSWORD")},u=function(e){return e&&"X-Plex-Token"in e&&(e["X-Plex-Token"]="TOKEN"),e},a=n.extend({model:r,onAjaxComplete:function(t,n,r){var i={type:"ajax",url:o(r.url),status:n.status};_.isEmpty(r.headers)||(i.headers=u(r.headers)),_.isEmpty(r.data)||(i.params=r.data),n.status===200?e.get("debug")===2?i.response=n.responseText:i.responseLength=n.responseText.length:(i.statusText=n.statusText,i.response=n.responseText),this.add(i)},onRoute:function(e,t,n){var r={type:"navigation",route:t,args:n,fragment:window.location.hash};this.add(r)},initialize:function(t,n){e.on("change:debug",function(e,t){t===0?this.disableListeners():this.enableListeners()},this),_.bindAll(this,"onAjaxComplete","onRoute"),Backbone.history||(Backbone.history=new Backbone.History),e.get("debug")!==0&&this.enableListeners()},enableListeners:function(){this.enabled||($("body").on("ajaxComplete",null,null,this.onAjaxComplete),Backbone.history.on("route",this.onRoute),this.enabled=!0)},disableListeners:function(){$("body").off("ajaxComplete",null,this.onAjaxComplete),Backbone.history.off("route",this.onRoute),this.enabled=!1,this.reset([])},add:function(){this.length>200&&this.shift(),n.prototype.add.apply(this,arguments)},toJSON:function(){var e=n.prototype.toJSON.apply(this,arguments);return e.push(_.extend({type:"info"},t.toJSON())),e}});return a}),define("plex/control/utils/LogUtil",["plex/model/collections/LogEntryCollection"],function(e){var t=!!window.console&&!!window.console.log,n=new e;return{log:function(e){n.add({type:"message",message:e}),t&&console.log(e)},getLogsAsJSON:function(e){return e?JSON.stringify(n,null,2):JSON.stringify(n)}}}),define("plex/control/utils/BrowserDetect",[],function(){var e={init:function(){this.browser=this.searchString(this.dataBrowser)||"",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"",this.OS=this.searchString(this.dataOS)||""},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string,r=e[t].prop;this.versionSearchString=e[t].versionSearch||e[t].identity;if(n){if(n.indexOf(e[t].subString)!=-1)return e[t].identity}else if(r)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(t==-1)return;return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};return e.init(),e});var b64array="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";define("base64",function(){}),define("plex/model/MyPlexModel",["plex/model/BaseModel","plex/control/utils/LogUtil","plex/control/utils/BrowserDetect","xml2json","base64"],function(e,t,n){var r=e.extend({idAttribute:"machineIdentifier",defaults:{address:"my.plexapp.com",host:"my.plexapp.com",port:"443",friendlyName:"myPlex",name:"myPlex",machineIdentifier:"myPlex",signedIn:!1,owned:!1,features:{},supportsTranscoding:!1},url:function(){return this.get("url")||"https://my.plexapp.com/"},initialize:function(e,t){this.app=t.app,this.pms=t.server,this.set("url",localStorage.getItem("myPlexBaseUrl")||"https://my.plexapp.com/");var n=sessionStorage.getItem("myPlexAuthToken")||localStorage.getItem("myPlexAuthToken");n&&this.set("authToken",n)},parseMyPlexAccountInfo:function(e){var n=$.xml2json(e);this.set({signedIn:!0,email:n.email,username:n.username}),n.authenticationToken&&this.set("authToken",n.authenticationToken);if(n.subscription){this.set("subscription",n.subscription.active),t.log("myPlex subscriptions: "+JSON.stringify(n.subscription.feature));var r=_.isArray(n.subscription.feature)?n.subscription.feature:_.isEmpty(n.subscription.feature)?[]:[n.subscription.feature];this.set("features",_.reduce(r,function(e,t){return e[t.id]=!0,e},{}))}else this.set("features",{})},signIn:function(e,t,n){var r={type:"POST",dataType:"text",url:this.resolveUrl("/users/sign_in.xml"),headers:this.getHeaders(!0),success:_.bind(function(e){this.parseMyPlexAccountInfo(e),window[n?"localStorage":"sessionStorage"].setItem("myPlexAuthToken",this.get("authToken"))},this)};return r.headers.Authorization="Basic "+encode64(e+":"+t),$.ajax(r)},fetch:function(e){return e||(e={}),this.get("authToken")?$.ajax(_.extend({},e,{type:"GET",dataType:"text",url:this.resolveUrl("/users/account"),headers:this.getHeaders(!0),success:_.bind(function(t){this.parseMyPlexAccountInfo(t),e.success&&e.success(this,t)},this)})):$.ajax(_.extend({},e,{type:"GET",dataType:"text",url:this.resolveUrl("/pms/:/ip"),headers:this.getHeaders()}))},parse:function(e){return{_cacheKey:null}},resolveUrl:function(e,t){if(e.lastIndexOf("http",0)===0||e.lastIndexOf("rtmp",0)===0)return e;e.lastIndexOf("/:/",0)===0&&(e="/pms"+e);var n=this.url()+(e[0]=="/"?e.substr(1):e);return this.get("authToken")&&(n+=n.indexOf("?")>0?"&":"?",n+="auth_token="+this.get("authToken")),n},getHeaders:function(e){var t={};t["X-Plex-Client-Identifier"]=this.app.get("clientID");if(e){t["X-Plex-Product"]="Web Client",t["X-Plex-Device"]=n.browser,t["X-Plex-Platform"]=n.browser+" "+n.OS,t["X-Plex-Platform-Version"]=n.version;var r=$("body script")[0].src,i=/rev=(\w+)$/.exec(r);t["X-Plex-Version"]=i&&i[1]||"dev"}return t},initAjaxOptions:function(e){var t={};return t.url=this.resolveUrl(e),t.url.lastIndexOf(this.url(),0)===0&&(t.headers=this.getHeaders()),t}});return r}),define("plex/model/MyPlexAccountModel",["plex/model/BaseModel"],function(e){var t=e.extend({url:"/myplex/account",signedIn:!1,whitelistedAttrs:["username","mappingState","mappingError","mappingErrorMessage","signInState","publicAddress","publicPort","privateAddress","privatePort","subscriptionActive","subscriptionState"],isNew:function(){return!this.signedIn},parse:function(e){var t=$.xml2json(e)||e;return t=_.pick(t,this.whitelistedAttrs),t._cacheKey=null,t.signInState==="ok"?this.signedIn=!0:(this.signedIn=!1,t.username="",t.password=""),t}});return t}),define("plex/model/FilterOptionModel",["plex/model/BaseModel"],function(e){var t=e.extend({idAttribute:"key",whitelistedAttrs:["key","type","title"],parse:function(e){var t=$.xml2json(e)||e;return t._cacheKey=null,t}});return t}),define("plex/model/collections/FilterOptionCollection",["plex/model/collections/BaseCollection","plex/model/FilterOptionModel"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.server=t.server,this.section=t.section,this.filter=t.filter,this.activeFilters=[]},url:function(){var e="library/sections/"+this.section.id+"/"+this.filter.id,t={};this.activeType&&(t.type=this.activeType),_.each(this.activeFilters,_.bind(function(e){if(e.values.length&&e.key!==this.filter.key&&e.key!=="viewCount"){var n="";_.each(e.values,function(e){n+=e+","}),n=n.slice(0,-1),t[e.key]=n}},this));var n=$.param(t);return n.length&&(e+="?"+n),e},parse:function(e){var t=$.xml2json(e).Directory;return t}});return n}),define("plex/model/FilterModel",["plex/model/BaseModel","plex/model/collections/FilterOptionCollection"],function(e,t){var n=e.extend({idAttribute:"filter",whitelistedAttrs:["filter","filterType","key","title"],url:function(){return"library/sections/"+this.section.id+"/"+this.id},initialize:function(){this.set("options",new t([],{server:this.server,section:this.section,filter:this}))},parse:function(e){var t=$.xml2json(e)||e;return t=_.pick(t,this.whitelistedAttrs),t._cacheKey=null,t}});return n}),define("plex/model/collections/FilterCollection",["plex/model/collections/BaseCollection","plex/model/FilterModel"],function(e,t){var n=e.extend({model:t,url:function(){return"library/sections/"+this.section.id+"/filters?type="+this.mediaType},initialize:function(e,t){this.server=t.server,this.section=t.section},parse:function(e){var t=$.xml2json(e).Directory;return t}});return n}),define("plex/model/SortModel",["plex/model/BaseModel","plex/model/collections/FilterOptionCollection"],function(e,t){var n=e.extend({idAttribute:"key",whitelistedAttrs:["key","title"],parse:function(e){var t=$.xml2json(e)||e;return t=_.pick(t,this.whitelistedAttrs),t._cacheKey=null,t}});return n}),define("plex/model/collections/SortCollection",["plex/model/collections/BaseCollection","plex/model/SortModel"],function(e,t){var n=e.extend({model:t,url:function(){return"library/sections/"+this.section.id+"/sorts"},initialize:function(e,t){this.server=t.server,this.section=t.section},parse:function(e){var t=$.xml2json(e).Directory;return t}});return n}),define("plex/model/media/MediaModel",["plex/model/BaseModel"],function(e){function t(e){return _.isArray(e)?_.first(e):e}var n=e.extend({idAttribute:"ratingKey",defaults:{title:"",titleSort:"",tagline:"",rating:"",summary:"",year:"",studio:"",contentRating:"",originallyAvailableAt:"",originalTitle:"",thumb:"",art:""},detailKeys:["ratingKey","key","type","title","titleSort","summary","viewOffset","viewCount","year","thumb","art","duration","originallyAvailableAt","addedAt","updatedAt","index","guid","identifier","parentTitle","parentThumb","studio","contentRating","rating","banner","theme","parentIndex","watched","grandparentRatingKey","grandparentKey","grandparentTitle","lastViewedAt","grandparentThumb","directory","sourceTitle","Genre","Director","Writer","Role","id"],initialize:function(e,t){this.on("timeline",_.bind(function(e){e.state==5&&this.fetch({hideLoadingAlert:!0})},this))},url:function(){return"/library/metadata/"+this.id},parse:function(e){var t=$.xml2json(e)||e;return!t.key&&!t.id&&(t=_.first(_.filter(_.values(t),_.isObject)),_.isEmpty(this.detailKeys)||(t=_.pick(t,this.detailKeys))),t._cacheKey=this.server.id+"!"+(this.section?this.section.id:"")+"!"+t.key,t.viewedLeafCount&&(t.unviewedLeafCount=t.leafCount-t.viewedLeafCount),t.ratingKey&&_.each(_.keys(this.defaults),_.bind(function(e){e in t||(t[e]=this.defaults[e])},this)),_.each(["Genre","Collection","Field","Writer","Director","Role"],function(e){e in t?_.isArray(t[e])||(t[e]=[t[e]]):t.ratingKey&&(t[e]=[])}),t},mergeIndirectResponse:function(e){var n=$.xml2json(e),r=t(this.get("Media")),i=t(r.Part);i.key=n.Video.Media.Part.key;if(n.httpHeaders){var s,o=new RegExp("([^=]+)=([^&]+)&?","g"),u={};while(s=o.exec(n.httpHeaders))s[1]in u?(_.isArray(u[s[1]])||(u[s[1]]=[u[s[1]]]),u[s[1]].push(s[2])):u[s[1]]=s[2];this.set("indirectHttpHeaders",u,{silent:!0})}return!0},getSaveParams:function(e,t){return _.each(e.Field,function(t){e[t.name+".locked"]=t.locked}),delete e.Field,_.each(["Collection","Director","Writer","Genre"],function(t){t in e&&(_.isEmpty(e[t])?e[t.toLowerCase()+"[]"]="":_.each(e[t],function(n,r){e[t.toLowerCase()+"["+r+"].tag.tag"]=n.tag}),delete e[t])}),e},getDownloadUrl:function(){var e=t(this.get("Media"));if(e){var n=t(e.Part);if(n){var r=n.key;return this.server.get("accessToken")&&(r+="?X-Plex-Token="+this.server.get("accessToken")),this.server.resolveUrl(r)}}return""},getMediaLocation:function(){var e=t(this.get("Media"));if(e){var n=t(e.Part);if(n)return n.file}return null},resolveIndirect:function(){var e=$.Deferred(),n=_.bind(function(){e.resolve(this)},this),r=_.bind(function(){e.reject(this)},this),i=t(this.get("Media"));if(i&&i.indirect==="1"){var s=t(i.Part);if(s)if(s.postURL)r();else{var o=this.server.initAjaxOptions(s.key,this.get("key"));$.ajax(o).done(_.bind(function(e){this.mergeIndirectResponse(e)?n():r()},this)).fail(r)}else r()}else n();return e}});return n.extend=function(){var t=e.extend.apply(this,arguments);return delete t.prototype._cache,t},n}),define("plex/model/media/collections/MediaCollection",["plex/model/collections/BaseCollection","plex/model/media/MediaModel"],function(e,t){var n=e.extend({model:t,page:0,size:0,totalSize:null,initialize:function(e,t){this.server=t.server,this.section=t.section,this.type=t.type||"all",this.size=t.size||50,this.filters=[],this.sort={},this.section.on("timeline",function(e){if(e.state==0||e.state==9){var t=_.bind(this.fetch,this);_.throttle(_.delay(t,2e3),2e3)}},this)},url:function(){var e="library/sections/"+this.section.id+"/"+this.type+"?",t={};return this.mediaType&&this.mediaType!==13&&(t.type=this.mediaType),_.each(this.filters,function(e){if(e.values.length){var n="";_.each(e.values,function(e){n+=e+","}),n=n.slice(0,-1),t[e.key]=n}}),this.sort.key&&(t.sort=this.sort.key+":"+this.sort.direction),t["X-Plex-Container-Start"]=this.page*this.size,t["X-Plex-Container-Size"]=this.size,e+=$.param(t),e},parse:function(e){var t=$.xml2json(e)||e,n=t.Directory,r=[];if(_.isArray(n))for(var i=0,s=n.length;i<s;i++)n[i].type==="photo"&&(n[i].directory=!0);else n&&n.type==="photo"&&(n.directory=!0);return this.viewGroup=t.viewGroup,this.totalSize=t.totalSize,_.compact(r.concat(t.Directory,t.Video,t.Track,t.Photo))},next:function(){return this.totalSize>(this.page+1)*this.size?(this.page++,this.fetch({add:!0})):$.Deferred().resolve()}});return n}),define("plex/model/SectionModel",["plex/model/BaseModel","plex/model/collections/FilterCollection","plex/model/collections/SortCollection","plex/model/media/collections/MediaCollection"],function(e,t,n,r){var i=e.extend({idAttribute:"key",urlRoot:"/library/sections",whitelistedAttrs:["key","type","title","art","thumb","agent","scanner","language","location","refreshing","updatedAt","createdAt"],initialize:function(){this.set("filters",new t([],{server:this.server,section:this})),this.set("sorts",new n([],{server:this.server,section:this})),this.set("media",new r([],{server:this.server,section:this}))},parse:function(e,t){var n=$.xml2json(e)||e;if(t&&t.status==201){n.Directory&&(n=n.Directory);if(!n.key){var r=t.getResponseHeader("Location");r&&(n.key=r.substring(r.lastIndexOf("/")+1))}}return _.isArray(n.Location)?n.location=_.pluck(n.Location,"path"):n.Location&&(n.location=[n.Location.path]),n.refreshing&&_.isString(n.refreshing)&&(n.refreshing=n.refreshing==="1"),n=_.pick(n,this.whitelistedAttrs),this.server&&n.key?n._cacheKey=this.server.id+"!"+n.key:n._cacheKey=null,n},getSaveParams:function(t,n){var r=e.prototype.getSaveParams.apply(this,arguments);return r=_.pick(r,["name","title","type","agent","scanner","language","location"]),"title"in r&&(r.name=r.title,delete r.title),r}});return i}),define("plex/model/collections/SectionCollection",["plex/model/collections/BaseCollection","plex/model/SectionModel"],function(e,t){var n=e.extend({model:t,url:"library/sections",initialize:function(e,t){this.server=t.server},parse:function(e){var t=$.xml2json(e).Directory;return t}});return n}),define("plex/model/ChannelActionModel",["plex/model/BaseModel"],function(e){var t=e.extend({idAttribute:"key"});return t}),define("plex/model/collections/ChannelActionCollection",["plex/model/collections/BaseCollection","plex/model/ChannelActionModel"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.server=t.server,t.url&&(this.url=t.url)},parse:function(e){var t=$.xml2json(e)||e;return t.Directory}});return n}),define("plex/model/ChannelModel",["plex/model/BaseModel","plex/model/collections/ChannelActionCollection"],function(e,t){var n=e.extend({idAttribute:"key",url:function(){return this.id},initialize:function(){this.set("actions",new t([],{server:this.server}))},parse:function(e){var t=$.xml2json(e)||e,n=this.toJSON();n&&(t=_.extend(n,t)),t._cacheKey=this.server.id+"!"+t[this.idAttribute],_.each(["Directory","Video","Track","Photo"],function(e){e in t&&!_.isArray(t[e])&&(t[e]=[t[e]])}),!t.title&&t.title1&&(t.title=t.title1);var r=t.key.split("/");if(r&&r.length>1){var i=t.key.split("/")[1];t.type=i.charAt(0).toUpperCase()+i.slice(1)}return t}});return n}),define("plex/model/collections/ChannelCollection",["plex/model/collections/BaseCollection","plex/model/ChannelModel"],function(e,t){var n=e.extend({model:t,recent:!1,url:function(){return this.recent?"channels/recentlyViewed?X-Plex-Container-Start=0&X-Plex-Container-Size=5":"channels/all"},initialize:function(e,t){this.server=t.server,this.recent=t.recent,t.url&&(this.url=t.url)},parse:function(e){var t=$.xml2json(e)||e,n=[];return this.viewGroup=t.viewGroup,_.compact(n.concat(t.Directory,t.Video,t.Track,t.Photo))},all:function(){return this.models},video:function(){return this.filter(function(e){return e.get("type")==="Video"})},music:function(){return this.filter(function(e){return e.get("type")==="Music"})},photo:function(){return this.filter(function(e){return e.get("type")==="Photos"})}});return n}),define("plex/model/PreferenceModel",["plex/model/BaseModel"],function(e){var t=e.extend({idAttribute:"id",defaults:{type:"string",summary:"",label:"",group:""},whitelistedAttrs:["id","label","default","summary","value","type","group","advanced","hidden","enumValues"],url:"/:/prefs",parse:function(e){var t=$.xml2json(e)||e;return t=_.pick(t,this.whitelistedAttrs),this.server&&this.server.id?t._cacheKey=this.server.id+"!"+t[this.idAttribute]:t._cacheKey=null,t.type=="bool"?t.value=t.value==="true"||t.value==="1":t.type=="int"&&(t.value=parseInt(t.value)),t.advanced=t.advanced==="true"||t.advanced==="1",t.hidden=t.hidden==="true"||t.hidden==="1",t.enumValues&&!_.isArray(t.enumValues)&&(t.enumValues=_.map(t.enumValues.split("|"),function(e){var t=e.indexOf(":");return t>0?{label:e.slice(t+1),value:e.slice(0,t)}:{label:e,value:e}})),t},getSaveParams:function(e,t){if(_.isEmpty(e)){var n={};return n[this.get("id")]=this.get("value"),n}return"value"in e&&(e[this.get("id")]=e.value,delete e.value),e}});return t}),define("plex/model/collections/PreferenceCollection",["plex/model/collections/BaseCollection","plex/model/PreferenceModel"],function(e,t){var n=e.extend({model:t,url:function(){return"/:/prefs"},initialize:function(e,t){this.server=t.server,this.server.on("preference:change",function(e){var t=this.get(e.id);t&&t.set("value",e.value)},this)},parse:function(e){var t=$.xml2json(e).Setting;return _.filter(t,function(e){return e.id})}});return n}),define("plex/model/ServerEventModel",["plex/model/BaseModel"],function(e){var t=0,n=e.extend({idAttribute:"id",parse:function(e){var n=e;return n.time=new Date,n._cacheKey=null,n.id="evt"+t++,n._type=="preference"&&(n.value=""+n.value),n}});return n}),define("plex/model/collections/ServerEventCollection",["plex/model/collections/BaseCollection","plex/model/ServerEventModel"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.server=t.server,this.startTime=new Date,this.server.on("preference:change",function(e){this.add(_.extend({_type:"preference"},e))},this),this.server.on("timeline",function(e){this.add(_.extend({_type:"timeline"},e))},this),this.server.on("status",function(e){this.add(_.extend({_type:"status"},e))},this),this.server.on("websocket",function(e){this.add(_.extend({_type:"websocket"},e))},this)}});return n}),define("plex/model/ServerModel",["plex/model/BaseModel","plex/model/MyPlexAccountModel","plex/model/collections/SectionCollection","plex/model/collections/ChannelCollection","plex/model/collections/PreferenceCollection","plex/model/collections/ServerEventCollection"],function(e,t,n,r,i,s){var o=e.extend({idAttribute:"machineIdentifier",defaults:{name:"Unknown",shared:!1,supportsTranscoding:!0},whitelistedAttrs:["accessToken","address","friendlyName","host","machineIdentifier","name","platform","port","transcoderVideoBitrates","transcoderVideoQualities","transcoderVideoResolutions","transcoderAudio","version","webkit","allowMediaDeletion","sourceTitle","shared"],url:function(){if(this.serverURL)return this.serverURL;var e=this.get("address"),t=this.get("port");if(!e&&!t)return window.location.protocol+"//"+window.location.host+"/";var n="http://"+(e||window.location.hostname);return t=t||window.location.port,t&&(n+=":"+t),n+"/"},initialize:function(){this.server=this,this.set("myPlexAccount",new t({},{server:this})),this.set("sections",new n([],{server:this})),this.set("channels",new r([],{server:this})),this.set("preferences",new i([],{server:this})),this.set("timeline",new s([],{server:this})),this.get("preferences").on("reset",function(e){var t=e.get("FriendlyName"),n=e.get("allowMediaDeletion");typeof t!="undefined"&&t.on("change:value",function(e,t){t&&this.set("name",t)},this),typeof n!="undefined"&&n.on("change:value",function(e,t){this.set("allowMediaDeletion",t)},this)},this),this.on("change:machineIdentifier",function(e,t){this.set("_cacheKey",t)},this),!this.get("port")&&window.location.pathname!=="/web/index.html"&&this.set("port","32400")},parse:function(e,t){var n=$.xml2json(e)||e;return n.sourceTitle&&(n.shared=!0),n=_.pick(n,this.whitelistedAttrs),n._cacheKey=n[this.idAttribute],t&&t.status==200&&(this.set("isAvailable",!0),this.serverURL=this.url()),n},resolveUrl:function(e,t){if(e.lastIndexOf("http",0)===0)return e;var n=t?"http://127.0.0.1:32400/":this.url();return n+(e[0]=="/"?e.substr(1):e)},getHeaders:function(){var e={},t=this.get("accessToken");return t&&(e["X-Plex-Token"]=t),e},initAjaxOptions:function(e){var t={};return t.url=this.resolveUrl(e),t.url.lastIndexOf(this.url(),0)===0&&(t.headers=this.getHeaders()),t}});return o}),define("plex/model/collections/ServerCollection",["plex/model/collections/BaseCollection","plex/model/ServerModel"],function(e,t){var n=e.extend({model:t,url:"/servers",initialize:function(e,t){t||(t={}),this.server=t.server},parse:function(e){return $.xml2json(e).Server}});return n}),define("plex/model/media/PlaylistItemModel",["plex/model/media/MediaModel"],function(e){var t=e.extend({idAttribute:"id",detailKeys:[],url:function(){return"/pms/playlists/"+this.get("playlistName")+"/items/"+this.id},initialize:function(e,t){this.set("playlistName",t.playlistName||this.collection.playlistName)},parse:function(t){var n=$.xml2json(t)||t,r=e.prototype.parse.apply(this,arguments);return r._origType=r.type,r.type="playlistItem",r.identifier=n.identifier,r.viewCount=parseInt(n.viewCount,10),r}});return t}),define("plex/model/collections/PlaylistItemCollection",["plex/model/collections/BaseCollection","plex/model/media/PlaylistItemModel"],function(e,t){var n=e.extend({model:t,url:function(){return"/pms/playlists/"+this.playlistName+"/all"},initialize:function(e,t){this.server=t.server,this.playlistName=t.name,this.playlistLabel=t.label},parse:function(e){var t=$.xml2json(e)||e;return _.each(t.Video,function(e){e.identifier=t.identifier}),t.Video},all:function(){return this.models},watched:function(){return this.filter(function(e){return e.get("viewCount")})},unwatched:function(){return this.filter(function(e){return!e.get("viewCount")})}});return n}),define("plex/model/AppModel",["plex/control/Dispatcher","plex/model/SettingsModel","plex/model/DebugInfoModel","plex/model/MyPlexModel","plex/model/ServerModel","plex/model/collections/ServerCollection","plex/model/collections/PlaylistItemCollection","backbone"],function(e,t,n,r,i,s,o){var u=Backbone.Model.extend({defaults:{clientID:null,loading:!1,alert:null,view:null,modal:null,initialized:!1,isAuthorized:!1,isUnavailable:!1,isUnsupported:!1,updateStatus:"none"},initialize:function(){n.setAppModel(this),this.on("change:initialized",function(){this.get("primaryServer").get("isAvailable")&&e.trigger("command:CheckForUpdates",!1),setInterval(function(){e.trigger("command:CheckForUpdates",!1)},36e5)});var u;try{u=localStorage.getItem("clientID"),u===null&&(u=Math.random().toString(36).substr(2),localStorage.setItem("clientID",u))}catch(a){u=Math.random().toString(36).substr(2)}this.set("clientID",u),this.set("settings",t),this.set("primaryServer",new i),this.set("servers",new s([],{server:this.get("primaryServer")})),this.set("myPlex",new r({},{app:this,server:this.get("primaryServer")}));var f={};f.queue=new o([],{server:this.get("myPlex"),name:"queue",label:"Queue"}),f.recommendations=new o([],{server:this.get("myPlex"),name:"recommendations",label:"Recommendations"}),this.set("playlists",f),this.fetchEverything()},fetchEverything:function(){var t=!1,n=!1,r=this.get("primaryServer"),i=this.get("myPlex"),o=this.get("servers"),u=new s;u.url=i.resolveUrl("/pms/servers"),this.set({isUnsupported:!1,isUnavailable:!1,isAuthorized:!1}),e.trigger("command:ShowLoading",!0);var a=_.bind(function(){e.trigger("command:ShowLoading",!1),this.get("initialized")?e.trigger("navigate:dashboard"):this.set("initialized",!0)},this),f=r.fetch().pipe(_.bind(function(){return n=!0,i.fetch()},this),_.bind(function(){return t=!0,n=!0,i.fetch()},this)),l=f.pipe(_.bind(function(){var e=i.get("authToken");if(!this.checkPlexPass())return $.Deferred().reject(this);if(n){if(e){var s=u.fetch().pipe(_.bind(function(){if(t){var e=i.get("authToken"),n=u.where({address:window.location.hostname,port:window.location.port});if(n&&n.length){var s=n[0].get("accessToken");s&&(e=s)}return r.set("accessToken",e),r.fetch()}return $.Deferred().resolve(this)},this));return s.pipe(_.bind(function(){var e=u.get(r.id);this.set("isAuthorized",!0);if(!e.get("shared"))return o.fetch();r.set("shared",!0),o.populatePromise=u.populatePromise},this))}return $.Deferred().reject(this)}return e?u.fetch().pipe(function(){return o.fetch()},function(){return o.fetch()}):o.fetch()},this),_.bind(function(){return n?(this.set("isUnsupported",!0),$.Deferred().reject(this)):o.fetch()},this)),c=l.pipe(_.bind(function(){if(u.length){var e=u.reject(function(e){var t=o.get(e.id);return!t&&!e.get("accessToken")&&e.set("accessToken",i.get("authToken")),t});o.add(e),o.each(function(e){e.fetch()})}a()},this),_.bind(function(){this.set("isUnavailable",!0),a()},this));return c},checkPlexPass:function(){return"pass"in this.get("myPlex").get("features")}});return window.appModel=new u,window.appModel}),define("plex/model/HeaderModel",["backbone"],function(){var e=Backbone.Model.extend({defaults:{show:!1,showBack:!1,activeServer:null,activeSection:null,activeMedia:null,activeChannel:null}});return new e}),SHA256_hexchars=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),SHA256_K=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),define("sha256",function(){}),define("plex/control/utils/TranscodeUtil",["plex/model/AppModel","plex/model/HeaderModel","jquery","base64","sha256"],function(e,t){var n="/photo/:/transcode?",r="/video/:/transcode/segmented/",i="KQMIY6GATPC63AIMC4R2",s=decode64("k3U6GLkZOoNIoSgjDshPErvqMIFdE0xMTx8kgsrhnC0=");return{image:function(t,r,i,s){if(!r)return"";t||(t=e.get("primaryServer"));var o={url:t.resolveUrl(r,!0),width:i,height:s};return t.get("accessToken")&&(o["X-Plex-Token"]=t.get("accessToken")),t.resolveUrl(n)+$.param(o,!0)},video:function(t,n,o){var u=t.server.get("supportsTranscoding")?t.server:e.get("primaryServer"),a=e.get("settings"),f=Math.round((new Date).getTime()/1e3),l=u.get("accessToken"),c=0,h=a.get("quality"),p=t.get("Media"),d;_.isArray(p)&&(p=p[0]),_.isArray(p.Part)?d=p.Part[0].key:d=p.Part.key;var v={identifier:t.get("identifier"),offset:c,quality:h,url:u.resolveUrl(d,!0),"3g":0},m=t.get("indirectHttpHeaders");m&&(v.httpCookies=m.Cookie,v.userAgent=m["User-Agent"]);var g=r+"start.m3u8?"+$.param(v,!0);HMAC_SHA256_init(s),HMAC_SHA256_write(g+"@"+f);var y=HMAC_SHA256_finalize(),b=encode64(array_to_string(y)),w=u.resolveUrl(g);l&&(w+="&X-Plex-Token="+l),w+="&X-Plex-Client-Identifier="+e.get("clientID"),w+="&X-Plex-Access-Key="+i,w+="&X-Plex-Access-Code="+encodeURIComponent(b),w+="&X-Plex-Access-Time="+f,w+="&X-Plex-Client-Capabilities="+encodeURIComponent("protocols=http-live-streaming,http-mp4-streaming,http-streaming-video,http-streaming-video-720p,http-mp4-video,http-mp4-video-720p;videoDecoders=h264{profile:high&resolution:1080&level:51};audioDecoders=mp3,aac{bitrate:160000}"),$.ajax({url:w,dataType:"text",success:function(e){var t=e.replace(/[\s\S]+(session.+?\.m3u8)[\s\S]+/,"$1"),r=t.split("/")[1],i=u.resolveUrl("video/:/transcode/segmented/")+t;n(i,r)},error:function(e,t,n){o(e,t,n)}})}}});var Handlebars={};Handlebars.VERSION="1.0.beta.6",Handlebars.helpers={},Handlebars.partials={},Handlebars.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},Handlebars.registerPartial=function(e,t){this.partials[e]=t},Handlebars.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+e+"'")});var toString=Object.prototype.toString,functionType="[object Function]";Handlebars.registerHelper("blockHelperMissing",function(e,t){var n=t.inverse||function(){},r=t.fn,i="",s=toString.call(e);s===functionType&&(e=e.call(this));if(e===!0)return r(this);if(e===!1||e==null)return n(this);if(s==="[object Array]"){if(e.length>0)for(var o=0,u=e.length;o<u;o++)i+=r(e[o]);else i=n(this);return i}return r(e)}),Handlebars.registerHelper("each",function(e,t){var n=t.fn,r=t.inverse,i="";if(e&&e.length>0)for(var s=0,o=e.length;s<o;s++)i+=n(e[s]);else i=r(this);return i}),Handlebars.registerHelper("if",function(e,t){var n=toString.call(e);return n===functionType&&(e=e.call(this)),!e||Handlebars.Utils.isEmpty(e)?t.inverse(this):t.fn(this)}),Handlebars.registerHelper("unless",function(e,t){var n=t.fn,r=t.inverse;return t.fn=r,t.inverse=n,Handlebars.helpers["if"].call(this,e,t)}),Handlebars.registerHelper("with",function(e,t){return t.fn(e)}),Handlebars.registerHelper("log",function(e){Handlebars.log(e)});var handlebars=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,INTEGER:29,BOOLEAN:30,hashSegments:31,hashSegment:32,ID:33,EQUALS:34,pathSegments:35,SEP:36,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 3:this.$=new i.ProgramNode(o[a]);break;case 4:this.$=new i.ProgramNode([]);break;case 5:this.$=[o[a]];break;case 6:o[a-1].push(o[a]),this.$=o[a-1];break;case 7:this.$=new i.InverseNode(o[a-2],o[a-1],o[a]);break;case 8:this.$=new i.BlockNode(o[a-2],o[a-1],o[a]);break;case 9:this.$=o[a];break;case 10:this.$=o[a];break;case 11:this.$=new i.ContentNode(o[a]);break;case 12:this.$=new i.CommentNode(o[a]);break;case 13:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 14:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 15:this.$=o[a-1];break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 18:this.$=new i.PartialNode(o[a-1]);break;case 19:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 20:break;case 21:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 22:this.$=[[o[a-1]].concat(o[a]),null];break;case 23:this.$=[[o[a-1]],o[a]];break;case 24:this.$=[[o[a]],null];break;case 25:o[a-1].push(o[a]),this.$=o[a-1];break;case 26:this.$=[o[a]];break;case 27:this.$=o[a];break;case 28:this.$=new i.StringNode(o[a]);break;case 29:this.$=new i.IntegerNode(o[a]);break;case 30:this.$=new i.BooleanNode(o[a]);break;case 31:this.$=new i.HashNode(o[a]);break;case 32:o[a-1].push(o[a]),this.$=o[a-1];break;case 33:this.$=[o[a]];break;case 34:this.$=[o[a-2],o[a]];break;case 35:this.$=[o[a-2],new i.StringNode(o[a])];break;case 36:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 37:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 38:this.$=new i.IdNode(o[a]);break;case 39:o[a-2].push(o[a]),this.$=o[a-2];break;case 40:this.$=[o[a]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],defaultActions:{16:[2,1],37:[2,23],53:[2,21]},parseError:function(t,n){throw new Error(t)},parse:function(t){function d(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function v(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var m,g,y,b,w,E,S={},x,T,N,C;for(;;){y=r[r.length-1],this.defaultActions[y]?b=this.defaultActions[y]:(m==null&&(m=v()),b=o[y]&&o[y][m]);if(typeof b=="undefined"||!b.length||!b[0])if(!l){C=[];for(x in o[y])this.terminals_[x]&&x>2&&C.push("'"+this.terminals_[x]+"'");var k="";this.lexer.showPosition?k="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+C.join(", ")+", got '"+this.terminals_[m]+"'":k="Parse error on line "+(a+1)+": Unexpected "+(m==1?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:p,expected:C})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+m);switch(b[0]){case 1:r.push(m),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(b[1]),m=null,g?(m=g,g=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:T=this.productions_[b[1]][1],S.$=i[i.length-T],S._$={first_line:s[s.length-(T||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(T||1)].first_column,last_column:s[s.length-1].last_column},E=this.performAction.call(S,u,f,a,this.yy,b[1],i,s);if(typeof E!="undefined")return E;T&&(r=r.slice(0,-1*T*2),i=i.slice(0,-1*T),s=s.slice(0,-1*T)),r.push(this.productions_[b[1]][0]),i.push(S.$),s.push(S._$),N=o[r[r.length-2]][r[r.length-1]],r.push(N);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parseError)throw new Error(t);this.yy.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e;var t=e.match(/\n/);return t&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r;this._more||(this.yytext="",this.match="");var i=this._currentRules();for(var s=0;s<i.length;s++){t=this._input.match(this.rules[i[s]]);if(t){r=t[0].match(/\n.*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,i[s],this.conditionStack[this.conditionStack.length-1]);if(e)return e;return}}if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return 24;case 4:return 16;case 5:return 20;case 6:return 19;case 7:return 19;case 8:return 23;case 9:return 23;case 10:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 11:return 22;case 12:return 34;case 13:return 33;case 14:return 33;case 15:return 36;case 16:break;case 17:return this.popState(),18;case 18:return this.popState(),18;case 19:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),28;case 20:return 30;case 21:return 30;case 22:return 29;case 23:return 33;case 24:return n.yytext=n.yytext.substr(1,n.yyleng-2),33;case 25:return"INVALID";case 26:return 5}},e.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^[^\x00]{2,}?(?=(\{\{))/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[\/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,/^[a-zA-Z0-9_$-]+(?=[=}\s\/.])/,/^\[[^\]]*\]/,/^./,/^$/],e.conditions={mu:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],inclusive:!1},emu:{rules:[2],inclusive:!1},INITIAL:{rules:[0,1,26],inclusive:!0}},e}();return e.lexer=t,e}();typeof require!="undefined"&&typeof exports!="undefined"&&(exports.parser=handlebars,exports.parse=function(){return handlebars.parse.apply(handlebars,arguments)},exports.main=function(t){if(!t[1])throw new Error("Usage: "+t[0]+" FILE");if(typeof process!="undefined")var n=require("fs").readFileSync(require("path").join(process.cwd(),t[1]),"utf8");else var r=require("file").path(require("file").cwd()),n=r.join(t[1]).read({charset:"utf-8"});return exports.parser.parse(n)},typeof module!="undefined"&&require.main===module&&exports.main(typeof process!="undefined"?process.argv.slice(1):require("system").args)),Handlebars.Parser=handlebars,Handlebars.parse=function(e){return Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(e)},Handlebars.print=function(e){return(new Handlebars.PrintVisitor).accept(e)},Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){}},Handlebars.log=function(e,t){Handlebars.logger.log(e,t)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(e,t){this.type="program",this.statements=e,t&&(this.inverse=new Handlebars.AST.ProgramNode(t))},Handlebars.AST.MustacheNode=function(e,t,n){this.type="mustache",this.id=e[0],this.params=e.slice(1),this.hash=t,this.escaped=!n},Handlebars.AST.PartialNode=function(e,t){this.type="partial",this.id=e,this.context=t};var e=function(e,t){if(e.original!==t.original)throw new Handlebars.Exception(e.original+" doesn't match "+t.original)};Handlebars.AST.BlockNode=function(t,n,r){e(t.id,r),this.type="block",this.mustache=t,this.program=n},Handlebars.AST.InverseNode=function(t,n,r){e(t.id,r),this.type="inverse",this.mustache=t,this.program=n},Handlebars.AST.ContentNode=function(e){this.type="content",this.string=e},Handlebars.AST.HashNode=function(e){this.type="hash",this.pairs=e},Handlebars.AST.IdNode=function(e){this.type="ID",this.original=e.join(".");var t=[],n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r];s===".."?n++:s==="."||s==="this"?this.isScoped=!0:t.push(s)}this.parts=t,this.string=t.join("."),this.depth=n,this.isSimple=t.length===1&&n===0},Handlebars.AST.StringNode=function(e){this.type="STRING",this.string=e},Handlebars.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e},Handlebars.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e},Handlebars.AST.CommentNode=function(e){this.type="comment",this.comment=e}}(),Handlebars.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.message=t.message},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(e){this.string=e},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},t=/&(?!\w+;)|[<>"'`]/g,n=/[&<>"'`]/,r=function(t){return e[t]||"&amp;"};Handlebars.Utils={escapeExpression:function(e){return e instanceof Handlebars.SafeString?e.toString():e==null||e===!1?"":n.test(e)?e.replace(t,r):e},isEmpty:function(e){return typeof e=="undefined"?!0:e===null?!0:e===!1?!0:Object.prototype.toString.call(e)==="[object Array]"&&e.length===0?!0:!1}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(e,t){e.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,assignToHash:15,pushStringParam:16},e.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:2,lookup:1,invokeMustache:3,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:3,invokePartial:1,push:1,assignToHash:1,pushStringParam:1},e.DISASSEMBLE_MAP={};for(var n in e.OPCODE_MAP){var r=e.OPCODE_MAP[n];e.DISASSEMBLE_MAP[r]=n}e.multiParamSize=function(t){return e.MULTI_PARAM_OPCODES[e.DISASSEMBLE_MAP[t]]},e.prototype={compiler:e,disassemble:function(){var t=this.opcodes,n,r,i=[],s,o,u;for(var a=0,f=t.length;a<f;a++){n=t[a];if(n==="DECLARE")o=t[++a],u=t[++a],i.push("DECLARE "+o+" = "+u);else{s=e.DISASSEMBLE_MAP[n];var l=e.multiParamSize(n),c=[];for(var h=0;h<l;h++)r=t[++a],typeof r=="string"&&(r='"'+r.replace("\n","\\n")+'"'),c.push(r);s=s+" "+c.join(" "),i.push(s)}}return i.join("\n")},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var r=0,i=t.depths.list.length;r<i;r++){depth=t.depths.list[r];if(depth<2)continue;this.addDepth(depth-1)}return n},block:function(e){var t=e.mustache,n,r,i,s,o=this.setupStackForMustache(t),u=this.compileProgram(e.program);e.program.inverse&&(s=this.compileProgram(e.program.inverse),this.declare("inverse",s)),this.opcode("invokeProgram",u,o.length,!!t.hash),this.declare("inverse",null),this.opcode("append")},inverse:function(e){var t=this.setupStackForMustache(e.mustache),n=this.compileProgram(e.program);this.declare("inverse",n),this.opcode("invokeProgram",null,t.length,!!e.mustache.hash),this.declare("inverse",null),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("push","{}");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.accept(r),this.opcode("assignToHash",n[0])},partial:function(e){var t=e.id;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.original),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.setupStackForMustache(e);this.opcode("invokeMustache",t.length,e.id.original,!!e.hash),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("lookupWithHelpers",e.parts[0]||null,e.isScoped||!1);for(var t=1,n=e.parts.length;t<n;t++)this.opcode("lookup",e.parts[t])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("push",e.integer)},BOOLEAN:function(e){this.opcode("push",e.bool)},comment:function(){},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.string)):this[n.type](n)},opcode:function(t,n,r,i){this.opcodes.push(e.OPCODE_MAP[t]),n!==undefined&&this.opcodes.push(n),r!==undefined&&this.opcodes.push(r),i!==undefined&&this.opcodes.push(i)},declare:function(e,t){this.opcodes.push("DECLARE"),this.opcodes.push(e),this.opcodes.push(t)},addDepth:function(e){if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},setupStackForMustache:function(e){var t=e.params;return this.pushParams(t),e.hash&&this.hash(e.hash),this.ID(e.id),t}},t.prototype={nameLookup:function(e,n,r){return/^[0-9]+$/.test(n)?e+"["+n+"]":t.isValidJavaScriptVariableName(n)?e+"."+n:e+"['"+n+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":"buffer += "+e+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e,this.options=t||{},this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],aliases:{self:"this"},registers:{list:[]}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.compileChildren(e,t);var i=e.opcodes,s;this.i=0;for(u=i.length;this.i<u;this.i++)s=this.nextOpcode(0),s[0]==="DECLARE"?(this.i=this.i+2,this[s[1]]=s[2]):(this.i=this.i+s[1].length,this[s[0]].apply(this,s[1]));return this.createFunctionContext(r)},nextOpcode:function(t){var n=this.environment.opcodes,r=n[this.i+t],i,s,o,u;if(r==="DECLARE")return i=n[this.i+1],s=n[this.i+2],["DECLARE",i,s];i=e.DISASSEMBLE_MAP[r],o=e.multiParamSize(r),u=[];for(var a=0;a<o;a++)u.push(n[this.i+a+1+t]);return[i,u]},eat:function(e){this.i=this.i+e.length},preamble:function(){var e=[];this.useRegister("foundHelper");if(!this.isChild){var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars;this.isChild||(t=t.concat(this.context.registers.list)),t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", "));if(!this.isChild){var n=[];for(var r in this.context.aliases)this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r]}this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var s=0,o=this.environment.depths.list.length;s<o;s++)i.push("depth"+this.environment.depths.list[s]);if(e)return i.push(this.source.join("\n  ")),Function.apply(this,i);var u="function "+(this.name||"")+"("+i.join(",")+") {\n  "+this.source.join("\n  ")+"}";return Handlebars.log(Handlebars.logger.DEBUG,u+"\n\n"),u},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var e=this.nextOpcode(1),t="";this.context.aliases.escapeExpression="this.escapeExpression",e[0]==="appendContent"&&(t=" + "+this.quotedString(e[1][0]),this.eat(e)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+t))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupWithHelpers:function(e,t){if(e){var n=this.nextStack();this.usingKnownHelper=!1;var r;!t&&this.options.knownHelpers[e]?(r=n+" = "+this.nameLookup("helpers",e,"helper"),this.usingKnownHelper=!0):t||this.options.knownHelpersOnly?r=n+" = "+this.nameLookup("depth"+this.lastContext,e,"context"):(this.register("foundHelper",this.nameLookup("helpers",e,"helper")),r=n+" = foundHelper || "+this.nameLookup("depth"+this.lastContext,e,"context")),r+=";",this.source.push(r)}else this.pushStack("depth"+this.lastContext)},lookup:function(e){var t=this.topStack();this.source.push(t+" = ("+t+" === null || "+t+" === undefined || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")+");")},pushStringParam:function(e){this.pushStack("depth"+this.lastContext),this.pushString(e)},pushString:function(e){this.pushStack(this.quotedString(e))},push:function(e){this.pushStack(e)},invokeMustache:function(e,t,n){this.populateParams(e,this.quotedString(t),"{}",null,n,function(e,t,n){this.usingKnownHelper||(this.context.aliases.helperMissing="helpers.helperMissing",this.context.aliases.undef="void 0",this.source.push("else if("+n+"=== undef) { "+e+" = helperMissing.call("+t+"); }"),e!==n&&this.source.push("else { "+e+" = "+n+"; }"))})},invokeProgram:function(e,t,n){var r=this.programExpression(this.inverse),i=this.programExpression(e);this.populateParams(t,null,i,r,n,function(e,t,n){this.usingKnownHelper||(this.context.aliases.blockHelperMissing="helpers.blockHelperMissing",this.source.push("else { "+e+" = blockHelperMissing.call("+t+"); }"))})},populateParams:function(e,t,n,r,i,s){var o=i||this.options.stringParams||r||this.options.data,u=this.popStack(),a,f=[],l,c,h;o?(this.register("tmp1",n),h="tmp1"):h="{ hash: {} }";if(o){var p=i?this.popStack():"{}";this.source.push("tmp1.hash = "+p+";")}this.options.stringParams&&this.source.push("tmp1.contexts = [];");for(var d=0;d<e;d++)l=this.popStack(),f.push(l),this.options.stringParams&&this.source.push("tmp1.contexts.push("+this.popStack()+");");r&&(this.source.push("tmp1.fn = tmp1;"),this.source.push("tmp1.inverse = "+r+";")),this.options.data&&this.source.push("tmp1.data = data;"),f.push(h),this.populateCall(f,u,t||u,s,n!=="{}")},populateCall:function(e,t,n,r,i){var s=["depth0"].concat(e).join(", "),o=["depth0"].concat(n).concat(e).join(", "),u=this.nextStack();if(this.usingKnownHelper)this.source.push(u+" = "+t+".call("+s+");");else{this.context.aliases.functionType='"function"';var a=i?"foundHelper && ":"";this.source.push("if("+a+"typeof "+t+" === functionType) { "+u+" = "+t+".call("+s+"); }")}r.call(this,u,o,t),this.usingKnownHelper=!1},invokePartial:function(e){params=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"],this.options.data&&params.push("data"),this.pushStack("self.invokePartial("+params.join(", ")+");")},assignToHash:function(e){var t=this.popStack(),n=this.topStack();this.source.push(n+"['"+e+"'] = "+t+";")},compiler:t,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler,this.context.programs.push("");var u=this.context.programs.length;r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context)}},programExpression:function(e){if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r=[t.index,t.name,"data"];for(var i=0,s=n.length;i<s;i++)depth=n[i],depth===1?r.push("depth0"):r.push("depth"+(depth-1));return n.length===0?"self.program("+r.join(", ")+")":(r.shift(),"self.programWithDepth("+r.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.context.registers[e]||(this.context.registers[e]=!0,this.context.registers.list.push(e))},pushStack:function(e){return this.source.push(this.nextStack()+" = "+e+";"),"stack"+this.stackSlot},nextStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var i="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),s=t.RESERVED_WORDS={};for(var o=0,u=i.length;o<u;o++)s[i[o]]=!0;t.isValidJavaScriptVariableName=function(e){return!t.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(e,t){t=t||{};var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t);return(new Handlebars.JavaScriptCompiler).compile(r,t)},Handlebars.compile=function(e,t){function r(){var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t),i=(new Handlebars.JavaScriptCompiler).compile(r,t,undefined,!0);return Handlebars.template(i)}t=t||{};var n;return function(e,t){return n||(n=r()),n.call(this,e,t)}},Handlebars.VM={template:function(e){var t={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(e,t,n){var r=this.programs[e];return n?Handlebars.VM.program(t,n):r?r:(r=this.programs[e]=Handlebars.VM.program(t),r)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(n,r){return r=r||{},e.call(t,Handlebars,n,r.helpers,r.partials,r.data)}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(e,t,n,r,i,s){options={helpers:r,partials:i,data:s};if(e===undefined)throw new Handlebars.Exception("The partial "+t+" could not be found");if(e instanceof Function)return e(n,options);if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+t+" could not be compiled when running in runtime-only mode");return i[t]=Handlebars.compile(e),i[t](n,options)}},Handlebars.template=Handlebars.VM.template,define("handlebars",[],function(){return Handlebars}),define("text",["module"],function(e){var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,r=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,i=typeof location!="undefined"&&location.href,s=i&&location.protocol&&location.protocol.replace(/\:/,""),o=i&&location.hostname,u=i&&(location.port||undefined),a=[],f=e.config&&e.config()||{},l,c;return l={version:"2.0.1",strip:function(e){if(e){e=e.replace(n,"");var t=e.match(r);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,n,r;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(n=0;n<3;n+=1){r=t[n];try{e=new ActiveXObject(r)}catch(i){}if(e){t=[r];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),n!==-1&&(t=i.substring(n+1,i.length),t=t==="strip",i=i.substring(0,n)),{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i=l.xdRegExp.exec(e),s,o,u;return i?(s=i[2],o=i[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===t)&&(!o||o.toLowerCase()===n.toLowerCase())&&(!u&&!o||u===r)):!0},finishLoad:function(e,t,n,r){n=t?l.strip(n):n,f.isBuild&&(a[e]=n),r(n)},load:function(e,t,n,r){if(r.isBuild&&!r.inlineText){n();return}f.isBuild=r.isBuild;var a=l.parseName(e),c=a.moduleName+"."+a.ext,h=t.toUrl(c),p=f.useXhr||l.useXhr;!i||p(h,s,o,u)?l.get(h,function(t){l.finishLoad(e,a.strip,t,n)},function(e){n.error&&n.error(e)}):t([c],function(e){l.finishLoad(a.moduleName+"."+a.ext,a.strip,e,n)})},write:function(e,t,n,r){if(a.hasOwnProperty(t)){var i=l.jsEscape(a[t]);n.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,t,n,r,i){var s=l.parseName(t),o=s.moduleName+"."+s.ext,u=n.toUrl(s.moduleName+"."+s.ext)+".js";l.load(o,n,function(t){var n=function(e){return r(u,e)};n.asModule=function(e,t){return r.asModule(e,u,t)},l.write(e,o,n,i)},i)}},typeof process!="undefined"&&process.versions&&!!process.versions.node?(c=require.nodeRequire("fs"),l.get=function(e,t){var n=c.readFileSync(e,"utf8");n.indexOf("ï»¿")===0&&(n=n.substring(1)),t(n)}):l.createXhr()?l.get=function(e,t,n){var r=l.createXhr();r.open("GET",e,!0),f.onXhr&&f.onXhr(r,e),r.onreadystatechange=function(i){var s,o;r.readyState===4&&(s=r.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=r,n(o)):t(r.responseText))},r.send(null)}:typeof Packages!="undefined"&&(l.get=function(e,t){var n="utf-8",r=new java.io.File(e),i=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),n)),o,u,a="";try{o=new java.lang.StringBuffer,u=s.readLine(),u&&u.length()&&u.charAt(0)===65279&&(u=u.substring(1)),o.append(u);while((u=s.readLine())!==null)o.append(i),o.append(u);a=String(o.toString())}finally{s.close()}t(a)}),l}),define("hb",["handlebars","text"],function(e,t){var n={},r=function(r,i,s,o){var u="";if(o.isBuild&&typeof process!="undefined"&&process.versions&&process.versions.node){var a=require.nodeRequire("fs");u=a.readFileSync(o.templatePathPrefix+r,"utf8");var f=e.precompile(u);n[r]=f,s(f)}else t.get(i.toUrl(r),function(t){var n=e.compile(t);s(n)})},i=function(e,t,r){if(t in n){var i=n[t];r('define("'+e+"!"+t+'", ["handlebars"], function (Handlebars){'+"return Handlebars.template("+i+");"+"});\n")}};return{load:r,write:i}}),define("hb!templates/helpers/LockableTextInput.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function g(e,t){return"selected"}function y(e,t){var r="",i,s;r+='\n			<textarea class="input-dark span12 lockable-field" name="',f=n.name,i=f||e.name,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"name",{hash:{}})),r+=v(i)+'"',f=n.rows,i=f||e.rows,s=n["if"],l=c.program(4,b,t),l.hash={},l.fn=l,l.inverse=c.noop,i=s.call(e,i,l);if(i||i===0)r+=i;return r+=">",f=n.value,i=f||e.value,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"value",{hash:{}})),r+=v(i)+"</textarea>\n		",r}function b(e,t){var r="",i;return r+=' rows="',f=n.rows,i=f||e.rows,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"rows",{hash:{}})),r+=v(i)+'"',r}function w(e,t){var r="",i;return r+='\n			<input class="input-dark span12 lockable-field" type="',f=n.type,i=f||e.type,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"type",{hash:{}})),r+=v(i)+'" name="',f=n.name,i=f||e.name,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"name",{hash:{}})),r+=v(i)+'" value="',f=n.value,i=f||e.value,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"value",{hash:{}})),r+=v(i)+'">\n		',r}n=n||e.helpers;var s="",o,u,a,f,l,c=this,h="function",p=n.helperMissing,d=void 0,v=this.escapeExpression,m=n.blockHelperMissing;s+='<div class="control-group">\n	<label>',f=n.label,o=f||t.label,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"label",{hash:{}})),s+=v(o)+'</label>\n	<a href="#" data-field="',f=n.name,o=f||t.name,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"name",{hash:{}})),s+=v(o)+'" class="badge lock-btn ',f=n.locked,o=f||t.locked,u=n["if"],l=c.program(1,g,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;s+='"><i class="icon-lock"></i></a>\n\n	<div class="lockable-input">\n		',o="textarea",f=n.type,u=f||t.type,f=n.if_eq,a=f||t.if_eq,l=c.program(3,y,i),l.hash={},l.fn=l,l.inverse=c.program(6,w,i),f&&typeof a===h?o=a.call(t,u,o,l):o=m.call(t,a,u,o,l);if(o||o===0)s+=o;return s+="\n	</div>\n</div>\n",s})}),define("hb!templates/helpers/LockableTagInput.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return"selected"}function m(e,t){var r="",i;return r+='\n				<option selected="selected">',a=n.tag,i=a||e.tag,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"tag",{hash:{}})),r+=d(i)+"</option>\n			",r}function g(e,t){var n="",r;return n+="\n				<option>",r=e,typeof r===c?r=r.call(e,{hash:{}}):r===p&&(r=h.call(e,"this",{hash:{}})),n+=d(r)+"</option>\n			",n}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<div class="control-group">\n	<label>',a=n.label,o=a||t.label,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"label",{hash:{}})),s+=d(o)+'</label>\n	<a href="#" data-field="',a=n.name,o=a||t.name,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"name",{hash:{}})),s+=d(o)+'" class="badge lock-btn ',a=n.locked,o=a||t.locked,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='"><i class="icon-lock"></i></a>\n\n	<div class="lockable-input">\n		<select class="span12 lockable-field chzn-select" data-name="',a=n.name,o=a||t.name,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"name",{hash:{}})),s+=d(o)+'" data-placeholder=" " multiple="true" size="1" style="width: 245px">\n			<option value=""></option>\n			',a=n.value,o=a||t.value,u=n.each,f=l.program(3,m,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+="\n			",a=n.options,o=a||t.options,u=n.each,f=l.program(5,g,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n		</select>\n	</div>\n</div>\n",s})}),define("hb!templates/helpers/PreferenceEdit.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function g(e,t){return" advanced-prefs hide"}function y(e,t){var r="",i,s;r+='\n		<label class="checkbox" for="input_',f=n.id,i=f||e.id,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"id",{hash:{}})),r+=v(i),f=n.idSuffix,i=f||e.idSuffix,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"idSuffix",{hash:{}})),r+=v(i)+'">\n			<input id="input_',f=n.id,i=f||e.id,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"id",{hash:{}})),r+=v(i),f=n.idSuffix,i=f||e.idSuffix,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"idSuffix",{hash:{}})),r+=v(i)+'" type="checkbox" value="1" class="input-dark" name="',f=n.id,i=f||e.id,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"id",{hash:{}})),r+=v(i)+'"',f=n.value,i=f||e.value,s=n["if"],l=c.program(4,b,t),l.hash={},l.fn=l,l.inverse=c.noop,i=s.call(e,i,l);if(i||i===0)r+=i;r+="> &nbsp;",f=n.label,i=f||e.label,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"label",{hash:{}})),r+=v(i)+"\n		</label>\n\n		",f=n.summary,i=f||e.summary,s=n["if"],l=c.program(6,w,t),l.hash={},l.fn=l,l.inverse=c.noop,i=s.call(e,i,l);if(i||i===0)r+=i;return r+="\n	",r}function b(e,t){return' checked="checked"'}function w(e,t){var r="",i;return r+='\n			<p class="help-block">',f=n.summary,i=f||e.summary,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"summary",{hash:{}})),r+=v(i)+"</p>\n		",r}function E(e,t){var r="",i,s;r+='\n		<label class="control-label" for="input_',f=n.id,i=f||e.id,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"id",{hash:{}})),r+=v(i),f=n.idSuffix,i=f||e.idSuffix,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"idSuffix",{hash:{}})),r+=v(i)+'">',f=n.label,i=f||e.label,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"label",{hash:{}})),r+=v(i)+'</label>\n\n		<div class="controls">\n			',f=n.enumValues,i=f||e.enumValues,s=n["if"],l=c.program(9,S,t),l.hash={},l.fn=l,l.inverse=c.program(13,N,t),i=s.call(e,i,l);if(i||i===0)r+=i;r+="\n\n			",f=n.summary,i=f||e.summary,s=n["if"],l=c.program(15,C,t),l.hash={},l.fn=l,l.inverse=c.noop,i=s.call(e,i,l);if(i||i===0)r+=i;return r+="\n		</div>\n	",r}function S(e,t){var r="",i,s;r+='\n				<select id="input_',f=n.id,i=f||e.id,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"id",{hash:{}})),r+=v(i),f=n.idSuffix,i=f||e.idSuffix,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"idSuffix",{hash:{}})),r+=v(i)+'" class="input-dark span4" name="',f=n.id,i=f||e.id,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"id",{hash:{}})),r+=v(i)+'">\n					',f=n.enumValues,i=f||e.enumValues,s=n.each,l=c.programWithDepth(x,t,e),l.hash={},l.fn=l,l.inverse=c.noop,i=s.call(e,i,l);if(i||i===0)r+=i;return r+="\n				</select>\n			",r}function x(e,t,r){var i="",s,o,u;i+='\n						<option value="',f=n.value,s=f||e.value,typeof s===h?s=s.call(e,{hash:{}}):s===d&&(s=p.call(e,"value",{hash:{}})),i+=v(s)+'"',f=n.value,s=f||r.value,f=n.value,o=f||e.value,f=n.if_eq,u=f||e.if_eq,l=c.program(11,T,t),l.hash={},l.fn=l,l.inverse=c.noop,f&&typeof u===h?s=u.call(e,o,s,l):s=m.call(e,u,o,s,l);if(s||s===0)i+=s;return i+=">",f=n.label,s=f||e.label,typeof s===h?s=s.call(e,{hash:{}}):s===d&&(s=p.call(e,"label",{hash:{}})),i+=v(s)+"</option>\n					",i}function T(e,t){return' selected="selected"'}function N(e,t){var r="",i;return r+='\n				<input id="input_',f=n.id,i=f||e.id,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"id",{hash:{}})),r+=v(i),f=n.idSuffix,i=f||e.idSuffix,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"idSuffix",{hash:{}})),r+=v(i)+'" type="text" class="input-dark span4" name="',f=n.id,i=f||e.id,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"id",{hash:{}})),r+=v(i)+'" value="',f=n.value,i=f||e.value,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"value",{hash:{}})),r+=v(i)+'">\n			',r}function C(e,t){var r="",i;return r+='\n				<p class="help-block">',f=n.summary,i=f||e.summary,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"summary",{hash:{}})),r+=v(i)+"</p>\n			",r}n=n||e.helpers;var s="",o,u,a,f,l,c=this,h="function",p=n.helperMissing,d=void 0,v=this.escapeExpression,m=n.blockHelperMissing;s+='<div class="control-group',f=n.advanced,o=f||t.advanced,u=n["if"],l=c.program(1,g,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;s+='">\n	',o="bool",f=n.type,u=f||t.type,f=n.if_eq,a=f||t.if_eq,l=c.program(3,y,i),l.hash={},l.fn=l,l.inverse=c.program(8,E,i),f&&typeof a===h?o=a.call(t,u,o,l):o=m.call(t,a,u,o,l);if(o||o===0)s+=o;return s+="\n</div>\n",s})}),define("hb!templates/helpers/SectionPathInput.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<div class="path-container">\n	<input type="text" name="path" class="span12" value="',u=n.value,o=u||t.value,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"value",{hash:{}})),s+=h(o)+'">\n	<div class="path-actions">\n		<a href="#" class="remove-path"><i class="icon-minus-sign"></i></a>\n		<a href="#" class="add-path"><i class="icon-plus-sign"></i></a>\n	</div>\n</div>\n',s})}),function(e,t){function _(e,t,n){this._d=e,this._isUTC=!!t,this._a=e._a||null,e._a=null,this._lang=n||!1}function D(e){var t=this._data={},n=e.years||e.y||0,r=e.months||e.M||0,i=e.weeks||e.w||0,s=e.days||e.d||0,o=e.hours||e.h||0,u=e.minutes||e.m||0,a=e.seconds||e.s||0,f=e.milliseconds||e.ms||0;this._milliseconds=f+a*1e3+u*6e4+o*36e5,this._days=s+i*7,this._months=r+n*12,t.milliseconds=f%1e3,a+=P(f/1e3),t.seconds=a%60,u+=P(a/60),t.minutes=u%60,o+=P(u/60),t.hours=o%24,s+=P(o/24),s+=i*7,t.days=s%30,r+=P(s/30),t.months=r%12,n+=P(r/12),t.years=n,this._lang=!1}function P(e){return e<0?Math.ceil(e):Math.floor(e)}function H(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}function B(e,t,n){var r=t._milliseconds,i=t._days,s=t._months,o;r&&e._d.setTime(+e+r*n),i&&e.date(e.date()+i*n),s&&(o=e.date(),e.date(1).month(e.month()+s*n).date(Math.min(o,e.daysInMonth())))}function j(e){return Object.prototype.toString.call(e)==="[object Array]"}function F(e,t){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),i=0,s;for(s=0;s<n;s++)~~e[s]!==~~t[s]&&i++;return i+r}function I(t,n){var r,i;for(r=1;r<7;r++)t[r]=t[r]==null?r===2?1:0:t[r];return t[7]=n,i=new e(0),n?(i.setUTCFullYear(t[0],t[1],t[2]),i.setUTCHours(t[3],t[4],t[5],t[6])):(i.setFullYear(t[0],t[1],t[2]),i.setHours(t[3],t[4],t[5],t[6])),i._a=t,i}function q(e,t){var r,i,s=[];!t&&a&&(t=require("./lang/"+e));for(r=0;r<f.length;r++)t[f[r]]=t[f[r]]||o.en[f[r]];for(r=0;r<12;r++)i=n([2e3,r]),s[r]=new RegExp("^"+(t.months[r]||t.months(i,""))+"|^"+(t.monthsShort[r]||t.monthsShort(i,"")).replace(".",""),"i");return t.monthsParse=t.monthsParse||s,o[e]=t,t}function R(e){var t=typeof e=="string"&&e||e&&e._lang||null;return t?o[t]||q(t):n}function U(e){return A[e]?"'+("+A[e]+")+'":e.replace(p,"").replace(/\\?'/g,"\\'")}function z(e){return R().longDateFormat[e]||e}function W(e){var t="var a,b;return '"+e.replace(c,U)+"';",n=Function;return new n("t","v","o","p","m",t)}function X(e){return L[e]||(L[e]=W(e)),L[e]}function V(e,t){function r(r,i){return n[r].call?n[r](e,t):n[r][i]}var n=R(e);while(h.test(t))t=t.replace(h,z);return L[t]||(L[t]=W(t)),L[t](e,r,n.ordinal,H,n.meridiem)}function $(e){switch(e){case"DDDD":return g;case"YYYY":return y;case"S":case"SS":case"SSS":case"DDD":return m;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return b;case"Z":case"ZZ":return w;case"T":return E;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return v;default:return new RegExp(e.replace("\\",""))}}function J(e,t,n,r){var i;switch(e){case"M":case"MM":n[1]=t==null?0:~~t-1;break;case"MMM":case"MMMM":for(i=0;i<12;i++)if(R().monthsParse[i].test(t)){n[1]=i;break}break;case"D":case"DD":case"DDD":case"DDDD":t!=null&&(n[2]=~~t);break;case"YY":t=~~t,n[0]=t+(t>70?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(t);break;case"a":case"A":r.isPm=(t+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":n[3]=~~t;break;case"m":case"mm":n[4]=~~t;break;case"s":case"ss":n[5]=~~t;break;case"S":case"SS":case"SSS":n[6]=~~(("0."+t)*1e3);break;case"Z":case"ZZ":r.isUTC=!0,i=(t+"").match(N),i&&i[1]&&(r.tzh=~~i[1]),i&&i[2]&&(r.tzm=~~i[2]),i&&i[0]==="+"&&(r.tzh=-r.tzh,r.tzm=-r.tzm)}}function K(e,t){var n=[0,0,1,0,0,0,0],r={tzh:0,tzm:0},i=t.match(c),s,o;for(s=0;s<i.length;s++)o=($(i[s]).exec(e)||[])[0],e=e.replace($(i[s]),""),J(i[s],o,n,r);return r.isPm&&n[3]<12&&(n[3]+=12),r.isPm===!1&&n[3]===12&&(n[3]=0),n[3]+=r.tzh,n[4]+=r.tzm,I(n,r.isUTC)}function Q(e,t){var n,r=e.match(d)||[],i,s=99,o,u,a;for(o=0;o<t.length;o++)u=K(e,t[o]),i=V(new _(u),t[o]).match(d)||[],a=F(r,i),a<s&&(s=a,n=u);return n}function G(t){var n="YYYY-MM-DDT",r;if(S.exec(t)){for(r=0;r<4;r++)if(T[r][1].exec(t)){n+=T[r][0];break}return w.exec(t)?K(t,n+" Z"):K(t,n)}return new e(t)}function Y(e,t,n,r,i){var s=i.relativeTime[e];return typeof s=="function"?s(t||1,!!n,e,r):s.replace(/%d/i,t||1)}function Z(e,t,n){var r=i(Math.abs(e)/1e3),s=i(r/60),o=i(s/60),u=i(o/24),a=i(u/365),f=r<45&&["s",r]||s===1&&["m"]||s<45&&["mm",s]||o===1&&["h"]||o<22&&["hh",o]||u===1&&["d"]||u<=25&&["dd",u]||u<=45&&["M"]||u<345&&["MM",i(u/30)]||a===1&&["y"]||["yy",a];return f[2]=t,f[3]=e>0,f[4]=n,Y.apply({},f)}function et(e,t){n.fn[e]=function(e){var n=this._isUTC?"UTC":"";return e!=null?(this._d["set"+n+t](e),this):this._d["get"+n+t]()}}function tt(e){n.duration.fn[e]=function(){return this._data[e]}}function nt(e,t){n.duration.fn["as"+e]=function(){return+this/t}}var n,r="1.7.0",i=Math.round,s,o={},u="en",a=typeof module!="undefined"&&module.exports,f="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),l=/^\/?Date\((\-?\d+)/i,c=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?)/g,h=/(LT|LL?L?L?)/g,p=/(^\[)|(\\)|\]$/g,d=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,v=/\d\d?/,m=/\d{1,3}/,g=/\d{3}/,y=/\d{1,4}/,b=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,w=/Z|[\+\-]\d\d:?\d\d/i,E=/T/i,S=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,x="YYYY-MM-DDTHH:mm:ssZ",T=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],N=/([\+\-]|\d\d)/gi,C="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),k={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},L={},A={M:"(a=t.month()+1)",MMM:'v("monthsShort",t.month())',MMMM:'v("months",t.month())',D:"(a=t.date())",DDD:"(a=new Date(t.year(),t.month(),t.date()),b=new Date(t.year(),0,1),a=~~(((a-b)/864e5)+1.5))",d:"(a=t.day())",dd:'v("weekdaysMin",t.day())',ddd:'v("weekdaysShort",t.day())',dddd:'v("weekdays",t.day())',w:"(a=new Date(t.year(),t.month(),t.date()-t.day()+5),b=new Date(a.getFullYear(),0,4),a=~~((a-b)/864e5/7+1.5))",YY:"p(t.year()%100,2)",YYYY:"p(t.year(),4)",a:"m(t.hours(),t.minutes(),!0)",A:"m(t.hours(),t.minutes(),!1)",H:"t.hours()",h:"t.hours()%12||12",m:"t.minutes()",s:"t.seconds()",S:"~~(t.milliseconds()/100)",SS:"p(~~(t.milliseconds()/10),2)",SSS:"p(t.milliseconds(),3)",Z:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(a/60),2)+":"+p(~~a%60,2)',ZZ:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(10*a/6),4)'},O="DDD w M D d".split(" "),M="M D H h m s w".split(" ");while(O.length)s=O.pop(),A[s+"o"]=A[s]+"+o(a)";while(M.length)s=M.pop(),A[s+s]="p("+A[s]+",2)";A.DDDD="p("+A.DDD+",3)",n=function(r,i){if(r===null||r==="")return null;var s,o;return n.isMoment(r)?new _(new e(+r._d),r._isUTC,r._lang):(i?j(i)?s=Q(r,i):s=K(r,i):(o=l.exec(r),s=r===t?new e:o?new e(+o[1]):r instanceof e?r:j(r)?I(r):typeof r=="string"?G(r):new e(r)),new _(s))},n.utc=function(e,t){return j(e)?new _(I(e,!0),!0):(typeof e=="string"&&!w.exec(e)&&(e+=" +0000",t&&(t+=" Z")),n(e,t).utc())},n.unix=function(e){return n(e*1e3)},n.duration=function(e,t){var r=n.isDuration(e),i=typeof e=="number",s=r?e._data:i?{}:e,o;return i&&(t?s[t]=e:s.milliseconds=e),o=new D(s),r&&(o._lang=e._lang),o},n.humanizeDuration=function(e,t,r){return n.duration(e,t===!0?null:t).humanize(t===!0?!0:r)},n.version=r,n.defaultFormat=x,n.lang=function(e,t){var r;if(!e)return u;(t||!o[e])&&q(e,t);if(o[e]){for(r=0;r<f.length;r++)n[f[r]]=o[e][f[r]];n.monthsParse=o[e].monthsParse,u=e}},n.langData=R,n.isMoment=function(e){return e instanceof _},n.isDuration=function(e){return e instanceof D},n.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10;return~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th"}}),n.fn=_.prototype={clone:function(){return n(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?!F(this._a,(this._a[7]?n.utc(this):this).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){return V(this,e?e:n.defaultFormat)},add:function(e,t){var r=t?n.duration(+t,e):n.duration(e);return B(this,r,1),this},subtract:function(e,t){var r=t?n.duration(+t,e):n.duration(e);return B(this,r,-1),this},diff:function(e,t,r){var s=this._isUTC?n(e).utc():n(e).local(),o=(this.zone()-s.zone())*6e4,u=this._d-s._d-o,a=this.year()-s.year(),f=this.month()-s.month(),l=this.date()-s.date(),c;return t==="months"?c=a*12+f+l/30:t==="years"?c=a+(f+l/30)/12:c=t==="seconds"?u/1e3:t==="minutes"?u/6e4:t==="hours"?u/36e5:t==="days"?u/864e5:t==="weeks"?u/6048e5:u,r?c:i(c)},from:function(e,t){return n.duration(this.diff(e)).lang(this._lang).humanize(!t)},fromNow:function(e){return this.from(n(),e)},calendar:function(){var e=this.diff(n().sod(),"days",!0),t=this.lang().calendar,r=t.sameElse,i=e<-6?r:e<-1?t.lastWeek:e<0?t.lastDay:e<1?t.sameDay:e<2?t.nextDay:e<7?t.nextWeek:r;return this.format(typeof i=="function"?i.apply(this):i)},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<n([this.year()]).zone()||this.zone()<n([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e==null?t:this.add({d:e-t})},startOf:function(e){switch(e.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return n.utc([this.year(),this.month()+1,0]).date()},lang:function(e){return e===t?R(this):(this._lang=e,this)}};for(s=0;s<C.length;s++)et(C[s].toLowerCase(),C[s]);et("year","FullYear"),n.duration.fn=D.prototype={weeks:function(){return P(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(e){var t=+this,n=this.lang().relativeTime,r=Z(t,!e,this.lang());return e&&(r=(t<=0?n.past:n.future).replace(/%s/i,r)),r},lang:n.fn.lang};for(s in k)k.hasOwnProperty(s)&&(nt(s,k[s]),tt(s.toLowerCase()));nt("Weeks",6048e5),a&&(module.exports=n),typeof ender=="undefined"&&(this.moment=n),typeof define=="function"&&define.amd&&define("moment",[],function(){return n})}.call(this,Date),define("plex/control/init/HandlebarsInit",["plex/control/utils/StringUtil","plex/control/utils/NumberUtil","plex/control/utils/TranscodeUtil","hb!templates/helpers/LockableTextInput.tpl","hb!templates/helpers/LockableTagInput.tpl","hb!templates/helpers/PreferenceEdit.tpl","hb!templates/helpers/SectionPathInput.tpl","handlebars","moment"],function(e,t,n,r,i,s,o){Handlebars.registerHelper("eq",function(e,t,n,r){return e===t?new Handlebars.SafeString(n):new Handlebars.SafeString(r)}),Handlebars.registerHelper("if_eq",function(e,t,n){return e==t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("if_neq",function(e,t,n){return e!=t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("timeAgo",function(e){return moment.unix(e).fromNow()}),Handlebars.registerHelper("formatDate",function(e){return moment(e).format("MMM D, YYYY")}),Handlebars.registerHelper("formatDateCustom",function(e,t){return moment(e).format(t)}),Handlebars.registerHelper("formatMinutes",function(e){var t=Math.round(moment.duration(Number(e)).asMinutes());return t===1?t+" min":t+" mins"}),Handlebars.registerHelper("formatDuration",function(e){var t=moment.duration(Number(e)),n=t.seconds(),r=t.minutes(),i=t.hours(),s="";return n<10?s=":0"+n:s=":"+n,r<10&&i>0?s="0"+r+s:s=r+s,i>0&&(s=i+":"+s),s}),Handlebars.registerHelper("formatBitrate",function(e){return t.formatBitrate(e,0)}),Handlebars.registerHelper("truncate",function(t,n){return e.truncate(t,n)}),Handlebars.registerHelper("truncateMiddle",function(t,n,r){return e.truncateMiddle(t,n,r)}),Handlebars.registerHelper("truncateTagList",function(t,n){var r="";if(typeof t!="object"||t instanceof Array){if(typeof t!="undefined"){var i=n.hash.maxTags||t.length;i>t.length&&(i=t.length);for(var s=0;s<i;s++){var o=t[s];typeof o.tag!="undefined"&&o.tag!==""&&(r+=o.tag,s+1<i&&(r+=", "))}}return e.truncate(r,n.hash.maxLen)}return t.tag}),Handlebars.registerHelper("encodeURL",function(e){return encodeURIComponent(e)}),Handlebars.registerHelper("transcodeImage",function(e,t,r,i){return n.image(e,t,r,i)}),Handlebars.registerHelper("transcodeMediaFlag",function(e){var t=e.hash.prefix+e.hash.path+"/"+e.hash.flag+"?t="+e.hash.version;return n.image(e.hash.server,t,e.hash.width,e.hash.height)}),Handlebars.registerHelper("starRating",function(e){var t=Math.round(e/2),n="";for(var r=0;r<5;r++)r<t?n+='<i class="icon-star"></i>':n+='<i class="icon-star-empty"></i>';return n}),Handlebars.registerHelper("lockableTextInput",function(e){return e.hash.type=e.hash.type||"text",new Handlebars.SafeString(r(e.hash))}),Handlebars.registerHelper("lockableTagInput",function(e){return new Handlebars.SafeString(i(e.hash))}),Handlebars.registerHelper("eachKeyValue",function(e,t){var n=t.fn,r=t.inverse,i="";if(e&&!_.isEmpty(e)){var s=_.map(e,function(e,t){return n({key:t,value:e})});i=s.join("")}else i=r(this);return i}),Handlebars.registerHelper("partial",function(e,t){var n=Handlebars.partials[e],r=t.hash.context?_.extend({},t.hash.context,t.hash):_.extend({},this,t.hash);return new Handlebars.SafeString(n(r))}),Handlebars.registerPartial("preference",s),Handlebars.registerPartial("sectionPathInput",o)});var SM2_DEFER=!0;define("soundmanagerdefer",function(){}),function(e){function n(t,n){function Yt(e){return function(t){var n=this._t;return!n||!n._a?null:e.call(this,t)}}this.flashVersion=8,this.debugMode=!1,this.debugFlash=!1,this.useConsole=!0,this.consoleOnly=!0,this.waitForWindowLoad=!1,this.bgColor="#ffffff",this.useHighPerformance=!1,this.flashPollingInterval=null,this.html5PollingInterval=null,this.flashLoadTimeout=1e3,this.wmode=null,this.allowScriptAccess="always",this.useFlashBlock=!1,this.useHTML5Audio=!0,this.html5Test=/^(probably|maybe)$/i,this.preferFlash=!0,this.noSWFCache=!1,this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.movieID="sm2-container",this.id=n||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20120318",this.version=null,this.movieURL=null,this.url=t||null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={},this.hasHTML5=function(){try{return typeof Audio!="undefined"&&typeof (new Audio).canPlayType!="undefined"}catch(e){return!1}}(),this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var r,i=this,s=null,o="soundManager",u=o+"::",a="HTML5::",f,l=navigator.userAgent,c=e,h=c.location.href.toString(),p=document,d,v,m,g=[],y=!0,b,w=!1,E=!1,S=!1,x=!1,T=!1,N,C=0,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V=["log","info","warn","error"],$=8,J,K,Q,G=null,Y=null,Z,et,tt,nt,rt,it,st,ot,ut,at=!1,ft=!1,lt,ct,ht,pt=0,dt=null,vt,mt=null,gt,yt,bt,wt,Et,St,xt,Tt,Nt=Array.prototype.slice,Ct=!1,kt,Lt,At,Ot,Mt,_t=l.match(/(ipad|iphone|ipod)/i),Dt=l.match(/firefox/i),Pt=l.match(/droid/i),Ht=l.match(/msie/i),Bt=l.match(/webkit/i),jt=l.match(/safari/i)&&!l.match(/chrome/i),Ft=l.match(/opera/i),It=l.match(/(mobile|pre\/|xoom)/i)||_t,qt=!h.match(/usehtml5audio/i)&&!h.match(/sm2\-ignorebadua/i)&&jt&&!l.match(/silk/i)&&l.match(/OS X 10_6_([3-7])/i),Rt=typeof console!="undefined"&&typeof console.log!="undefined",Ut=typeof p.hasFocus!="undefined"?p.hasFocus():null,zt=jt&&typeof p.hasFocus=="undefined",Wt=!zt,Xt=/(mp3|mp4|mpa)/i,Vt="about:blank",$t=p.location?p.location.protocol.match(/http/i):null,Jt=$t?"":"http://",Kt=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|mp4v|3gp|3g2)\s*(?:$|;)/i,Qt=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"],Gt=new RegExp("\\.("+Qt.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!$t,this._global_a=null,nt={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},It&&(i.useHTML5Audio=!0,i.preferFlash=!1,_t&&(i.ignoreFlash=!0,Ct=!0)),this.ok=function(){return mt?S&&!x:i.useHTML5Audio&&i.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return f(e)||p[e]||c[e]},this.createSound=function(e){function f(){return o=it(o),i.sounds[a.id]=new r(a),i.soundIDs.push(a.id),i.sounds[a.id]}var t,n,o=null,u=null,a=null;return!S||!i.ok()?(ot(n),!1):(arguments.length===2&&(e={id:arguments[0],url:arguments[1]}),o=L(e),o.url=vt(o.url),a=o,ut(a.id,!0)?i.sounds[a.id]:(yt(a)?(u=f(),u._setup_html5(a)):(m>8&&(a.isMovieStar===null&&(a.isMovieStar=a.serverURL||(a.type?a.type.match(Kt):!1)||a.url.match(Gt)),a.isMovieStar&&a.usePeakData&&(a.usePeakData=!1)),a=st(a,t),u=f(),m===8?s._createSound(a.id,a.loops||1,a.usePolicyFile):(s._createSound(a.id,a.url,a.usePeakData,a.useWaveformData,a.useEQData,a.isMovieStar,a.isMovieStar?a.bufferTime:!1,a.loops||1,a.serverURL,a.duration||null,a.autoPlay,!0,a.autoLoad,a.usePolicyFile),a.serverURL||(u.connected=!0,a.onconnect&&a.onconnect.apply(u))),!a.serverURL&&(a.autoLoad||a.autoPlay)&&u.load(a)),!a.serverURL&&a.autoPlay&&u.play(),u))},this.destroySound=function(e,t){if(!ut(e))return!1;var n=i.sounds[e],r;n._iO={},n.stop(),n.unload();for(r=0;r<i.soundIDs.length;r++)if(i.soundIDs[r]===e){i.soundIDs.splice(r,1);break}return t||n.destruct(!0),n=null,delete i.sounds[e],!0},this.load=function(e,t){return ut(e)?i.sounds[e].load(t):!1},this.unload=function(e){return ut(e)?i.sounds[e].unload():!1},this.onPosition=function(e,t,n,r){return ut(e)?i.sounds[e].onposition(t,n,r):!1},this.onposition=this.onPosition,this.clearOnPosition=function(e,t,n){return ut(e)?i.sounds[e].clearOnPosition(t,n):!1},this.play=function(e,t){return!S||!i.ok()?(ot(o+".play(): "+Z(S?"notOK":"notReady")),!1):ut(e)?i.sounds[e].play(t):(t instanceof Object||(t={url:t}),t&&t.url?(t.id=e,i.createSound(t).play()):!1)},this.start=this.play,this.setPosition=function(e,t){return ut(e)?i.sounds[e].setPosition(t):!1},this.stop=function(e){return ut(e)?i.sounds[e].stop():!1},this.stopAll=function(){var e;for(e in i.sounds)i.sounds.hasOwnProperty(e)&&i.sounds[e].stop()},this.pause=function(e){return ut(e)?i.sounds[e].pause():!1},this.pauseAll=function(){var e;for(e=i.soundIDs.length-1;e>=0;e--)i.sounds[i.soundIDs[e]].pause()},this.resume=function(e){return ut(e)?i.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=i.soundIDs.length-1;e>=0;e--)i.sounds[i.soundIDs[e]].resume()},this.togglePause=function(e){return ut(e)?i.sounds[e].togglePause():!1},this.setPan=function(e,t){return ut(e)?i.sounds[e].setPan(t):!1},this.setVolume=function(e,t){return ut(e)?i.sounds[e].setVolume(t):!1},this.mute=function(e){var t=0;typeof e!="string"&&(e=null);if(!e){for(t=i.soundIDs.length-1;t>=0;t--)i.sounds[i.soundIDs[t]].mute();return i.muted=!0,!0}return ut(e)?i.sounds[e].mute():!1},this.muteAll=function(){i.mute()},this.unmute=function(e){var t;typeof e!="string"&&(e=null);if(!e){for(t=i.soundIDs.length-1;t>=0;t--)i.sounds[i.soundIDs[t]].unmute();return i.muted=!1,!0}return ut(e)?i.sounds[e].unmute():!1},this.unmuteAll=function(){i.unmute()},this.toggleMute=function(e){return ut(e)?i.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;return s&&m!==8&&(e=parseInt(s._getMemoryUse(),10)),e},this.disable=function(e){var t;typeof e=="undefined"&&(e=!1);if(x)return!1;x=!0;for(t=i.soundIDs.length-1;t>=0;t--)J(i.sounds[i.soundIDs[t]]);return k(e),Tt.remove(c,"load",M),!0},this.canPlayMIME=function(e){var t;return i.hasHTML5&&(t=bt({type:e})),!mt||t?t:e&&i.ok()?!!((m>8?e.match(Kt):null)||e.match(i.mimePattern)):null},this.canPlayURL=function(e){var t;return i.hasHTML5&&(t=bt({url:e})),!mt||t?t:e&&i.ok()?!!e.match(i.filePattern):null},this.canPlayLink=function(e){return typeof e.type!="undefined"&&e.type&&i.canPlayMIME(e.type)?!0:i.canPlayURL(e.href)},this.getSoundById=function(e,t){if(!e)throw new Error(o+".getSoundById(): sID is null/undefined");var n=i.sounds[e];return n},this.onready=function(e,t){var n="onready";if(e&&e instanceof Function)return t||(t=c),A(n,e,t),O(),!0;throw Z("needFunction",n)},this.ontimeout=function(e,t){var n="ontimeout";if(e&&e instanceof Function)return t||(t=c),A(n,e,t),O({type:n}),!0;throw Z("needFunction",n)},this._writeDebug=function(e,t,n){return!0},this._wD=this._writeDebug,this._debug=function(){},this.reboot=function(){var e,t;for(e=i.soundIDs.length-1;e>=0;e--)i.sounds[i.soundIDs[e]].destruct();try{Ht&&(Y=s.innerHTML),G=s.parentNode.removeChild(s)}catch(n){}Y=G=mt=null,i.enabled=q=S=at=ft=w=E=x=i.swfLoaded=!1,i.soundIDs=[],i.sounds={},s=null;for(e in g)if(g.hasOwnProperty(e))for(t=g[e].length-1;t>=0;t--)g[e][t].fired=!1;c.setTimeout(i.beginDelayedInit,20)},this.getMoviePercent=function(){return s&&typeof s.PercentLoaded!="undefined"?s.PercentLoaded():null},this.beginDelayedInit=function(){T=!0,F(),setTimeout(function(){return ft?!1:(U(),j(),ft=!0,!0)},20),_()},this.destruct=function(){i.disable(!0)},r=function(e){var t=this,n,r,o,u,a,f,l=!1,c=[],h=0,p,d,v=null,g;g={duration:null,time:null},this.sID=e.id,this.url=e.url,this.options=L(e),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){},this.load=function(e){var n=null,r;typeof e!="undefined"?(t._iO=L(e,t.options),t.instanceOptions=t._iO):(e=t.options,t._iO=e,t.instanceOptions=t._iO,v&&v!==t.url&&(t._iO.url=t.url,t.url=null)),t._iO.url||(t._iO.url=t.url),t._iO.url=vt(t._iO.url);if(t._iO.url===t.url&&t.readyState!==0&&t.readyState!==2)return t.readyState===3&&t._iO.onload&&t._iO.onload.apply(t,[!!t.duration]),t;r=t._iO,v=t.url,t.loaded=!1,t.readyState=1,t.playState=0;if(yt(r))n=t._setup_html5(r),n._called_load||(t._html5_canplay=!1,t._a.autobuffer="auto",t._a.preload="auto",n.load(),n._called_load=!0,r.autoPlay&&t.play());else try{t.isHTML5=!1,t._iO=st(it(r)),r=t._iO,m===8?s._load(t.sID,r.url,r.stream,r.autoPlay,r.whileloading?1:0,r.loops||1,r.usePolicyFile):s._load(t.sID,r.url,!!r.stream,!!r.autoPlay,r.loops||1,!!r.autoLoad,r.usePolicyFile)}catch(i){z({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return t},this.unload=function(){return t.readyState!==0&&(t.isHTML5?(u(),t._a&&(t._a.pause(),Et(t._a))):m===8?s._unload(t.sID,Vt):s._unload(t.sID),n()),t},this.destruct=function(e){t.isHTML5?(u(),t._a&&(t._a.pause(),Et(t._a),Ct||o(),t._a._t=null,t._a=null)):(t._iO.onfailure=null,s._destroySound(t.sID)),e||i.destroySound(t.sID,!0)},this.play=function(e,n){var r,i,o,u;n=n===undefined?!0:n,e||(e={}),t._iO=L(e,t._iO),t._iO=L(t._iO,t.options),t._iO.url=vt(t._iO.url),t.instanceOptions=t._iO;if(t._iO.serverURL&&!t.connected)return t.getAutoPlay()||t.setAutoPlay(!0),t;yt(t._iO)&&(t._setup_html5(t._iO),a());if(t.playState===1&&!t.paused){i=t._iO.multiShot;if(!i)return t}if(!t.loaded)if(t.readyState===0)t.isHTML5||(t._iO.autoPlay=!0),t.load(t._iO);else if(t.readyState===2)return t;!t.isHTML5&&m===9&&t.position>0&&t.position===t.duration&&(e.position=0);if(t.paused&&t.position&&t.position>0)t.resume();else{t._iO=L(e,t._iO);if(t._iO.from!==null&&t._iO.to!==null&&t.instanceCount===0&&t.playState===0&&!t._iO.serverURL){u=function(){t._iO=L(e,t._iO),t.play(t._iO)};if(t.isHTML5&&!t._html5_canplay)return t.load({_oncanplay:u}),!1;if(!t.isHTML5&&!t.loaded&&(!t.readyState||t.readyState!==2))return t.load({onload:u}),!1;t._iO=d()}(!t.instanceCount||t._iO.multiShotEvents||!t.isHTML5&&m>8&&!t.getAutoPlay())&&t.instanceCount++,t.playState===0&&t._iO.onposition&&f(t),t.playState=1,t.paused=!1,t.position=typeof t._iO.position!="undefined"&&!isNaN(t._iO.position)?t._iO.position:0,t.isHTML5||(t._iO=st(it(t._iO))),t._iO.onplay&&n&&(t._iO.onplay.apply(t),l=!0),t.setVolume(t._iO.volume,!0),t.setPan(t._iO.pan,!0),t.isHTML5?(a(),o=t._setup_html5(),t.setPosition(t._iO.position),o.play()):s._start(t.sID,t._iO.loops||1,m===9?t._iO.position:t._iO.position/1e3)}return t},this.start=this.play,this.stop=function(e){var n=t._iO,r;return t.playState===1&&(t._onbufferchange(0),t._resetOnPosition(0),t.paused=!1,t.isHTML5||(t.playState=0),p(),n.to&&t.clearOnPosition(n.to),t.isHTML5?t._a&&(r=t.position,t.setPosition(0),t.position=r,t._a.pause(),t.playState=0,t._onTimer(),u()):(s._stop(t.sID,e),n.serverURL&&t.unload()),t.instanceCount=0,t._iO={},n.onstop&&n.onstop.apply(t)),t},this.setAutoPlay=function(e){t._iO.autoPlay=e,t.isHTML5||(s._setAutoPlay(t.sID,e),e&&!t.instanceCount&&t.readyState===1&&t.instanceCount++)},this.getAutoPlay=function(){return t._iO.autoPlay},this.setPosition=function(e){e===undefined&&(e=0);var n,r,i,o=t.isHTML5?Math.max(e,0):Math.min(t.duration||t._iO.duration,Math.max(e,0));n=t.position,t.position=o,i=t.position/1e3,t._resetOnPosition(t.position),t._iO.position=o;if(!t.isHTML5)r=m===9?t.position:i,t.readyState&&t.readyState!==2&&s._setPosition(t.sID,r,t.paused||!t.playState);else if(t._a&&t._html5_canplay&&t._a.currentTime!==i)try{t._a.currentTime=i,(t.playState===0||t.paused)&&t._a.pause()}catch(u){}return t.isHTML5&&t.paused&&t._onTimer(!0),t},this.pause=function(e){return t.paused||t.playState===0&&t.readyState!==1?t:(t.paused=!0,t.isHTML5?(t._setup_html5().pause(),u()):(e||e===undefined)&&s._pause(t.sID),t._iO.onpause&&t._iO.onpause.apply(t),t)},this.resume=function(){var e=t._iO;return t.paused?(t.paused=!1,t.playState=1,t.isHTML5?(t._setup_html5().play(),a()):(e.isMovieStar&&!e.serverURL&&t.setPosition(t.position),s._pause(t.sID)),!l&&e.onplay?(e.onplay.apply(t),l=!0):e.onresume&&e.onresume.apply(t),t):t},this.togglePause=function(){return t.playState===0?(t.play({position:m===9&&!t.isHTML5?t.position:t.position/1e3}),t):(t.paused?t.resume():t.pause(),t)},this.setPan=function(e,n){return typeof e=="undefined"&&(e=0),typeof n=="undefined"&&(n=!1),t.isHTML5||s._setPan(t.sID,e),t._iO.pan=e,n||(t.pan=e,t.options.pan=e),t},this.setVolume=function(e,n){return typeof e=="undefined"&&(e=100),typeof n=="undefined"&&(n=!1),t.isHTML5?t._a&&(t._a.volume=Math.max(0,Math.min(1,e/100))):s._setVolume(t.sID,i.muted&&!t.muted||t.muted?0:e),t._iO.volume=e,n||(t.volume=e,t.options.volume=e),t},this.mute=function(){return t.muted=!0,t.isHTML5?t._a&&(t._a.muted=!0):s._setVolume(t.sID,0),t},this.unmute=function(){t.muted=!1;var e=typeof t._iO.volume!="undefined";return t.isHTML5?t._a&&(t._a.muted=!1):s._setVolume(t.sID,e?t._iO.volume:t.options.volume),t},this.toggleMute=function(){return t.muted?t.unmute():t.mute()},this.onPosition=function(e,n,r){return c.push({position:parseInt(e,10),method:n,scope:typeof r!="undefined"?r:t,fired:!1}),t},this.onposition=this.onPosition,this.clearOnPosition=function(e,t){var n;e=parseInt(e,10);if(isNaN(e))return!1;for(n=0;n<c.length;n++)e===c[n].position&&(!t||t===c[n].method)&&(c[n].fired&&h--,c.splice(n,1))},this._processOnPosition=function(){var e,n,r=c.length;if(!r||!t.playState||h>=r)return!1;for(e=r-1;e>=0;e--)n=c[e],!n.fired&&t.position>=n.position&&(n.fired=!0,h++,n.method.apply(n.scope,[n.position]));return!0},this._resetOnPosition=function(e){var t,n,r=c.length;if(!r)return!1;for(t=r-1;t>=0;t--)n=c[t],n.fired&&e<=n.position&&(n.fired=!1,h--);return!0},d=function(){var e=t._iO,n=e.from,r=e.to,i,s;return s=function(){t.clearOnPosition(r,s),t.stop()},i=function(){r!==null&&!isNaN(r)&&t.onPosition(r,s)},n!==null&&!isNaN(n)&&(e.position=n,e.multiShot=!1,i()),e},f=function(){var e,n=t._iO.onposition;if(n)for(e in n)n.hasOwnProperty(e)&&t.onPosition(parseInt(e,10),n[e])},p=function(){var e,n=t._iO.onposition;if(n)for(e in n)n.hasOwnProperty(e)&&t.clearOnPosition(parseInt(e,10))},a=function(){t.isHTML5&&lt(t)},u=function(){t.isHTML5&&ct(t)},n=function(){c=[],h=0,l=!1,t._hasTimer=null,t._a=null,t._html5_canplay=!1,t.bytesLoaded=null,t.bytesTotal=null,t.duration=t._iO&&t._iO.duration?t._iO.duration:null,t.durationEstimate=null,t.eqData=[],t.eqData.left=[],t.eqData.right=[],t.failures=0,t.isBuffering=!1,t.instanceOptions={},t.instanceCount=0,t.loaded=!1,t.metadata={},t.readyState=0,t.muted=!1,t.paused=!1,t.peakData={left:0,right:0},t.waveformData={left:[],right:[]},t.playState=0,t.position=null},n(),this._onTimer=function(e){var n,r=!1,i,s={};if(t._hasTimer||e)return t._a&&(e||(t.playState>0||t.readyState===1)&&!t.paused)?(n=t._get_html5_duration(),n!==g.duration&&(g.duration=n,t.duration=n,r=!0),t.durationEstimate=t.duration,i=t._a.currentTime*1e3||0,i!==g.time&&(g.time=i,r=!0),(r||e)&&t._whileplaying(i,s,s,s,s),r):!1},this._get_html5_duration=function(){var e=t._iO,n=t._a?t._a.duration*1e3:e?e.duration:undefined,r=n&&!isNaN(n)&&n!==Infinity?n:e?e.duration:null;return r},this._setup_html5=function(e){var s=L(t._iO,e),o=decodeURI,u=Ct?i._global_a:t._a,a=o(s.url),f=u&&u._t?u._t.instanceOptions:null;if(u){if(u._t){if(!Ct&&a===o(v))return u;if(Ct&&f.url===s.url&&(!v||v===f.url))return u}Ct&&u._t&&u._t.playState&&s.url!==f.url&&u._t.stop(),n(),u.src=s.url,t.url=s.url,v=s.url,u._called_load=!1}else u=new Audio(s.url),u._called_load=!1,Pt&&(u._called_load=!0),Ct&&(i._global_a=u);return t.isHTML5=!0,t._a=u,u._t=t,r(),u.loop=s.loops>1?"loop":"",s.autoLoad||s.autoPlay?t.load():(u.autobuffer=!1,u.preload="none"),u.loop=s.loops>1?"loop":"",u},r=function(){function n(e,n,r){return t._a?t._a.addEventListener(e,n,r||!1):null}if(t._a._added_events)return!1;var e;t._a._added_events=!0;for(e in Ot)Ot.hasOwnProperty(e)&&n(e,Ot[e]);return!0},o=function(){function n(e,n,r){return t._a?t._a.removeEventListener(e,n,r||!1):null}var e;t._a._added_events=!1;for(e in Ot)Ot.hasOwnProperty(e)&&n(e,Ot[e])},this._onload=function(e){var n,r=!!e;return t.loaded=r,t.readyState=r?3:2,t._onbufferchange(0),t._iO.onload&&t._iO.onload.apply(t,[r]),!0},this._onbufferchange=function(e){return t.playState===0?!1:e&&t.isBuffering||!e&&!t.isBuffering?!1:(t.isBuffering=e===1,t._iO.onbufferchange&&t._iO.onbufferchange.apply(t),!0)},this._onsuspend=function(){return t._iO.onsuspend&&t._iO.onsuspend.apply(t),!0},this._onfailure=function(e,n,r){t.failures++,t._iO.onfailure&&t.failures===1&&t._iO.onfailure(t,e,n,r)},this._onfinish=function(){var e=t._iO.onfinish;t._onbufferchange(0),t._resetOnPosition(0),t.instanceCount&&(t.instanceCount--,t.instanceCount||(p(),t.playState=0,t.paused=!1,t.instanceCount=0,t.instanceOptions={},t._iO={},u()),(!t.instanceCount||t._iO.multiShotEvents)&&e&&e.apply(t))},this._whileloading=function(e,n,r,i){var s=t._iO;t.bytesLoaded=e,t.bytesTotal=n,t.duration=Math.floor(r),t.bufferLength=i,s.isMovieStar?(t.durationEstimate=t.duration,t.readyState!==3&&s.whileloading&&s.whileloading.apply(t)):(s.duration?t.durationEstimate=t.duration>s.duration?t.duration:s.duration:t.durationEstimate=parseInt(t.bytesTotal/t.bytesLoaded*t.duration,10),t.durationEstimate===undefined&&(t.durationEstimate=t.duration),t.readyState!==3&&s.whileloading&&s.whileloading.apply(t))},this._whileplaying=function(e,n,r,i,s){var o=t._iO,u;return isNaN(e)||e===null?!1:(t.position=e,t._processOnPosition(),!t.isHTML5&&m>8&&(o.usePeakData&&typeof n!="undefined"&&n&&(t.peakData={left:n.leftPeak,right:n.rightPeak}),o.useWaveformData&&typeof r!="undefined"&&r&&(t.waveformData={left:r.split(","),right:i.split(",")}),o.useEQData&&typeof s!="undefined"&&s&&s.leftEQ&&(u=s.leftEQ.split(","),t.eqData=u,t.eqData.left=u,typeof s.rightEQ!="undefined"&&s.rightEQ&&(t.eqData.right=s.rightEQ.split(",")))),t.playState===1&&(!t.isHTML5&&m===8&&!t.position&&t.isBuffering&&t._onbufferchange(0),o.whileplaying&&o.whileplaying.apply(t)),!0)},this._onmetadata=function(e,n){var r={},i,s;for(i=0,s=e.length;i<s;i++)r[e[i]]=n[i];t.metadata=r,t._iO.onmetadata&&t._iO.onmetadata.apply(t)},this._onid3=function(e,n){var r=[],i,s;for(i=0,s=e.length;i<s;i++)r[e[i]]=n[i];t.id3=L(t.id3,r),t._iO.onid3&&t._iO.onid3.apply(t)},this._onconnect=function(e){e=e===1,t.connected=e,e&&(t.failures=0,ut(t.sID)&&(t.getAutoPlay()?t.play(undefined,t.getAutoPlay()):t._iO.autoLoad&&t.load()),t._iO.onconnect&&t._iO.onconnect.apply(t,[e]))},this._ondataerror=function(e){t.playState>0&&t._iO.ondataerror&&t._iO.ondataerror.apply(t)}},R=function(){return p.body||p._docElement||p.getElementsByTagName("div")[0]},f=function(e){return p.getElementById(e)},L=function(e,t){var n={},r,s,o;for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);s=typeof t=="undefined"?i.defaultOptions:t;for(o in s)s.hasOwnProperty(o)&&typeof n[o]=="undefined"&&(n[o]=s[o]);return n},Tt=function(){function n(t){var n=Nt.call(t),r=n.length;return e?(n[1]="on"+n[1],r>3&&n.pop()):r===3&&n.push(!1),n}function r(n,r){var i=n.shift(),s=[t[r]];e?i[s](n[0],n[1]):i[s].apply(i,n)}function i(){r(n(arguments),"add")}function s(){r(n(arguments),"remove")}var e=c.attachEvent,t={add:e?"attachEvent":"addEventListener",remove:e?"detachEvent":"removeEventListener"};return{add:i,remove:s}}(),Ot={abort:Yt(function(){}),canplay:Yt(function(){var e=this._t,t;if(e._html5_canplay)return!0;e._html5_canplay=!0,e._onbufferchange(0),t=isNaN(e.position)?null:e.position/1e3;if(e.position&&this.currentTime!==t)try{this.currentTime=t}catch(n){}e._iO._oncanplay&&e._iO._oncanplay()}),load:Yt(function(){var e=this._t;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesTotal,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),ended:Yt(function(){var e=this._t;e._onfinish()}),error:Yt(function(){this._t._onload(!1)}),loadeddata:Yt(function(){var e=this._t,t=e.bytesTotal||1;!e._loaded&&!jt&&(e.duration=e._get_html5_duration(),e._whileloading(t,t,e._get_html5_duration()),e._onload(!0))}),loadedmetadata:Yt(function(){}),loadstart:Yt(function(){this._t._onbufferchange(1)}),play:Yt(function(){this._t._onbufferchange(0)}),playing:Yt(function(){this._t._onbufferchange(0)}),progress:Yt(function(e){var t=this._t,n,r,i,s=0,o=e.type==="progress",u=e.target.buffered,a=e.loaded||0,f=e.total||1;if(t.loaded)return!1;if(u&&u.length){for(n=u.length-1;n>=0;n--)s=u.end(n)-u.start(n);a=s/e.target.duration}isNaN(a)||(t._onbufferchange(0),t._whileloading(a,f,t._get_html5_duration()),a&&f&&a===f&&Ot.load.call(this,e))}),ratechange:Yt(function(){}),suspend:Yt(function(e){var t=this._t;Ot.progress.call(this,e),t._onsuspend()}),stalled:Yt(function(){}),timeupdate:Yt(function(){this._t._onTimer()}),waiting:Yt(function(){var e=this._t;e._onbufferchange(1)})},yt=function(e){return!e.serverURL&&(e.type?bt({type:e.type}):bt({url:e.url})||i.html5Only)},Et=function(e){e&&(e.src=Dt?"":Vt)},bt=function(e){function f(e){return i.preferFlash&&kt&&!i.ignoreFlash&&typeof i.flash[e]!="undefined"&&i.flash[e]}if(!i.useHTML5Audio||!i.hasHTML5)return!1;var t=e.url||null,n=e.type||null,r=i.audioFormats,s,o,u,a;if(n&&typeof i.html5[n]!="undefined")return i.html5[n]&&!f(n);if(!wt){wt=[];for(a in r)r.hasOwnProperty(a)&&(wt.push(a),r[a].related&&(wt=wt.concat(r[a].related)));wt=new RegExp("\\.("+wt.join("|")+")(\\?.*)?$","i")}u=t?t.toLowerCase().match(wt):null;if(!u||!u.length){if(!n)return!1;o=n.indexOf(";"),u=(o!==-1?n.substr(0,o):n).substr(6)}else u=u[1];return u&&typeof i.html5[u]!="undefined"?i.html5[u]&&!f(u):(n="audio/"+u,s=i.html5.canPlayType({type:n}),i.html5[u]=s,s&&i.html5[n]&&!f(n))},xt=function(){function o(t){var n,r,s,o=!1;if(!e||typeof e.canPlayType!="function")return!1;if(t instanceof Array){for(r=0,s=t.length;r<s&&!o;r++)if(i.html5[t[r]]||e.canPlayType(t[r]).match(i.html5Test))o=!0,i.html5[t[r]]=!0,i.flash[t[r]]=!!(i.preferFlash&&kt&&t[r].match(Xt));return o}return n=e&&typeof e.canPlayType=="function"?e.canPlayType(t):!1,!!n&&!!n.match(i.html5Test)}if(!i.useHTML5Audio||typeof Audio=="undefined")return!1;var e=typeof Audio!="undefined"?Ft?new Audio(null):new Audio:null,t,n={},r,s;r=i.audioFormats;for(t in r)if(r.hasOwnProperty(t)){n[t]=o(r[t].type),n["audio/"+t]=n[t],i.preferFlash&&!i.ignoreFlash&&t.match(Xt)?i.flash[t]=!0:i.flash[t]=!1;if(r[t]&&r[t].related)for(s=r[t].related.length-1;s>=0;s--)n["audio/"+r[t].related[s]]=n[t],i.html5[r[t].related[s]]=n[t],i.flash[r[t].related[s]]=n[t]}return n.canPlayType=e?o:null,i.html5=L(i.html5,n),!0},B={},Z=function(){},it=function(e){return m===8&&e.loops>1&&e.stream&&(e.stream=!1),e},st=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(e.usePolicyFile=!0),e},ot=function(e){},d=function(){return!1},J=function(e){var t;for(t in e)e.hasOwnProperty(t)&&typeof e[t]=="function"&&(e[t]=d);t=null},K=function(e){typeof e=="undefined"&&(e=!1),(x||e)&&i.disable(e)},Q=function(e){var t=null,n;if(e)if(e.match(/\.swf(\?.*)?$/i)){t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4);if(t)return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return n=(e&&e.lastIndexOf("/")!==-1?e.substr(0,e.lastIndexOf("/")+1):"./")+i.movieURL,i.noSWFCache&&(n+="?ts="+(new Date).getTime()),n},P=function(){m=parseInt(i.flashVersion,10),m!==8&&m!==9&&(i.flashVersion=m=$);var e=i.debugMode||i.debugFlash?"_debug.swf":".swf";i.useHTML5Audio&&!i.html5Only&&i.audioFormats.mp4.required&&m<9&&(i.flashVersion=m=9),i.version=i.versionNumber+(i.html5Only?" (HTML5-only mode)":m===9?" (AS3/Flash 9)":" (AS2/Flash 8)"),m>8?(i.defaultOptions=L(i.defaultOptions,i.flash9Options),i.features.buffering=!0,i.defaultOptions=L(i.defaultOptions,i.movieStarOptions),i.filePatterns.flash9=new RegExp("\\.(mp3|"+Qt.join("|")+")(\\?.*)?$","i"),i.features.movieStar=!0):i.features.movieStar=!1,i.filePattern=i.filePatterns[m!==8?"flash9":"flash8"],i.movieURL=(m===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),i.features.peakData=i.features.waveformData=i.features.eqData=m>8},W=function(e,t){if(!s)return!1;s._setPolling(e,t)},X=function(){i.debugURLParam.test(h)&&(i.debugMode=!0)},ut=this.getSoundById,tt=function(){var e=[];return i.debugMode&&e.push(nt.sm2Debug),i.debugFlash&&e.push(nt.flashDebug),i.useHighPerformance&&e.push(nt.highPerf),e.join(" ")},et=function(){var e=Z("fbHandler"),t=i.getMoviePercent(),n=nt,r={type:"FLASHBLOCK"};if(i.html5Only)return!1;i.ok()?i.oMC&&(i.oMC.className=[tt(),n.swfDefault,n.swfLoaded+(i.didFlashBlock?" "+n.swfUnblocked:"")].join(" ")):(mt&&(i.oMC.className=tt()+" "+n.swfDefault+" "+(t===null?n.swfTimedout:n.swfError)),i.didFlashBlock=!0,O({type:"ontimeout",ignoreInit:!0,error:r}),z(r))},A=function(e,t,n){typeof g[e]=="undefined"&&(g[e]=[]),g[e].push({method:t,scope:n||null,fired:!1})},O=function(e){e||(e={type:"onready"});if(!S&&e&&!e.ignoreInit)return!1;if(e.type==="ontimeout"&&i.ok())return!1;var t={success:e&&e.ignoreInit?i.ok():!x},n=e&&e.type?g[e.type]||[]:[],r=[],s,o,u=[t],a=mt&&i.useFlashBlock&&!i.ok();e.error&&(u[0].error=e.error);for(s=0,o=n.length;s<o;s++)n[s].fired!==!0&&r.push(n[s]);if(r.length)for(s=0,o=r.length;s<o;s++)r[s].scope?r[s].method.apply(r[s].scope,u):r[s].method.apply(this,u),a||(r[s].fired=!0);return!0},M=function(){c.setTimeout(function(){i.useFlashBlock&&et(),O(),i.onload instanceof Function&&i.onload.apply(c),i.waitForWindowLoad&&Tt.add(c,"load",M)},1)},Lt=function(){if(kt!==undefined)return kt;var e=!1,t=navigator,n=t.plugins,r,i,s,o=c.ActiveXObject;if(n&&n.length)i="application/x-shockwave-flash",s=t.mimeTypes,s&&s[i]&&s[i].enabledPlugin&&s[i].enabledPlugin.description&&(e=!0);else if(typeof o!="undefined"){try{r=new o("ShockwaveFlash.ShockwaveFlash")}catch(u){}e=!!r}return kt=e,e},gt=function(){var e,t,n=_t&&!!l.match(/os (1|2|3_0|3_1)/i);if(n)return i.hasHTML5=!1,i.html5Only=!0,i.oMC&&(i.oMC.style.display="none"),!1;if(!i.useHTML5Audio)return!0;if(!i.html5||!i.html5.canPlayType)return i.hasHTML5=!1,!0;i.hasHTML5=!0;if(qt&&Lt())return!0;for(t in i.audioFormats)i.audioFormats.hasOwnProperty(t)&&(i.audioFormats[t].required&&!i.html5.canPlayType(i.audioFormats[t].type)||i.flash[t]||i.flash[i.audioFormats[t].type])&&(e=!0);return i.ignoreFlash&&(e=!1),i.html5Only=i.hasHTML5&&i.useHTML5Audio&&!e,!i.html5Only},vt=function(e){var t,n,r=0;if(e instanceof Array){for(t=0,n=e.length;t<n;t++)if(e[t]instanceof Object){if(i.canPlayMIME(e[t].type)){r=t;break}}else if(i.canPlayURL(e[t])){r=t;break}return e[r].url&&(e[r]=e[r].url),e[r]}return e},lt=function(t){t._hasTimer||(t._hasTimer=!0,!It&&i.html5PollingInterval&&(dt===null&&pt===0&&(dt=e.setInterval(ht,i.html5PollingInterval)),pt++))},ct=function(e){e._hasTimer&&(e._hasTimer=!1,!It&&i.html5PollingInterval&&pt--)},ht=function(){var t;if(dt!==null&&!pt)return e.clearInterval(dt),dt=null,!1;for(t=i.soundIDs.length-1;t>=0;t--)i.sounds[i.soundIDs[t]].isHTML5&&i.sounds[i.soundIDs[t]]._hasTimer&&i.sounds[i.soundIDs[t]]._onTimer()},z=function(e){e=typeof e!="undefined"?e:{},i.onerror instanceof Function&&i.onerror.apply(c,[{type:typeof e.type!="undefined"?e.type:null}]),typeof e.fatal!="undefined"&&e.fatal&&i.disable()},At=function(){if(!qt||!Lt())return!1;var e=i.audioFormats,t,n;for(n in e)if(e.hasOwnProperty(n))if(n==="mp3"||n==="mp4"){i.html5[n]=!1;if(e[n]&&e[n].related)for(t=e[n].related.length-1;t>=0;t--)i.html5[e[n].related[t]]=!1}},this._setSandboxType=function(e){},this._externalInterfaceOK=function(e,t){if(i.swfLoaded)return!1;var n,r=(new Date).getTime();i.swfLoaded=!0,zt=!1,qt&&At(),Ht?setTimeout(v,100):v()},U=function(e,t){function n(){}function C(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(w&&E)return!1;if(i.html5Only)return P(),n(),i.oMC=f(i.movieID),v(),w=!0,E=!0,!1;var r=t||i.url,s=i.altURL||r,o="JS/Flash audio component (SoundManager 2)",u,a,c=R(),h,d,m,g=tt(),y,b,S,x=null,T=null,N=p.getElementsByTagName("html")[0];T=N&&N.dir&&N.dir.match(/rtl/i),e=typeof e=="undefined"?i.id:e,P(),i.url=Q($t?r:s),t=i.url,i.wmode=!i.wmode&&i.useHighPerformance?"transparent":i.wmode,i.wmode!==null&&(l.match(/msie 8/i)||!Ht&&!i.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(i.wmode=null),u={name:e,id:e,src:t,quality:"high",allowScriptAccess:i.allowScriptAccess,bgcolor:i.bgColor,pluginspage:Jt+"www.macromedia.com/go/getflashplayer",title:o,type:"application/x-shockwave-flash",wmode:i.wmode,hasPriority:"true"},x!==null&&(u.width=x,u.height=x),i.debugFlash&&(u.FlashVars="debug=1"),i.wmode||delete u.wmode;if(Ht)a=p.createElement("div"),d=['<object id="'+e+'" data="'+t+'" type="'+u.type+'" title="'+u.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Jt+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" width="'+u.width+'" height="'+u.height+'">',C("movie",t),C("AllowScriptAccess",i.allowScriptAccess),C("quality",u.quality),i.wmode?C("wmode",i.wmode):"",C("bgcolor",i.bgColor),C("hasPriority","true"),i.debugFlash?C("FlashVars",u.FlashVars):"","</object>"].join("");else{a=p.createElement("embed");for(h in u)u.hasOwnProperty(h)&&a.setAttribute(h,u[h])}X(),g=tt(),c=R();if(c){i.oMC=f(i.movieID)||p.createElement("div");if(!i.oMC.id){i.oMC.id=i.movieID,i.oMC.className=nt.swfDefault+" "+g,y=null,m=null,i.useFlashBlock||(i.useHighPerformance?y={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(y={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},T&&(y.left=Math.abs(parseInt(y.left,10))+"px"))),Bt&&(i.oMC.style.zIndex=1e4);if(!i.debugFlash)for(b in y)y.hasOwnProperty(b)&&(i.oMC.style[b]=y[b]);try{Ht||i.oMC.appendChild(a),c.appendChild(i.oMC),Ht&&(m=i.oMC.appendChild(p.createElement("div")),m.className=nt.swfBox,m.innerHTML=d),E=!0}catch(k){throw new Error(Z("domError")+" \n"+k.toString())}}else S=i.oMC.className,i.oMC.className=(S?S+" ":nt.swfDefault)+(g?" "+g:""),i.oMC.appendChild(a),Ht&&(m=i.oMC.appendChild(p.createElement("div")),m.className=nt.swfBox,m.innerHTML=d),E=!0}return w=!0,n(),!0},j=function(){return i.html5Only?(U(),!1):s?!1:(s=i.getMovie(i.id),s||(G?(Ht?i.oMC.innerHTML=Y:i.oMC.appendChild(G),G=null,w=!0):U(i.id,i.url),s=i.getMovie(i.id)),i.oninitmovie instanceof Function&&setTimeout(i.oninitmovie,1),!0)},_=function(){setTimeout(D,1e3)},D=function(){if(at)return!1;at=!0,Tt.remove(c,"load",_);if(zt&&!Ut)return!1;var e;S||(e=i.getMoviePercent()),setTimeout(function(){e=i.getMoviePercent(),!S&&Wt&&(e===null?i.useFlashBlock||i.flashLoadTimeout===0?i.useFlashBlock&&et():K(!0):i.flashLoadTimeout!==0&&K(!0))},i.flashLoadTimeout)},H=function(){function e(){Tt.remove(c,"focus",H),Tt.remove(c,"load",H)}return Ut||!zt?(e(),!0):(Wt=!0,Ut=!0,jt&&zt&&Tt.remove(c,"mousemove",H),at=!1,e(),!0)},Mt=function(){var e,t=[];if(i.useHTML5Audio&&i.hasHTML5)for(e in i.audioFormats)i.audioFormats.hasOwnProperty(e)&&t.push(e+": "+i.html5[e]+(!i.html5[e]&&kt&&i.flash[e]?" (using flash)":i.preferFlash&&i.flash[e]&&kt?" (preferring flash)":i.html5[e]?"":" ("+(i.audioFormats[e].required?"required, ":"")+"and no flash support)"))},k=function(e){if(S)return!1;if(i.html5Only)return S=!0,M(),!0;var t=i.useFlashBlock&&i.flashLoadTimeout&&!i.getMoviePercent(),n;return t||(S=!0,x&&(n={type:!kt&&mt?"NO_FLASH":"INIT_TIMEOUT"})),x||e?(i.useFlashBlock&&i.oMC&&(i.oMC.className=tt()+" "+(i.getMoviePercent()===null?nt.swfTimedout:nt.swfError)),O({type:"ontimeout",error:n}),z(n),!1):i.waitForWindowLoad&&!T?(Tt.add(c,"load",M),!1):(M(),!0)},v=function(){function e(){Tt.remove(c,"load",i.beginDelayedInit)}if(S)return!1;if(i.html5Only)return S||(e(),i.enabled=!0,k()),!0;j();try{s._externalInterfaceTest(!1),W(!0,i.flashPollingInterval||(i.useHighPerformance?10:50)),i.debugMode||s._disableDebug(),i.enabled=!0,i.html5Only||Tt.add(c,"unload",d)}catch(t){return z({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),K(!0),k(),!1}return k(),e(),!0},F=function(){return q?!1:(q=!0,X(),!kt&&i.hasHTML5&&(i.useHTML5Audio=!0,i.preferFlash=!1),xt(),i.html5.usingFlash=gt(),mt=i.html5.usingFlash,Mt(),!kt&&mt&&(i.flashLoadTimeout=1),p.removeEventListener&&p.removeEventListener("DOMContentLoaded",F,!1),j(),!0)},St=function(){return p.readyState==="complete"&&(F(),p.detachEvent("onreadystatechange",St)),!0},I=function(){T=!0,Tt.remove(c,"load",I)},Lt(),Tt.add(c,"focus",H),Tt.add(c,"load",H),Tt.add(c,"load",_),Tt.add(c,"load",I),jt&&zt&&Tt.add(c,"mousemove",H),p.addEventListener?p.addEventListener("DOMContentLoaded",F,!1):p.attachEvent?p.attachEvent("onreadystatechange",St):z({type:"NO_DOM2_EVENTS",fatal:!0}),p.readyState==="complete"&&setTimeout(F,100)}var t=null;if(typeof SM2_DEFER=="undefined"||!SM2_DEFER)t=new n;e.SoundManager=n,e.soundManager=t}(window),define("soundmanager",function(){}),define("plex/control/init/SoundManagerInit",["soundmanager"],function(){soundManager=new SoundManager,soundManager.url="swf/soundmanager",soundManager.flashVersion=9,soundManager.flashLoadTimeout=0,soundManager.useFastPolling=!0,soundManager.useHighPerformance=!0,soundManager.beginDelayedInit()}),define("plex/control/commands/ShowLoadingCommand",["plex/control/Dispatcher","plex/model/AppModel"],function(e,t){function r(e){n<0&&(n=0),e===!0?(n===0&&t.set({loading:!0}),n++):(n--,n===0&&t.set({loading:!1}))}var n=0;e.on("command:ShowLoading",r)}),define("plex/model/UpdateHistoryModel",["plex/model/BaseModel","moment"],function(e){var t=e.extend({parse:function(e){var t=$.xml2json(e)||e,n={_cacheKey:null,summary:t.summary,name:t.name,time:moment(t.subtitle,"YYYY-MM-DD HH:mm:ss").toDate()};return n}});return t}),define("plex/model/collections/UpdateHistoryCollection",["plex/model/collections/BaseCollection","plex/model/UpdateHistoryModel"],function(e,t){var n=e.extend({model:t,url:"/system/appstore/history",initialize:function(e,t){this.server=t.server},parse:function(e){return $.xml2json(e).Directory}});return n}),define("plex/control/commands/CheckForUpdatesCommand",["plex/control/Dispatcher","plex/model/AppModel","plex/model/collections/UpdateHistoryCollection","xml2json"],function(e,t,n){function i(){var e="/system/appstore/updates",n=t.get("primaryServer");$.ajax({url:n.resolveUrl(e),headers:n.getHeaders(),success:function(e){var n=$.xml2json(e);if(n.Directory){var r=n.Directory[0].summary.split("\n");_.indexOf(r,"WebClient")>=0&&t.set("updateStatus","download")}}})}function s(){var e=new n([],{server:t.get("primaryServer")}),i={"X-Plex-Container-Start":"0","X-Plex-Container-Size":r?"40":"1"};e.on("reset",function(e){if(e.length==0)return;if(!r)r=e.first().get("time");else{var n=e.where({name:"WebClient"});n.length>0&&n[0].get("time")>r&&t.set("updateStatus","reload")}}),e.fetch({headers:i,hideLoadingAlert:!0})}function o(e){if(t.get("updateStatus")=="download")return;if(t.get("primaryServer").get("shared"))return;e&&i(),s()}var r=null;e.on("command:CheckForUpdates",o)}),define("plex/control/commands/InstallUpdateCommand",["plex/control/Dispatcher","plex/model/AppModel"],function(e,t){function n(){var n=t.get("primaryServer"),r="/system/appstore/apps/com.plexapp.plugins.webclient/update";e.trigger("command:ShowLoading",!0),$.ajax({url:n.resolveUrl(r),headers:n.getHeaders()}).always(function(){e.trigger("command:ShowLoading",!1)}).done(function(e){window.location.reload(!0)}).fail(function(){t.set("alert",{status:"error",message:"There was a problem installing the update."})})}e.on("command:InstallUpdate",n)}),define("plex/control/commands/SignOutCommand",["plex/control/Dispatcher"],function(e){function t(){sessionStorage.clear(),localStorage.removeItem("myPlexAuthToken"),window.location.reload(!0)}e.on("command:SignOut",t)}),define("plex/control/commands/myplex/PublishServerCommand",["plex/control/Dispatcher","plex/model/AppModel"],function(e,t){function n(e,n,r){var i=e.get("preferences"),s=i.get("PublishServerOnPlexOnlineKey");s.save({PublishServerOnPlexOnlineKey:n},{hideLoadingAlert:!0}).done(function(){r()}).fail(function(){var e="There was a problem publishing your server.";n||(e="There was a problem unpublishing your server."),t.set("alert",{status:"error",message:e})})}e.on("command:PublishServer",n)}),define("plex/control/commands/myplex/ServerSignInCommand",["plex/control/Dispatcher","plex/model/AppModel","xml2json"],function(e,t){function n(e,n,r){e.signedIn=!0,e.set({username:"",password:""}),e.save(n).done(function(e){var n=$.xml2json(e)||e;n&&n.signInState==="invalid"?t.set("alert",{status:"error",message:"The email or password entered is invalid."}):r()}).fail(function(e){var n="There was a problem signing in to myPlex.";e.status===401&&(n="The username or password is incorrect."),t.set("alert",{status:"error",message:n})})}e.on("command:ServerSignIn",n)}),define("plex/control/commands/myplex/ServerSignOutCommand",["plex/control/Dispatcher","plex/model/AppModel"],function(e,t){function n(e,n){e.destroy().done(n).fail(function(){t.set("alert",{status:"error",message:"There was a problem signing out of myPlex."})})}e.on("command:ServerSignOut",n)}),define("plex/control/commands/myplex/ServerSignUpCommand",["plex/control/Dispatcher","plex/model/AppModel","xml2json"],function(e,t){function n(e,n,r){e.signedIn=!1,e.set({username:"",email:"",password:""}),e.save(n).done(function(e){var n=$.xml2json(e)||e;n&&n.signInState==="invalid"?t.set("alert",{status:"error",message:"The email or password is invalid."}):r()}).fail(function(){t.set("alert",{status:"error",message:"There was a problem signing up for a myPlex account."})})}e.on("command:ServerSignUp",n)}),define("plex/control/commands/library/StartLibraryScanCommand",["plex/control/Dispatcher"],function(e){function t(e,t,n){t=t?t.id:"all",n||(n={});var r={};n.force&&(r.force=1),n.turbo&&(r.turbo=1),n.deep&&(r.deep=1),$.ajax({type:"GET",url:e.resolveUrl("/library/sections/"+t+"/refresh"),headers:e.getHeaders(),data:r})}e.on("command:StartLibraryScan",t)}),define("plex/control/commands/library/StopLibraryScanCommand",["plex/control/Dispatcher"],function(e){function t(e,t){$.ajax({type:"DELETE",url:e.resolveUrl("/library/sections/"+t.id+"/refresh"),headers:e.getHeaders()})}e.on("command:StopLibraryScan",t)}),define("plex/control/commands/library/StartMediaAnalysisCommand",["plex/control/Dispatcher"],function(e){function t(e,t){$.ajax({type:"PUT",url:e.resolveUrl("/library/sections/"+t.id+"/analyze"),headers:e.getHeaders()})}e.on("command:StartMediaAnalysis",t)}),define("plex/control/commands/library/OptimizeLibraryCommand",["plex/control/Dispatcher"],function(e){function t(t,n){e.trigger("command:ShowLoading",!0),$.ajax({type:"PUT",url:t.resolveUrl("/library/optimize"),headers:t.getHeaders()}).always(function(){e.trigger("command:ShowLoading",!1),n()})}e.on("command:OptimizeLibrary",t)}),define("plex/control/commands/library/EmptyTrashCommand",["plex/control/Dispatcher","plex/model/AppModel"],function(e,t){function n(e,n){$.ajax({type:"PUT",url:e.resolveUrl("/library/sections/"+n.id+"/emptyTrash"),headers:e.getHeaders()}).done(function(){t.set("alert",{status:"success",message:"The trash for "+n.get("title")+" was emptied."})}).fail(function(){t.set("alert",{status:"error",message:"There was a problem emptying the trash for "+n.get("title")+"."})})}e.on("command:EmptyTrash",n)}),define("hb!templates/modals/ConfirmModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal">Ã</button>\n	<h3><i class="icon-warning-sign"></i> ',u=n.title,o=u||t.title,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"title",{hash:{}})),s+=h(o)+'</h3>\n</div>\n\n<div class="modal-body">',u=n.message,o=u||t.message,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"message",{hash:{}})),s+=h(o)+'</div>\n\n<div class="modal-footer pull-center">\n	<button class="btn btn-large btn-primary yes-btn">Yes</button>\n	<button class="btn btn-large btn-inverse no-btn">No</button>\n</div>\n',s})}),define("plex/view/BaseView",["plex/control/init/HandlebarsInit","backbone"],function(){var e=Backbone.View.extend({constructor:function(e){this._views=[],this._bindings=[],Backbone.View.call(this,e)},registerView:function(t){if(t instanceof e!=1)throw"Only views that extend BaseView can be registered.";return this._views.push(t),t},removeView:function(e){var t=_.indexOf(this._views,e);return e.destroy(),t>-1&&this._views.splice(t,1),e},removeAllViews:function(){for(var e=this._views.length-1;e>=0;e--)this.removeView(this._views[e])},addBinding:function(e,t,n){e.on(t,n,this),this._bindings.push({target:e,event:t,callback:n})},removeBinding:function(e,t,n){e.off(t,n);var r=this._bindings.length;while(r--){var i=this._bindings[r];i.target===e&&i.event===t&&i.callback===n&&this._bindings.splice(r,1)}},removeAllBindings:function(){_.each(this._bindings,function(e){e.target.off(e.event,e.callback)}),this._bindings.length=0},bindView:function(){if(!this.bindings)return;_.each(_.keys(this.bindings),_.bind(function(e){var t=this.bindings[e],n=_.bind(function(n,r){var i=this.$(e);if(t.format){r=t.format.call(this,i,r);if(typeof r=="undefined")return}t.hideEmpty&&(r?i.removeClass("hide"):i.addClass("hide")),i.html(r)},this);n(this.model,this.model.get(t.modelAttr)),this.addBinding(this.model,"change:"+t.modelAttr,n)},this))},destroy:function(){return this.undelegateEvents(),this.removeAllBindings(),this.removeAllViews(),this.remove(),this}});return e}),define("plex/view/modals/ConfirmModal",["hb!templates/modals/ConfirmModal.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({className:"modal modal-small confirm-modal fade",title:null,message:null,events:{hidden:"onClose","click .no-btn":"onNo","click .yes-btn":"onYes"},initialize:function(e){this.title=e.title,this.message=e.message},render:function(){return this.$el.html(e({title:this.title,message:this.message})).modal(),this},onClose:function(e){t.trigger("destroy:modal",this)},onNo:function(e){e.preventDefault(),this.trigger("no"),this.$el.modal("hide")},onYes:function(e){e.preventDefault(),this.trigger("yes"),this.$el.modal("hide")}});return r}),define("plex/control/commands/library/DeleteSectionCommand",["plex/control/Dispatcher","plex/model/AppModel","plex/view/modals/ConfirmModal"],function(e,t,n){function r(e){var r=new n({title:"Delete Section",message:"Are you sure you want to delete "+e.get("title")+"? This cannot be undone."});r.on("yes",function(){e.destroy({wait:!0})}),t.set("modal",r)}e.on("command:DeleteSection",r)}),define("plex/control/commands/media/DeleteMediaCommand",["plex/control/Dispatcher","plex/model/AppModel","plex/view/modals/ConfirmModal"],function(e,t,n){function r(r){var i=new n({title:"Delete Media",message:"Are you sure you want to delete "+r.get("title")+"? This media will be deleted from your filesystem."});i.on("yes",function(){r.destroy({wait:!0}).done(function(){e.trigger("navigate:section",r.server.id,r.section.id)}).fail(function(e){var n="There was a problem deleting "+r.get("title")+".";e.status===403&&(n='"Allow clients to delete media" must be enabled in your server preferences.'),t.set("alert",{status:"error",message:n})})}),t.set("modal",i)}e.on("command:DeleteMedia",r)}),define("plex/control/commands/media/RefreshMetadataCommand",["plex/control/Dispatcher"],function(e){function t(e){var t="/library/metadata/"+e.get("ratingKey")+"/refresh";$.ajax({type:"PUT",url:e.server.resolveUrl(t),headers:e.server.getHeaders(),dataType:"text"})}e.on("command:RefreshMetadata",t)}),define("plex/control/commands/media/MarkWatchedCommand",["plex/control/Dispatcher","plex/model/AppModel"],function(e,t){function n(n){var r="/:/scrobble?key="+n.get("ratingKey")+"&identifier="+n.get("identifier");e.trigger("command:ShowLoading",!0),$.ajax({url:n.server.resolveUrl(r),headers:n.server.getHeaders(),dataType:"text"}).always(function(){e.trigger("command:ShowLoading",!1)}).done(function(){n.set("viewCount",1),n.set("viewOffset",0)}).fail(function(){t.set("alert",{status:"error",message:"There was a problem marking "+n.get("title")+" as watched."})})}e.on("command:MarkWatched",n)}),define("plex/control/commands/media/MarkUnwatchedCommand",["plex/control/Dispatcher","plex/model/AppModel"],function(e,t){function n(n){var r="/:/unscrobble?key="+n.get("ratingKey")+"&identifier="+n.get("identifier");e.trigger("command:ShowLoading",!0),$.ajax({url:n.server.resolveUrl(r),headers:n.server.getHeaders(),dataType:"text"}).always(function(){e.trigger("command:ShowLoading",!1)}).done(function(){n.set("viewCount",0),n.set("viewOffset",0)}).fail(function(){t.set("alert",{status:"error",message:"There was a problem marking "+n.get("title")+" as unwatched."})})}e.on("command:MarkUnwatched",n)}),define("plex/control/commands/media/MatchUsingCommand",["plex/control/Dispatcher","plex/model/AppModel","xml2json"],function(e,t){function n(n,r){var i={agent:r.id,manual:0},s="/library/metadata/"+n.get("ratingKey")+"/matches?"+$.param(i);e.trigger("command:ShowLoading",!0),$.ajax({type:"GET",url:n.server.resolveUrl(s),headers:n.server.getHeaders(),dataType:"text"}).always(function(){e.trigger("command:ShowLoading",!1)}).done(function(r){var o=$.xml2json(r)||r;if(o.SearchResult){var u=o.SearchResult;_.isArray(o.SearchResult)&&(u=o.SearchResult[0]),i={guid:u.guid,name:u.name},s="/library/metadata/"+n.get("ratingKey")+"/match?"+$.param(i),$.ajax({type:"PUT",url:n.server.resolveUrl(s),headers:n.server.getHeaders(),dataType:"text"}).done(function(){e.trigger("hide:fixMatchModal")}).fail(function(){t.set("alert",{status:"error",message:"There was a problem matching this media."})})}else t.set("alert",{status:"error",message:"No matches were found using this agent."})}).fail(function(){t.set("alert",{status:"error",message:"There was a problem looking for matches."})})}e.on("command:MatchUsing",n)}),define("plex/control/commands/media/UnmatchCommand",["plex/control/Dispatcher","plex/model/AppModel"],function(e,t){function n(n){var r="/library/metadata/"+n.get("ratingKey")+"/unmatch";e.trigger("command:ShowLoading",!0),$.ajax({type:"PUT",url:n.server.resolveUrl(r),headers:n.server.getHeaders(),dataType:"text"}).always(function(){e.trigger("command:ShowLoading",!1)}).fail(function(){t.set("alert",{status:"error",message:"There was a problem unmatching "+n.get("title")+"."})})}e.on("command:Unmatch",n)}),define("plex/control/commands/media/SplitApartCommand",["plex/control/Dispatcher","plex/model/AppModel"],function(e,t){function n(n){var r="/library/metadata/"+n.get("ratingKey")+"/split";e.trigger("command:ShowLoading",!0),$.ajax({type:"PUT",url:n.server.resolveUrl(r),headers:n.server.getHeaders(),dataType:"text"}).always(function(){e.trigger("command:ShowLoading",!1)}).done(function(){n.set("Media",n.get("Media")[0])}).fail(function(){t.set("alert",{status:"error",message:"There was a problem splitting "+n.get("title")+"."})})}e.on("command:SplitApart",n)}),define("plex/control/commands/channel/ChannelActionCommand",["plex/control/Dispatcher","plex/model/AppModel","xml2json"],function(e,t){function n(n,r,i){e.trigger("command:ShowLoading",!0),$.ajax({url:n.server.resolveUrl(r),headers:n.server.getHeaders()}).always(function(){e.trigger("command:ShowLoading",!1),i&&i()}).done(function(e){var r=$.xml2json(e)||e;n.set("installed",1),r.message&&t.set("alert",{status:"success",message:r.message})}).fail(function(){t.set("alert",{status:"error",message:"There was a problem trying to perform this action on "+n.get("title")+"."})})}e.on("command:ChannelAction",n)}),define("plex/control/commands/channel/UpdateChannelCommand",["plex/control/Dispatcher","plex/model/AppModel","xml2json"],function(e,t){function n(n,r){var i="/system/appstore/apps/"+n.get("identifier")+"/update";e.trigger("command:ShowLoading",!0),$.ajax({url:n.server.resolveUrl(i),headers:n.server.getHeaders()}).always(function(){e.trigger("command:ShowLoading",!1),r&&r()}).done(function(e){var n=$.xml2json(e)||e;n.message&&t.set("alert",{status:"success",message:n.message})}).fail(function(){t.set("alert",{status:"error",message:"There was a problem updating "+n.get("title")+"."})})}e.on("command:UpdateChannel",n)}),define("plex/control/commands/channel/UninstallChannelCommand",["plex/control/Dispatcher","plex/model/AppModel","plex/view/modals/ConfirmModal","xml2json"],function(e,t,n){function r(r,i){var s="/system/appstore/apps/"+r.get("identifier")+"/uninstall",o=new n({title:"Uninstall Channel",message:"Are you sure you want to uninstall "+r.get("title")+"?"});o.on("yes",function(){t.set("modal",o),e.trigger("command:ShowLoading",!0),$.ajax({url:r.server.resolveUrl(s),headers:r.server.getHeaders()}).always(function(){e.trigger("command:ShowLoading",!1),i&&i()}).done(function(e){var n=$.xml2json(e)||e;r.set("installed",0),n.message&&t.set("alert",{status:"success",message:n.message})}).fail(function(){t.set("alert",{status:"error",message:"There was a problem uninstalling "+r.get("title")+"."})})}),t.set("modal",o)}e.on("command:UninstallChannel",r)}),define("plex/control/Commands",["plex/control/commands/ShowLoadingCommand","plex/control/commands/CheckForUpdatesCommand","plex/control/commands/InstallUpdateCommand","plex/control/commands/SignOutCommand","plex/control/commands/myplex/PublishServerCommand","plex/control/commands/myplex/ServerSignInCommand","plex/control/commands/myplex/ServerSignOutCommand","plex/control/commands/myplex/ServerSignUpCommand","plex/control/commands/library/StartLibraryScanCommand","plex/control/commands/library/StopLibraryScanCommand","plex/control/commands/library/StartMediaAnalysisCommand","plex/control/commands/library/OptimizeLibraryCommand","plex/control/commands/library/EmptyTrashCommand","plex/control/commands/library/DeleteSectionCommand","plex/control/commands/media/DeleteMediaCommand","plex/control/commands/media/RefreshMetadataCommand","plex/control/commands/media/MarkWatchedCommand","plex/control/commands/media/MarkUnwatchedCommand","plex/control/commands/media/MatchUsingCommand","plex/control/commands/media/UnmatchCommand","plex/control/commands/media/SplitApartCommand","plex/control/commands/channel/ChannelActionCommand","plex/control/commands/channel/UpdateChannelCommand","plex/control/commands/channel/UninstallChannelCommand"],function(){});var FastClick=function(){function r(e){return n=!0,t.x=e.targetTouches[0].clientX,t.y=e.targetTouches[0].clientY,t.scroll=window.pageYOffset,!0}function i(e){return n&&(Math.abs(e.targetTouches[0].clientX-t.x)>10||Math.abs(e.targetTouches[0].clientY-t.y)>10)&&(n=!1),!0}function s(e){var r,i;if(!n||Math.abs(window.pageYOffset-t.scroll)>5)return!0;r=document.elementFromPoint(t.x,t.y),r.nodeType===Node.TEXT_NODE&&(r=r.parentNode);if(r.className.indexOf("clickevent")===-1||r.className.indexOf("touchandclickevent")!==-1)i=document.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,window,1,0,0,t.x,t.y,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,r.dispatchEvent(i);if(r instanceof HTMLSelectElement||r.className.indexOf("clickevent")!==-1)return!1;e.preventDefault()}function o(e){n=!1}function u(n){if(!window.event)return!0;var r=!0,i,s=window.event.forwardedTouchEvent;if(e){i=document.elementFromPoint(t.x,t.y);if(!i||!s&&i.className.indexOf("clickevent")==-1)r=!1}return r?!0:(n.stopPropagation(),n.preventDefault(),n.stopImmediatePropagation(),!1)}var e="ontouchstart"in window;e&&(document.body.addEventListener("touchstart",r,!0),document.body.addEventListener("touchmove",i,!0),document.body.addEventListener("touchend",s,!0),document.body.addEventListener("touchcancel",o,!0)),document.body.addEventListener("click",u,!0),document.body.onclick instanceof Function&&(document.body.addEventListener("click",document.body.onclick,!1),document.body.onclick="");var t={x:0,y:0,scroll:0},n=!1}();define("fastclick",function(){}),!function(e){e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),define("transition",function(){}),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.parent('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")},e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(function(){e("body").on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})})}(window.jQuery),define("button",function(){}),!function(e){function r(){e(t).parent().removeClass("open")}var t='[data-toggle="dropdown"]',n=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(t){var n=e(this),i,s,o;if(n.is(".disabled, :disabled"))return;return s=n.attr("data-target"),s||(s=n.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),i=e(s),i.length||(i=n.parent()),o=i.hasClass("open"),r(),o||i.toggleClass("open"),!1}},e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("dropdown");i||r.data("dropdown",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e(function(){e("html").on("click.dropdown.data-api",r),e("body").on("click.dropdown",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",t,n.prototype.toggle)})}(window.jQuery),define("dropdown",function(){}),!function(e){function n(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),r.call(t)},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),r.call(t)})}function r(e){this.$element.hide().trigger("hidden"),i.call(this)}function i(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(s,this)):s.call(this)):t&&t()}function s(){this.$backdrop.remove(),this.$backdrop=null}function o(){var t=this;this.isShown&&this.options.keyboard?e(document).on("keyup.dismiss.modal",function(e){e.which==27&&t.hide()}):this.isShown||e(document).off("keyup.dismiss.modal")}var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this))};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;e("body").addClass("modal-open"),this.isShown=!0,o.call(this),i.call(this,function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in"),n?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")})},hide:function(t){t&&t.preventDefault();var i=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,e("body").removeClass("modal-open"),o.call(this),this.$element.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?n.call(this):r.call(this)}},e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({},i.data(),n.data());t.preventDefault(),i.modal(s)})})}(window.jQuery),define("modal",function(){}),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){if("ontouchstart"in window)return;var i,s;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,this.options.trigger!="manual"&&(i=this.options.trigger=="hover"?"mouseenter":"focus",s=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(i,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var t,n,r,i,s,o,u;if(this.hasContent()&&this.enabled){t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),o=typeof this.options.placement=="function"?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,n=/in/.test(o),t.remove().css({top:0,left:0,display:"block"}).appendTo(n?this.$element:document.body),r=this.getPosition(n),this.$element.data("tooltip-position")==="fixed"&&(r.top-=e(window).scrollTop(),r.left-=e(window).scrollLeft(),t.addClass("tooltip-fixed")),i=t[0].offsetWidth,s=t[0].offsetHeight;switch(n?o.split(" ")[1]:o){case"bottom":u={top:r.top+r.height,left:r.left+r.width/2-i/2};break;case"top":u={top:r.top-s,left:r.left+r.width/2-i/2};break;case"left":u={top:r.top+r.height/2-s/2,left:r.left-i};break;case"right":u={top:r.top+r.height/2-s/2,left:r.left+r.width}}t.css(u).addClass(o).addClass("in")}},isHTML:function(e){return typeof e!="string"||e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(e)},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.isHTML(t)?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function r(){var t=setTimeout(function(){n.off(e.support.transition.end).remove()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.remove()})}var t=this,n=this.tip();n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r():n.remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0}}(window.jQuery),define("tooltip",function(){}),!function(e){var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.isHTML(t)?"html":"text"](t),e.find(".popover-content > *")[this.isHTML(n)?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip}}),e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),define("popover",function(){}),define("plex/control/init/GlobalInit",["plex/control/init/jQueryInit","plex/control/init/BackboneInit","plex/control/init/HandlebarsInit","plex/control/init/SoundManagerInit","plex/control/Commands","fastclick","transition","button","dropdown","modal","tooltip","popover"],function(){}),define("plex/model/media/MovieModel",["plex/model/media/MediaModel"],function(e){var t=e.extend();return t}),define("plex/model/media/EpisodeModel",["plex/model/media/MediaModel"],function(e){var t=e.extend({parse:function(t){var n=e.prototype.parse.call(this,t);return n.watched=n.viewCount>0,n}});return t}),define("plex/model/media/collections/EpisodeCollection",["plex/model/collections/BaseCollection","plex/model/media/EpisodeModel"],function(e,t){var n=e.extend({model:t,url:function(){return this.media.get("key")},initialize:function(e,t){this.server=t.server,this.section=t.section,this.media=t.media,t.url&&(this.url=t.url)},parse:function(e){var t=$.xml2json(e).Video;return t}});return n}),define("plex/model/media/SeasonModel",["plex/model/media/MediaModel","plex/model/media/collections/EpisodeCollection"],function(e,t){var n=e.extend({initialize:function(n,r){e.prototype.initialize.apply(this,arguments),this.set("episodes",new t([],{server:this.server,section:this.section,media:this}))},parse:function(t){var n=e.prototype.parse.call(this,t);return n.unviewedLeafCount=n.leafCount-n.viewedLeafCount,n},getMediaLocation:function(){var e=this.get("episodes").first();return e?e.getMediaLocation():null}});return n}),define("plex/model/media/collections/SeasonCollection",["plex/model/collections/BaseCollection","plex/model/media/SeasonModel"],function(e,t){var n=e.extend({model:t,url:function(){return this.media.get("key")},initialize:function(e,t){this.server=t.server,this.section=t.section,this.media=t.media},parse:function(e){var t=$.xml2json(e).Directory;return t}});return n}),define("plex/model/media/ShowModel",["plex/model/media/MediaModel","plex/model/media/collections/SeasonCollection"],function(e,t){var n=e.extend({initialize:function(n,r){e.prototype.initialize.apply(this,arguments),this.set("seasons",new t([],{server:this.server,section:this.section,media:this}))},parse:function(t){var n=e.prototype.parse.call(this,t);return n.unviewedLeafCount=n.leafCount-n.viewedLeafCount,n},getMediaLocation:function(){var e=this.get("seasons").first();return e?e.getMediaLocation():null}});return n}),define("plex/model/media/TrackModel",["plex/model/media/MediaModel"],function(e){var t=e.extend();return t}),define("plex/model/media/collections/TrackCollection",["plex/model/collections/BaseCollection","plex/model/media/TrackModel"],function(e,t){var n=e.extend({model:t,url:function(){return this.media.get("key")},initialize:function(e,t){this.server=t.server,this.section=t.section,this.media=t.media},parse:function(e){var t=$.xml2json(e).Track;return t}});return n}),define("plex/model/media/AlbumModel",["plex/model/media/MediaModel","plex/model/media/collections/TrackCollection"],function(e,t){var n=e.extend({initialize:function(n,r){e.prototype.initialize.apply(this,arguments),this.set("tracks",new t([],{server:this.server,section:this.section,media:this}))},getMediaLocation:function(){var e=this.get("tracks").first();return e?e.getMediaLocation():null}});return n}),define("plex/model/media/collections/AlbumCollection",["plex/model/collections/BaseCollection","plex/model/media/AlbumModel"],function(e,t){var n=e.extend({model:t,url:function(){return this.media.get("key")},initialize:function(e,t){this.server=t.server,this.section=t.section,this.media=t.media},parse:function(e){var t=$.xml2json(e).Directory;return t}});return n}),define("plex/model/media/ArtistModel",["plex/model/media/MediaModel","plex/model/media/collections/AlbumCollection"],function(e,t){var n=e.extend({initialize:function(n,r){e.prototype.initialize.apply(this,arguments),this.set("albums",new t([],{server:this.server,section:this.section,media:this}))},getMediaLocation:function(){var e=this.get("albums").last();return e?e.getMediaLocation():null}});return n}),define("plex/model/media/PhotoModel",["plex/model/media/MediaModel"],function(e){var t=e.extend();return t}),define("plex/model/media/collections/FolderCollection",["plex/model/collections/BaseCollection","plex/model/media/MediaModel"],function(e,t){var n=e.extend({model:t,url:function(){return this.media.get("key")},initialize:function(e,t){this.server=t.server,this.section=t.section,this.media=t.media,t.url&&(this.url=t.url)},parse:function(e){var t=$.xml2json(e)||e,n=t.Directory,r=[];if(_.isArray(n))for(var i=0,s=n.length;i<s;i++)n[i].directory=!0;else n&&(n.directory=!0);return _.compact(r.concat(t.Directory,t.Video,t.Track,t.Photo))}});return n}),define("plex/model/media/FolderModel",["plex/model/media/MediaModel","plex/model/media/collections/FolderCollection"],function(e,t){var n=e.extend({initialize:function(n,r){e.prototype.initialize.apply(this,arguments),this.set("children",new t([],{server:this.server,section:this.section,media:this}))}});return n}),define("plex/model/media/DetailsModel",["plex/model/BaseModel","plex/model/media/MediaModel","plex/model/media/MovieModel","plex/model/media/ShowModel","plex/model/media/SeasonModel","plex/model/media/EpisodeModel","plex/model/media/ArtistModel","plex/model/media/AlbumModel","plex/model/media/TrackModel","plex/model/media/PhotoModel","plex/model/media/FolderModel"],function(e,t,n,r,i,s,o,u,a,f,l){var c=e.extend({idAttribute:"ratingKey",urlRoot:"/library/metadata",parse:function(e,c){var h=$.xml2json(e)||e,p=h.Directory||h.Video||h.Track||h.Photo||h,d={server:this.server,section:this.section,skipCache:!0},v;if(p.type){p.identifier=h.identifier,p.mediaTagPrefix=h.mediaTagPrefix,p.mediaTagVersion=h.mediaTagVersion;switch(p.type){case"movie":v=n;break;case"show":v=r;break;case"season":v=i;break;case"episode":v=s;break;case"artist":v=o;break;case"album":v=u;break;case"track":v=a;break;case"photo":h.Directory?(p.type="folder",v=l):v=f;break;default:v=t}this.defaults=v.prototype.defaults,p=v.prototype.parse.call(this,p),this.set("media",new v(p,d))}return{_cacheKey:null,ratingKey:p.grandparentRatingKey||p.parentRatingKey||p.ratingKey,title:p.grandparentTitle||p.parentTitle||p.title}}});return c}),define("plex/model/media/ChannelVideoModel",["plex/model/media/MediaModel"],function(e){var t=e.extend({idAttribute:"key",url:function(){return this.id},parse:function(e){var t=$.xml2json(e)||e,n=t.Video||{};return n._cacheKey=this.server.id+"!"+t[this.idAttribute],n}});return t}),function(e,t,n){function o(e,n){var r=t.createElement(e||"div"),i;for(i in n)r[i]=n[i];return r}function u(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function f(e,t,n,r){var o=["opacity",t,~~(e*100),n,r].join("-"),u=.01+n/r*100,f=Math.max(1-(1-e)/t*(100-u),e),l=s.substring(0,s.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return i[o]||(a.insertRule("@"+c+"keyframes "+o+"{"+"0%{opacity:"+f+"}"+u+"%{opacity:"+e+"}"+(u+.01)+"%{opacity:1}"+(u+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",0),i[o]=1),o}function l(e,t){var i=e.style,s,o;if(i[t]!==n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(o=0;o<r.length;o++){s=r[o]+t;if(i[s]!==n)return s}}function c(e,t){for(var n in t)e.style[l(e,n)||n]=t[n];return e}function h(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]===n&&(e[i]=r[i])}return e}function p(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}var r=["webkit","Moz","ms","O"],i={},s,a=function(){var e=o("style");return u(t.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),d={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},v=function m(e){if(!this.spin)return new m(e);this.opts=h(e||{},m.defaults,d)};v.defaults={},h(v.prototype,{spin:function(e){this.stop();var t=this,n=t.opts,r=t.el=c(o(0,{className:n.className}),{position:"relative",zIndex:n.zIndex}),i=n.radius+n.length+n.width,u,a;e&&(e.insertBefore(r,e.firstChild||null),a=p(e),u=p(r),c(r,{left:(n.left=="auto"?a.x-u.x+(e.offsetWidth>>1):n.left+i)+"px",top:(n.top=="auto"?a.y-u.y+(e.offsetHeight>>1):n.top+i)+"px"})),r.setAttribute("aria-role","progressbar"),t.lines(r,t.opts);if(!s){var f=0,l=n.fps,h=l/n.speed,d=(1-n.opacity)/(h*n.trail/100),v=h/n.lines;!function m(){f++;for(var e=n.lines;e;e--){var i=Math.max(1-(f+e*v)%h*d,n.opacity);t.opacity(r,n.lines-e,i,n)}t.timeout=t.el&&setTimeout(m,~~(1e3/l))}()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=n),this},lines:function(e,t){function i(e,r){return c(o(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:r,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*n+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.width>>1)+"px"})}var n=0,r;for(;n<t.lines;n++)r=c(o(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:s&&f(t.opacity,t.trail,n,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&u(r,c(i("#000","0 0 4px #000"),{top:"2px"})),u(e,u(r,i(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),!function(){function e(e,t){return o("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}var t=c(o("group"),{behavior:"url(#default#VML)"});!l(t,"transform")&&t.adj?(a.addRule(".spin-vml","behavior:url(#default#VML)"),v.prototype.lines=function(t,n){function s(){return c(e("group",{coordsize:i+" "+i,coordorigin:-r+" "+ -r}),{width:i,height:i})}function l(t,i,o){u(a,u(c(s(),{rotation:360/n.lines*t+"deg",left:~~i}),u(c(e("roundrect",{arcsize:1}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:o}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,i=2*r,o=-(n.width+n.length)*2+"px",a=c(s(),{position:"absolute",top:o,left:o}),f;if(n.shadow)for(f=1;f<=n.lines;f++)l(f,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(f=1;f<=n.lines;f++)l(f);return u(t,a)},v.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}):s=l(t,"animation")}(),e.Spinner=v}(window,document),define("spin",function(){}),define("plex/view/alerts/LoadingAlert",["plex/view/BaseView","spin"],function(e){var t=e.extend({className:"alert loading",spinner:null,initialize:function(){this.spinner=new Spinner({color:"#fff",width:3,length:6})},render:function(){return this.$el.empty(),this.$el.append(this.spinner.spin().el),this},destroy:function(){this.spinner.stop(),e.prototype.destroy.call(this)}});return t}),define("hb!templates/alerts/Alert.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function g(e,t){return'\n	<i class="alert-status icon-ok"></i>\n'}function y(e,t){var r="",i,s,o;r+="\n	",i="error",f=n.status,s=f||e.status,f=n.if_eq,o=f||e.if_eq,l=c.program(4,b,t),l.hash={},l.fn=l,l.inverse=c.program(6,w,t),f&&typeof o===h?i=o.call(e,s,i,l):i=p.call(e,o,s,i,l);if(i||i===0)r+=i;return r+="\n",r}function b(e,t){return'\n		<i class="alert-status icon-warning-sign"></i>\n	'}function w(e,t){return'\n		<i class="alert-status icon-exclamation-sign"></i>\n	'}n=n||e.helpers;var s="",o,u,a,f,l,c=this,h="function",p=n.blockHelperMissing,d=n.helperMissing,v=void 0,m=this.escapeExpression;s+='<a class="close-btn gray" href="#"><i class="icon-remove-sign"></i></a>\n\n',o="success",f=n.status,u=f||t.status,f=n.if_eq,a=f||t.if_eq,l=c.program(1,g,i),l.hash={},l.fn=l,l.inverse=c.program(3,y,i),f&&typeof a===h?o=a.call(t,u,o,l):o=p.call(t,a,u,o,l);if(o||o===0)s+=o;return s+='\n\n<div class="alert-message">\n	',f=n.message,o=f||t.message,typeof o===h?o=o.call(t,{hash:{}}):o===v&&(o=d.call(t,"message",{hash:{}})),s+=m(o)+"\n</div>\n",s})}),define("plex/view/alerts/Alert",["hb!templates/alerts/Alert.tpl","plex/model/AppModel","plex/view/BaseView"],function(e,t,n){var r=n.extend({className:"alert animated-slow scaleInOut",active:!1,pending:!1,events:{mouseenter:"onMouseEnter",mouseleave:"onMouseLeave","click .close-btn":"onCloseClick"},initialize:function(e){_.isString(e.alert)?this.alert={message:e.alert}:this.alert=e.alert},render:function(){return this.$el.html(e(this.alert)),this.animateIn(),this},animateIn:function(){setTimeout(_.bind(function(){this.active?(this.pending=!0,this.$el.css("animation-play-state","paused")):this.animateOut()},this),2e3)},animateOut:function(){this.$el.css("animation-play-state","running"),setTimeout(_.bind(function(){this.destroy()},this),1e3)},destroy:function(){n.prototype.destroy.call(this),t.set("alert",null)},onMouseEnter:function(e){this.active=!0},onMouseLeave:function(e){this.active=!1,this.pending&&this.animateOut()},onCloseClick:function(e){e.preventDefault(),this.$el.css("opacity",0),setTimeout(_.bind(function(){this.destroy()},this),500)}});return r}),define("hb!templates/HeaderView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return'\n		<li>\n			<a class="navbar-icon-btn back-icon-btn" href="#" rel="tooltip" data-tooltip-position="fixed" title="Back">Back</a>\n		</li>\n	'}function m(e,t){var r="",i,s,o;return r+='\n		<li class="divider"></li>\n\n		<li>\n			<a href="#!/servers/',a=n.server,i=a||e.server,i=i===null||i===undefined||i===!1?i:i.machineIdentifier,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"server.machineIdentifier",{hash:{}})),r+=d(i)+"/sections/",a=n.section,i=a||e.section,i=i===null||i===undefined||i===!1?i:i.key,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"section.key",{hash:{}})),r+=d(i)+"/details/",a=n.media,i=a||e.media,i=i===null||i===undefined||i===!1?i:i.ratingKey,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"media.ratingKey",{hash:{}})),r+=d(i)+'">\n				',i=25,a=n.media,s=a||e.media,s=s===null||s===undefined||s===!1?s:s.title,a=n.truncate,o=a||e.truncate,typeof o===c?i=o.call(e,s,i,{hash:{}}):o===p?i=h.call(e,"truncate",s,i,{hash:{}}):i=o,r+=d(i)+"\n			</a>\n		</li>\n	",r}function g(e,t){var r="",i,s,o;return r+='\n		<li class="divider"></li>\n\n		<li>\n			<a href="#!/servers/',a=n.server,i=a||e.server,i=i===null||i===undefined||i===!1?i:i.machineIdentifier,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"server.machineIdentifier",{hash:{}})),r+=d(i)+"/channels?key=",a=n.channel,i=a||e.channel,i=i===null||i===undefined||i===!1?i:i.key,a=n.encodeURL,s=a||e.encodeURL,typeof s===c?i=s.call(e,i,{hash:{}}):s===p?i=h.call(e,"encodeURL",i,{hash:{}}):i=s,r+=d(i)+'">\n				',i=25,a=n.channel,s=a||e.channel,s=s===null||s===undefined||s===!1?s:s.title,a=n.truncate,o=a||e.truncate,typeof o===c?i=o.call(e,s,i,{hash:{}}):o===p?i=h.call(e,"truncate",s,i,{hash:{}}):i=o,r+=d(i)+"\n			</a>\n		</li>\n	",r}function y(e,t){return'\n		<li>\n			<a class="update-btn" href="#" rel="tooltip" data-tooltip-position="fixed" title="Update">\n				<i class="navbar-icon-btn update-icon-btn"></i>\n			</a>\n		</li>\n	'}function b(e,t){var r="",i,s,o;return r+='\n				<li><a href="',a=n.myPlex,i=a||e.myPlex,i=i===null||i===undefined||i===!1?i:i.url,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"myPlex.url",{hash:{}})),r+=d(i)+'users/edit">',i=15,a=n.myPlex,s=a||e.myPlex,s=s===null||s===undefined||s===!1?s:s.username,a=n.truncate,o=a||e.truncate,typeof o===c?i=o.call(e,s,i,{hash:{}}):o===p?i=h.call(e,"truncate",s,i,{hash:{}}):i=o,r+=d(i)+'</a></li>\n				<li class="divider"></li>\n\n				<li><a href="#!/playlist/recommendations"><i class="plex-icon-navbar-mini plex-icon-recommendations-mini plex-icon-dark"></i> Recommendations</a></li>\n				<li><a href="#!/playlist/queue"><i class="plex-icon-navbar-mini plex-icon-queue-mini plex-icon-dark"></i> Queue</a></li>\n\n				<li class="divider"></li>\n				<li><a class="signout-btn" href="#"><i class="plex-icon-navbar-mini plex-icon-signout-mini plex-icon-dark"></i> Sign Out</a></li>\n			',r}function w(e,t){return'\n				<li><a class="signin-btn" href="#!/login"><i class="plex-icon-navbar-mini plex-icon-signin-mini plex-icon-dark"></i> Sign In</a></li>\n			'}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<ul class="nav breadcrumbbar">\n	',a=n.showBack,o=a||t.showBack,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n\n	<li>\n		<a class="navbar-icon-btn home-icon-btn" href="#!/dashboard" rel="tooltip" data-tooltip-position="fixed" title="Home">Home</a>\n	</li>\n\n	<li class="divider divider-primary"></li>\n\n	',a=n.media,o=a||t.media,u=n["if"],f=l.program(3,m,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+="\n\n	",a=n.channel,o=a||t.channel,u=n["if"],f=l.program(5,g,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n</ul>\n\n<ul class="nav iconbar">\n	<li>\n		<a class="navbar-icon-btn settings-icon-btn" href="#!/settings" rel="tooltip" data-tooltip-position="fixed" title="Settings">Settings</a>\n	</li>\n\n	',a=n.showUpdate,o=a||t.showUpdate,u=n["if"],f=l.program(7,y,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n\n	<li class="dropdown">\n		<a class="dropdown-toggle navbar-icon-btn account-icon-btn" href="#account-dropdown-list" data-toggle="dropdown" rel="tooltip" data-tooltip-position="fixed" title="Account"></a>\n\n		<ul class="dropdown-menu dropdown-menu-large pull-right">\n			',a=n.myPlex,o=a||t.myPlex,o=o===null||o===undefined||o===!1?o:o.username,u=n["if"],f=l.program(9,b,i),f.hash={},f.fn=f,f.inverse=l.program(11,w,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n		</ul>\n	</li>\n</ul>\n",s})}),define("text!templates/tooltips/LargeTooltip.tpl",[],function(){return'<div class="tooltip tooltip-large"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}),define("hb!templates/lists/header/ServerDropdownList.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i,s;r+='\n	<a class="split-left server-name" href="#!/servers/',a=n.activeServer,i=a||e.activeServer,i=i===null||i===undefined||i===!1?i:i.machineIdentifier,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"activeServer.machineIdentifier",{hash:{}})),r+=d(i)+'">\n		',a=n.activeServer,i=a||e.activeServer,i=i===null||i===undefined||i===!1?i:i.friendlyName,s=n["if"],f=l.program(2,m,t),f.hash={},f.fn=f,f.inverse=l.program(4,g,t),i=s.call(e,i,f);if(i||i===0)r+=i;return r+='\n	</a>\n\n	<a class="split-right dropdown-toggle" href="#server-dropdown-list" data-toggle="dropdown"><i class="icon-caret-down"></i></a>\n\n	<ul class="dropdown-menu dropdown-menu-large"></ul>\n',r}function m(e,t){var r="",i,s,o;return r+="\n			",i=12,a=n.activeServer,s=a||e.activeServer,s=s===null||s===undefined||s===!1?s:s.friendlyName,a=n.truncate,o=a||e.truncate,typeof o===c?i=o.call(e,s,i,{hash:{}}):o===p?i=h.call(e,"truncate",s,i,{hash:{}}):i=o,r+=d(i)+"\n		",r}function g(e,t){var r="",i,s,o;return r+="\n			",i=12,a=n.activeServer,s=a||e.activeServer,s=s===null||s===undefined||s===!1?s:s.name,a=n.truncate,o=a||e.truncate,typeof o===c?i=o.call(e,s,i,{hash:{}}):o===p?i=h.call(e,"truncate",s,i,{hash:{}}):i=o,r+=d(i)+"\n		",r}function y(e,t){var r="",i,s;r+='\n	<a class="server-name" href="#!/servers/',a=n.activeServer,i=a||e.activeServer,i=i===null||i===undefined||i===!1?i:i.machineIdentifier,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"activeServer.machineIdentifier",{hash:{}})),r+=d(i)+'">\n		',a=n.activeServer,i=a||e.activeServer,i=i===null||i===undefined||i===!1?i:i.friendlyName,s=n["if"],f=l.program(7,b,t),f.hash={},f.fn=f,f.inverse=l.program(9,w,t),i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n	</a>\n",r}function b(e,t){var r="",i,s,o;return r+="\n			",i=12,a=n.activeServer,s=a||e.activeServer,s=s===null||s===undefined||s===!1?s:s.friendlyName,a=n.truncate,o=a||e.truncate,typeof o===c?i=o.call(e,s,i,{hash:{}}):o===p?i=h.call(e,"truncate",s,i,{hash:{}}):i=o,r+=d(i)+"\n		",r}function w(e,t){var r="",i,s,o;return r+="\n			",i=12,a=n.activeServer,s=a||e.activeServer,s=s===null||s===undefined||s===!1?s:s.name,a=n.truncate,o=a||e.truncate,typeof o===c?i=o.call(e,s,i,{hash:{}}):o===p?i=h.call(e,"truncate",s,i,{hash:{}}):i=o,r+=d(i)+"\n		",r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;a=n.showDropdown,o=a||t.showDropdown,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.program(6,y,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n",s})}),define("plex/view/lists/BaseList",["plex/view/BaseView"],function(e){var t=e.extend({items:null,populated:!1,setup:function(e,t){this.items={},this.ListItem=e,this.selector=t,this.collection&&(this.addBinding(this.collection,"reset",this.reset),this.addBinding(this.collection,"add",this.addItem),this.addBinding(this.collection,"remove",this.removeItem))},populate:function(){this.populated=!!this.collection.length,this.populated&&this.reset(this.collection)},reset:function(e){this.populated=!!e.length,this.removeAllViews(),this.items={},e.each(this.addItem,this)},rebase:function(e){this.collection&&(this.removeBinding(this.collection,"reset",this.reset),this.removeBinding(this.collection,"add",this.addItem),this.removeBinding(this.collection,"remove",this.removeItem)),this.collection=e,this.addBinding(e,"reset",this.reset),this.addBinding(e,"add",this.addItem),this.addBinding(e,"remove",this.removeItem),this.reset(e)},addItem:function(e){var t,n=new this.ListItem({model:e,list:this});return this.registerView(n),this.items[e.id]=n,this.selector?t=this.$(this.selector):t=this.$el,this.reverseItems?t.prepend(n.render().el):t.append(n.render().el),n},removeItem:function(e){this.removeView(this.items[e.id]),delete this.items[e.id]}});return t}),define("hb!templates/lists/header/items/ServerDropdownListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i;return r+="\n		",a=n.friendlyName,i=a||e.friendlyName,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"friendlyName",{hash:{}})),r+=d(i)+"\n	",r}function m(e,t){var r="",i;return r+="\n		",a=n.name,i=a||e.name,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"name",{hash:{}})),r+=d(i)+"\n	",r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<a href="#!/servers/',a=n.machineIdentifier,o=a||t.machineIdentifier,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"machineIdentifier",{hash:{}})),s+=d(o)+'">\n	',a=n.friendlyName,o=a||t.friendlyName,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.program(3,m,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n</a>\n",s})}),define("plex/view/lists/header/items/ServerDropdownListItem",["hb!templates/lists/header/items/ServerDropdownListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e(this.model.toJSON())),this}});return n}),define("plex/view/lists/header/ServerDropdownList",["hb!templates/lists/header/ServerDropdownList.tpl","plex/model/HeaderModel","plex/view/lists/BaseList","plex/view/lists/header/items/ServerDropdownListItem"],function(e,t,n,r){var i=n.extend({id:"server-dropdown-list",tagName:"li",className:"dropdown",activeServer:null,initialize:function(){this.setup(r,".dropdown-menu")},render:function(){this.activeServer&&this.removeBinding(this.activeServer,"change:name",this.render),this.activeServer=t.get("activeServer"),this.addBinding(this.activeServer,"change:name",this.render);var n={showDropdown:this.collection.length>1,activeServer:this.activeServer.toJSON()};return this.$el.html(e(n)),this.populate(this.collection),this}});return i}),define("hb!templates/lists/header/SectionDropdownList.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i,s,o;r+='\n	<a class="split-left" href="#!/servers/',a=n.serverID,i=a||e.serverID,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"serverID",{hash:{}})),r+=d(i)+"/sections/",a=n.activeSection,i=a||e.activeSection,i=i===null||i===undefined||i===!1?i:i.key,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"activeSection.key",{hash:{}})),r+=d(i)+'">\n		',a=n.activeSection,i=a||e.activeSection,i=i===null||i===undefined||i===!1?i:i.refreshing,s=n["if"],f=l.program(2,m,t),f.hash={},f.fn=f,f.inverse=l.program(4,g,t),i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n\n		",i=12,a=n.activeSection,s=a||e.activeSection,s=s===null||s===undefined||s===!1?s:s.title,a=n.truncate,o=a||e.truncate,typeof o===c?i=o.call(e,s,i,{hash:{}}):o===p?i=h.call(e,"truncate",s,i,{hash:{}}):i=o,r+=d(i)+'\n	</a>\n	<a class="split-right dropdown-toggle" href="#section-dropdown-list" data-toggle="dropdown"><i class="icon-caret-down"></i></a>\n\n	<ul class="dropdown-menu dropdown-menu-large"></ul>\n',r}function m(e,t){return'\n			<div class="spinner-container"></div>\n		'}function g(e,t){var r="",i;return r+='\n			<i class="plex-icon-section-mini plex-icon-',a=n.activeSection,i=a||e.activeSection,i=i===null||i===undefined||i===!1?i:i.type,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"activeSection.type",{hash:{}})),r+=d(i)+'-mini"></i>\n		',r}function y(e,t){var r="",i,s,o;r+='\n	<a href="#!/servers/',a=n.serverID,i=a||e.serverID,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"serverID",{hash:{}})),r+=d(i)+"/sections/",a=n.activeSection,i=a||e.activeSection,i=i===null||i===undefined||i===!1?i:i.key,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"activeSection.key",{hash:{}})),r+=d(i)+'">\n		',a=n.activeSection,i=a||e.activeSection,i=i===null||i===undefined||i===!1?i:i.refreshing,s=n["if"],f=l.program(7,b,t),f.hash={},f.fn=f,f.inverse=l.program(9,w,t),i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n\n		",i=12,a=n.activeSection,s=a||e.activeSection,s=s===null||s===undefined||s===!1?s:s.title,a=n.truncate,o=a||e.truncate,typeof o===c?i=o.call(e,s,i,{hash:{}}):o===p?i=h.call(e,"truncate",s,i,{hash:{}}):i=o,r+=d(i)+"\n	</a>\n",r}function b(e,t){return'\n			<div class="spinner-container"></div>\n		'}function w(e,t){var r="",i;return r+='\n			<i class="plex-icon-section-mini plex-icon-',a=n.activeSection,i=a||e.activeSection,i=i===null||i===undefined||i===!1?i:i.type,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"activeSection.type",{hash:{}})),r+=d(i)+'-mini"></i>\n		',r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;a=n.showDropdown,o=a||t.showDropdown,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.program(6,y,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n",s})}),define("hb!templates/lists/header/items/SectionDropdownListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return'\n		<div class="spinner-container"></div>\n	'}function m(e,t){var r="",i;return r+='\n		<i class="plex-icon-section-mini plex-icon-',a=n.section,i=a||e.section,i=i===null||i===undefined||i===!1?i:i.type,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"section.type",{hash:{}})),r+=d(i)+'-mini plex-icon-dark"></i>\n	',r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<a href="#!/servers/',a=n.serverID,o=a||t.serverID,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"serverID",{hash:{}})),s+=d(o)+"/sections/",a=n.section,o=a||t.section,o=o===null||o===undefined||o===!1?o:o.key,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"section.key",{hash:{}})),s+=d(o)+'">\n	',a=n.section,o=a||t.section,o=o===null||o===undefined||o===!1?o:o.refreshing,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.program(3,m,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n\n	&nbsp;",a=n.section,o=a||t.section,o=o===null||o===undefined||o===!1?o:o.title,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"section.title",{hash:{}})),s+=d(o)+"\n</a>\n",s})}),define("plex/view/lists/header/items/SectionDropdownListItem",["hb!templates/lists/header/items/SectionDropdownListItem.tpl","plex/view/BaseView","spin"],function(e,t){var n=t.extend({tagName:"li",spinner:null,spinnerContainer:null,events:{"mouseover a":"onMouseOver","mouseout a":"onMouseOut"},initialize:function(){var e={lines:9,radius:2,width:2,length:3,zIndex:1,left:0,top:0};this.darkSpinner=new Spinner(_.extend({color:"#333"},e)),this.lightSpinner=new Spinner(_.extend({color:"#fff"},e)),this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e({serverID:this.model.server.id,section:this.model.toJSON()})),this.model.get("refreshing")?(this.spinnerContainer=this.$(".spinner-container")[0],this.darkSpinner.spin(this.spinnerContainer)):this.spinnerContainer=null,this},onMouseOver:function(e){this.spinnerContainer&&(this.darkSpinner.stop(),this.lightSpinner.spin(this.spinnerContainer))},onMouseOut:function(e){this.spinnerContainer&&(this.lightSpinner.stop(),this.darkSpinner.spin(this.spinnerContainer))}});return n}),define("plex/view/lists/header/SectionDropdownList",["hb!templates/lists/header/SectionDropdownList.tpl","plex/model/HeaderModel","plex/view/lists/BaseList","plex/view/lists/header/items/SectionDropdownListItem","spin"],function(e,t,n,r){var i=n.extend({id:"section-dropdown-list",tagName:"li",className:"dropdown",activeServer:null,activeSection:null,spinner:null,initialize:function(){this.spinner=new Spinner({color:"#fff",lines:9,radius:2,width:2,length:3,zIndex:1,left:0,top:0}),this.setup(r,".dropdown-menu")},render:function(n){this.activeSection&&(this.removeBinding(this.activeSection,"change:title",this.render),this.removeBinding(this.activeSection,"change:refreshing",this.render)),this.activeServer=t.get("activeServer"),this.activeSection=t.get("activeSection"),this.addBinding(this.activeSection,"change:title",this.render),this.addBinding(this.activeSection,"change:refreshing",this.render);var r={serverID:this.activeServer.id,showDropdown:this.collection.length>1,activeSection:this.activeSection.toJSON()};return this.$el.html(e(r)),this.activeSection.get("refreshing")&&this.spinner.spin(this.$(".spinner-container")[0]),n||this.populate(this.collection),this},reset:function(e){this.render(!0),n.prototype.reset.call(this,e)}});return i}),define("plex/view/HeaderView",["hb!templates/HeaderView.tpl","text!templates/tooltips/LargeTooltip.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/model/HeaderModel","plex/view/BaseView","plex/view/lists/header/ServerDropdownList","plex/view/lists/header/SectionDropdownList"],function(e,t,n,r,i,s,o,u){var a=s.extend({className:"navbar navbar-fixed-top",events:{"mouseover .dropdown-menu a":"onDropdownMouseOver","mouseout .dropdown-menu a":"onDropdownMouseOut","click .back-icon-btn":"onBackClick","click .update-btn":"onUpdateClick","click .account-icon-btn":"onAccountClick","click .signout-btn":"onSignOutClick"},initialize:function(){this.addBinding(i,"change:activeServer",this.onChange),this.addBinding(i,"change:activeSection",this.onChange),this.addBinding(i,"change:activeMedia",this.onChange),this.addBinding(i,"change:activeChannel",this.onChange),this.addBinding(i,"change:showBack",this.onChange),this.addBinding(r,"change:updateStatus",this.onChange),this.addBinding(r.get("myPlex"),"change:username",this.onChange),this.serverList=this.registerView(new o({collection:r.get("servers")}))},render:function(){var n={},s=i.get("activeServer"),o=i.get("activeSection"),a=i.get("activeMedia"),f=i.get("activeChannel");return s!==null&&(n.server=s.toJSON()),o!==null&&(this.sectionList=this.registerView(new u({collection:s.get("sections")})),n.section=o.toJSON()),a!==null&&(n.media=a.toJSON()),f!==null&&(n.channel=f.toJSON()),n.showBack=i.get("showBack"),n.showUpdate=r.get("updateStatus")!=="none",n.myPlex=r.get("myPlex").toJSON(),this.$el.html(e(n)),o!==null&&(this.$(".divider-primary").after(this.sectionList.render().el),this.$(".divider-primary").after('<li class="divider"></li>')),s!==null&&this.$(".divider-primary").after(this.serverList.render().el),this.$el.tooltip({selector:".navbar a",placement:"bottom",template:t}),this},onChange:function(){this.removeAllViews(),this.render()},onDropdownMouseOver:function(e){var t=$(e.target).find("i");t.length?t.removeClass("plex-icon-dark"):$(e.target).closest("i").removeClass("plex-icon-dark")},onDropdownMouseOut:function(e){var t=$(e.target).find("i");t.length?t.addClass("plex-icon-dark"):$(e.target).closest("i").addClass("plex-icon-dark")},onBackClick:function(e){e.preventDefault(),$(e.target).hasClass("disabled")||n.trigger("navigate:back")},onUpdateClick:function(e){e.preventDefault(),r.get("updateStatus")==="download"?n.trigger("command:InstallUpdate"):window.location.reload(!0)},onAccountClick:function(e){$(".tooltip").remove()},onSignOutClick:function(e){e.preventDefault(),n.trigger("command:SignOut")}});return a}),define("hb!templates/StatusView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<a class="timeline-btn gray" href="#" rel="tooltip" data-tooltip-position="fixed" title="Timeline"><i class="icon-list-alt"></i></a>\n\n<span class="status"></span>\n'})}),define("plex/view/StatusView",["hb!templates/StatusView.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({className:"statusbar hidden",statusTimeout:null,active:!1,events:{mouseover:"onMouseOver",mouseout:"onMouseOut","click .timeline-btn":"onTimelineClick"},initialize:function(){_.bindAll(this,"hide"),this.addBinding(t,"show:status",this.onShowStatus)},render:function(){return this.$el.html(e()),this.$el.tooltip({selector:".gray",placement:"top"}),this},hide:function(){this.active?this.statusTimeout=setTimeout(this.hide,1e3):this.$el.addClass("hidden")},onShowStatus:function(e,t){this.server=e,this.$(".status").text(t),this.$el.removeClass("hidden"),this.statusTimeout&&clearTimeout(this.statusTimeout),this.statusTimeout=setTimeout(this.hide,5e3)},onMouseOver:function(e){this.active=!0},onMouseOut:function(e){this.active=!1},onTimelineClick:function(e){e.preventDefault(),t.trigger("navigate:serverTimeline",this.server.id)}});return r}),define("plex/model/PlayerModel",["backbone"],function(){var e=Backbone.Model.extend({defaults:{currentTime:0,duration:0,formattedTime:"0:00",formattedDuration:"0:00",volume:0,paused:!0,ended:!1,buffering:!1,startBuffer:0,endBuffer:0,fullscreen:!1},reset:function(){this.set(this.defaults)},secondsToHms:function(e){e=Number(e);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(t>0?t+":":"")+(n>0?(t>0&&n<10?"0":"")+n+":":"0:")+(r<10?"0":"")+r}});return e}),define("hb!templates/players/core/ControlsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return"player-pause-button"}function m(e,t){return"icon-music"}function g(e,t){return"icon-film"}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<a class="player-play-pause-button ',a=n.paused,o=a||t.paused,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='" href="#"></a>\n\n<span class="now-playing">\n	<span class="now-playing-label">\n		<i class="',a=n.showMusicIcon,o=a||t.showMusicIcon,u=n["if"],f=l.program(3,m,i),f.hash={},f.fn=f,f.inverse=l.program(5,g,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+='"></i> Now Playing\n	</span>\n	<span class="now-playing-title">',a=n.title,o=a||t.title,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"title",{hash:{}})),s+=d(o)+'</span>\n</span>\n\n<a class="player-fullscreen-button" href="#"></a>\n\n<div class="player-time"><span class="player-current-time">',a=n.formattedTime,o=a||t.formattedTime,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"formattedTime",{hash:{}})),s+=d(o)+'</span> / <span class="player-duration">',a=n.formattedDuration,o=a||t.formattedDuration,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"formattedDuration",{hash:{}})),s+=d(o)+"</span></div>\n",s})}),define("hb!templates/players/core/SeekBarView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<div class="player-slider-thumb player-progress-thumb"></div>\n<div class="player-slider-bar player-progress-bar"></div>\n<div class="player-buffer-bar"></div>'})}),define("plex/view/players/core/SeekBarView",["hb!templates/players/core/SeekBarView.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({className:"player-slider-track player-seek-bar",events:{mousedown:"onSeekBarMouseDown"},initialize:function(e){_.bindAll(this,"onSeekBarMouseMove","onSeekBarMouseUp"),this.model.bind("change:currentTime",this.onCurrentTimeChange,this),this.model.bind("change:startBuffer",this.onBufferChange,this),this.model.bind("change:endBuffer",this.onBufferChange,this)},render:function(){return this.$el.html(e()),this.onCurrentTimeChange(),this.onBufferChange(),this},seek:function(e){var t=e-this.$el.offset().left,n=t/this.$el.width();n>1&&(n=1);var r=n*this.model.get("duration");this.trigger("seek",r)},onSeekBarMouseDown:function(e){e.preventDefault(),$(document).on("mousemove",this.onSeekBarMouseMove),$(document).on("mouseup",this.onSeekBarMouseUp),this.seek(e.pageX)},onSeekBarMouseMove:function(e){e.preventDefault(),this.seek(e.pageX)},onSeekBarMouseUp:function(e){e.preventDefault(),$(document).off("mousemove",this.onSeekBarMouseMove),$(document).off("mouseup",this.onSeekBarMouseUp),this.seek(e.pageX)},onCurrentTimeChange:function(){var e=this.$(".player-progress-thumb"),t=this.$(".player-progress-bar"),n=this.$el.width(),r=e.width()/2,i=this.model.get("currentTime")/this.model.get("duration"),s=i*n;s<r?s=r:s+r>n&&(s=n-r),e.css("left",s-r),t.css("width",s)},onBufferChange:function(){var e=this.$(".player-buffer-bar"),t=this.$el.width(),n=this.model.get("duration"),r=this.model.get("startBuffer")/n,i=this.model.get("endBuffer")/n,s=r*t,o=i*t-s;e.css("left",s),e.css("width",o)}});return n}),define("hb!templates/players/core/SliderView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<a class="player-slider-button" href="#"></a>\n<div class="player-slider-track">\n	<div class="player-slider-thumb"></div>\n	<div class="player-slider-bar"></div>\n</div>\n'})}),define("plex/view/players/core/SliderView",["hb!templates/players/core/SliderView.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({currentValue:0,dragging:!1,events:{"click .player-slider-button":"onButtonClick","mousedown .player-slider-track":"onSliderMouseDown"},initialize:function(){_.bindAll(this,"onSliderMouseMove","onSliderMouseUp")},render:function(){return this.$el.html(e()),this},calculateValue:function(e){var t=this.$(".player-slider-track"),n=e-t.offset().left,r=n/t.width();r>1?r=1:r<0&&(r=0),this.currentValue=r,this.trigger("change:value",r)},setValue:function(e){this.currentValue=e;var t=this.$(".player-slider-track"),n=this.$(".player-slider-thumb"),r=this.$(".player-slider-bar"),i=t.width(),s=n.width()/2,o=e*i;o<s?o=s:o+s>i&&(o=i-s),n.css("left",o-s),r.width(o)},onButtonClick:function(e){e.preventDefault(),this.trigger("click:button")},onSliderMouseDown:function(e){e.preventDefault(),$(document).on("mousemove",this.onSliderMouseMove),$(document).on("mouseup",this.onSliderMouseUp),this.dragging=!0,this.$el.addClass("player-active-slider"),this.calculateValue(e.pageX)},onSliderMouseMove:function(e){e.preventDefault(),this.calculateValue(e.pageX)},onSliderMouseUp:function(e){e.preventDefault(),$(document).off("mousemove",this.onVolumeSliderMouseMove),$(document).off("mouseup",this.onVolumeSliderMouseUp),this.dragging=!1,this.$el.removeClass("player-active-slider"),this.calculateValue(e.pageX),this.trigger("release")}});return n}),define("plex/view/players/core/ControlsView",["hb!templates/players/core/ControlsView.tpl","plex/view/BaseView","plex/view/players/core/SeekBarView","plex/view/players/core/SliderView"],function(e,t,n,r){var i=t.extend({className:"player-controls",seekBar:null,volumeSlider:null,muted:!1,mutedVolume:0,overlay:!1,hideVolume:!1,hideFullscreen:!1,hideNowPlaying:!1,hideControlsTimeout:null,events:{"click .player-play-pause-button":"onPlayPauseClick","click .player-fullscreen-button":"onFullscreenButtonClick"},initialize:function(e){this.overlay=e.overlay,this.hideVolume=e.hideVolume,this.hideFullscreen=e.hideFullscreen,this.hideNowPlaying=e.hideNowPlaying,_.bindAll(this,"show","hide"),this.seekBar=this.registerView(new n({model:this.model})),this.volumeSlider=this.registerView(new r({className:"player-volume"})),this.addBinding(this.model,"change:paused",this.onPausedChange),this.addBinding(this.model,"change:formattedTime",this.onCurrentTimeChange),this.addBinding(this.model,"change:formattedDuration",this.onDurationChange),this.addBinding(this.model,"change:volume",this.onVolumeChange),this.addBinding(this.model,"change:fullscreen",this.onFullscreenChange),this.addBinding(this.seekBar,"seek",this.onSeek),this.addBinding(this.volumeSlider,"click:button",this.onVolumeSliderButtonClick),this.addBinding(this.volumeSlider,"change:value",this.onVolumeSliderValueChange)},render:function(){return this.$el.html(e(this.model.toJSON())),this.$el.prepend(this.seekBar.render().el),this.$(".player-fullscreen-button").after(this.volumeSlider.render().el),this.onVolumeChange(),this.overlay===!0&&this.$el.addClass("player-controls-overlay"),this.hideVolume===!0&&this.$(".player-volume").hide(),this.hideFullscreen===!0&&this.$(".player-fullscreen-button").hide(),this.hideNowPlaying===!0&&this.$(".now-playing").hide(),this},show:function(){if(this.overlay===!0||this.model.get("fullscreen")===!0)clearTimeout(this.hideControlsTimeout),this.hideControlsTimeout=setTimeout(this.hide,3e3);this.$el.removeClass("player-controls-collapsed")},hide:function(){this.$el.addClass("player-controls-collapsed")},onPlayPauseClick:function(e){e.preventDefault(),this.trigger("playPause")},onFullscreenButtonClick:function(e){e.preventDefault();var t=this.model.get("fullscreen");t===!0?(this.overlay===!1&&this.$el.removeClass("player-controls-overlay"),this.trigger("exitFullscreen")):(this.$el.addClass("player-controls-overlay"),this.trigger("enterFullscreen"))},onFullscreenChange:function(){if(this.overlay===!1){var e=this.model.get("fullscreen");e===!0?this.$el.addClass("player-controls-overlay"):(clearTimeout(this.hideControlsTimeout),this.$el.removeClass("player-controls-overlay"))}this.seekBar.render(),this.trigger("sync")},onPausedChange:function(){var e=this.model.get("paused");e?this.$(".player-play-pause-button").removeClass("player-pause-button"):this.$(".player-play-pause-button").addClass("player-pause-button")},onCurrentTimeChange:function(){this.$(".player-current-time").html(this.model.get("formattedTime"))},onDurationChange:function(){this.$(".player-duration").html(this.model.get("formattedDuration"))},onVolumeChange:function(){var e=this.$(".player-volume .player-slider-button"),t=this.model.get("volume");this.volumeSlider.setValue(t),t>.5?(this.muted=!1,e.removeClass("player-volume-button-low"),e.removeClass("player-volume-button-off")):t<.5&&t>0?(this.muted=!1,e.addClass("player-volume-button-low"),e.removeClass("player-volume-button-off")):(this.muted=!0,e.addClass("player-volume-button-off"),e.removeClass("player-volume-button-low"))},onSeek:function(e){this.trigger("seek",e)},onVolumeSliderButtonClick:function(){this.muted===!0?(this.mutedVolume>0?this.trigger("change:volume",this.mutedVolume):this.trigger("change:volume",1),this.muted=!1,this.mutedVolume=0):(this.muted=!0,this.mutedVolume=this.model.get("volume"),this.trigger("change:volume",0))},onVolumeSliderValueChange:function(e){this.trigger("change:volume",e)}});return i}),define("plex/view/players/MusicPlayerView",["plex/control/Dispatcher","plex/model/PlayerModel","plex/view/BaseView","plex/view/players/core/ControlsView","soundmanager"],function(e,t,n,r){var i=n.extend({className:"music-player animated slideDown",playerModel:null,controls:null,sound:null,volume:1,nextTrack:null,initialize:function(){_.bindAll(this,"onPlay","whileLoading","whitePlaying","onFinish"),this.playerModel=new t({showMusicIcon:!0}),this.controls=this.registerView(new r({model:this.playerModel,hidePlaybackRate:!0,hideFullscreen:!0})),this.addBinding(this.controls,"playPause",this.onControlsPlayPause),this.addBinding(this.controls,"seek",this.onControlsSeek),this.addBinding(this.controls,"change:volume",this.onControlsVolumeChange)},render:function(){return this.$el.empty(),this.$el.append(this.controls.render().el),this},play:function(){var e=this.model.getDownloadUrl(),t="#!/servers/"+this.model.server.id+"/sections/"+this.model.section.id+"/details/"+this.model.media.id;this.findNextTrack(),this.playerModel.reset(),this.$(".now-playing-title").html('<a href="'+t+'">'+this.model.get("title")+"</a>"),this.sound&&this.sound.destruct(),this.sound=soundManager.createSound({id:"track_"+this.model.id,url:e,autoLoad:!0,autoPlay:!0,volume:this.volume*100,onplay:this.onPlay,whileloading:this.whileLoading,whileplaying:this.whitePlaying,onfinish:this.onFinish})},findNextTrack:function(){var e=this.collection.get(this.model.id),t=this.collection.indexOf(e);t+1<this.collection.length?this.nextTrack=this.collection.at(t+1):this.nextTrack=null},hide:function(){setTimeout(_.bind(function(){this.$el.animate({top:0},800,_.bind(function(){this.destroy()},this))},this),200)},onControlsPlayPause:function(){if(this.sound){var e=this.playerModel.get("paused");this.sound.togglePause(),this.playerModel.set("paused",!e)}},onControlsSeek:function(e){this.sound&&(this.sound.setPosition(e*1e3),this.playerModel.set({currentTime:e,formattedTime:this.playerModel.secondsToHms(e)}))},onControlsVolumeChange:function(e){this.sound&&(this.sound.setVolume(e*100),this.volume=e,this.playerModel.set("volume",e))},onPlay:function(){this.playerModel.set({paused:!1,volume:this.volume})},whileLoading:function(){this.playerModel.set({endBuffer:this.sound.bytesLoaded/this.sound.bytesTotal*(this.sound.durationEstimate/1e3),duration:this.sound.durationEstimate/1e3,formattedDuration:this.playerModel.secondsToHms(this.sound.durationEstimate/1e3)})},whitePlaying:function(){this.playerModel.set({currentTime:this.sound.position/1e3,formattedTime:this.playerModel.secondsToHms(this.sound.position/1e3)})},onFinish:function(){this.sound&&this.sound.destruct(),this.sound=null,this.nextTrack!==null?(this.model=this.nextTrack,this.play()):e.trigger("stop:music")}});return i}),define("plex/view/AppView",["plex/control/Dispatcher","plex/model/AppModel","plex/view/alerts/LoadingAlert","plex/view/alerts/Alert","plex/view/HeaderView","plex/view/StatusView","plex/view/players/MusicPlayerView","backbone"],function(e,t,n,r,i,s,o){var u=Backbone.View.extend({el:"#plex",loadingAlert:null,genericAlert:null,headerView:null,musicPlayerView:null,views:null,modals:null,initialize:function(){this.views=[],this.modals=[],this.headerView=new i,this.statusView=new s,t.on("change:loading",this.onLoadingChange,this),t.on("change:alert",this.onAlertChange,this),t.on("change:view",this.onViewChange,this),t.on("change:modal",this.onModalChange,this),e.on("destroy:modal",this.onModalDestroy,this),e.on("play:music",this.onPlayMusic,this),e.on("stop:music",this.onStopMusic,this)},render:function(){return this.$el.empty(),this.$el.append(this.headerView.render().el),this.$el.append(this.statusView.render().el),this.onLoadingChange(t,t.get("loading")),this},onLoadingChange:function(e,t){t===!0&&this.loadingAlert===null?(this.loadingAlert=new n,$("body").append(this.loadingAlert.render().el)):this.loadingAlert!==null&&(this.loadingAlert.destroy(),this.loadingAlert=null)},onAlertChange:function(e,t){t!==null?(this.genericAlert=new r({alert:t}),$("body").append(this.genericAlert.render().el)):this.genericAlert=null},onViewChange:function(e,t){for(var n=this.views.length-1;n>=0;n--)this.views[n].destroy();$(".tooltip").remove(),this.views.length=0,this.views.push(t),this.$el.append(t.render().el),window.scrollTo(0,0)},onModalChange:function(e,t){this.modals.push(t),$("body").append(t.render().el)},onModalDestroy:function(e){var t=_.indexOf(this.modals,e);t>-1&&this.modals.splice(t,1)[0].destroy()},onPlayMusic:function(e,t){this.$el.addClass("music-player-active"),this.musicPlayerView===null?(this.musicPlayerView=new o({collection:e.get("tracks"),model:t}),this.$el.prepend(this.musicPlayerView.render().el)):(this.musicPlayerView.collection=e.get("tracks"),this.musicPlayerView.model=t),this.musicPlayerView.play()},onStopMusic:function(){this.$el.removeClass("music-player-active"),this.musicPlayerView!==null&&(this.musicPlayerView.hide(),this.musicPlayerView=null)}});return u}),define("hb!templates/DashboardView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<div class="row-fluid">\n	<div class="dashboard-sidebar"></div>\n	<div class="dashboard-main"></div>\n</div>\n'})}),define("hb!templates/lists/dashboard/DashboardSectionList.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function c(e,t){return"\n			Shared Libraries\n		"}function h(e,t){return"\n			My Library\n		"}function p(e,t){return"hide"}function d(e,t){return"hide"}function v(e,t){return'\n		There are no available shared libraries. <a href="https://my.plexapp.com">Go to myPlex</a>.\n	'}function m(e,t){return'\n		There are no available library sections. <a class="add-btn" href="#">Add a section</a>.\n	'}function g(e,t){var r,i;return a=n.empty,r=a||e.empty,i=n["if"],f=l.program(14,y,t),f.hash={},f.fn=f,f.inverse=l.noop,r=i.call(e,r,f),r||r===0?r:""}function y(e,t){return"hide"}function b(e,t){return'\n		<li class="hide"></li>\n	'}function w(e,t){return'\n		<li><a class="add-btn tile-btn" href="#"><i class="icon icon-plus"></i></a></li>\n	'}n=n||e.helpers;var s="",o,u,a,f,l=this;s+='<div class="well-header">\n	<h3>\n		',a=n.shared,o=a||t.shared,u=n["if"],f=l.program(1,c,i),f.hash={},f.fn=f,f.inverse=l.program(3,h,i),o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n	</h3>\n</div>\n\n<div class="dashboard-empty-message ',a=n.pending,o=a||t.pending,u=n["if"],f=l.program(5,p,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+=" ",a=n.empty,o=a||t.empty,u=n.unless,f=l.program(7,d,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='">\n	',a=n.shared,o=a||t.shared,u=n["if"],f=l.program(9,v,i),f.hash={},f.fn=f,f.inverse=l.program(11,m,i),o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n</div>\n\n<ul class="tile-list section-tile-list ',a=n.pending,o=a||t.pending,u=n.unless,f=l.program(13,g,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='">\n	',s+="\n	",a=n.shared,o=a||t.shared,u=n["if"],f=l.program(16,b,i),f.hash={},f.fn=f,f.inverse=l.program(18,w,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n</ul>\n",s})}),define("hb!templates/lists/dashboard/ManageServerDropdownList.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return'\n	<a class="dropdown-toggle" href="#manage-server-dropdown-list" data-toggle="dropdown">\n		<i class="icon icon-wrench"></i> Manage <i class="icon-caret-down"></i>\n	</a>\n'}function m(e,t){var r="",i,s;r+="\n	",a=n.server,i=a||e.server,s=n["if"],f=l.program(4,g,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n",r}function g(e,t){var r="",i;return r+='\n		<a href="#!/servers/',a=n.server,i=a||e.server,i=i===null||i===undefined||i===!1?i:i.machineIdentifier,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"server.machineIdentifier",{hash:{}})),r+=d(i)+'">\n			<i class="icon icon-wrench"></i> Manage</i>\n		</a>\n	',r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;a=n.showDropdown,o=a||t.showDropdown,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.program(3,m,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+='\n\n<ul class="dropdown-menu dropdown-menu-large"></ul>\n',s})}),define("hb!templates/lists/dashboard/items/ManageServerDropdownListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i;return r+="\n		",a=n.friendlyName,i=a||e.friendlyName,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"friendlyName",{hash:{}})),r+=d(i)+"\n	",r}function m(e,t){var r="",i;return r+="\n		",a=n.name,i=a||e.name,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"name",{hash:{}})),r+=d(i)+"\n	",r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<a href="#!/servers/',a=n.machineIdentifier,o=a||t.machineIdentifier,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"machineIdentifier",{hash:{}})),s+=d(o)+'">\n	',a=n.friendlyName,o=a||t.friendlyName,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.program(3,m,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n</a>\n",s})}),define("plex/view/lists/dashboard/items/ManageServerDropdownListItem",["hb!templates/lists/dashboard/items/ManageServerDropdownListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",render:function(){return this.$el.html(e(this.model.toJSON())),this}});return n}),define("plex/view/lists/dashboard/ManageServerDropdownList",["hb!templates/lists/dashboard/ManageServerDropdownList.tpl","plex/view/BaseView","plex/view/lists/dashboard/items/ManageServerDropdownListItem"],function(e,t,n){var r=t.extend({id:"manage-server-dropdown-list",className:"dropdown pull-right",initialize:function(){this.populated=!!this.collection.length,this.addBinding(this.collection,"add",this.onAdd),this.addBinding(this.collection,"reset",this.onAddAll)},render:function(t){var n={},r=this.collection.filter(function(e){return!e.get("shared")});return r.length&&(r.length>1?n.showDropdown=!0:n.server=r[0].toJSON()),this.$el.html(e(n)),!t&&this.populated&&this.onAddAll(this.collection),this},onAdd:function(e){if(e.get("shared"))return;var t=new n({model:e});this.registerView(t),this.$(".dropdown-menu").append(t.render().el)},onAddAll:function(e){this.populated=!0,this.removeAllViews(),this.render(!0),e.each(this.onAdd,this)}});return r}),define("hb!templates/lists/dashboard/items/DashboardSectionListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i;return r+='\n		<span class="server-label">',a=n.server,i=a||e.server,i=i===null||i===undefined||i===!1?i:i.friendlyName,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"server.friendlyName",{hash:{}})),r+=d(i)+"</span>\n	",r}function m(e,t){var r="",i;return r+='\n		<span class="server-label">',a=n.server,i=a||e.server,i=i===null||i===undefined||i===!1?i:i.name,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"server.name",{hash:{}})),r+=d(i)+"</span>\n	",r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<a href="#!/servers/',a=n.server,o=a||t.server,o=o===null||o===undefined||o===!1?o:o.machineIdentifier,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"server.machineIdentifier",{hash:{}})),s+=d(o)+"/sections/",a=n.section,o=a||t.section,o=o===null||o===undefined||o===!1?o:o.key,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"section.key",{hash:{}})),s+=d(o)+'">\n	<i class="poster section-poster plex-icon-',a=n.section,o=a||t.section,o=o===null||o===undefined||o===!1?o:o.type,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"section.type",{hash:{}})),s+=d(o)+'"></i>\n	<span class="section-label">',a=n.section,o=a||t.section,o=o===null||o===undefined||o===!1?o:o.title,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"section.title",{hash:{}})),s+=d(o)+"</span>\n	",a=n.server,o=a||t.server,o=o===null||o===undefined||o===!1?o:o.friendlyName,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.program(3,m,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n</a>\n",s})}),define("plex/view/lists/dashboard/items/DashboardSectionListItem",["hb!templates/lists/dashboard/items/DashboardSectionListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",className:"section-tile-list-item",initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){var t={server:this.model.server.toJSON(),section:this.model.toJSON()};return this.$el.html(e(t)),this}});return n}),define("hb!templates/modals/SelectServerModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i,s;r+="\n		",a=n.shared,i=a||e.shared,s=n.unless,f=l.program(2,m,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n	",r}function m(e,t){var r="",i;return r+='\n			<a class="server" data-id="',a=n.machineIdentifier,i=a||e.machineIdentifier,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"machineIdentifier",{hash:{}})),r+=d(i)+'" href="#">',a=n.name,i=a||e.name,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"name",{hash:{}})),r+=d(i)+"</a><br>\n		",r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal">Ã</button>\n	<h3>Select a Media Server</h3>\n</div>\n\n<div class="modal-body">\n	',a=n.servers,o=a||t.servers,u=n.each,f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n</div>\n",s})}),define("plex/view/modals/SelectServerModal",["hb!templates/modals/SelectServerModal.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({className:"modal modal-small select-server-modal fade",events:{hidden:"onClose","click .server":"onServerClick"},render:function(){return this.$el.html(e({servers:this.collection.toJSON()})).modal(),this},onClose:function(e){t.trigger("destroy:modal",this)},onServerClick:function(e){e.preventDefault(),this.$el.modal("hide"),this.trigger("server:select",$(e.target).data("id"))}});return r}),define("hb!templates/modals/EditSectionModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return"\n	<h3>Add a Section</h3>\n	"}function m(e,t){return"\n	<h3>Edit Section</h3>\n	"}function g(e,t){var r="",i,s;r+='\n		<div class="add-section-type">\n			<h4>Select the type of media</h3>\n			',a=n.sectionTypes,i=a||e.sectionTypes,s=n.each,f=l.program(6,y,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n		</div>\n		",r}function y(e,t){var r="",i;return r+='\n				<a class="section-type" data-key="',a=n.key,i=a||e.key,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"key",{hash:{}})),r+=d(i)+'" href="#">\n					<i class="plex-icon-',a=n.key,i=a||e.key,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"key",{hash:{}})),r+=d(i)+'-medium"></i>\n					<span class="section-type-label">',a=n.label,i=a||e.label,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"label",{hash:{}})),r+=d(i)+"</span>\n				</a>\n			",r}function b(e,t){return" hide"}function w(e,t){var r="",i,s,o;return r+="\n						",i="sectionPathInput",s={},o=e,s.value=o,a=n.partial,o=a||e.partial,f={},f.hash=s,typeof o===c?i=o.call(e,i,f):o===p?i=h.call(e,"partial",i,f):i=o,r+=d(i)+"\n					",r}function E(e,t){var i="",s;i+="\n						",s=e,s=l.invokePartial(r.sectionPathInput,"sectionPathInput",s,n,r);if(s||s===0)i+=s;return i+="\n					",i}function S(e,t){return" hide"}function x(e,t){return'\n		<button type="submit" class="btn btn-primary"><i class="icon-plus"></i> Add Section</button>\n		'}function T(e,t){return'\n		<button type="submit" class="btn btn-primary">Save</button>\n		'}n=n||e.helpers,r=r||e.partials;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal">Ã</button>\n	',a=n.add,o=a||t.add,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.program(3,m,i),o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n</div>\n\n<form class="modal-form add-section-form">\n	<div class="modal-body">\n		',a=n.add,o=a||t.add,u=n["if"],f=l.program(5,g,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n\n		<div class="add-section-details',a=n.add,o=a||t.add,u=n["if"],f=l.program(8,b,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='">\n			<div class="row-fluid">\n				<div class="control-group">\n					<label>Name</label>\n					<input type="text" name="name" class="span12" value="',a=n.section,o=a||t.section,o=o===null||o===undefined||o===!1?o:o.title,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"section.title",{hash:{}})),s+=d(o)+'">\n				</div>\n			</div>\n\n			<div class="row-fluid">\n				<div class="control-group">\n					<label>Paths</label>\n					',a=n.section,o=a||t.section,o=o===null||o===undefined||o===!1?o:o.location,u=n.each,f=l.program(10,w,i),f.hash={},f.fn=f,f.inverse=l.program(12,E,i),o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n					<div id="path-sentinel"></div>\n				</div>\n			</div>\n\n			<div class="row-fluid browse-control hide">\n				<a class="browse-control-close" href="#">\n					<i class="icon-remove-sign"></i>\n				</a>\n			</div>\n\n			<div class="row-fluid advanced-options hide">\n				<div class="control-group">\n					<label>Scanner</label>\n					<select name="scanner" class="span6"></select>\n				</div>\n			</div>\n\n			<div class="row-fluid advanced-options hide">\n				<div class="control-group">\n					<label>Agent</label>\n					<select name="agent" class="span6"></select>\n				</div>\n			</div>\n\n			<div class="row-fluid advanced-options hide">\n				<div class="control-group">\n					<label>Language</label>\n					<select name="language" class="span6"></select>\n				</div>\n			</div>\n		</div>\n	</div>\n\n	<div class="modal-footer',a=n.add,o=a||t.add,u=n["if"],f=l.program(14,S,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='">\n		<div style="float:left">\n			<a class="standard-options" href="#">Show advanced options</a>\n			<a class="advanced-options hide" href="#">Hide advanced options</a>\n		</div>\n		<button class="btn btn-inverse cancel-btn">Cancel</button>\n		',a=n.add,o=a||t.add,u=n["if"],f=l.program(16,x,i),f.hash={},f.fn=f,f.inverse=l.program(18,T,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n	</div>\n</form>\n",s})}),define("plex/model/BrowseDirectoryModel",["plex/model/BaseModel"],function(e){var t=e.extend({idAttribute:"key",defaults:{key:"/services/browse",title:"Root",path:""},url:function(){return this.get("key")},parse:function(e){var t=$.xml2json(e)||e;return t._cacheKey=null,t}});return t}),define("plex/model/collections/BrowseDirectoryCollection",["plex/model/collections/BaseCollection","plex/model/BrowseDirectoryModel"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.parent=t.parent,this.server=t.server;var r=_.bind(function(e){e.set("parent",this.parent),e.set("children",new n([],{parent:e,server:this.server}))},this);_.each(e,r),this.on("reset",function(){this.each(r)},this),this.on("add",r)},url:function(){return this.parent.url()},parse:function(e){return $.xml2json(e).Path}});return n}),define("plex/model/AgentModel",["plex/model/BaseModel"],function(e){var t=e.extend({idAttribute:"identifier",whitelistedAttrs:["name","hasPrefs","identifier","language","enabled"],parse:function(e){var t=$.xml2json(e)||e;return t.Language&&(t.language=_.isArray(t.Language)?_.pluck(t.Language,"code"):[t.Language.code]),t=_.pick(t,this.whitelistedAttrs),t}});return t}),define("plex/model/collections/AgentCollection",["plex/model/collections/BaseCollection","plex/model/AgentModel"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.server=t.server,this.sectionType=t.sectionType,this.primaryAgent=t.primaryAgent,this.relatedAgent=t.relatedAgent},url:function(){return this.primaryAgent?"system/agents/contributors?mediaType="+this.sectionType+"&primaryAgent="+this.primaryAgent:this.relatedAgent?"system/agents/"+this.relatedAgent+"/config/"+this.sectionType:"system/agents?mediaType="+this.sectionType},parse:function(e){return $.xml2json(e).Agent}});return n}),define("plex/model/ScannerModel",["plex/model/BaseModel"],function(e){var t=e.extend({idAttribute:"name",whitelistedAttrs:["name"],parse:function(e){var t=$.xml2json(e)||e;return t}});return t}),define("plex/model/collections/ScannerCollection",["plex/model/collections/BaseCollection","plex/model/ScannerModel"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.sectionType=t.sectionType,this.server=t.server},url:function(){return"system/scanners/"+this.sectionType},parse:function(e){return $.xml2json(e).Scanner}});return n}),define("hb!templates/lists/items/BrowseDirectoryListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<a href="#" data-key="',u=n.directory,o=u||t.directory,o=o===null||o===undefined||o===!1?o:o.key,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"directory.key",{hash:{}})),s+=h(o)+'"><i class="icon-folder-open"></i> ',u=n.directory,o=u||t.directory,o=o===null||o===undefined||o===!1?o:o.title,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"directory.title",{hash:{}})),s+=h(o)+"</a>\n",s})}),define("plex/view/lists/items/BrowseDirectoryListItem",["hb!templates/lists/items/BrowseDirectoryListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({tagName:"li",className:"browse-directory-list-item",render:function(){var t={directory:this.model.toJSON()};return this.$el.html(e(t)),this}});return r}),define("plex/view/lists/BrowseDirectoryList",["plex/view/lists/BaseList","plex/view/lists/items/BrowseDirectoryListItem","plex/model/collections/BrowseDirectoryCollection"],function(e,t,n){var r=e.extend({tagName:"ul",className:"compact-list browse-directory-list",events:{"click a":"onDirectoryClick"},initialize:function(){this.setup(t)},render:function(){return this.$el.empty(),this.populate(this.collection),this},reset:function(e){this.populated=!!e.length,this.removeAllViews(),this.items={},this.parentItem&&this.addItem(this.parentItem),e.each(this.addItem,this)},onDirectoryClick:function(e){e.preventDefault();var t=$(e.currentTarget),n=t.data("key"),r=this.collection.get(n)||this.parentItem;this.trigger("change:path",r.get("path")),this.collection.reset([]),this.collection.parent=r,this.render(),r.get("parent")?(this.parentItem=r.get("parent").clone(),this.parentItem.set("title",".. [Back]")):this.parentItem=null,this.collection.fetch()}});return r}),define("plex/control/utils/LanguageUtil",[],function(){var e=function(){this.byCode={aa:"Afaraf",af:"Afrikaans",ab:"Abkhazian",ak:"Akan",sq:"Shqip",am:"Amharic",ar:"Ø§ÙØ¹Ø±Ø¨ÙØ©",an:"AragonÃ©s",hy:"ÕÕ¡ÕµÕ¥ÖÕ¥Õ¶",as:"Assamese",av:"Ð°Ð²Ð°Ñ Ð¼Ð°ÑÓ",ae:"avesta",ay:"aymar aru",az:"azÉrbaycan dili",ba:"Ð±Ð°ÑÒ¡Ð¾ÑÑ ÑÐµÐ»Ðµ",bm:"bamanankan",eu:"euskara",be:"ÐÐµÐ»Ð°ÑÑÑÐºÐ°Ñ",bn:"Bengali",bh:"à¤­à¥à¤à¤ªà¥à¤°à¥",bi:"Bislama",bs:"bosanski jezik",br:"brezhoneg",bg:"Ð±ÑÐ»Ð³Ð°ÑÑÐºÐ¸ ÐµÐ·Ð¸Ðº",my:"Burmese",ca:"CatalÃ ",ch:"Chamoru",ce:"Ð½Ð¾ÑÑÐ¸Ð¹Ð½ Ð¼Ð¾ÑÑ",cu:"Ñ©Ð·ÑÐºÑ ÑÐ»Ð¾Ð²Ñ£Ð½ÑÑÐºÑ",cv:"ÑÓÐ²Ð°Ñ ÑÓÐ»ÑÐ¸",kw:"Kernewek",co:"corsu",cr:"áá¦áá­ááá£",dv:"Divehi",dz:"à½¢à¾«à½¼à½à¼à½",en:"English",eo:"Esperanto",et:"eesti",ee:"EÊegbe",fo:"fÃ¸royskt",fj:"vosa Vakaviti",fy:"Frysk",ff:"Fulfulde",ka:"á¥áá áá£áá",gd:"GÃ idhlig",ga:"Gaeilge",gl:"Galego",gv:"Gaelg",gn:"AvaÃ±e&apos;áº½",gu:"àªà«àªàª°àª¾àª¤à«",ht:"KreyÃ²l ayisyen",ha:"ÙÙÙÙØ³Ù",hz:"Otjiherero",hi:"à¤¹à¤¿à¤¨à¥à¤¦à¥",ho:"Hiri Motu",hr:"hrvatski",ig:"Asá»¥sá»¥ Igbo",is:"Ãslenska",io:"Ido",ii:"êê ê¿ Nuosuhxop",iu:"áááááá¦",ie:"Interlingue",ia:"Interlingua",id:"Bahasa Indonesia",ik:"IÃ±upiaq",jv:"basa Jawa",kl:"kalaallisut",kn:"à²à²¨à³à²¨à²¡",ks:"à¤à¤¶à¥à¤®à¥à¤°à¥",kr:"Kanuri",kk:"ÒÐ°Ð·Ð°Ò ÑÑÐ»Ñ",km:"Khmer",ki:"GÄ©kÅ©yÅ©",rw:"Ikinyarwanda",ky:"ÐºÑÑÐ³ÑÐ· ÑÐ¸Ð»Ð¸",kv:"ÐºÐ¾Ð¼Ð¸ ÐºÑÐ²",kg:"KiKongo",kj:"Kuanyama",ku:"KurdÃ®",lo:"Lao",la:"latine",lv:"latvieÅ¡u valoda",li:"Limburgs",ln:"LingÃ¡la",lt:"lietuviÅ³ kalba",lb:"LÃ«tzebuergesch",lu:"Luba-Katanga",lg:"Luganda",mk:"Ð¼Ð°ÐºÐµÐ´Ð¾Ð½ÑÐºÐ¸ ÑÐ°Ð·Ð¸Ðº",mh:"Kajin MÌ§ajeÄ¼",ml:"Malayalam",mi:"te reo MÄori",mr:"à¤®à¤°à¤¾à¤ à¥",ms:"bahasa Melayu",mg:"Malagasy fiteny",mt:"Malti",mo:"Moldavian",mn:"Ð¼Ð¾Ð½Ð³Ð¾Ð»",na:"EkakairÅ© Naoero",nv:"DinÃ© bizaad",nr:"isiNdebele (North)",nd:"isiNdebele (South)",ng:"Owambo",ne:"à¤¨à¥à¤ªà¤¾à¤²à¥",nn:"Norsk nynorsk",nb:"Norsk bokmÃ¥l",ny:"chiCheÅµa",oc:"Occitan",oj:"ááááá¯á§áá",or:"Oriya",om:"Afaan Oromoo",os:"Ð¸ÑÐ¾Ð½ Ã¦Ð²Ð·Ð°Ð³",pa:"à¨ªà©°à¨à¨¾à¨¬à©",pi:"à¤ªà¤¾à¤´à¤¿",ps:"Ù¾ÚØªÙ",qu:"Runa Simi",rm:"rumantsch grischun",ro:"romÃ¢nÄ",rn:"kiRundi",sg:"yÃ¢ngÃ¢ tÃ® sÃ¤ngÃ¶",sa:"à¤¸à¤à¤¸à¥à¤à¥à¤¤à¤®à¥",sr:"ÑÑÐ¿ÑÐºÐ¸ ÑÐµÐ·Ð¸Ðº",si:"Sinhala",sk:"slovenÄina",sl:"slovenÅ¡Äina",se:"DavvisÃ¡megiella",sm:"gagana fa&apos;a Samoa",sn:"chiShona",sd:"à¤¸à¤¿à¤¨à¥à¤§à¥",so:"Soomaaliga",st:"Sesotho",sc:"sardu",ss:"SiSwati",su:"Basa Sunda",sw:"Kiswahili",ty:"Reo Tahiti",ta:"à®¤à®®à®¿à®´à¯",tt:"ÑÐ°ÑÐ°ÑÑÐ°",te:"Telugu",tg:"ÑÐ¾Ò·Ð¸ÐºÓ£",tl:"Wikang Tagalog",th:"à¹à¸à¸¢",bo:"à½à½¼à½à¼à½¡à½²à½",ti:"Tigrinya",to:"faka Tonga",tn:"Setswana",ts:"Xitsonga",tk:"TÃ¼rkmen",tw:"Twi",ug:"UyÆ£urqÉ",uk:"ÑÐºÑÐ°ÑÐ½ÑÑÐºÐ°",ur:"Ø§Ø±Ø¯Ù",uz:"O&apos;zbek",ve:"Tshivená¸a",vi:"Tiáº¿ng Viá»t",vo:"VolapÃ¼k",cy:"Cymraeg",wa:"Walon",wo:"Wollof",xh:"isiXhosa",yi:"××Ö´×××©",yo:"YorÃ¹bÃ¡",za:"SaÉ¯ cueÅÆ",zu:"isiZulu",pb:"PortuguÃªs (Brasil)",fr:"FranÃ§ais",de:"Deutsch",sv:"Svenska",no:"Norsk",da:"Dansk",fi:"Suomeski",nl:"Nederlands",it:"Italiano",es:"EspaÃ±ol",pl:"Polski",hu:"Magyar",el:"ÎÎ»Î»Î·Î½Î¹ÎºÎ¬",tr:"TÃ¼rkÃ§e",zh:"ä¸­æ",ru:"ÑÑÑÑÐºÐ¸Ð¹ ÑÐ·ÑÐº",he:"×¢××¨××ª",ja:"æ¥æ¬èª",pt:"PortuguÃªs",ko:"íêµ­ì´",cs:"ÄeÅ¡tina",xx:"Unknown",xn:"None"},this.getLanguageName=function(e){return this.byCode[e]||""}};return new e}),define("plex/control/utils/SectionTypes",["underscore"],function(){var e=function(){this.types=[{key:"movies",typeID:"1",typeString:"movie",label:"Movies",defaultAgent:"com.plexapp.agents.imdb",defaultLanguage:"en",defaultScanner:"Plex Movie Scanner"},{key:"tv",typeID:"2",typeString:"show",label:"TV Shows",defaultAgent:"com.plexapp.agents.thetvdb",defaultLanguage:"en",defaultScanner:"Plex Series Scanner"},{key:"music",typeID:"8",typeString:"artist",label:"Music",defaultAgent:"com.plexapp.agents.lastfm",defaultLanguage:"en",defaultScanner:"Plex Music Scanner"},{key:"photos",typeID:"13",typeString:"photo",label:"Photos",defaultAgent:"com.plexapp.agents.none",defaultLanguage:"xn",defaultScanner:"Plex Photo Scanner"},{key:"videos",typeID:"1",typeString:"movie",label:"Home Movies",defaultAgent:"com.plexapp.agents.none",defaultLanguage:"xn",defaultScanner:"Plex Video Files Scanner"}],this.byKey=_.reduce(this.types,function(e,t){return e[t.key]=t,e},{}),this.byType=_.reduce(this.types,function(e,t){return e[t.typeString]=t,e},{}),this.getSectionTypes=function(){return this.types},this.getSectionType=function(e){return this.byKey[e]},this.getSectionTypeByString=function(e){return this.byType[e]}};return new e}),define("plex/view/modals/EditSectionModal",["hb!templates/modals/EditSectionModal.tpl","plex/control/Dispatcher","plex/view/BaseView","plex/model/BrowseDirectoryModel","plex/model/collections/BrowseDirectoryCollection","plex/model/collections/AgentCollection","plex/model/collections/ScannerCollection","plex/view/lists/BrowseDirectoryList","plex/control/utils/LanguageUtil","plex/control/utils/SectionTypes"],function(e,t,n,r,i,s,o,u,a,f){var l=function(e){return _.map(e,function(e){return'<option value="'+e.value+'">'+e.label+"</option>"}).join("\n")},c=function(e,t){for(var n=0;n<e.options.length;n++)if(t==e.options[n].value){e.selectedIndex=n;return}},h=n.extend({name:"editSectionModal",className:"modal fade",redirect:!1,events:{hidden:"onClose","click .section-type":"onSectionTypeClick",'change select[name="agent"]':"onAgentChange","click a.advanced-options":"onHideAdvanced","click a.standard-options":"onShowAdvanced","click .browse-control-close":"onHideBrowser",'focus input[name="path"]':"onFocusPath","click .add-path":"onAddPathClick","click .remove-path":"onRemovePathClick","submit form":"onSubmit","click .cancel-btn":"onCancel"},initialize:function(e){this.server=e.server,this.section=e.section,this.scanners={},this.agents={},this.redirect=e.redirect,_.each(f.getSectionTypes(),function(e){if(!this.scanners[e.typeID]){var t={server:this.server,sectionType:e.typeID};this.scanners[e.typeID]=new o([],t),this.agents[e.typeID]=new s([],t)}},this),this.pathRoot=new r({title:"Browse folders"},{server:this.server});var t=new i([this.pathRoot],{parent:null,server:this.server});this.pathList=this.registerView(new u({collection:t})),this.addBinding(this.pathList,"change:path",function(e){this.$(".browse-control").closest(".path-container").find('input[name="path"]').val(e)})},render:function(){var t={};return this.section?(t.edit=!0,t.section=this.section.toJSON()):t.add=!0,t.sectionTypes=f.getSectionTypes(),this.$el.html(e(t)).modal(),this.$(".browse-control").append(this.pathList.render().el),this.section&&this.populateDropdowns(f.getSectionTypeByString(this.section.get("type"))),this},setLanguages:function(e,t){var n=this.$('select[name="language"]');n.empty(),t&&n.append(l(_.map(t.get("language"),function(e){return{label:a.getLanguageName(e),value:e}})))},resetPathList:function(){this.pathList.parentItem=null,this.pathList.collection.reset([this.pathRoot])},populateDropdowns:function(e){var t=this.$("select[name=agent]"),n=this.$("select[name=scanner]");if(e){this.type=e.key,this.$(".add-section-type").addClass("hide"),this.$(".add-section-details").removeClass("hide"),this.$(".modal-footer").removeClass("hide");var r=l([{value:"",label:"Loading..."}]);t.empty().append(r),n.empty().append(r),this.agents[e.typeID].populate().done(_.bind(function(n){t.empty().append(l(n.map(function(e){return{label:e.get("name"),value:e.get("identifier")}})));var r=this.section?this.section.get("agent"):e.defaultAgent;c(t[0],r);var i=n.get(r);this.setLanguages(e,i)},this)).fail(_.bind(function(){t.empty()},this)),this.scanners[e.typeID].populate().done(_.bind(function(t){n.empty().append(l(t.map(function(e){return{label:e.get("name"),value:e.get("name")}}))),c(n[0],this.section?this.section.get("scanner"):e.defaultScanner)},this)).fail(_.bind(function(){n.empty()},this))}else t.empty(),n.empty()},onClose:function(e){t.trigger("destroy:modal",this)},onSectionTypeClick:function(e){e.preventDefault();var t=$(e.target).closest("a"),n=t.data("key");this.populateDropdowns(f.getSectionType(n))},onAgentChange:function(e){var t=f.getSectionType(this.type),n=this.agents[t.typeID].get(e.target.value);this.setLanguages(t,n)},onHideAdvanced:function(e){e.preventDefault(),this.$(".advanced-options").addClass("hide"),this.$(".standard-options").removeClass("hide")},onShowAdvanced:function(e){e.preventDefault(),this.$(".standard-options").addClass("hide"),this.$(".advanced-options").removeClass("hide")},onHideBrowser:function(e){e.preventDefault(),this.$(".browse-control").addClass("hide"),this.resetPathList()},onFocusPath:function(e){var t=$(e.currentTarget);this.resetPathList(),this.$(".browse-control").detach().insertAfter(t).removeClass("hide")},onAddPathClick:function(e){e.preventDefault();var t=$(Handlebars.partials.sectionPathInput({}));$("#path-sentinel").before(t),this.resetPathList(),this.$(".browse-control").detach().appendTo(t).removeClass("hide")},onRemovePathClick:function(e){e.preventDefault();var t=$(e.currentTarget).closest(".path-container"),n=$("#path-sentinel");t.find(".browse-control").detach().insertBefore(n).addClass("hide"),t.remove(),this.$('input[name="path"]').length==0&&($(Handlebars.partials.sectionPathInput({})).insertBefore(n),this.$(".browse-control").detach().insertBefore(n).addClass("hide"))},onSubmit:function(e){e.preventDefault();var n=e.target,r=f.getSectionType(this.type),i={type:r.typeString,title:n.name.value,agent:n.agent.value,scanner:n.scanner.value,language:n.language.value,location:[]};i.location=_.compact(_.map(this.$('input[name="path"]'),function(e){return e.value})),this.section?this.section.save(i,{success:_.bind(function(e){this.$el.modal("hide"),this.redirect&&t.trigger("navigate:section",e.server.id,e.id)},this)}):this.server.get("sections").create(i,{wait:!0,success:_.bind(function(e){this.$el.modal("hide"),this.redirect&&t.trigger("navigate:section",e.server.id,e.id)},this)})},onCancel:function(e){e.preventDefault(),this.$el.modal("hide")}});return h}),define("plex/view/lists/dashboard/DashboardSectionList",["hb!templates/lists/dashboard/DashboardSectionList.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","plex/view/lists/dashboard/ManageServerDropdownList","plex/view/lists/dashboard/items/DashboardSectionListItem","plex/view/modals/SelectServerModal","plex/view/modals/EditSectionModal"],function(e,t,n,r,i,s,o,u){var a=r.extend({className:"well",shared:!1,pendingRequests:0,empty:!0,currentSections:null,manageDropdown:null,events:{"click .add-btn":"onAddSectionClick"},initialize:function(e){this.shared=e.shared,this.currentSections=[],this.shared||(this.manageDropdown=new i({collection:this.collection})),this.addBinding(this.collection,"add",this.onServerAdd),this.pendingRequests=1,this.collection.populate().done(_.bind(function(){this.pendingRequests+=this.collection.length,this.onServerAddAll(this.collection),this.addBinding(this.collection,"reset",this.onServerAddAll),this.hideLoading(0)},this)).fail(_.bind(function(){this.hideLoading(0)},this))},render:function(){return this.$el.html(e({shared:this.shared,mixed:this.collection.length,pending:this.pendingRequests>0,empty:this.empty})),this.manageDropdown&&this.$(".well-header").prepend(this.manageDropdown.render().el),_.each(this._views,function(e){this.$("li:last").before(e.render().el)},this),this},hideLoading:function(e){this.pendingRequests--,e&&(this.empty=!1),this.pendingRequests<=0&&this.empty&&(this.$(".dashboard-empty-message").removeClass("hide"),this.$(".section-tile-list").addClass("hide"))},onServerAdd:function(e){if(this.shared!==e.get("shared")){this.hideLoading(0);return}var t=e.get("sections");this.addBinding(t,"add",this.onSectionAdd),t.populate({hideLoadingAlert:!0}).done(_.bind(function(){this.hideLoading(t.length),this.onSectionAddAll(t),this.addBinding(t,"reset",this.onSectionAddAll)},this)).fail(_.bind(function(){this.hideLoading(0)},this))},onServerAddAll:function(e){this.removeAllViews(),this.currentSections=[],e.each(this.onServerAdd,this)},onSectionAdd:function(e){if(_.indexOf(this.currentSections,e)===-1){this.currentSections.push(e);var t=new s({model:e});this.registerView(t),this.$("li:last").before(t.render().el)}},onSectionAddAll:function(e){e.each(this.onSectionAdd,this)},onAddSectionClick:function(e){e.preventDefault();if(this.collection.length>1){var t=new o({collection:n.get("servers")});this.addBinding(t,"server:select",this.onServerSelect),n.set("modal",t)}else n.set("modal",new u({server:this.collection.first(),redirect:!0}))},onServerSelect:function(e){n.set("modal",new u({server:n.get("servers").get(e),redirect:!0}))}});return a}),define("hb!templates/lists/dashboard/DashboardChannelList.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function c(e,t){return"hide"}function h(e,t){return"hide"}function p(e,t){var r,i;return a=n.empty,r=a||e.empty,i=n["if"],f=l.program(6,d,t),f.hash={},f.fn=f,f.inverse=l.noop,r=i.call(e,r,f),r||r===0?r:""}function d(e,t){return"hide"}n=n||e.helpers;var s="",o,u,a,f,l=this;s+='<div class="well-header">\n	<h3>Channels</h3>\n</div>\n\n<div class="dashboard-empty-message ',a=n.pending,o=a||t.pending,u=n["if"],f=l.program(1,c,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+=" ",a=n.empty,o=a||t.empty,u=n.unless,f=l.program(3,h,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='">\n	There are no recently used channels. <a class="add-btn" href="#">Install a channel</a>.\n</div>\n\n<ul class="tile-list section-tile-list ',a=n.pending,o=a||t.pending,u=n.unless,f=l.program(5,p,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+='">\n	<li><a class="add-btn tile-btn" href="#"><i class="icon icon-plus"></i></a></li>\n</ul>\n',s})}),define("hb!templates/lists/dashboard/items/DashboardChannelListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function y(e,t){var r="",i;return r+='\n		<span class="server-label">',c=n.server,i=c||e.server,i=i===null||i===undefined||i===!1?i:i.friendlyName,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"server.friendlyName",{hash:{}})),r+=g(i)+"</span>\n	",r}function b(e,t){var r="",i;return r+='\n		<span class="server-label">',c=n.server,i=c||e.server,i=i===null||i===undefined||i===!1?i:i.name,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"server.name",{hash:{}})),r+=g(i)+"</span>\n	",r}n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;s+='<a href="#!/servers/',c=n.server,o=c||t.server,o=o===null||o===undefined||o===!1?o:o.machineIdentifier,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"server.machineIdentifier",{hash:{}})),s+=g(o)+"/channels?key=",c=n.channel,o=c||t.channel,o=o===null||o===undefined||o===!1?o:o.key,c=n.encodeURL,u=c||t.encodeURL,typeof u===d?o=u.call(t,o,{hash:{}}):u===m?o=v.call(t,"encodeURL",o,{hash:{}}):o=u,s+=g(o)+'">\n	<img class="poster channel-poster" src="',o=85,u=85,c=n.channel,a=c||t.channel,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" width="85" height="85">\n	<span class="section-label">',c=n.channel,o=c||t.channel,o=o===null||o===undefined||o===!1?o:o.title,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"channel.title",{hash:{}})),s+=g(o)+"</span>\n	",c=n.server,o=c||t.server,o=o===null||o===undefined||o===!1?o:o.friendlyName,u=n["if"],h=p.program(1,y,i),h.hash={},h.fn=h,h.inverse=p.program(3,b,i),o=u.call(t,o,h);if(o||o===0)s+=o;return s+="\n</a>\n",s})}),define("plex/view/lists/dashboard/items/DashboardChannelListItem",["hb!templates/lists/dashboard/items/DashboardChannelListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",className:"channel-tile-list-item",initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){var t={server:this.model.server.toJSON(),serverURL:this.model.server.url(),serverObj:this.model.server,channel:this.model.toJSON()};return this.$el.html(e(t)),this}});return n}),define("hb!templates/lists/dashboard/BrowseChannelsDropdownList.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return'\n	<a class="dropdown-toggle" href="#browse-channels-dropdown-list" data-toggle="dropdown">\n		<i class="icon icon-th"></i> Browse <i class="icon-caret-down"></i>\n	</a>\n'}function m(e,t){var r="",i,s;r+="\n	",a=n.server,i=a||e.server,s=n["if"],f=l.program(4,g,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n",r}function g(e,t){var r="",i;return r+='\n		<a href="#!/servers/',a=n.server,i=a||e.server,i=i===null||i===undefined||i===!1?i:i.machineIdentifier,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"server.machineIdentifier",{hash:{}})),r+=d(i)+'/channels">\n			<i class="icon icon-th"></i> Browse</i>\n		</a>\n	',r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;a=n.showDropdown,o=a||t.showDropdown,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.program(3,m,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+='\n\n<ul class="dropdown-menu dropdown-menu-large"></ul>\n',s})}),define("hb!templates/lists/dashboard/items/BrowseChannelsDropdownListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i;return r+="\n		",a=n.friendlyName,i=a||e.friendlyName,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"friendlyName",{hash:{}})),r+=d(i)+"\n	",r}function m(e,t){var r="",i;return r+="\n		",a=n.name,i=a||e.name,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"name",{hash:{}})),r+=d(i)+"\n	",r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<a href="#!/servers/',a=n.machineIdentifier,o=a||t.machineIdentifier,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"machineIdentifier",{hash:{}})),s+=d(o)+'/channels">\n	',a=n.friendlyName,o=a||t.friendlyName,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.program(3,m,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n</a>\n",s})}),define("plex/view/lists/dashboard/items/BrowseChannelsDropdownListItem",["hb!templates/lists/dashboard/items/BrowseChannelsDropdownListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",render:function(){return this.$el.html(e(this.model.toJSON())),this}});return n}),define("plex/view/lists/dashboard/BrowseChannelsDropdownList",["hb!templates/lists/dashboard/BrowseChannelsDropdownList.tpl","plex/view/BaseView","plex/view/lists/dashboard/items/BrowseChannelsDropdownListItem"],function(e,t,n){var r=t.extend({id:"browse-channels-dropdown-list",className:"dropdown pull-right",initialize:function(){this.populated=!!this.collection.length,this.addBinding(this.collection,"add",this.onAdd),this.addBinding(this.collection,"reset",this.onAddAll)},render:function(t){var n={},r=this.collection.filter(function(e){return!e.get("shared")});return r.length&&(r.length>1?n.showDropdown=!0:n.server=r[0].toJSON()),this.$el.html(e(n)),!t&&this.populated&&this.onAddAll(this.collection),this},onAdd:function(e){if(e.get("shared"))return;var t=new n({model:e});this.registerView(t),this.$(".dropdown-menu").append(t.render().el)},onAddAll:function(e){this.populated=!0,this.removeAllViews(),this.render(!0),e.each(this.onAdd,this)}});return r}),define("plex/view/lists/dashboard/DashboardChannelList",["hb!templates/lists/dashboard/DashboardChannelList.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/model/collections/ChannelCollection","plex/view/BaseView","plex/view/lists/dashboard/items/DashboardChannelListItem","plex/view/lists/dashboard/BrowseChannelsDropdownList","plex/view/modals/SelectServerModal"],function(e,t,n,r,i,s,o,u){var a=i.extend({className:"well",pendingRequests:0,empty:!0,currentChannels:null,browseDropdown:null,events:{"click .add-btn":"onAddChannelClick"},initialize:function(e){this.currentChannels=[],this.browseDropdown=new o({collection:this.collection}),this.addBinding(this.collection,"add",this.onServerAdd),this.pendingRequests=1,this.collection.populate().done(_.bind(function(){this.pendingRequests+=this.collection.length,this.onServerAddAll(this.collection),this.addBinding(this.collection,"reset",this.onServerAddAll),this.hideLoading(0)},this)).fail(_.bind(function(){this.hideLoading(0)},this))},render:function(){return this.$el.html(e({pending:this.pendingRequests>0,empty:this.empty})),this.$(".well-header").prepend(this.browseDropdown.render().el),_.each(this._views,function(e){this.$("li:last").before(e.render().el)},this),this},hideLoading:function(e){this.pendingRequests--,e&&(this.empty=!1),this.pendingRequests<=0&&this.empty&&(this.$(".dashboard-empty-message").removeClass("hide"),this.$(".section-tile-list").addClass("hide"))},onServerAdd:function(e){if(e.get("shared")){this.hideLoading(0);return}var t=new r([],{server:e,recent:!0});this.addBinding(t,"add",this.onChannelAdd),t.populate({hideLoadingAlert:!0}).done(_.bind(function(){this.hideLoading(t.length),this.onChannelAddAll(t),this.addBinding(t,"reset",this.onChannelAddAll)},this)).fail(_.bind(function(){this.hideLoading(0)},this))},onServerAddAll:function(e){this.removeAllViews(),this.currentChannels=[],e.each(this.onServerAdd,this)},onChannelAdd:function(e){if(_.indexOf(this.currentChannels,e)===-1){this.currentChannels.push(e);var t=new s({model:e});this.registerView(t),this.$("li:last").before(t.render().el)}},onChannelAddAll:function(e){e.each(this.onChannelAdd,this)},onAddChannelClick:function(e){e.preventDefault();if(this.collection.length>1){var r=new u({collection:n.get("servers")});this.addBinding(r,"server:select",this.onServerSelect),n.set("modal",r)}else t.trigger("navigate:channelDirectory",this.collection.first().id)},onServerSelect:function(e){t.trigger("navigate:channelDirectory",e)}});return a}),define("hb!templates/lists/dashboard/DashboardPlaylistList.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return'\n	<div class="spinner-container"></div>\n'}function m(e,t){var r="",i,s;r+="\n	",a=n.empty,i=a||e.empty,s=n["if"],f=l.program(4,g,t),f.hash={},f.fn=f,f.inverse=l.program(6,y,t),i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n",r}function g(e,t){return'\n		<div class="dashboard-empty-message">This playlist is empty.</div>\n	'}function y(e,t){var r="",i,s;r+='\n		<div class="dashboard-pagination">\n			<a class="previous-btn gray ',a=n.showPrevious,i=a||e.showPrevious,s=n.unless,f=l.program(7,b,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+='" href="#"><i class="icon-chevron-left"></i></a>\n\n			',a=n.index,i=a||e.index,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"index",{hash:{}})),r+=d(i)+" of ",a=n.total,i=a||e.total,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"total",{hash:{}})),r+=d(i)+'\n\n			<a class="next-btn gray ',a=n.showNext,i=a||e.showNext,s=n.unless,f=l.program(9,w,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+='" href="#"><i class="icon-chevron-right"></i></a>\n		</div>\n\n		<ul class="dashboard-sidebar-list dashboard-',a=n.playlistName,i=a||e.playlistName,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"playlistName",{hash:{}})),r+=d(i)+'-list"></ul>\n	',r}function b(e,t){return"hide"}function w(e,t){return"hide"}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<div class="well-header">\n	<a class="pull-right" href="#!/playlist/',a=n.playlistName,o=a||t.playlistName,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"playlistName",{hash:{}})),s+=d(o)+'"><i class="icon icon-wrench"></i> Manage</a>\n\n	<h3>',a=n.playlistLabel,o=a||t.playlistLabel,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"playlistLabel",{hash:{}})),s+=d(o)+"</h3>\n</div>\n\n",a=n.loading,o=a||t.loading,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.program(3,m,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n",s})}),define("hb!templates/lists/dashboard/items/DashboardPlaylistListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function y(e,t){var r="",i,s;return c=n.addedAt,i=c||e.addedAt,c=n.timeAgo,s=c||e.timeAgo,typeof s===d?i=s.call(e,i,{hash:{}}):s===m?i=v.call(e,"timeAgo",i,{hash:{}}):i=s,r+=g(i)+" &middot; ",r}function b(e,t){var r="",i;return r+=" &middot; ",c=n.media,i=c||e.media,i=i===null||i===undefined||i===!1?i:i.recommender,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"media.recommender",{hash:{}})),r+=g(i),r}n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;s+='<a class="card-container" href="#!/playlist/',c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.playlistName,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"media.playlistName",{hash:{}})),s+=g(o)+"/player/",c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.id,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"media.id",{hash:{}})),s+=g(o)+'">\n	<img class="poster" data-original="',o=260,u=260,c=n.media,a=c||t.media,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" src="img/posters/poster_wide_large.png">\n	<div class="card-overlay">\n		<h4>',o=36,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.title,c=n.truncate,a=c||t.truncate,typeof a===d?o=a.call(t,u,o,{hash:{}}):a===m?o=v.call(t,"truncate",u,o,{hash:{}}):o=a,s+=g(o)+'</h4>\n\n		<p class="card-details">',c=n.addedAt,o=c||t.addedAt,u=n["if"],h=p.program(1,y,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.sourceTitle,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"media.sourceTitle",{hash:{}})),s+=g(o),c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.recommender,u=n["if"],h=p.program(3,b,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;return s+="</p>\n	</div>\n</a>\n",s})}),define("plex/view/lists/dashboard/items/DashboardPlaylistListItem",["hb!templates/lists/dashboard/items/DashboardPlaylistListItem.tpl","plex/model/AppModel","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n,r){var i=r.extend({tagName:"li",className:"dashboard-sidebar-list-item",render:function(){var n=null;if(this.model.get("thumb")){var r=/\?(\d+)$/.exec(this.model.get("thumb"));r&&(n=parseInt(r[1]))}var i={media:this.model.toJSON(),serverURL:t.get("primaryServer").url(),serverObj:t.get("primaryServer"),addedAt:n};return this.$el.html(e(i)),this}});return i}),function(e,t){$window=e(t),e.fn.lazyload=function(n){function s(){var t=0;r.each(function(){var n=e(this);if(i.skip_invisible&&!n.is(":visible"))return;if(!e.abovethetop(this,i)&&!e.leftofbegin(this,i))if(!e.belowthefold(this,i)&&!e.rightoffold(this,i))n.trigger("appear");else if(++t>i.failure_limit)return!1})}var r=this,i={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return n&&(undefined!==n.failurelimit&&(n.failure_limit=n.failurelimit,delete n.failurelimit),undefined!==n.effectspeed&&(n.effect_speed=n.effectspeed,delete n.effectspeed),e.extend(i,n)),$container=i.container===undefined||i.container===t?$window:e(i.container),0===i.event.indexOf("scroll")&&$container.bind(i.event,function(e){return s()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,n.one("appear",function(){if(!this.loaded){if(i.appear){var s=r.length;i.appear.call(t,s,i)}e("<img />").bind("load",function(){n.hide().attr("src",n.data(i.data_attribute))[i.effect](i.effect_speed),t.loaded=!0;var s=e.grep(r,function(e){return!e.loaded});r=e(s);if(i.load){var o=r.length;i.load.call(t,o,i)}}).attr("src",n.data(i.data_attribute))}}),0!==i.event.indexOf("scroll")&&n.bind(i.event,function(e){t.loaded||n.trigger("appear")})}),$window.bind("resize",function(e){s()}),s(),this},e.belowthefold=function(n,r){var i;return r.container===undefined||r.container===t?i=$window.height()+$window.scrollTop():i=$container.offset().top+$container.height(),i<=e(n).offset().top-r.threshold},e.rightoffold=function(n,r){var i;return r.container===undefined||r.container===t?i=$window.width()+$window.scrollLeft():i=$container.offset().left+$container.width(),i<=e(n).offset().left-r.threshold},e.abovethetop=function(n,r){var i;return r.container===undefined||r.container===t?i=$window.scrollTop():i=$container.offset().top,i>=e(n).offset().top+r.threshold+e(n).height()},e.leftofbegin=function(n,r){var i;return r.container===undefined||r.container===t?i=$window.scrollLeft():i=$container.offset().left,i>=e(n).offset().left+r.threshold+e(n).width()},e.inviewport=function(t,n){return!e.rightofscreen(t,n)&&!e.leftofscreen(t,n)&&!e.belowthefold(t,n)&&!e.abovethetop(t,n)},e.extend(e.expr[":"],{"below-the-fold":function(n){return e.belowthefold(n,{threshold:0,container:t})},"above-the-top":function(n){return!e.belowthefold(n,{threshold:0,container:t})},"right-of-screen":function(n){return e.rightoffold(n,{threshold:0,container:t})},"left-of-screen":function(n){return!e.rightoffold(n,{threshold:0,container:t})},"in-viewport":function(n){return!e.inviewport(n,{threshold:0,container:t})},"above-the-fold":function(n){return!e.belowthefold(n,{threshold:0,container:t})},"right-of-fold":function(n){return e.rightoffold(n,{threshold:0,container:t})},"left-of-fold":function(n){return!e.rightoffold(n,{threshold:0,container:t})}})}(jQuery,window),define("lazyload",function(){}),define("plex/view/lists/dashboard/DashboardPlaylistList",["hb!templates/lists/dashboard/DashboardPlaylistList.tpl","plex/view/BaseView","plex/view/lists/dashboard/items/DashboardPlaylistListItem","lazyload","spin"],function(e,t,n){var r=t.extend({className:"well",spinner:null,unwatched:null,currentIndex:0,events:{"click .previous-btn":"onPreviousClick","click .next-btn":"onNextClick"},initialize:function(e){this.spinner=new Spinner({color:"#555",radius:5,width:2,length:4,zIndex:1,left:120,top:16}),this.addBinding(this.collection,"reset",this.onReset),this.collection.fetch({hideLoadingAlert:!0}),this.loadPosterThrottle=_.throttle(_.debounce(this.loadPoster,500),100)},render:function(){if(this.unwatched)if(this.unwatched.length){this.$el.html(e({index:this.currentIndex+1,total:this.unwatched.length,showPrevious:this.currentIndex>0,showNext:this.currentIndex+1<this.unwatched.length,playlistName:this.collection.playlistName,playlistLabel:this.collection.playlistLabel}));var t=this.unwatched[this.currentIndex],r=new n({model:t});this.$(".dashboard-"+this.collection.playlistName+"-list").append(r.render().el),this.loadPosterThrottle()}else this.$el.html(e({empty:!0,playlistName:this.collection.playlistName,playlistLabel:this.collection.playlistLabel}));else this.$el.html(e({loading:!0,playlistName:this.collection.playlistName,playlistLabel:this.collection.playlistLabel})),this.spinner.spin(this.$(".spinner-container")[0]);return this},destroy:function(){this.spinner.stop(),t.prototype.destroy.call(this)},loadPoster:function(){this.$(".poster").lazyload({threshold:100})},onReset:function(e){this.unwatched=e.unwatched(),this.render()},onPreviousClick:function(e){e.preventDefault(),this.currentIndex>0&&(this.currentIndex--,this.render())},onNextClick:function(e){e.preventDefault(),this.currentIndex+1<this.unwatched.length&&(this.currentIndex++,this.render())}});return r}),define("plex/view/DashboardView",["hb!templates/DashboardView.tpl","plex/model/AppModel","plex/view/BaseView","plex/view/lists/dashboard/DashboardSectionList","plex/view/lists/dashboard/DashboardChannelList","plex/view/lists/dashboard/DashboardPlaylistList"],function(e,t,n,r,i,s){var o=n.extend({className:"dashboard-container container-fluid",myLibraryList:null,sharedLibraryList:null,channelList:null,playlistNames:["queue","recommendations"],playlistViews:{},initialize:function(){var e=t.get("primaryServer"),n=t.get("myPlex");e.get("shared")||(this.myLibraryList=this.registerView(new r({collection:this.collection,shared:!1})),this.channelList=this.registerView(new i({collection:this.collection}))),n.get("signedIn")&&(this.sharedLibraryList=this.registerView(new r({collection:this.collection,shared:!0})),_.each(this.playlistNames,function(e){this.playlistViews[e]=this.registerView(new s({collection:t.get("playlists")[e]}))},this))},render:function(){return this.$el.html(e()),this.myLibraryList&&this.$(".dashboard-main").append(this.myLibraryList.render().el),this.channelList&&this.$(".dashboard-main").append(this.channelList.render().el),this.sharedLibraryList&&this.$(".dashboard-main").append(this.sharedLibraryList.render().el),_.each(this.playlistViews,_.bind(function(e){this.$(".dashboard-sidebar").append(e.render().el)},this)),this}});return o}),define("hb!templates/setup/SetupView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<div class="setup-row">\n	<a class="skip-btn" href="#!/dashboard">Skip</a>\n\n	<h1>Get Started</h1>\n\n	<div class="setup-progress">\n		<div class="intro-segment setup-progress-segment active">\n			<a class="change-view-btn segment-title gray" data-view="intro" href="#">Intro</a>\n		</div><div class="setup-segment setup-progress-segment">\n			<a class="change-view-btn segment-title gray" data-view="setup" href="#">Setup</a>\n		</div><div class="library-segment setup-progress-segment">\n			<a class="change-view-btn segment-title gray" data-view="library" href="#">Library</a>\n		</div><div class="channels-segment setup-progress-segment">\n			<a class="change-view-btn segment-title gray" data-view="channels" href="#">Channels</a>\n		</div><div class="myplex-segment setup-progress-segment">\n			<a class="change-view-btn segment-title gray" data-view="myplex" href="#">myPlex</a>\n		</div>\n	</div>\n\n	<div class="setup-container"></div>\n</div>\n'})}),define("hb!templates/setup/SetupIntroView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<h2>Introducing the Plex Media Server</h2>\n\n<p>Some text about what the plex media server does, why you need to install a media server and how it relates to all your devices. Let\'s try to keep the copy on the shorter side so we don\'t overwhelm anyone.</p>\n\n<p class="pull-center"><i class="plex-icon-server"></i></p>\n\n<div class="form-actions pull-center">\n		<a class="change-view-btn btn btn-primary btn-large" data-view="setup" href="#">Start</i></a>\n</div>\n'})}),define("plex/view/setup/SetupIntroView",["hb!templates/setup/SetupIntroView.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({initialize:function(){},render:function(){return this.$el.html(e({server:this.model.toJSON()})),this}});return n}),define("hb!templates/setup/SetupServerView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i;return r+='\n		<div class="control-group">\n			<label class="control-label" for="',a=n.friendlyName,i=a||e.friendlyName,i=i===null||i===undefined||i===!1?i:i.id,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"friendlyName.id",{hash:{}})),r+=d(i)+'">',a=n.friendlyName,i=a||e.friendlyName,i=i===null||i===undefined||i===!1?i:i.label,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"friendlyName.label",{hash:{}})),r+=d(i)+'</label>\n			<div class="controls">\n				<input type="text" id="',a=n.friendlyName,i=a||e.friendlyName,i=i===null||i===undefined||i===!1?i:i.id,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"friendlyName.id",{hash:{}})),r+=d(i)+'" name="',a=n.friendlyName,i=a||e.friendlyName,i=i===null||i===undefined||i===!1?i:i.id,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"friendlyName.id",{hash:{}})),r+=d(i)+'" class="span3" value="',a=n.friendlyName,i=a||e.friendlyName,i=i===null||i===undefined||i===!1?i:i.value,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"friendlyName.value",{hash:{}})),r+=d(i)+'">\n				<p class="help-block">',a=n.friendlyName,i=a||e.friendlyName,i=i===null||i===undefined||i===!1?i:i.summary,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"friendlyName.summary",{hash:{}})),r+=d(i)+"</p>\n			</div>\n		</div>\n	",r}function m(e,t){var r="",i,s;r+='\n		<div class="control-group">\n			<label class="control-label" for="',a=n.collectUsageData,i=a||e.collectUsageData,i=i===null||i===undefined||i===!1?i:i.id,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"collectUsageData.id",{hash:{}})),r+=d(i)+'">',a=n.collectUsageData,i=a||e.collectUsageData,i=i===null||i===undefined||i===!1?i:i.label,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"collectUsageData.label",{hash:{}})),r+=d(i)+'</label>\n			<div class="controls">\n				<input type="checkbox" id="',a=n.collectUsageData,i=a||e.collectUsageData,i=i===null||i===undefined||i===!1?i:i.id,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"collectUsageData.id",{hash:{}})),r+=d(i)+'" name="',a=n.collectUsageData,i=a||e.collectUsageData,i=i===null||i===undefined||i===!1?i:i.id,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"collectUsageData.id",{hash:{}})),r+=d(i)+'" class="input-dark" ',a=n.collectUsageData,i=a||e.collectUsageData,i=i===null||i===undefined||i===!1?i:i.value,s=n["if"],f=l.program(4,g,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+='>\n				<p class="help-block">',a=n.collectUsageData,i=a||e.collectUsageData,i=i===null||i===undefined||i===!1?i:i.summary,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"collectUsageData.summary",{hash:{}})),r+=d(i)+"</p>\n			</div>\n		</div>\n	",r}function g(e,t){return"checked"}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<h2>Setup</h2>\n\n<form class="form-horizontal">\n	',a=n.friendlyName,o=a||t.friendlyName,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+="\n\n	",a=n.collectUsageData,o=a||t.collectUsageData,u=n["if"],f=l.program(3,m,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+='\n\n	<div class="form-actions">\n		<a class="next-btn btn btn-primary btn-medium" href="#">Next <i class="icon-arrow-right"></i></a>\n	</div>\n</form>\n',s})}),define("plex/view/setup/SetupServerView",["hb!templates/setup/SetupServerView.tpl","plex/model/AppModel","plex/view/BaseView"],function(e,t,n){var r=n.extend({friendlyName:null,collectUsageData:null,events:{"change input[name]":"onPreferenceChange","change select[name]":"onPreferenceChange","click .next-btn":"onNextClick"},initialize:function(){var e=this.model.get("preferences");this.friendlyName=e.get("FriendlyName"),this.collectUsageData=e.get("collectUsageData"),this.addBinding(e,"reset",this.onPreferencesReset),e.populate()},render:function(){var t={};return this.changes={},this.friendlyName&&(t.friendlyName=this.friendlyName.toJSON()),this.collectUsageData&&(t.collectUsageData=this.collectUsageData.toJSON()),this.$el.html(e(t)),this},onPreferencesReset:function(e){this.friendlyName=e.get("FriendlyName"),this.collectUsageData=e.get("collectUsageData"),this.render()},onPreferenceChange:function(e){var t=e.currentTarget,n=t.value;t.type==="checkbox"&&!t.checked&&(n="0"),this.changes[t.name]=n},onNextClick:function(e){e.preventDefault(),this.friendlyName.save(this.changes).done(_.bind(function(){this.trigger("view:change","library")},this)).fail(function(){t.set("alert",{status:"error",message:"There was a problem saving your preferences."})})}});return r}),define("hb!templates/setup/SetupMyPlexView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function g(e,t){var r="",i,s;r+='\n			<p><i class="icon-ok"></i> Signed in as ',f=n.account,i=f||e.account,i=i===null||i===undefined||i===!1?i:i.username,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"account.username",{hash:{}})),r+=m(i)+' &middot; <a class="sign-out-btn" href="#">Sign Out</a></p>\n\n			',f=n.account,i=f||e.account,i=i===null||i===undefined||i===!1?i:i.mappingError,s=n["if"],l=c.program(2,y,t),l.hash={},l.fn=l,l.inverse=c.program(13,N,t),i=s.call(e,i,l);if(i||i===0)r+=i;return r+="\n		",r}function y(e,t){var r="",i,s,o;r+="\n				",i="badauth",f=n.account,s=f||e.account,s=s===null||s===undefined||s===!1?s:s.mappingError,f=n.if_eq,o=f||e.if_eq,l=c.program(3,b,t),l.hash={},l.fn=l,l.inverse=c.program(5,w,t),f&&typeof o===h?i=o.call(e,s,i,l):i=p.call(e,o,s,i,l);if(i||i===0)r+=i;return r+="\n			",r}function b(e,t){return'\n					<p><i class="icon-remove"></i> Unable to authenticate your server &middot; <a class="retry-btn" href="#">Retry</a></p>\n				'}function w(e,t){var r="",i,s,o;i="unreachable",f=n.account,s=f||e.account,s=s===null||s===undefined||s===!1?s:s.mappingError,f=n.if_eq,o=f||e.if_eq,l=c.program(6,E,t),l.hash={},l.fn=l,l.inverse=c.program(8,S,t),f&&typeof o===h?i=o.call(e,s,i,l):i=p.call(e,o,s,i,l);if(i||i===0)r+=i;return r+="\n				",r}function E(e,t){return'\n					<p><i class="icon-remove"></i> myPlex could not connect to your server &middot; <a class="retry-btn" href="#">Retry</a></p>\n				'}function S(e,t){var r="",i,s,o;i="myplexgone",f=n.account,s=f||e.account,s=s===null||s===undefined||s===!1?s:s.mappingError,f=n.if_eq,o=f||e.if_eq,l=c.program(9,x,t),l.hash={},l.fn=l,l.inverse=c.program(11,T,t),f&&typeof o===h?i=o.call(e,s,i,l):i=p.call(e,o,s,i,l);if(i||i===0)r+=i;return r+="\n				",r}function x(e,t){return'\n					<p><i class="icon-remove"></i> myPlex is not responding &middot; <a class="retry-btn" href="#">Retry</a></p>\n				'}function T(e,t){return'\n					<p><i class="icon-remove"></i> There was a problem publishing your server &middot; <a class="retry-btn" href="#">Retry</a></p>\n				'}function N(e,t){var r="",i,s,o;r+="\n				",i="mapped",f=n.account,s=f||e.account,s=s===null||s===undefined||s===!1?s:s.mappingState,f=n.if_eq,o=f||e.if_eq,l=c.program(14,C,t),l.hash={},l.fn=l,l.inverse=c.program(16,k,t),f&&typeof o===h?i=o.call(e,s,i,l):i=p.call(e,o,s,i,l);if(i||i===0)r+=i;return r+="\n			",r}function C(e,t){var r="",i;return r+='\n					<p><i class="icon-ok"></i> Server is mapped to port ',f=n.account,i=f||e.account,i=i===null||i===undefined||i===!1?i:i.publicPort,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"account.publicPort",{hash:{}})),r+=m(i)+"</p>\n				",r}function k(e,t){return'\n					<p class="setup-myplex-loading">Publishing server...</p>\n				'}function L(e,t){return'\n			<a class="change-form-btn" href="#">Already have an account?</a>\n			<a class="change-form-btn hide" href="#">Create an account</a>\n\n			<h3>Sign Up</h3>\n			<h3 class="hide">Sign In</h3>\n\n			<div class="email-group control-group">\n				<span class="help-inline"></span>\n				<label class="control-label" for="email">Email</label>\n				<div class="controls">\n					<input type="text" id="email" name="email">\n				</div>\n			</div>\n\n			<div class="password-group control-group">\n				<span class="help-inline"></span>\n				<label class="control-label" for="password">Password</label>\n				<div class="controls">\n					<input type="password" id="password" name="password">\n				</div>\n				<a class="forgot-password-btn hide" href="https://my.plexapp.com/users/password/new">Forgot Password?</a>\n			</div>\n\n			<div class="confirmPassword-group control-group">\n				<span class="help-inline"></span>\n				<label class="control-label" for="confirmPassword">Confirm Password</label>\n				<div class="controls">\n					<input type="password" id="confirmPassword" name="confirmPassword">\n				</div>\n			</div>\n		'}n=n||e.helpers;var s="",o,u,a,f,l,c=this,h="function",p=n.blockHelperMissing,d=n.helperMissing,v=void 0,m=this.escapeExpression;s+='<h2>Publish Your Server</h2>\n\n<p>Some text about what myPlex is and how you can use it for publishing your server and sharing content.</p>\n\n<div class="myplex-container">\n	<i class="plex-icon-myplex pull-left"></i>\n\n	<form class="setup-myplex-form">\n		',o="ok",f=n.account,u=f||t.account,u=u===null||u===undefined||u===!1?u:u.signInState,f=n.if_eq,a=f||t.if_eq,l=c.program(1,g,i),l.hash={},l.fn=l,l.inverse=c.program(18,L,i),f&&typeof a===h?o=a.call(t,u,o,l):o=p.call(t,a,u,o,l);if(o||o===0)s+=o;return s+='\n	</form>\n</div>\n\n<div class="form-actions">\n	<a class="next-btn btn btn-primary btn-medium" href="#">Next <i class="icon-arrow-right"></i></a>\n</div>\n',s})}),define("plex/view/setup/SetupMyPlexView",["hb!templates/setup/SetupMyPlexView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView"],function(e,t,n,r){var i={email:"An email address is required",password:"A password is required",confirmPassword:"You must confirm your password",confirmPasswordMatch:"Your passwords do not match"},s=r.extend({signedIn:!1,published:!1,autoAdvance:!1,pollInterval:null,events:{"click .change-form-btn":"onChangeFormClick","click .sign-out-btn":"onSignOutClick","click .retry-btn":"onRetryClick","blur input[name]":"onInputBlur","keypress .setup-myplex-form":"onFormKeyPress","click .next-btn":"onSubmit"},initialize:function(){var e=this.model.get("myPlexAccount");this.addBinding(e,"change:signInState",this.onAccountChange),this.addBinding(e,"change:mappingState",this.onAccountChange),this.addBinding(e,"change:publicPort",this.onAccountChange),e.fetch().done(_.bind(function(){this.update(!0)},this));var t=this.model.get("preferences"),n=t.get("PublishServerOnPlexOnlineKey");n&&(this.published=n.get("value")),this.addBinding(t,"reset",this.onPreferencesReset),t.populate()},render:function(){var t=this.model.get("myPlexAccount");return this.$el.html(e({account:t.toJSON()})),this},update:function(e){var t=this.model.get("myPlexAccount"),n=t.get("signInState"),r=t.get("mappingState");this.signedIn=n==="ok",this.published=r==="mapped";if(this.signedIn){r==="waiting"||r==="unknown"?this.pollInterval||(this.pollInterval=setInterval(function(){t.fetch({hideLoadingAlert:!0})},500)):(clearInterval(this.pollInterval),this.pollInterval=null),this.published&&this.autoAdvance&&(this.autoAdvance=!1,this.trigger("view:change","complete")),e&&t.get("mappingState")==="failed"&&this.retry();if(r==="unknown"){var i=this.model.get("preferences"),s=i.get("PublishServerOnPlexOnlineKey");(!s||!s.get("value"))&&this.publish()}}},signIn:function(e,n){if(!this.validateAll())return;var r=this.model.get("myPlexAccount"),i={username:e,password:n};this.autoAdvance=!0,t.trigger("command:ServerSignIn",r,i,_.bind(function(){r.fetch({hideLoadingAlert:!0})},this))},signUp:function(e,n,r){if(!this.validateAll())return;var i=this.model.get("myPlexAccount"),s={username:e,password:n};this.autoAdvance=!0,t.trigger("command:ServerSignUp",i,s,_.bind(function(){i.fetch({hideLoadingAlert:!0})},this))},signOut:function(){var e=this.model.get("myPlexAccount");t.trigger("command:ServerSignOut",e,_.bind(function(){e.fetch({hideLoadingAlert:!0})},this))},publish:function(){var e=this.model.get("myPlexAccount");this.published?this.trigger("view:change","complete"):t.trigger("command:PublishServer",this.model,!0,_.bind(function(){e.fetch({hideLoadingAlert:!0})},this))},retry:function(){t.trigger("command:PublishServer",this.model,!1,_.bind(this.publish,this))},validate:function(e){var t=e.name,n=$(e).closest("."+t+"-group");return n.hasClass("hide")?!0:e.value===""?(n.addClass("error"),n.find(".help-inline").text(i[t]),!1):t==="confirmPassword"&&e.value!==e.form.password.value?(n.addClass("error"),n.find(".help-inline").text(i.confirmPasswordMatch),!1):(n.removeClass("error"),n.find(".help-inline").text(""),!0)},validateAll:function(){var e=!0;for(var t in i){var n=this.$("input[name="+t+"]")[0];n&&(this.validate(n)||(e=!1))}return e},onAccountChange:function(e,t){this.render(),this.update()},onPreferencesReset:function(e){this.published=e.get("PublishServerOnPlexOnlineKey").get("value")},onChangeFormClick:function(e){e.preventDefault(),this.$("h3, .change-form-btn, .confirmPassword-group, .forgot-password-btn").toggleClass("hide")},onSignOutClick:function(e){e.preventDefault(),this.signOut()},onRetryClick:function(e){e.preventDefault(),this.retry()},onInputBlur:function(e){this.validate(e.target)},onFormKeyPress:function(e){e.keyCode===13&&this.onSubmit(e)},onSubmit:function(e){e.preventDefault();if(!this.signedIn){var t=this.$(".setup-myplex-form")[0];this.$(".confirmPassword-group").hasClass("hide")?this.signIn(t.email.value,t.password.value):this.signUp(t.email.value,t.password.value,t.confirmPassword.value)}else this.published?this.trigger("view:change","complete"):this.publish()}});return s}),define("hb!templates/setup/SetupLibraryView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<h2>Create Your Media Library</h2>\n\n<p>Some text about how your media library consists of sections. Each section has a specific type of media (movies, tv shows, music) that you have access to locally.</p>\n\n<div class="setup-add-section-container">\n	<a class="add-btn btn btn-inverse btn-medium" href="#"><i class="icon-plus"></i> Add a Section</a>\n</div>\n\n<div class="form-actions">\n	<a class="next-btn btn btn-primary btn-medium" href="#">Next <i class="icon-arrow-right"></i></a>\n</div>\n'})}),define("hb!templates/lists/items/SectionTileListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<a class="delete-btn" href="#"><i class="icon-remove-sign"></i></a>\n<i class="poster section-poster plex-icon-',u=n.type,o=u||t.type,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"type",{hash:{}})),s+=h(o)+'"></i>\n<span class="section-label">',u=n.title,o=u||t.title,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"title",{hash:{}})),s+=h(o)+'</span>\n<span class="server-label">',u=n.name,o=u||t.name,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"name",{hash:{}})),s+=h(o)+"</span>\n",s})}),define("plex/view/lists/items/SectionTileListItem",["hb!templates/lists/items/SectionTileListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({tagName:"li",events:{"click .delete-btn":"onDeleteClick"},initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e(this.model.toJSON())),this},onDeleteClick:function(e){e.preventDefault(),t.trigger("command:DeleteSection",this.model)}});return r}),define("plex/view/lists/SectionTileList",["plex/view/lists/BaseList","plex/view/lists/items/SectionTileListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"tile-list section-tile-list",initialize:function(){this.setup(t),this.collection.fetch()},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("plex/view/setup/SetupLibraryView",["hb!templates/setup/SetupLibraryView.tpl","plex/model/AppModel","plex/view/BaseView","plex/view/lists/SectionTileList","plex/view/modals/EditSectionModal"],function(e,t,n,r,i){var s=n.extend({sectionList:null,events:{"click .add-btn":"onAddClick","click .next-btn":"onNextClick"},initialize:function(){var e=this.model.get("sections");this.sectionList=this.registerView(new r({collection:e}))},render:function(){return this.$el.html(e({server:this.model.toJSON()})),this.$(".setup-add-section-container").after(this.sectionList.render().el),this},onAddClick:function(e){e.preventDefault(),t.set("modal",new i({server:this.model}))},onNextClick:function(e){e.preventDefault(),this.trigger("view:change","channels")}});return s}),define("hb!templates/setup/SetupChannelsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<h2>Install Channels</h2>\n\n<p>Some text about how channels give you access to online media. You can install channels from the channel directory.</p>\n\n<div class="featured-channels">\n	<h3>Featured Channels</h3>\n</div>\n\n<div class="form-actions">\n	<a class="next-btn btn btn-primary btn-medium" href="#">Next <i class="icon-arrow-right"></i></a>\n</div>\n'})}),define("hb!templates/lists/channels/items/ChannelTileListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function b(e,t){return'\n		<i class="installed-icon icon-ok"></i>\n	'}n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression,y=n.blockHelperMissing;s+='<a href="#" title="',c=n.channel,o=c||t.channel,o=o===null||o===undefined||o===!1?o:o.name,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"channel.name",{hash:{}})),s+=g(o)+'">\n	',o=1,c=n.channel,u=c||t.channel,u=u===null||u===undefined||u===!1?u:u.installed,c=n.if_eq,a=c||t.if_eq,h=p.program(1,b,i),h.hash={},h.fn=h,h.inverse=p.noop,c&&typeof a===d?o=a.call(t,u,o,h):o=y.call(t,a,u,o,h);if(o||o===0)s+=o;return s+='\n\n	<img class="poster channel-poster" src="',o=100,u=100,c=n.channel,a=c||t.channel,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" alt="',c=n.channel,o=c||t.channel,o=o===null||o===undefined||o===!1?o:o.name,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"channel.name",{hash:{}})),s+=g(o)+'" width="100" height="100">\n</a>\n',s})}),define("hb!templates/modals/ChannelModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function b(e,t){var r="",i,s,o;r+="\n			",i="Install",c=n.name,s=c||e.name,c=n.if_eq,o=c||e.if_eq,h=p.program(2,w,t),h.hash={},h.fn=h,h.inverse=p.noop,c&&typeof o===d?i=o.call(e,s,i,h):i=y.call(e,o,s,i,h);if(i||i===0)r+=i;r+="\n\n			",i="Update",c=n.name,s=c||e.name,c=n.if_eq,o=c||e.if_eq,h=p.program(4,E,t),h.hash={},h.fn=h,h.inverse=p.noop,c&&typeof o===d?i=o.call(e,s,i,h):i=y.call(e,o,s,i,h);if(i||i===0)r+=i;r+="\n\n			",i="Restart",c=n.name,s=c||e.name,c=n.if_eq,o=c||e.if_eq,h=p.program(6,S,t),h.hash={},h.fn=h,h.inverse=p.noop,c&&typeof o===d?i=o.call(e,s,i,h):i=y.call(e,o,s,i,h);if(i||i===0)r+=i;r+="\n\n			",i="Reset",c=n.name,s=c||e.name,c=n.if_eq,o=c||e.if_eq,h=p.program(8,x,t),h.hash={},h.fn=h,h.inverse=p.noop,c&&typeof o===d?i=o.call(e,s,i,h):i=y.call(e,o,s,i,h);if(i||i===0)r+=i;r+="\n\n			",i="Uninstall",c=n.name,s=c||e.name,c=n.if_eq,o=c||e.if_eq,h=p.program(10,T,t),h.hash={},h.fn=h,h.inverse=p.noop,c&&typeof o===d?i=o.call(e,s,i,h):i=y.call(e,o,s,i,h);if(i||i===0)r+=i;return r+="\n		",r}function w(e,t){var r="",i;return r+='\n				<a class="btn btn-primary action-btn" data-key="',c=n.key,i=c||e.key,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"key",{hash:{}})),r+=g(i)+'" href="#">',c=n.name,i=c||e.name,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"name",{hash:{}})),r+=g(i)+"</a>\n			",r}function E(e,t){var r="",i;return r+='\n				<a class="btn btn-inverse action-btn" data-key="',c=n.key,i=c||e.key,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"key",{hash:{}})),r+=g(i)+'" href="#">',c=n.name,i=c||e.name,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"name",{hash:{}})),r+=g(i)+"</a>\n			",r}function S(e,t){var r="",i;return r+='\n				<a class="btn btn-inverse action-btn" data-key="',c=n.key,i=c||e.key,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"key",{hash:{}})),r+=g(i)+'" href="#">',c=n.name,i=c||e.name,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"name",{hash:{}})),r+=g(i)+"</a>\n			",r}function x(e,t){var r="",i;return r+='\n				<a class="btn btn-inverse action-btn" data-key="',c=n.key,i=c||e.key,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"key",{hash:{}})),r+=g(i)+'" href="#">',c=n.name,i=c||e.name,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"name",{hash:{}})),r+=g(i)+"</a>\n			",r}function T(e,t){var r="",i;return r+='\n				<a class="btn btn-danger action-btn" data-key="',c=n.key,i=c||e.key,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"key",{hash:{}})),r+=g(i)+'" href="#">',c=n.name,i=c||e.name,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"name",{hash:{}})),r+=g(i)+"</a>\n			",r}n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression,y=n.blockHelperMissing;s+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal">Ã</button>\n	<h3>',c=n.channel,o=c||t.channel,o=o===null||o===undefined||o===!1?o:o.name,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"channel.name",{hash:{}})),s+=g(o)+'</h3>\n</div>\n\n<div class="modal-body">\n	<div class="channel-controls">\n		<img class="poster channel-poster" src="',o=200,u=200,c=n.channel,a=c||t.channel,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" width="200" height="200">\n\n		',c=n.actions,o=c||t.actions,u=n.each,h=p.program(1,b,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;return s+='\n	</div>\n\n	<div class="channel-details">\n		<p class="summary">',o=500,c=n.channel,u=c||t.channel,u=u===null||u===undefined||u===!1?u:u.summary,c=n.truncate,a=c||t.truncate,typeof a===d?o=a.call(t,u,o,{hash:{}}):a===m?o=v.call(t,"truncate",u,o,{hash:{}}):o=a,s+=g(o)+"</p>\n	</div>\n</div>\n",s})}),define("plex/view/modals/ChannelModal",["hb!templates/modals/ChannelModal.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({name:"channelModal",className:"modal channel-modal fade",events:{hidden:"onClose","click .action-btn":"onActionClick"},initialize:function(){var e=this.model.get("actions");e.url=this.model.id,this.addBinding(e,"reset",this.render),e.fetch()},render:function(){return this.$el.html(e({serverURL:this.model.server.url(),serverObj:this.model.server,channel:this.model.toJSON(),actions:this.model.get("actions").toJSON()})).modal(),this},onClose:function(e){t.trigger("destroy:modal",this)},onActionClick:function(e){e.preventDefault();var n=$(e.target);n.addClass("disabled");var r=function(){n.removeClass("disabled"),this.model.get("actions").fetch()};t.trigger("command:ChannelAction",this.model,n.data("key"),_.bind(r,this))}});return r}),define("plex/view/lists/channels/items/ChannelTileListItem",["hb!templates/lists/channels/items/ChannelTileListItem.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","plex/view/modals/ChannelModal"],function(e,t,n,r,i){var s=r.extend({tagName:"li",events:{"click a":"onClick"},initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,channel:this.model.toJSON()})),this},onClick:function(e){e.preventDefault(),n.set("modal",new i({model:this.model}))}});return s}),define("plex/view/lists/channels/ChannelTileList",["plex/view/lists/BaseList","plex/view/lists/channels/items/ChannelTileListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"tile-list channel-tile-list",initialize:function(){this.setup(t)},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("plex/view/setup/SetupChannelsView",["hb!templates/setup/SetupChannelsView.tpl","plex/model/collections/ChannelCollection","plex/view/BaseView","plex/view/lists/channels/ChannelTileList"],function(e,t,n,r){var i=n.extend({channelList:null,events:{"click .next-btn":"onNextClick"},initialize:function(){var e=new t([],{server:this.model,url:"/system/appstore/featured"});e.fetch(),this.channelList=this.registerView(new r({collection:e}))},render:function(){return this.$el.html(e({server:this.model.toJSON()})),this.$(".featured-channels").append(this.channelList.render().el),this},onNextClick:function(e){e.preventDefault(),this.trigger("view:change","myplex")}});return i}),define("hb!templates/setup/SetupCompleteView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<h2>Complete!</h2>\n\n<p>Some text about the different players. Maybe an icon list of clients with links.</p>\n\n<div class="form-actions pull-center">\n		<a class="next-btn btn btn-primary btn-large" href="#!/dashboard">Done</i></a>\n</div>\n'})}),define("plex/view/setup/SetupCompleteView",["hb!templates/setup/SetupCompleteView.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({initialize:function(){},render:function(){return this.$el.html(e({server:this.model.toJSON()})),this}});return n}),define("plex/view/setup/SetupView",["hb!templates/setup/SetupView.tpl","plex/view/BaseView","plex/view/setup/SetupIntroView","plex/view/setup/SetupServerView","plex/view/setup/SetupMyPlexView","plex/view/setup/SetupLibraryView","plex/view/setup/SetupChannelsView","plex/view/setup/SetupCompleteView"],function(e,t,n,r,i,s,o,u){var a=t.extend({className:"container well",currentView:"intro",views:{intro:null,setup:null,library:null,channels:null,myplex:null,complete:null},events:{"click .change-view-btn":"onChangeViewClick"},initialize:function(){this.views.intro=this.registerView(new n({model:this.model})),this.views.setup=this.registerView(new r({model:this.model})),this.views.library=this.registerView(new s({model:this.model})),this.views.channels=this.registerView(new o({model:this.model})),this.views.myplex=this.registerView(new i({model:this.model})),this.views.complete=this.registerView(new u({model:this.model})),this.addBinding(this.views.setup,"view:change",this.onViewChange),this.addBinding(this.views.library,"view:change",this.onViewChange),this.addBinding(this.views.channels,"view:change",this.onViewChange),this.addBinding(this.views.myplex,"view:change",this.onViewChange),this.currentView="intro"},render:function(){this.$el.html(e());var t=this.views[this.currentView];return this.$(".setup-container").html(t.render().el),t.delegateEvents(),this.updateProgress(),this},changeView:function(e){this.currentView!==e&&(this.currentView=e,this.render())},updateProgress:function(){var e=this.$("."+this.currentView+"-segment"),t,n=!1;e.length&&(t=e[0]),$(".setup-progress-segment").each(function(e){var r=$(this);n?r.removeClass("active complete"):r.addClass("active complete"),this===t&&(n=!0,r.removeClass("complete"))})},onViewChange:function(e){this.changeView(e)},onChangeViewClick:function(e){e.preventDefault(),this.changeView($(e.target).data("view"))}});return a}),define("hb!templates/PlaylistView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function b(e,t){return'\n	<a class="help-btn btn btn-inverse" href="https://my.plexapp.com/queue/help">\n		<i class="icon-question-sign"></i> Help\n	</a>\n	'}n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.blockHelperMissing,m=n.helperMissing,g=void 0,y=this.escapeExpression;s+='<div class="playlist-row row">\n	',o="queue",c=n.playlistName,u=c||t.playlistName,c=n.if_eq,a=c||t.if_eq,h=p.program(1,b,i),h.hash={},h.fn=h,h.inverse=p.noop,c&&typeof a===d?o=a.call(t,u,o,h):o=v.call(t,a,u,o,h);if(o||o===0)s+=o;return s+="\n\n	<h1>",c=n.playlistLabel,o=c||t.playlistLabel,typeof o===d?o=o.call(t,{hash:{}}):o===g&&(o=m.call(t,"playlistLabel",{hash:{}})),s+=y(o)+'</h1>\n</div>\n\n<div id="filters-banner" class="banner">\n	<ul class="horizontal-filter-list playlist-filter-list">\n		<li class="all-filter playlist-filter ',o="",u="selected",a="all",c=n.view,f=c||t.view,c=n.eq,l=c||t.eq,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===g?o=m.call(t,"eq",f,a,u,o,{hash:{}}):o=l,s+=y(o)+'"><a href="#">All</a></li>\n		<li class="unwatched-filter playlist-filter ',o="",u="selected",a="unwatched",c=n.view,f=c||t.view,c=n.eq,l=c||t.eq,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===g?o=m.call(t,"eq",f,a,u,o,{hash:{}}):o=l,s+=y(o)+'"><a href="#">',c=n.unwatched,o=c||t.unwatched,typeof o===d?o=o.call(t,{hash:{}}):o===g&&(o=m.call(t,"unwatched",{hash:{}})),s+=y(o)+' Unwatched</a></li>\n		<li class="watched-filter playlist-filter ',o="",u="selected",a="watched",c=n.view,f=c||t.view,c=n.eq,l=c||t.eq,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===g?o=m.call(t,"eq",f,a,u,o,{hash:{}}):o=l,s+=y(o)+'"><a href="#">',c=n.watched,o=c||t.watched,typeof o===d?o=o.call(t,{hash:{}}):o===g&&(o=m.call(t,"watched",{hash:{}})),s+=y(o)+" Watched</a></li>\n	</ul>\n</div>\n",s})}),define("hb!templates/lists/items/PlaylistListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function m(e,t){var r="",i;return r+='\n		<img class="poster" src="',f=n.item,i=f||e.item,i=i===null||i===undefined||i===!1?i:i.thumb,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"item.thumb",{hash:{}})),r+=v(i)+'" width="150">\n	',r}function g(e,t){var r="",i;return r+='\n				<div class="metadata metadata-headline">',f=n.item,i=f||e.item,i=i===null||i===undefined||i===!1?i:i.sourceTitle,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"item.sourceTitle",{hash:{}})),r+=v(i)+"</div>\n			",r}function y(e,t){var r="",i,s;r+='\n				<div class="metadata"><span class="rating">',f=n.item,i=f||e.item,i=i===null||i===undefined||i===!1?i:i.rating,f=n.starRating,s=f||e.starRating,typeof s===h?i=s.call(e,i,{hash:{}}):s===d?i=p.call(e,"starRating",i,{hash:{}}):i=s;if(i||i===0)r+=i;return r+="</span></div>\n			",r}function b(e,t){var r="",i,s,o;return r+='\n			<div class="summary">',i=180,f=n.item,s=f||e.item,s=s===null||s===undefined||s===!1?s:s.summary,f=n.truncate,o=f||e.truncate,typeof o===h?i=o.call(e,s,i,{hash:{}}):o===d?i=p.call(e,"truncate",s,i,{hash:{}}):i=o,r+=v(i)+"</div>\n		",r}function w(e,t){return'\n					<button class="mark-unwatched-btn btn btn-inverse"><i class="icon-minus-sign"></i> Mark as Unwatched</button>\n				'}function E(e,t){return'\n					<button class="mark-watched-btn btn btn-inverse"><i class="icon-ok-sign"></i> Mark as Watched</button>\n				'}function S(e,t){var r="",i,s;return r+='\n				<div class="metadata metadata-top">\n					<span class="metadata-label">Available</span> ',f=n.item,i=f||e.item,i=i===null||i===undefined||i===!1?i:i.originallyAvailableAt,f=n.formatDate,s=f||e.formatDate,typeof s===h?i=s.call(e,i,{hash:{}}):s===d?i=p.call(e,"formatDate",i,{hash:{}}):i=s,r+=v(i)+"\n				</div>\n			",r}function x(e,t){var r="",i,s;return r+='\n				<div class="metadata">\n					<span class="metadata-label">Duration</span> ',f=n.item,i=f||e.item,i=i===null||i===undefined||i===!1?i:i.duration,f=n.formatMinutes,s=f||e.formatMinutes,typeof s===h?i=s.call(e,i,{hash:{}}):s===d?i=p.call(e,"formatMinutes",i,{hash:{}}):i=s,r+=v(i)+"\n				</div>\n			",r}function T(e,t){var r="",i;return r+='\n				<div class="metadata">\n					<span class="metadata-label">Recommended by</span> ',f=n.item,i=f||e.item,i=i===null||i===undefined||i===!1?i:i.recommender,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"item.recommender",{hash:{}})),r+=v(i)+"\n				</div>\n			",r}function N(e,t){var r="",i;return r+='\n				<div class="summary">',f=n.item,i=f||e.item,i=i===null||i===undefined||i===!1?i:i.message,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"item.message",{hash:{}})),r+=v(i)+"</div>\n			",r}n=n||e.helpers;var s="",o,u,a,f,l,c=this,h="function",p=n.helperMissing,d=void 0,v=this.escapeExpression;s+='<a href="#!/playlist/',f=n.item,o=f||t.item,o=o===null||o===undefined||o===!1?o:o.playlistName,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"item.playlistName",{hash:{}})),s+=v(o)+"/player/",f=n.item,o=f||t.item,o=o===null||o===undefined||o===!1?o:o.id,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"item.id",{hash:{}})),s+=v(o)+'">\n	',f=n.item,o=f||t.item,o=o===null||o===undefined||o===!1?o:o.thumb,u=n["if"],l=c.program(1,m,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;s+='\n\n	<div class="poster-details">\n		<div class="metadata-right">\n			',f=n.item,o=f||t.item,o=o===null||o===undefined||o===!1?o:o.sourceTitle,u=n["if"],l=c.program(3,g,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;s+="\n\n			",f=n.item,o=f||t.item,o=o===null||o===undefined||o===!1?o:o.rating,u=n["if"],l=c.program(5,y,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;s+="\n		</div>\n\n		<h3>",o=30,f=n.item,u=f||t.item,u=u===null||u===undefined||u===!1?u:u.title,f=n.truncate,a=f||t.truncate,typeof a===h?o=a.call(t,u,o,{hash:{}}):a===d?o=p.call(t,"truncate",u,o,{hash:{}}):o=a,s+=v(o)+"</h3>\n\n		",f=n.item,o=f||t.item,o=o===null||o===undefined||o===!1?o:o.summary,u=n["if"],l=c.program(7,b,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;s+='\n\n		<div class="poster-bottom-details">\n			<div class="poster-controls">\n				',f=n.watched,o=f||t.watched,u=n["if"],l=c.program(9,w,i),l.hash={},l.fn=l,l.inverse=c.program(11,E,i),o=u.call(t,o,l);if(o||o===0)s+=o;s+='\n				<button class="delete-btn btn btn-danger"><i class="icon-trash"></i> Delete</button>\n			</div>\n\n			',f=n.item,o=f||t.item,o=o===null||o===undefined||o===!1?o:o.originallyAvailableAt,u=n["if"],l=c.program(13,S,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;s+="\n\n			",f=n.item,o=f||t.item,o=o===null||o===undefined||o===!1?o:o.duration,u=n["if"],l=c.program(15,x,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;s+="\n\n			",f=n.item,o=f||t.item,o=o===null||o===undefined||o===!1?o:o.recommender,u=n["if"],l=c.program(17,T,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;s+="\n\n			",f=n.item,o=f||t.item,o=o===null||o===undefined||o===!1?o:o.message,u=n["if"],l=c.program(19,N,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;return s+="\n		</div>\n	</div>\n</a>\n\n\n",s})}),define("plex/view/lists/items/PlaylistListItem",["hb!templates/lists/items/PlaylistListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({tagName:"li",className:"well",events:{"click .mark-watched-btn":"onMarkWatchedClick","click .mark-unwatched-btn":"onMarkUnwatchedClick","click .delete-btn":"onDeleteClick"},initialize:function(e){this.filtered=e.filtered,this.addBinding(this.model,"change:viewCount",this.onViewCountChange),_.bindAll(this,"onAnimationComplete")},render:function(){return this.$el.html(e({watched:this.model.get("viewCount")>0,item:this.model.toJSON()})),this},close:function(e){var t=e||this.onAnimationComplete,n={opacity:0,height:0,"margin-bottom":0,"padding-top":0,"padding-bottom":0};this.$el.animate(n,400,t)},onViewCountChange:function(e,t){this.filtered===!0?this.close():this.trigger("refresh")},onMarkWatchedClick:function(e){e.preventDefault(),t.trigger("command:MarkWatched",this.model)},onMarkUnwatchedClick:function(e){e.preventDefault(),t.trigger("command:MarkUnwatched",this.model)},onDeleteClick:function(e){e.preventDefault(),this.close(_.bind(function(){this.model.destroy(),this.trigger("refresh")},this))},onAnimationComplete:function(){this.destroy(),this.trigger("refresh")}});return r}),define("plex/view/lists/PlaylistList",["plex/view/lists/BaseList","plex/view/lists/items/PlaylistListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"poster-list playlist-list",initialize:function(e){this.filtered=e.filtered,this.setup(t),this.loadPosterThrottle=_.throttle(_.debounce(this.loadPoster,500),100)},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(e){var t=new this.ListItem({model:e,list:this,filtered:this.filtered});return this.registerView(t),this.addBinding(t,"refresh",this.onRefresh),this.items[e.id]=t,this.$el.append(t.render().el),this.loadPosterThrottle(),t},loadPoster:function(){this.$(".poster").lazyload({threshold:100})},onRefresh:function(){this.trigger("refresh")}});return n}),define("plex/view/PlaylistView",["hb!templates/PlaylistView.tpl","plex/view/BaseView","plex/view/lists/PlaylistList"],function(e,t,n){var r=t.extend({className:"playlist-container container well",view:"unwatched",events:{"click .all-filter a":"onAllClick","click .unwatched-filter a":"onUnwatchedClick","click .watched-filter a":"onWatchedClick"},initialize:function(){this.listCollection=new Backbone.Collection(this.collection.unwatched()),this.list=this.registerView(new n({collection:this.listCollection,filtered:!0})),this.addBinding(this.list,"refresh",this.onRefresh)},render:function(){var t=this.collection.unwatched().length,n=this.collection.watched().length;return this.$el.html(e({view:this.view,unwatched:t,watched:n,playlistName:this.collection.playlistName,playlistLabel:this.collection.playlistLabel})),this.$el.append(this.list.render().el),this},onAllClick:function(e){e.preventDefault(),this.view="all",this.$(".playlist-filter").removeClass("selected"),this.$(".all-filter").addClass("selected"),this.list.filtered=!1,this.listCollection.reset(this.collection.all())},onUnwatchedClick:function(e){e.preventDefault(),this.view="unwatched",this.$(".playlist-filter").removeClass("selected"),this.$(".unwatched-filter").addClass("selected"),this.list.filtered=!0,this.listCollection.reset(this.collection.unwatched())},onWatchedClick:function(e){e.preventDefault(),this.view="watched",this.$(".playlist-filter").removeClass("selected"),this.$(".watched-filter").addClass("selected"),this.list.filtered=!0,this.listCollection.reset(this.collection.watched())},onRefresh:function(){switch(this.view){case"unwatched":this.listCollection.reset(this.collection.unwatched());break;case"watched":this.listCollection.reset(this.collection.watched());break;default:this.listCollection.reset(this.collection.models)}this.render()}});return r}),define("hb!templates/SettingsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function m(e,t,r){var i="",s,o,u;i+='\n							<option value="',s=e[0],typeof s===c?s=s.call(e,{hash:{}}):s===p&&(s=h.call(e,"this.0",{hash:{}})),i+=d(s)+'" ',a=n.settings,s=a||r.settings,s=s===null||s===undefined||s===!1?s:s.quality,o=e[0],a=n.if_eq,u=a||e.if_eq,f=l.program(2,g,t),f.hash={},f.fn=f,f.inverse=l.noop,a&&typeof u===c?s=u.call(e,o,s,f):s=v.call(e,u,o,s,f);if(s||s===0)i+=s;return i+=">\n								",s=e[1],a=n.formatBitrate,o=a||e.formatBitrate,typeof o===c?s=o.call(e,s,{hash:{}}):o===p?s=h.call(e,"formatBitrate",s,{hash:{}}):s=o,i+=d(s)+", ",s=e[2],typeof s===c?s=s.call(e,{hash:{}}):s===p&&(s=h.call(e,"this.2",{hash:{}})),i+=d(s)+"p\n							</option>\n						",i}function g(e,t){return"selected"}function y(e,t,r){var i="",s,o,u;i+='\n							<option value="',a=n.value,s=a||e.value,typeof s===c?s=s.call(e,{hash:{}}):s===p&&(s=h.call(e,"value",{hash:{}})),i+=d(s)+'"',a=n.settings,s=a||r.settings,s=s===null||s===undefined||s===!1?s:s.debug,a=n.value,o=a||e.value,a=n.if_eq,u=a||e.if_eq,f=l.program(5,b,t),f.hash={},f.fn=f,f.inverse=l.noop,a&&typeof u===c?s=u.call(e,o,s,f):s=v.call(e,u,o,s,f);if(s||s===0)i+=s;return i+=">",a=n.label,s=a||e.label,typeof s===c?s=s.call(e,{hash:{}}):s===p&&(s=h.call(e,"label",{hash:{}})),i+=d(s)+"</option>\n						",i}function b(e,t){return" selected"}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression,v=n.blockHelperMissing;s+='<form class="settings-form">\n	<fieldset>\n		<div class="settings-row row">\n			<h1>Settings</h1>\n\n			<div class="control-group">\n				<label class="control-label" for="video-quality">Video Quality</label>\n				<div class="controls">\n					<select id="video-quality">\n						',a=n.videoQualities,o=a||t.videoQualities,u=n.each,f=l.programWithDepth(m,i,t),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n					</select>\n				</div>\n			</div>\n\n			<div class="control-group">\n				<label class="control-label" for="video-quality">Debug Level</label>\n				<div class="controls">\n					<select id="debug-level">\n						',a=n.debugLevels,o=a||t.debugLevels,u=n.each,f=l.programWithDepth(y,i,t),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+='\n					</select>\n				</div>\n			</div>\n		</div>\n\n		<div class="banner">\n			<button type="submit" class="btn btn-medium btn-primary">Save</button>\n			<button class="btn btn-medium btn-inverse reset-btn">Reset</button>\n			<span class="inline-help"></span>\n		</div>\n	</fieldset>\n</form>\n',s})}),define("plex/view/SettingsView",["hb!templates/SettingsView.tpl","plex/model/AppModel","plex/view/BaseView"],function(e,t,n){var r=[{value:0,label:"Disabled"},{value:1,label:"Enabled"},{value:2,label:"Verbose"}],i=n.extend({className:"container settings-container well",videoQualities:null,events:{"submit .settings-form":"onSubmit","click .reset-btn":"onResetClick"},initialize:function(){var e=t.get("primaryServer"),n=e.get("transcoderVideoQualities").split(","),r=e.get("transcoderVideoBitrates").split(","),i=e.get("transcoderVideoResolutions").split(",");this.videoQualities=_.zip(n,r,i)},render:function(){return this.$el.html(e({settings:this.model.toJSON(),videoQualities:this.videoQualities,debugLevels:r})),this},onSubmit:function(e){e.preventDefault();var t=this.$(".inline-help"),n={quality:$("#video-quality").val(),debug:parseInt($("#debug-level").val(),10)};this.model.save(n,{success:function(e,n){t.text("Your settings were successfully saved.")},error:function(e,n){t.text("There was a problem saving your settings.")}}),t.css("opacity",1),setTimeout(function(){t.css("opacity",0)},2e3)},onResetClick:function(e){e.preventDefault(),this.model.set(this.model.defaults),this.render();var t=this.$(".inline-help");this.model.save({},{success:function(e,n){t.text("The default settings were successfully restored.")},error:function(e,n){t.text("There was a problem restoring the default settings.")}}),t.css("opacity",1),setTimeout(function(){t.css("opacity",0)},2e3)}});return i}),define("hb!templates/preferences/ServerPreferencesView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function m(e,t){var r="",i,s,o;return r+="\n				",i=15,a=n.server,s=a||e.server,s=s===null||s===undefined||s===!1?s:s.friendlyName,a=n.truncate,o=a||e.truncate,typeof o===c?i=o.call(e,s,i,{hash:{}}):o===p?i=h.call(e,"truncate",s,i,{hash:{}}):i=o,r+=d(i)+"\n			",r}function g(e,t){var r="",i,s,o;return r+="\n				",i=15,a=n.server,s=a||e.server,s=s===null||s===undefined||s===!1?s:s.name,a=n.truncate,o=a||e.truncate,typeof o===c?i=o.call(e,s,i,{hash:{}}):o===p?i=h.call(e,"truncate",s,i,{hash:{}}):i=o,r+=d(i)+"\n			",r}function y(e,t){var r="",i,s;r+="\n				",a=n.prefs,i=a||e.prefs,s=n["if"],f=l.program(6,b,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n			",r}function b(e,t){var r="",i,s,o;r+='\n					<li class="',i="general",a=n.group,s=a||e.group,a=n.if_eq,o=a||e.if_eq,f=l.program(7,w,t),f.hash={},f.fn=f,f.inverse=l.noop,a&&typeof o===c?i=o.call(e,s,i,f):i=v.call(e,o,s,i,f);if(i||i===0)r+=i;r+=" ",a=n.advanced,i=a||e.advanced,s=n["if"],f=l.program(9,E,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+='">\n						<a href="#',a=n.id,i=a||e.id,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"id",{hash:{}})),r+=d(i)+'">',a=n.title,i=a||e.title,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"title",{hash:{}})),r+=d(i)+"</a>\n					</li>\n					",i="general",a=n.group,s=a||e.group,a=n.if_eq,o=a||e.if_eq,f=l.program(11,S,t),f.hash={},f.fn=f,f.inverse=l.noop,a&&typeof o===c?i=o.call(e,s,i,f):i=v.call(e,o,s,i,f);if(i||i===0)r+=i;return r+="\n				",r}function w(e,t){return"active"}function E(e,t){return"advanced-prefs hide"}function S(e,t){return'\n						<li>\n							<a href="#myplex">myPlex</a>\n						</li>\n						<li class="advanced-prefs hide">\n							<a href="#agents">Agents</a>\n						</li>\n					'}function x(e,t){var r="",i,s;r+="\n					",a=n.prefs,i=a||e.prefs,s=n["if"],f=l.program(14,T,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n				",r}function T(e,t){var r="",i,s,o;r+='\n						<div id="',a=n.id,i=a||e.id,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"id",{hash:{}})),r+=d(i)+'" class="preferences-group ',i="general",a=n.group,s=a||e.group,a=n.if_eq,o=a||e.if_eq,f=l.program(15,N,t),f.hash={},f.fn=f,f.inverse=l.noop,a&&typeof o===c?i=o.call(e,s,i,f):i=v.call(e,o,s,i,f);if(i||i===0)r+=i;r+=" ",a=n.advanced,i=a||e.advanced,s=n["if"],f=l.program(17,C,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+='">\n							',a=n.prefs,i=a||e.prefs,s=n.each,f=l.program(19,k,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n						</div>\n					",r}function N(e,t){return"active"}function C(e,t){return"advanced-prefs hide"}function k(e,t){var r="",i,s,o;return r+="\n								",i="preference",s={},o="_c",s.idSuffix=o,a=n.partial,o=a||e.partial,f={},f.hash=s,typeof o===c?i=o.call(e,i,f):o===p?i=h.call(e,"partial",i,f):i=o,r+=d(i)+"\n							",r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression,v=n.blockHelperMissing;s+='<div class="server-row row">\n	<i class="plex-icon-server"></i>\n\n	<div class="server-details">\n		<h1 class="server-name">\n			',a=n.server,o=a||t.server,o=o===null||o===undefined||o===!1?o:o.friendlyName,u=n["if"],f=l.program(1,m,i),f.hash={},f.fn=f,f.inverse=l.program(3,g,i),o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n		</h1>\n\n		<h2><i class="icon-cog"></i> Preferences</h2>\n	</div>\n</div>\n\n<div class="preferences-row row">\n	<div class="span3">\n		<ul class="preferences-nav nav nav-list">\n			',a=n.groups,o=a||t.groups,u=n.each,f=l.program(5,y,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n		</ul>\n	</div>\n\n	<div class="span7">\n		<div class="preferences-form-header">\n			<a class="standard-prefs pull-right" href="#">Show Advanced Preferences</a>\n			<a class="advanced-prefs pull-right hide" href="#">Hide Advanced Preferences</a>\n		</div>\n\n		<form class="preferences-form">\n			<fieldset>\n				',a=n.groups,o=a||t.groups,u=n.each,f=l.program(13,x,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+='\n\n				<div class="main-actions form-actions">\n					<button type="submit" class="btn btn-medium btn-primary">Save</button>\n					<button class="btn btn-medium btn-inverse cancel-btn">Cancel</button>\n				</div>\n			</fieldset>\n		</form>\n	</div>\n</div>\n',s})}),define("plex/model/AccountModel",["plex/model/BaseModel"],function(e){var t=e.extend({idAttribute:"key",whitelistedAttrs:["key","name","defaultAudioLanguage","autoSelectAudio","defaultSubtitleLanguage","subtitleMode"],url:function(){return this.get("key")},parse:function(e){var t=_.isObject(e)?e:$.xml2json(e).Account;return t=_.pick(t,this.whitelistedAttrs),t._cacheKey=null,t}});return t}),define("hb!templates/preferences/MyPlexPreferencesView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function g(e,t){var r="",i,s;r+='\n	<p><i class="icon-ok"></i> Signed in as ',f=n.account,i=f||e.account,i=i===null||i===undefined||i===!1?i:i.username,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"account.username",{hash:{}})),r+=m(i)+' &middot; <a class="sign-out-btn" href="#">Sign Out</a></p>\n\n	',f=n.publishing,i=f||e.publishing,s=n["if"],l=c.program(2,y,t),l.hash={},l.fn=l,l.inverse=c.program(4,b,t),i=s.call(e,i,l);if(i||i===0)r+=i;r+="\n\n	",f=n.showMappingMode,i=f||e.showMappingMode,s=n["if"],l=c.program(24,_,t),l.hash={},l.fn=l,l.inverse=c.noop,i=s.call(e,i,l);if(i||i===0)r+=i;return r+="\n",r}function y(e,t){return'\n		<p class="setup-myplex-loading">Publishing server...</p>\n	'}function b(e,t){var r="",i,s;f=n.unpublishing,i=f||e.unpublishing,s=n["if"],l=c.program(5,w,t),l.hash={},l.fn=l,l.inverse=c.program(7,E,t),i=s.call(e,i,l);if(i||i===0)r+=i;return r+="\n	",r}function w(e,t){return'\n		<p class="setup-myplex-loading">Unpublishing server...</p>\n	'}function E(e,t){var r="",i,s;r+="\n		",f=n.account,i=f||e.account,i=i===null||i===undefined||i===!1?i:i.mappingError,s=n["if"],l=c.program(8,S,t),l.hash={},l.fn=l,l.inverse=c.program(19,A,t),i=s.call(e,i,l);if(i||i===0)r+=i;return r+="\n	",r}function S(e,t){var r="",i,s,o;r+="\n			",i="badauth",f=n.account,s=f||e.account,s=s===null||s===undefined||s===!1?s:s.mappingError,f=n.if_eq,o=f||e.if_eq,l=c.program(9,x,t),l.hash={},l.fn=l,l.inverse=c.program(11,T,t),f&&typeof o===h?i=o.call(e,s,i,l):i=p.call(e,o,s,i,l);if(i||i===0)r+=i;return r+="\n		",r}function x(e,t){return'\n				<p><i class="icon-remove"></i> Unable to authenticate your server &middot; <a class="retry-btn" href="#">Retry</a></p>\n			'}function T(e,t){var r="",i,s,o;i="unreachable",f=n.account,s=f||e.account,s=s===null||s===undefined||s===!1?s:s.mappingError,f=n.if_eq,o=f||e.if_eq,l=c.program(12,N,t),l.hash={},l.fn=l,l.inverse=c.program(14,C,t),f&&typeof o===h?i=o.call(e,s,i,l):i=p.call(e,o,s,i,l);if(i||i===0)r+=i;return r+="\n			",r}function N(e,t){return'\n				<p><i class="icon-remove"></i> myPlex could not connect to your server &middot; <a class="retry-btn" href="#">Retry</a></p>\n			'}function C(e,t){var r="",i,s,o;i="myplexgone",f=n.account,s=f||e.account,s=s===null||s===undefined||s===!1?s:s.mappingError,f=n.if_eq,o=f||e.if_eq,l=c.program(15,k,t),l.hash={},l.fn=l,l.inverse=c.program(17,L,t),f&&typeof o===h?i=o.call(e,s,i,l):i=p.call(e,o,s,i,l);if(i||i===0)r+=i;return r+="\n			",r}function k(e,t){return'\n				<p><i class="icon-remove"></i> myPlex is not responding &middot; <a class="retry-btn" href="#">Retry</a></p>\n			'}function L(e,t){return'\n				<p><i class="icon-remove"></i> There was a problem publishing your server &middot; <a class="retry-btn" href="#">Retry</a></p>\n			'}function A(e,t){var r="",i,s,o;r+="\n			",i="mapped",f=n.account,s=f||e.account,s=s===null||s===undefined||s===!1?s:s.mappingState,f=n.if_eq,o=f||e.if_eq,l=c.program(20,O,t),l.hash={},l.fn=l,l.inverse=c.program(22,M,t),f&&typeof o===h?i=o.call(e,s,i,l):i=p.call(e,o,s,i,l);if(i||i===0)r+=i;return r+="\n		",r}function O(e,t){var r="",i;return r+='\n				<p><i class="icon-ok"></i> Server is mapped to port ',f=n.account,i=f||e.account,i=i===null||i===undefined||i===!1?i:i.publicPort,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"account.publicPort",{hash:{}})),r+=m(i)+' &middot; <a class="unpublish-btn" href="#">Unpublish</a></p>\n			',r}function M(e,t){return'\n				<p class="publish-server-group"><a class="publish-btn btn btn-primary" href="#">Publish Server</a></p>\n\n				<p class="help-block">Publishing a server makes it automatically available on your client devices without any configuration of your router.</p>\n			'}function _(e,t){var r="",i,s;r+='\n		<div class="control-group manual-port-group ',f=n.showManual,i=f||e.showManual,s=n.unless,l=c.program(25,D,t),l.hash={},l.fn=l,l.inverse=c.noop,i=s.call(e,i,l);if(i||i===0)r+=i;r+='">\n\n			<input type="checkbox" id="',f=n.mappingMode,i=f||e.mappingMode,i=i===null||i===undefined||i===!1?i:i.id,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"mappingMode.id",{hash:{}})),r+=m(i)+'" name="',f=n.mappingMode,i=f||e.mappingMode,i=i===null||i===undefined||i===!1?i:i.id,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"mappingMode.id",{hash:{}})),r+=m(i)+'" value="1" ',f=n.mappingMode,i=f||e.mappingMode,i=i===null||i===undefined||i===!1?i:i.value,s=n["if"],l=c.program(28,H,t),l.hash={},l.fn=l,l.inverse=c.noop,i=s.call(e,i,l);if(i||i===0)r+=i;return r+='>\n			<label class="inline" for="',f=n.mappingMode,i=f||e.mappingMode,i=i===null||i===undefined||i===!1?i:i.id,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"mappingMode.id",{hash:{}})),r+=m(i)+'">Manually specify port</label>\n			<input type="text" id="',f=n.mappingPort,i=f||e.mappingPort,i=i===null||i===undefined||i===!1?i:i.id,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"mappingPort.id",{hash:{}})),r+=m(i)+'" name="',f=n.mappingPort,i=f||e.mappingPort,i=i===null||i===undefined||i===!1?i:i.id,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"mappingPort.id",{hash:{}})),r+=m(i)+'" class="input-dark" value="',f=n.mappingPort,i=f||e.mappingPort,i=i===null||i===undefined||i===!1?i:i.value,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"mappingPort.value",{hash:{}})),r+=m(i)+'">\n\n			<p class="help-block">\n				Enable this if automatic mapping fails. You will need to configure your router. Detailed instructions are available <a href="http://wiki.plexapp.com/index.php/MyPlex#Publishing_the_Plex_Media_Server">here</a>.\n			</p>\n		</div>\n	',r}function D(e,t){var r="",i,s;r+="advanced-prefs ",f=n.showAdvanced,i=f||e.showAdvanced,s=n.unless,l=c.program(26,P,t),l.hash={},l.fn=l,l.inverse=c.noop,i=s.call(e,i,l);if(i||i===0)r+=i;return r}function P(e,t){return"hide"}function H(e,t){return"checked"}function B(e,t){var r="",i;return r+='\n		<div class="control-group">\n			<a class="change-form-btn hide" href="#">Already have an account?</a>\n			<a class="change-form-btn" href="#">Create an account</a>\n		</div>\n\n		<div class="email-group">\n			<label class="control-label" for="email">Username or Email</label>\n\n			<div class="controls">\n				<input type="text" id="email" class="input-dark span5" name="email" value="',f=n.account,i=f||e.account,i=i===null||i===undefined||i===!1?i:i.username,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"account.username",{hash:{}})),r+=m(i)+'">\n				<p class="help-block"><span class="inline-help"></span></p>\n			</div>\n		</div>\n\n		<div class="password-group">\n			<label class="control-label" for="password">Password</label>\n\n			<div class="controls">\n				<input type="password" id="password" class="input-dark span5" name="password" value="',f=n.account,i=f||e.account,i=i===null||i===undefined||i===!1?i:i.password,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"account.password",{hash:{}})),r+=m(i)+'">\n				<p class="help-block">\n					<a class="forgot-password-btn" href="https://my.plexapp.com/users/password/new">Forgot Password?</a>\n				</p>\n			</div>\n		</div>\n\n		<div class="confirmPassword-group hide">\n			<label class="control-label" for="confirmPassword">Confirm Password</label>\n\n			<div class="controls">\n				<input type="password" id="confirmPassword" class="input-dark span5" name="confirmPassword" value="',f=n.account,i=f||e.account,i=i===null||i===undefined||i===!1?i:i.password,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"account.password",{hash:{}})),r+=m(i)+'">\n				<p class="help-block"><span class="inline-help"></span></p>\n			</div>\n		</div>\n\n		<div class="sub-actions form-actions">\n			<button type="submit" class="submit-btn btn btn-medium btn-primary">Sign In</button>\n			<button type="submit" class="submit-btn btn btn-medium btn-primary hide">Sign Up</button>\n			<button class="btn btn-medium btn-inverse cancel-btn">Cancel</button>\n		</div>\n',r}n=n||e.helpers;var s="",o,u,a,f,l,c=this,h="function",p=n.blockHelperMissing,d=n.helperMissing,v=void 0,m=this.escapeExpression;o="ok",f=n.account,u=f||t.account,u=u===null||u===undefined||u===!1?u:u.signInState,f=n.if_eq,a=f||t.if_eq,l=c.program(1,g,i),l.hash={},l.fn=l,l.inverse=c.program(30,B,i),f&&typeof a===h?o=a.call(t,u,o,l):o=p.call(t,a,u,o,l);if(o||o===0)s+=o;return s+="\n",s})}),define("plex/view/preferences/MyPlexPreferencesView",["hb!templates/preferences/MyPlexPreferencesView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/model/MyPlexAccountModel","plex/view/BaseView"],function(e,t,n,r,i){var s=i.extend({id:"myplex",className:"preferences-group myplex-container",publishing:!1,unpublishing:!1,pollInterval:null,events:{"click .change-form-btn":"onChangeFormClick","click .submit-btn":"onSubmitClick","click .sign-out-btn":"onSignOutClick","click .publish-btn":"onPublishClick","click .retry-btn":"onRetryClick","click .unpublish-btn":"onUnpublishClick","change input[name=ManualPortMappingMode]":"onManualModeChange","change input[name=ManualPortMappingPort]":"onManualPortChange"},initialize:function(){this.addBinding(this.model,"change:signInState",this.onAccountChange),this.addBinding(this.model,"change:mappingState",this.onAccountChange),this.addBinding(this.model,"change:publicPort",this.onAccountChange),this.model.fetch();var e=this.model.server.get("preferences");this.mappingModePref=e.get("ManualPortMappingMode"),this.mappingPortPref=e.get("ManualPortMappingPort"),this.addBinding(e,"reset",this.onPreferencesReset),e.populate()},render:function(){var t=$(".advanced-prefs:first"),n={account:this.model.toJSON(),publishing:this.publishing,unpublishing:this.unpublishing};return this.mappingModePref&&(n.showMappingMode=!0,n.mappingMode=this.mappingModePref.toJSON(),_.isString(n.mappingMode.value)&&(n.mappingMode.value=n.mappingMode.value==="true")),this.mappingPortPref&&(n.mappingPort=this.mappingPortPref.toJSON()),t.hasClass("hide")||(n.showAdvanced=!0),n.account.mappingState==="failed"&&(n.showManual=!0),this.$el.html(e(n)),this},update:function(){var e=this.model.get("signInState"),t=this.model.get("mappingState");e==="ok"&&(this.publishing?t==="waiting"||t==="unknown"?this.pollInterval||(this.pollInterval=setInterval(_.bind(function(){this.model.fetch({hideLoadingAlert:!0})},this),500)):(clearInterval(this.pollInterval),this.pollInterval=null,this.publishing=!1,this.render()):this.unpublishing&&(t==="waiting"||t==="mapped"?this.pollInterval||(this.pollInterval=setInterval(_.bind(function(){this.model.fetch({hideLoadingAlert:!0})},this),500)):(clearInterval(this.pollInterval),this.pollInterval=null,this.unpublishing=!1,this.render())))},retry:function(){this.publishing=!0,this.render(),t.trigger("command:PublishServer",this.model.server,!1,_.bind(function(){setTimeout(_.bind(function(){t.trigger("command:PublishServer",this.model.server,!0,_.bind(function(){this.model.fetch({hideLoadingAlert:!0})},this))},this),5e3)},this))},signIn:function(e,n){var r={username:e,password:n};t.trigger("command:ServerSignIn",this.model,r,_.bind(function(){this.model.fetch()},this))},signUp:function(e,r,i){if(r!==i){n.set("alert",{status:"error",message:"Your passwords do not match."});return}var s={username:e,email:e,password:r};t.trigger("command:ServerSignUp",this.model,s,_.bind(function(){this.model.fetch({hideLoadingAlert:!0})},this))},savePreference:function(e){this.mappingModePref.save(e).done(_.bind(function(){_.delay(_.bind(function(){this.model.fetch({hideLoadingAlert:!0})},this),5e3)},this))},onAccountChange:function(e,t){this.render(),this.update()},onPreferencesReset:function(e){this.mappingModePref=e.get("ManualPortMappingMode"),this.mappingPortPref=e.get("ManualPortMappingPort"),this.render()},onChangeFormClick:function(e){e.preventDefault(),this.$(".change-form-btn, .confirmPassword-group, .forgot-password-btn, .submit-btn").toggleClass("hide")},onSubmitClick:function(e){e.preventDefault(),this.$(".confirmPassword-group").hasClass("hide")?this.signIn(this.$("#email").val(),this.$("#password").val()):this.signUp(this.$("#email").val(),this.$("#password").val(),this.$("#confirmPassword").val())},onSignOutClick:function(e){e.preventDefault(),t.trigger("command:ServerSignOut",this.model,_.bind(function(){this.model.fetch()},this))},onPublishClick:function(e){e.preventDefault(),this.publishing=!0,this.render(),t.trigger("command:PublishServer",this.model.server,!0,_.bind(function(){this.model.fetch({hideLoadingAlert:!0})},this))},onRetryClick:function(e){e.preventDefault(),this.retry()},onUnpublishClick:function(e){e.preventDefault(),this.unpublishing=!0,this.render(),t.trigger("command:PublishServer",this.model.server,!1,_.bind(function(){this.model.fetch({hideLoadingAlert:!0})},this))},onManualModeChange:function(e){var t=e.currentTarget,n={},r=t.value;t.checked||(r="0"),n[t.name]=r,this.mappingModePref.set("value",t.checked),this.savePreference(n)},onManualPortChange:function(e){var t=e.currentTarget,n={};n[t.name]=t.value,this.mappingPortPref.set("value",t.value),this.savePreference(n)}});return s}),define("hb!templates/preferences/AgentsPreferencesView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function m(e,t,r){var i="",s,o,u;i+='\n		<li class="',a=n.key,s=a||e.key,a=n.activeSection,o=a||r.activeSection,a=n.if_eq,u=a||e.if_eq,f=l.program(2,g,t),f.hash={},f.fn=f,f.inverse=l.noop,a&&typeof u===c?s=u.call(e,o,s,f):s=h.call(e,u,o,s,f);if(s||s===0)i+=s;return i+='"><a href="#',a=n.key,s=a||e.key,typeof s===c?s=s.call(e,{hash:{}}):s===d&&(s=p.call(e,"key",{hash:{}})),i+=v(s)+'">',a=n.label,s=a||e.label,typeof s===c?s=s.call(e,{hash:{}}):s===d&&(s=p.call(e,"label",{hash:{}})),i+=v(s)+"</a></li>\n	",i}function g(e,t){return"active"}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.blockHelperMissing,p=n.helperMissing,d=void 0,v=this.escapeExpression;s+='<ul class="agent-sections-nav nav nav-pills">\n	',a=n.sections,o=a||t.sections,u=n.each,f=l.programWithDepth(m,i,t),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+='\n</ul>\n\n<div class="agent-details">\n	<p class="help-block">Select which additional agents should contribute to metadata from <span class="agent-name"></span>, and drag them to change the order of preference.</p>\n</div>\n',s})}),define("hb!templates/lists/preferences/items/AgentListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<a data-identifier="',u=n.identifier,o=u||t.identifier,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"identifier",{hash:{}})),s+=h(o)+'" href="#">',u=n.name,o=u||t.name,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"name",{hash:{}})),s+=h(o)+"</a>\n",s})}),define("plex/view/lists/preferences/items/AgentListItem",["hb!templates/lists/preferences/items/AgentListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({tagName:"li",active:!1,initialize:function(e){e.list.collection.first().id===this.model.id&&(this.active=!0),this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e(this.model.toJSON())),this.active&&this.$el.addClass("active"),this}});return r}),define("plex/view/lists/preferences/AgentList",["plex/view/lists/BaseList","plex/view/lists/preferences/items/AgentListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"agents-nav nav nav-pills nav-minimal",initialize:function(){this.setup(t),this.collection.populate()},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("hb!templates/lists/preferences/items/SortableAgentListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return"checked"}function m(e,t){return"disabled"}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<i class="icon-resize-vertical"></i>\n<input type="checkbox" id="',a=n.identifier,o=a||t.identifier,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"identifier",{hash:{}})),s+=d(o)+'" name="',a=n.identifier,o=a||t.identifier,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"identifier",{hash:{}})),s+=d(o)+'" ',a=n.enabled,o=a||t.enabled,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+=" ",a=n.primary,o=a||t.primary,u=n["if"],f=l.program(3,m,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+='>\n<label for="',a=n.identifier,o=a||t.identifier,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"identifier",{hash:{}})),s+=d(o)+'">',a=n.name,o=a||t.name,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"name",{hash:{}})),s+=d(o)+"</label>\n",s})}),define("plex/view/lists/preferences/items/SortableAgentListItem",["hb!templates/lists/preferences/items/SortableAgentListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({tagName:"li",initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e(this.model.toJSON())),this}});return r}),function(e){var t,n=e();e.fn.sortable=function(r){var i=String(r);return r=e.extend({connectWith:!1},r),this.each(function(){if(/^enable|disable|destroy$/.test(i)){var s=e(this).children(e(this).data("items")).attr("draggable",i=="enable");i=="destroy"&&s.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s");return}var o,u,s=e(this).children(r.items),a=e("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');s.find(r.handle).mousedown(function(){o=!0}).mouseup(function(){o=!1}),e(this).data("items",r.items),n=n.add(a),r.connectWith&&e(r.connectWith).add(this).data("connectWith",r.connectWith),s.attr("draggable","true").on("dragstart.h5s",function(n){if(r.handle&&!o)return!1;o=!1;var i=n.originalEvent.dataTransfer;i.effectAllowed="move",i.setData("Text","dummy"),u=(t=e(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){if(!t)return;t.removeClass("sortable-dragging").show(),n.detach(),u!=t.index()&&t.parent().trigger("sortupdate",{item:t}),t=null}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,a]).on("dragover.h5s dragenter.h5s drop.h5s",function(i){return!s.is(t)&&r.connectWith!==e(t).parent().data("connectWith")?!0:i.type=="drop"?(i.stopPropagation(),n.filter(":visible").after(t),t.trigger("dragend.h5s"),!1):(i.preventDefault(),i.originalEvent.dataTransfer.dropEffect="move",s.is(this)?(r.forcePlaceholderSize&&a.height(t.outerHeight()),t.hide(),e(this)[a.index()<e(this).index()?"after":"before"](a),n.not(a).detach()):!n.is(this)&&!e(this).children(r.items).length&&(n.detach(),e(this).append(a)),!1)})})}}(jQuery),define("sortable",function(){}),define("plex/view/lists/preferences/SortableAgentList",["plex/view/lists/BaseList","plex/view/lists/preferences/items/SortableAgentListItem","sortable"],function(e,t){var n=e.extend({tagName:"ul",className:"sortable-list",events:{"change input[type=checkbox]":"onAgentChecked",sortupdate:"onSortUpdate"},initialize:function(){this.setup(t),this.collection&&this.collection.populate()},render:function(){return this.$el.empty(),this.collection&&this.populate(this.collection),this},reset:function(t){e.prototype.reset.call(this,t),this.$el.sortable(),this.delegateEvents()},save:function(){var e="";this.$("input[type=checkbox]").each(function(t){var n=$(this),r=n.prop("checked");r&&(e+=this.name+",")}),e=e.substring(0,e.length-1),this.trigger("save",e)},onAgentChecked:function(e){this.save()},onSortUpdate:function(e){this.save()}});return n}),define("plex/view/preferences/AgentsPreferencesView",["hb!templates/preferences/AgentsPreferencesView.tpl","plex/model/collections/AgentCollection","plex/view/BaseView","plex/view/lists/preferences/AgentList","plex/view/lists/preferences/SortableAgentList"],function(e,t,n,r,i){var s=[{key:"movies",typeID:1,label:"Movies"},{key:"tv",typeID:2,label:"TV Shows"},{key:"music",typeID:8,label:"Artists"},{key:"albums",typeID:9,label:"Albums"},{key:"photos",typeID:13,label:"Photos"}],o=_.reduce(s,function(e,t){return e[t.key]=t,e},{}),u=function(e){return o[e]},a=n.extend({id:"agents",className:"preferences-group agents-container",activeSection:"movies",activeAgent:null,agentList:null,sortableList:null,events:{"click .agent-sections-nav a":"onAgentSectionClick","click .agents-nav a":"onAgentClick"},initialize:function(){var e=this.populateAgents(this.activeSection);this.agentList=this.registerView(new r({collection:e})),this.sortableList=this.registerView(new i({collection:null})),this.addBinding(this.sortableList,"save",this.onSaveOrder)},render:function(){return this.$el.html(e({activeSection:this.activeSection,sections:s})),this.$(".agent-sections-nav").after(this.agentList.render().el),this.$(".agent-details").append(this.sortableList.render().el),this},populateAgents:function(e){var n=u(e);return n.agents||(n.agents=new t([],{server:this.model,sectionType:n.typeID})),n.agents.populate().done(_.bind(function(){this.selectAgent(n.agents.first())},this)),n.agents},selectAgent:function(e){this.$(".agent-name").text(e.get("name")),this.activeAgent=e,this.populateAdditionalAgents(e)},populateAdditionalAgents:function(e){var n=u(this.activeSection),r=new t([],{server:this.model,sectionType:n.typeID,relatedAgent:e.id}),i=new t([],{server:this.model,sectionType:n.typeID,primaryAgent:e.id}),s=r.fetch().pipe(function(e){return i.fetch()});s=s.pipe(_.bind(function(n){var s=function(t){return t.id===e.id?(t.set("primary",!0),!0):i.get(t.id)?!0:!1};this.sortableList.rebase(new t(r.filter(s),{server:this.model}))},this))},onSaveOrder:function(e){var t=u(this.activeSection);this.activeAgent.url="system/agents/"+this.activeAgent.id+"/config/"+t.typeID,this.activeAgent.save({order:e})},onAgentSectionClick:function(e){e.preventDefault();var t=$(e.target),n=t.attr("href"),r=n.replace("#","");this.activeSection=r;var i=this.populateAgents(r);this.agentList.rebase(i),this.$(".agent-sections-nav li").removeClass("active"),t.parent("li").addClass("active")},onAgentClick:function(e){e.preventDefault();var t=$(e.target),n=t.data("identifier"),r=this.agentList.collection.get(n);this.selectAgent(r),this.$(".agents-nav li").removeClass("active"),t.parent("li").addClass("active")}});return a}),define("plex/view/preferences/ServerPreferencesView",["hb!templates/preferences/ServerPreferencesView.tpl","plex/control/Dispatcher","plex/control/utils/LanguageUtil","plex/model/AppModel","plex/model/AccountModel","plex/model/PreferenceModel","plex/view/BaseView","plex/view/preferences/MyPlexPreferencesView","plex/view/preferences/AgentsPreferencesView"],function(e,t,n,r,i,s,o,u,a){var f=o.extend({className:"container server-container well",disableForm:!1,myPlexPreferencesView:null,agentsPreferencesView:null,events:{"click .preferences-nav a":"onPreferenceGroupClick","click .cancel-btn":"onCancelClick","click a.standard-prefs":"onToggleAdvanced","click a.advanced-prefs":"onToggleStandard","submit .preferences-form":"onFormSubmit","change input[name]":"onPreferenceChange","change select[name]":"onPreferenceChange"},orderedGroups:[{id:"general",group:"general",title:"General"},{id:"library",group:"library",title:"Library"},{id:"channels",group:"channels",title:"Channels"},{id:"network",group:"network",title:"Network"},{id:"transcoder",group:"transcoder",title:"Transcoder"},{id:"languages",group:"account.language",title:"Languages"},{id:"dlna",group:"dlna",title:"DLNA"},{id:"bonjour",group:"bonjour",title:"Network Discovery"}],initialize:function(){var e=_.bind(function(){this.render()},this);this.prefs=this.model.get("preferences"),this.prefs.populate(),this.addBinding(this.prefs,"reset",e),this.account=new i({key:"/accounts/1"},{server:this.model}),this.account.fetch().done(e),this.changes={},this.myPlexPreferencesView=new u({model:this.model.get("myPlexAccount")}),this.agentsPreferencesView=new a({model:this.model})},render:function(){var t="",n=!1,r=this.prefs.get("FriendlyName");r&&!r.get("value")&&(t=r.get("value"),n=!0,r.set("value",this.model.get("name"),{silent:!0}));var i={},s={},o=function(e){if(!e.get("hidden")){var t=e.get("group");i[t]||(i[t]=[]),i[t].push(e.toJSON()),e.get("advanced")||(s[t]=!0)}};this.prefs.each(o),_.each(this.getFakePrefs(),o);var u=_.map(this.orderedGroups,function(e){var t=_.clone(e);return t.prefs=i[e.group],t.advanced=!(e.group in s),delete i[e.group],t},this);_.each(i,function(e,t){u.push({group:t,title:t,prefs:e,advanced:!(t in s)})});var a={groups:u,server:this.model.toJSON()};return n&&r.set("value",t,{silent:!0}),this.$el.html(e(a)),this.$(".preferences-group:last").after(this.myPlexPreferencesView.render().el),this.$(".preferences-group:last").after(this.agentsPreferencesView.render().el),this.myPlexPreferencesView.delegateEvents(),this.agentsPreferencesView.delegateEvents(),this},getFakePrefs:function(){var e=[],t=_.map(n.byCode,function(e,t){return{value:t,label:e}});return e.push(new s({id:"account.autoSelectAudio",label:"Automatically select audio tracks",summary:"Automatically select audio tracks in your preferred language when possible.","default":!1,value:this.account.get("autoSelectAudio")==="1",type:"bool",group:"account.language",advanced:!1,hidden:!1})),e.push(new s({id:"account.defaultAudioLanguage",label:"Prefer audio tracks in","default":"en",value:this.account.get("defaultAudioLanguage"),type:"text",group:"account.language",advanced:!1,hidden:!1,enumValues:t})),e.push(new s({id:"account.subtitleMode",label:"Subtitle mode","default":0,value:parseInt(this.account.get("subtitleMode"),10),type:"int",group:"account.language",advanced:!1,hidden:!1,enumValues:[{value:"0",label:"Manually selected"},{value:"1",label:"Shown with foreign audio"},{value:"2",label:"Always enabled"}]})),e.push(new s({id:"account.defaultSubtitleLanguage",label:"Prefer subtitles in","default":"en",value:this.account.get("defaultSubtitleLanguage"),type:"text",group:"account.language",advanced:!1,hidden:!1,enumValues:t})),e},onPreferenceGroupClick:function(e){e.preventDefault();var t=$(e.target),n=t.attr("href");this.$(".preferences-group").removeClass("active"),this.$(n).addClass("active"),n==="#myplex"||n==="#agents"?(this.disableForm=!0,this.$(".main-actions").addClass("hide")):(this.disableForm=!1,this.$(".main-actions").removeClass("hide")),this.$(".preferences-nav li").removeClass("active"),t.parent("li").addClass("active")},onCancelClick:function(e){e.preventDefault(),t.trigger("navigate:server",this.model.id)},onToggleAdvanced:function(e){e.preventDefault(),this.$(".standard-prefs").addClass("hide"),this.$(".advanced-prefs").removeClass("hide")},onToggleStandard:function(e){e.preventDefault(),this.$(".advanced-prefs").hasClass("active")&&this.$(".preferences-nav > li:first a").click(),this.$(".standard-prefs").removeClass("hide"),this.$(".advanced-prefs").addClass("hide")},onFormSubmit:function(e){if(this.disableForm)return;if(_.isEmpty(this.changes))return this.onCancelClick(e);e.preventDefault();var n=[],i="account.",s=!1;_.each(_.keys(this.changes),function(e){e.lastIndexOf(i,0)===0&&(this.account.set(e.substring(i.length),this.changes[e],{silent:!0}),s=!0,delete this.changes[e])},this),s&&n.push(this.account.save()),_.isEmpty(this.changes)||n.push(this.prefs.first().save(this.changes)),$.when.apply($,n).done(_.bind(function(){_.each(this.changes,function(e,t){var n=this.prefs.get(t),r=n.get("type");r=="bool"?n.set("value",e!=="0"):r=="int"?n.set("value",parseInt(e,10)):n.set("value",e)},this),t.trigger("navigate:server",this.model.id)},this)).fail(function(){r.set("alert",{status:"error",message:"Unable to save preferences"})})},onPreferenceChange:function(e){if(this.disableForm)return;var t=e.currentTarget,n=t.value;t.type=="checkbox"&&!t.checked&&(n="0"),this.changes[t.name]=n}});return f}),define("hb!templates/ServerTimelineView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function m(e,t){var r="",i,s,o;return r+="\n				",i=15,f=n.friendlyName,s=f||e.friendlyName,f=n.truncate,o=f||e.truncate,typeof o===h?i=o.call(e,s,i,{hash:{}}):o===d?i=p.call(e,"truncate",s,i,{hash:{}}):i=o,r+=v(i)+"\n			",r}function g(e,t){var r="",i,s,o;return r+="\n				",i=15,f=n.name,s=f||e.name,f=n.truncate,o=f||e.truncate,typeof o===h?i=o.call(e,s,i,{hash:{}}):o===d?i=p.call(e,"truncate",s,i,{hash:{}}):i=o,r+=v(i)+"\n			",r}n=n||e.helpers;var s="",o,u,a,f,l,c=this,h="function",p=n.helperMissing,d=void 0,v=this.escapeExpression;s+='<div class="server-row row">\n	<i class="plex-icon-server"></i>\n\n	<div class="server-details">\n\n		<h1 class="server-name">\n			',f=n.friendlyName,o=f||t.friendlyName,u=n["if"],l=c.program(1,m,i),l.hash={},l.fn=l,l.inverse=c.program(3,g,i),o=u.call(t,o,l);if(o||o===0)s+=o;return s+='\n		</h1>\n\n		<h2><i class="icon-list-alt"></i> Timeline</h2>\n	</div>\n</div>\n\n<div id="timeline-banner" class="banner">\n	<div class="pull-right">\n		Since ',o="LT",f=n.startTime,u=f||t.startTime,f=n.formatDateCustom,a=f||t.formatDateCustom,typeof a===h?o=a.call(t,u,o,{hash:{}}):a===d?o=p.call(t,"formatDateCustom",u,o,{hash:{}}):o=a,s+=v(o)+'\n	</div>\n\n	<span class="banner-title">Server Events</span> <span class="banner-count"></span>\n</div>\n',s})}),define("hb!templates/lists/items/ServerEventListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function g(e,t){return'\n	<i class="server-event-icon icon-cog"></i>\n'}function y(e,t){var r,i,s;return r="status",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i._type,f=n.if_eq,s=f||e.if_eq,l=c.program(4,b,t),l.hash={},l.fn=l,l.inverse=c.program(6,w,t),f&&typeof s===h?r=s.call(e,i,r,l):r=p.call(e,s,i,r,l),r||r===0?r:""}function b(e,t){return'\n	<i class="server-event-icon icon-bullhorn"></i>\n'}function w(e,t){var r,i,s;return r="websocket",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i._type,f=n.if_eq,s=f||e.if_eq,l=c.program(7,E,t),l.hash={},l.fn=l,l.inverse=c.program(12,T,t),f&&typeof s===h?r=s.call(e,i,r,l):r=p.call(e,s,i,r,l),r||r===0?r:""}function E(e,t){var r="",i,s;r+="\n	",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.opened,s=n["if"],l=c.program(8,S,t),l.hash={},l.fn=l,l.inverse=c.program(10,x,t),i=s.call(e,i,l);if(i||i===0)r+=i;return r+="\n",r}function S(e,t){return'\n		<i class="server-event-icon icon-bullhorn"></i>\n	'}function x(e,t){return'\n		<i class="server-event-icon icon-warning-sign"></i>\n	'}function T(e,t){var r,i,s;return r=0,f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.state,f=n.if_eq,s=f||e.if_eq,l=c.program(13,N,t),l.hash={},l.fn=l,l.inverse=c.program(15,C,t),f&&typeof s===h?r=s.call(e,i,r,l):r=p.call(e,s,i,r,l),r||r===0?r:""}function N(e,t){return'\n	<i class="server-event-icon icon-plus"></i>\n'}function C(e,t){var r,i,s;return r=5,f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.state,f=n.if_eq,s=f||e.if_eq,l=c.program(16,k,t),l.hash={},l.fn=l,l.inverse=c.program(18,L,t),f&&typeof s===h?r=s.call(e,i,r,l):r=p.call(e,s,i,r,l),r||r===0?r:""}function k(e,t){return'\n	<i class="server-event-icon icon-ok"></i>\n'}function L(e,t){var r,i,s;return r=6,f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.state,f=n.if_eq,s=f||e.if_eq,l=c.program(19,A,t),l.hash={},l.fn=l,l.inverse=c.program(21,O,t),f&&typeof s===h?r=s.call(e,i,r,l):r=p.call(e,s,i,r,l),r||r===0?r:""}function A(e,t){return'\n	<i class="server-event-icon icon-magic"></i>\n'}function O(e,t){var r,i,s;return r=9,f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.state,f=n.if_eq,s=f||e.if_eq,l=c.program(22,M,t),l.hash={},l.fn=l,l.inverse=c.program(24,_,t),f&&typeof s===h?r=s.call(e,i,r,l):r=p.call(e,s,i,r,l),r||r===0?r:""}function M(e,t){return'\n	<i class="server-event-icon icon-remove"></i>\n'}function _(e,t){return'\n	<i class="server-event-icon icon-cogs"></i>\n'}function D(e,t){var r="",i;return r+="\n	Preference ",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.label,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"event.label",{hash:{}})),r+=m(i)+" set to ",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.value,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"event.value",{hash:{}})),r+=m(i)+"\n",r}function P(e,t){var r,i,s;return r="status",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i._type,f=n.if_eq,s=f||e.if_eq,l=c.program(29,H,t),l.hash={},l.fn=l,l.inverse=c.program(32,j,t),f&&typeof s===h?r=s.call(e,i,r,l):r=p.call(e,s,i,r,l),r||r===0?r:""}function H(e,t){var r="",i,s;r+="\n	",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.title,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"event.title",{hash:{}})),r+=m(i),f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.description,s=n["if"],l=c.program(30,B,t),l.hash={},l.fn=l,l.inverse=c.noop,i=s.call(e,i,l);if(i||i===0)r+=i;return r+="\n",r}function B(e,t){var r="",i;return r+=": ",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.description,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"event.description",{hash:{}})),r+=m(i),r}function j(e,t){var r,i,s;return r="timeline",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i._type,f=n.if_eq,s=f||e.if_eq,l=c.program(33,F,t),l.hash={},l.fn=l,l.inverse=c.program(35,I,t),f&&typeof s===h?r=s.call(e,i,r,l):r=p.call(e,s,i,r,l),r||r===0?r:""}function F(e,t){var r="",i;return r+="\n	",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.stateString,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"event.stateString",{hash:{}})),r+=m(i)+'\n	<a href="#!/servers/',f=n.serverID,i=f||e.serverID,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"serverID",{hash:{}})),r+=m(i)+"/sections/",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.sectionID,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"event.sectionID",{hash:{}})),r+=m(i)+"/details/",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.itemID,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"event.itemID",{hash:{}})),r+=m(i)+'">',f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.mediaTitle,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"event.mediaTitle",{hash:{}})),r+=m(i)+'</a>\n	in\n	<a href="#!/servers/',f=n.serverID,i=f||e.serverID,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"serverID",{hash:{}})),r+=m(i)+"/sections/",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.sectionID,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"event.sectionID",{hash:{}})),r+=m(i)+'">',f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.sectionTitle,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"event.sectionTitle",{hash:{}})),r+=m(i)+"</a>\n",r}function I(e,t){var r,i,s;return r="websocket",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i._type,f=n.if_eq,s=f||e.if_eq,l=c.program(36,q,t),l.hash={},l.fn=l,l.inverse=c.noop,f&&typeof s===h?r=s.call(e,i,r,l):r=p.call(e,s,i,r,l),r||r===0?r:""}function q(e,t){var r="",i,s;r+="\n	",f=n.event,i=f||e.event,i=i===null||i===undefined||i===!1?i:i.opened,s=n["if"],l=c.program(37,R,t),l.hash={},l.fn=l,l.inverse=c.program(39,U,t),i=s.call(e,i,l);if(i||i===0)r+=i;return r+="\n",r}function R(e,t){var r="",i;return r+="\n	Opened connection to ",f=n.serverName,i=f||e.serverName,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"serverName",{hash:{}})),r+=m(i)+", listening for events.\n	",r}function U(e,t){var r,i;return f=n.event,r=f||e.event,r=r===null||r===undefined||r===!1?r:r.closed,i=n["if"],l=c.program(40,z,t),l.hash={},l.fn=l,l.inverse=c.program(42,W,t),r=i.call(e,r,l),r||r===0?r:""}function z(e,t){var r="",i;return r+="\n	Connection to ",f=n.serverName,i=f||e.serverName,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"serverName",{hash:{}})),r+=m(i)+" closed.\n	",r}function W(e,t){var r="",i;return r+="\n	Unable to listen for events on ",f=n.serverName,i=f||e.serverName,typeof i===h?i=i.call(e,{hash:{}}):i===v&&(i=d.call(e,"serverName",{hash:{}})),r+=m(i)+".\n	",r}n=n||e.helpers;var s="",o,u,a,f,l,c=this,h="function",p=n.blockHelperMissing,d=n.helperMissing,v=void 0,m=this.escapeExpression;o="preference",f=n.event,u=f||t.event,u=u===null||u===undefined||u===!1?u:u._type,f=n.if_eq,a=f||t.if_eq,l=c.program(1,g,i),l.hash={},l.fn=l,l.inverse=c.program(3,y,i),f&&typeof a===h?o=a.call(t,u,o,l):o=p.call(t,a,u,o,l);if(o||o===0)s+=o;s+='\n\n<div class="server-event-details">\n<span class="server-event-time">',o="LT",f=n.event,u=f||t.event,u=u===null||u===undefined||u===!1?u:u.time,f=n.formatDateCustom,a=f||t.formatDateCustom,typeof a===h?o=a.call(t,u,o,{hash:{}}):a===v?o=d.call(t,"formatDateCustom",u,o,{hash:{}}):o=a,s+=m(o)+"</span>\n",o="preference",f=n.event,u=f||t.event,u=u===null||u===undefined||u===!1?u:u._type,f=n.if_eq,a=f||t.if_eq,l=c.program(26,D,i),l.hash={},l.fn=l,l.inverse=c.program(28,P,i),f&&typeof a===h?o=a.call(t,u,o,l):o=p.call(t,a,u,o,l);if(o||o===0)s+=o;return s+="\n</div>\n",s})}),define("plex/view/lists/items/ServerEventListItem",["hb!templates/lists/items/ServerEventListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({tagName:"li",className:"server-event-list-item",render:function(){var t={serverID:this.model.server.id,serverName:this.model.server.get("friendlyName"),event:this.model.toJSON()};if(this.model.get("_type")=="timeline"){t.event.sectionTitle=this.model.get("section")?this.model.get("section").get("title"):"section "+this.model.get("sectionID"),t.event.mediaTitle=this.model.get("media")?this.model.get("media").get("title"):"item "+this.model.get("itemID");switch(this.model.get("state")){case 0:t.event.stateString="Created";break;case 1:t.event.stateString="Progress for";break;case 2:t.event.stateString="Matching";break;case 3:t.event.stateString="Downloading metadata for";break;case 4:t.event.stateString="Loading metadata for";break;case 5:t.event.stateString="Finished processing";break;case 6:t.event.stateString="Analyzing";break;case 9:t.event.stateString="Deleted"}}return this.$el.html(e(t)),this}});return r}),define("plex/view/lists/ServerEventList",["plex/view/lists/BaseList","plex/view/lists/items/ServerEventListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"server-event-list",reverseItems:!0,initialize:function(){this.setup(t)},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("plex/view/ServerTimelineView",["hb!templates/ServerTimelineView.tpl","plex/control/Dispatcher","plex/control/utils/StringUtil","plex/view/BaseView","plex/view/lists/ServerEventList"],function(e,t,n,r,i){var s=r.extend({className:"container well",eventList:null,events:{},initialize:function(){var e=this.model.get("timeline");this.addBinding(e,"add",function(e,t){this.$("#timeline-banner .banner-count").html(t.length)}),this.eventList=this.registerView(new i({collection:e}))},render:function(){var t=this.model.toJSON();return t.startTime=this.model.get("timeline").startTime,this.$el.html(e(t)),this.$("#timeline-banner").after(this.eventList.render().el),this}});return s}),define("hb!templates/ServerView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return'\n			<div class="server-controls">\n				<a class="btn btn-primary prefs-btn"><i class="icon-cog"></i> Preferences</a>\n\n				<a class="btn btn-inverse timeline-btn"><i class="icon-list-alt"></i> Timeline</a>\n\n				<a class="btn btn-inverse optimize-btn"><i class="icon-bolt"></i> Optimize</a>\n\n				<div class="btn-group">\n					<a class="btn btn-split btn-inverse refresh-btn"><i class="icon-repeat"></i> Refresh</a>\n					<a class="btn btn-inverse dropdown-toggle" data-toggle="dropdown">\n						<span class="caret"></span>\n					</a>\n					<ul class="dropdown-menu pull-right">\n						<li><a class="refresh-btn" data-refresh-type="turbo" href="#">Turbo Scan (Default)</a></li>\n						<li><a class="refresh-btn" data-refresh-type="deep" href="#">Deep Scan</a></li>\n					</ul>\n				</div>\n			</div>\n		'}function m(e,t){var r="",i,s,o;r+='\n			<h1 class="server-name">',i=15,a=n.friendlyName,s=a||e.friendlyName,a=n.truncate,o=a||e.truncate,typeof o===c?i=o.call(e,s,i,{hash:{}}):o===p?i=h.call(e,"truncate",s,i,{hash:{}}):i=o,r+=d(i)+" ",a=n.shared,i=a||e.shared,s=n.unless,f=l.program(4,g,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+='</h1>\n			<input class="server-name-input input-large input-dark span4 hide" type="text" value="',a=n.friendlyName,i=a||e.friendlyName,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"friendlyName",{hash:{}})),r+=d(i)+'">\n		',r}function g(e,t){return'<i class="icon-pencil"></i>'}function y(e,t){var r="",i,s,o;r+='\n			<h1 class="server-name">',i=15,a=n.name,s=a||e.name,a=n.truncate,o=a||e.truncate,typeof o===c?i=o.call(e,s,i,{hash:{}}):o===p?i=h.call(e,"truncate",s,i,{hash:{}}):i=o,r+=d(i)+" ",a=n.shared,i=a||e.shared,s=n.unless,f=l.program(7,b,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+='</h1>\n			<input class="server-name-input input-large input-dark span4 hide" type="text" value="',a=n.name,i=a||e.name,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"name",{hash:{}})),r+=d(i)+'">\n		',r}function b(e,t){return'<i class="icon-pencil"></i>'}function w(e,t){return'\n		<div class="pull-right">\n			<a class="add-section" href="#"><i class="icon-plus"></i> Add a Section</a>\n		</div>\n	'}function E(e,t){var r="",i;return r+='\n	<div id="channels-banner" class="banner">\n		<div class="pull-right">\n			<a href="#!/servers/',a=n.machineIdentifier,i=a||e.machineIdentifier,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"machineIdentifier",{hash:{}})),r+=d(i)+'/channels/directory"><i class="icon-th"></i> Directory</a>\n		</div>\n\n		<span class="banner-title">Channels</span> <span class="banner-count"></span>\n	</div>\n',r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<div class="server-row row">\n	<i class="plex-icon-server"></i>\n\n	<div class="server-details">\n		',a=n.shared,o=a||t.shared,u=n.unless,f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+="\n\n		",a=n.friendlyName,o=a||t.friendlyName,u=n["if"],f=l.program(3,m,i),f.hash={},f.fn=f,f.inverse=l.program(6,y,i),o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n\n		<div class="metadata">\n			<span class="metadata-label">Version</span>',a=n.version,o=a||t.version,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"version",{hash:{}})),s+=d(o)+'\n		</div>\n\n		<div class="metadata">\n			<span class="metadata-label">IP Address</span>',a=n.address,o=a||t.address,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"address",{hash:{}})),s+=d(o)+'\n		</div>\n	</div>\n</div>\n\n<div id="sections-banner" class="banner">\n	',a=n.shared,o=a||t.shared,u=n.unless,f=l.program(9,w,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n\n	<span class="banner-title">Sections</span> <span class="banner-count"></span>\n</div>\n\n',a=n.shared,o=a||t.shared,u=n.unless,f=l.program(11,E,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n",s})}),define("hb!templates/lists/items/SectionListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function m(e,t){var r="",i;return r+='\n	<ul class="iconbar">\n		<li>\n			<a class="gray section-icon-btn" rel="tooltip" title="Manage" href="#!/servers/',f=n.serverID,i=f||e.serverID,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"serverID",{hash:{}})),r+=v(i)+"/sections/",f=n.section,i=f||e.section,i=i===null||i===undefined||i===!1?i:i.key,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"section.key",{hash:{}})),r+=v(i)+'/manage">\n				<i class="icon-wrench"></i>\n			</a>\n		</li>\n\n		<li>\n			<a class="gray section-icon-btn edit-btn" rel="tooltip" title="Edit" href="#">\n				<i class="icon-pencil"></i>\n			</a>\n		</li>\n\n		<li>\n			<a class="gray section-icon-btn refresh-btn" rel="tooltip" title="Turbo Scan" href="#">\n				<i class="icon-repeat"></i>\n			</a>\n		</li>\n	</ul>\n',r}n=n||e.helpers;var s="",o,u,a,f,l,c=this,h="function",p=n.helperMissing,d=void 0,v=this.escapeExpression;f=n.shared,o=f||t.shared,u=n.unless,l=c.program(1,m,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;return s+='\n\n<a href="#!/servers/',f=n.serverID,o=f||t.serverID,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"serverID",{hash:{}})),s+=v(o)+"/sections/",f=n.section,o=f||t.section,o=o===null||o===undefined||o===!1?o:o.key,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"section.key",{hash:{}})),s+=v(o)+'">\n	<i class="section-icon plex-icon-',f=n.section,o=f||t.section,o=o===null||o===undefined||o===!1?o:o.type,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"section.type",{hash:{}})),s+=v(o)+'"></i>\n\n	<div class="section-details">\n		<h3>',o=14,f=n.section,u=f||t.section,u=u===null||u===undefined||u===!1?u:u.title,f=n.truncate,a=f||t.truncate,typeof a===h?o=a.call(t,u,o,{hash:{}}):a===d?o=p.call(t,"truncate",u,o,{hash:{}}):o=a,s+=v(o)+'</h3>\n\n		<div class="metadata metadata-top">\n			<span class="type">',f=n.section,o=f||t.section,o=o===null||o===undefined||o===!1?o:o.scanner,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"section.scanner",{hash:{}})),s+=v(o)+'</span>\n		</div>\n\n		<div class="metadata">\n			Updated ',f=n.section,o=f||t.section,o=o===null||o===undefined||o===!1?o:o.updatedAt,f=n.timeAgo,u=f||t.timeAgo,typeof u===h?o=u.call(t,o,{hash:{}}):u===d?o=p.call(t,"timeAgo",o,{hash:{}}):o=u,s+=v(o)+"\n		</div>\n	</div>\n</a>\n",s})}),define("plex/view/lists/items/SectionListItem",["hb!templates/lists/items/SectionListItem.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","plex/view/modals/EditSectionModal"],function(e,t,n,r,i){var s=r.extend({tagName:"li",className:"section-list-item",events:{"click .refresh-btn":"onRefreshClick","click .edit-btn":"onEditClick"},initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e({serverID:this.model.server.id,shared:this.model.server.get("shared"),section:this.model.toJSON()})),this.$el.tooltip({selector:".section-icon-btn",placement:"left"}),this},onRefreshClick:function(e){e.preventDefault(),t.trigger("command:StartLibraryScan",this.model.server,this.model)},onEditClick:function(e){e.preventDefault(),n.set("modal",new i({server:this.model.server,section:this.model}))}});return s}),define("plex/view/lists/SectionList",["plex/view/lists/BaseList","plex/view/lists/items/SectionListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"tile-list section-list",initialize:function(){this.setup(t),this.collection.fetch()},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("hb!templates/lists/channels/items/ChannelListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function y(e,t){var r="",i,s,o;return r+="\n			<h3>",i=12,c=n.channel,s=c||e.channel,s=s===null||s===undefined||s===!1?s:s.title,c=n.truncate,o=c||e.truncate,typeof o===d?i=o.call(e,s,i,{hash:{}}):o===m?i=v.call(e,"truncate",s,i,{hash:{}}):i=o,r+=g(i)+"</h3>\n		",r}function b(e,t){var r="",i,s,o;return r+="\n			<h3>",i=12,c=n.channel,s=c||e.channel,s=s===null||s===undefined||s===!1?s:s.name,c=n.truncate,o=c||e.truncate,typeof o===d?i=o.call(e,s,i,{hash:{}}):o===m?i=v.call(e,"truncate",s,i,{hash:{}}):i=o,r+=g(i)+"</h3>\n		",r}n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;s+='<ul class="iconbar">\n	<li>\n		<a class="gray channel-icon-btn update-btn" rel="tooltip" title="Update" href="#">\n			<i class="icon-circle-arrow-up"></i>\n		</a>\n	</li>\n	<li>\n		<a class="gray channel-icon-btn uninstall-btn" rel="tooltip" title="Uninstall" href="#">\n			<i class="icon-minus-sign"></i>\n		</a>\n	</li>\n</ul>\n\n<a href="#!/servers/',c=n.serverID,o=c||t.serverID,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"serverID",{hash:{}})),s+=g(o)+"/channels?key=",c=n.channel,o=c||t.channel,o=o===null||o===undefined||o===!1?o:o.key,c=n.encodeURL,u=c||t.encodeURL,typeof u===d?o=u.call(t,o,{hash:{}}):u===m?o=v.call(t,"encodeURL",o,{hash:{}}):o=u,s+=g(o)+'">\n	<img class="channel-icon" src="',o=50,u=50,c=n.channel,a=c||t.channel,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" width="50" height="50">\n\n	<div class="section-details">\n		',c=n.channel,o=c||t.channel,o=o===null||o===undefined||o===!1?o:o.title,u=n["if"],h=p.program(1,y,i),h.hash={},h.fn=h,h.inverse=p.program(3,b,i),o=u.call(t,o,h);if(o||o===0)s+=o;return s+='\n\n		<div class="metadata metadata-top">\n			<span class="type">',c=n.channel,o=c||t.channel,o=o===null||o===undefined||o===!1?o:o.type,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"channel.type",{hash:{}})),s+=g(o)+" Channel</span>\n		</div>\n	</div>\n</a>\n",s})}),define("plex/view/lists/channels/items/ChannelListItem",["hb!templates/lists/channels/items/ChannelListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({tagName:"li",className:"section-list-item",events:{"click .update-btn":"onUpdateClick","click .uninstall-btn":"onUninstallClick"},initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,channel:this.model.toJSON()})),this.$el.tooltip({selector:".channel-icon-btn",placement:"left"}),this},onUpdateClick:function(e){e.preventDefault(),t.trigger("command:UpdateChannel",this.model)},onUninstallClick:function(e){e.preventDefault();var n=function(){this.model.trigger("destroy",this.model,this.model.collection)};t.trigger("command:UninstallChannel",this.model,_.bind(n,this))}});return r}),define("plex/view/lists/channels/ChannelList",["plex/view/lists/BaseList","plex/view/lists/channels/items/ChannelListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"tile-list section-list channel-list",initialize:function(){this.setup(t),this.collection.url&&this.collection.fetch()},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("plex/view/ServerView",["hb!templates/ServerView.tpl","plex/control/Dispatcher","plex/control/utils/StringUtil","plex/model/AppModel","plex/view/BaseView","plex/view/lists/SectionList","plex/view/lists/channels/ChannelList","plex/view/modals/EditSectionModal"],function(e,t,n,r,i,s,o,u){var a=i.extend({className:"container well",sectionList:null,channelList:null,events:{"click .server-name":"onNameClick","blur .server-name-input":"onNameInputBlur","keyup .server-name-input":"onNameInputKeyUp","click .add-section":"onAddSectionClick","click .prefs-btn":"onPreferencesClick","click .timeline-btn":"onTimelineClick","click .optimize-btn":"onOptimizeClick","click .refresh-btn":"onRefreshClick"},initialize:function(){var e=this.model.get("sections"),t=this.model.get("channels");this.addBinding(this.model,"change:name",this.onNameChange),this.addBinding(e,"reset",this.onSectionsReset),this.sectionList=this.registerView(new s({collection:e})),this.model.get("shared")||(this.addBinding(t,"reset",this.onChannelsReset),this.channelList=this.registerView(new o({collection:t})))},render:function(){return this.$el.html(e(this.model.toJSON())),this.$("#sections-banner").after(this.sectionList.render().el),this.channelList&&this.$("#channels-banner").after(this.channelList.render().el),this},onSectionsReset:function(){var e=this.model.get("sections").length;this.$("#sections-banner .banner-count").html(e)},onChannelsReset:function(){var e=this.model.get("channels").length;this.$("#channels-banner .banner-count").html(e)},onNameChange:function(e,t){var r=this.$(".server-name"),i=e.previous("name");r.html(r.html().replace(i,n.truncate(t,15)))},onNameClick:function(e){this.model.get("shared")||(this.$(".server-name").addClass("hide"),this.$(".server-name-input").removeClass("hide").focus().select())},onNameInputBlur:function(e){var t=$(e.target).val();this.model.get("name")!==t&&this.model.get("preferences").populate().then(function(e){var n=e.get("FriendlyName");n&&n.save({value:t})}),this.$(".server-name").removeClass("hide"),this.$(".server-name-input").addClass("hide")},onNameInputKeyUp:function(e){e.keyCode===13&&$(e.target).blur()},onAddSectionClick:function(e){e.preventDefault(),r.set("modal",new u({server:this.model,redirect:!0}))},onPreferencesClick:function(e){e.preventDefault(),t.trigger("navigate:serverPrefs",this.model.id)},onTimelineClick:function(e){e.preventDefault(),t.trigger("navigate:serverTimeline",this.model.id)},onOptimizeClick:function(e){e.preventDefault();var n=$(e.target);n.addClass("disabled"),t.trigger("command:OptimizeLibrary",this.model,function(){n.removeClass("disabled")})},onRefreshClick:function(e){e.preventDefault();var n={},r=$(e.target).data("refreshType");r&&(n[r]=!0),t.trigger("command:StartLibraryScan",this.model,null,n)}});return a}),define("hb!templates/ManageSectionView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function m(e,t){var r="",i,s;r+='\n			<div class="section-controls">\n				<a class="btn btn-primary" href="#!/servers/',f=n.serverID,i=f||e.serverID,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"serverID",{hash:{}})),r+=v(i)+"/sections/",f=n.section,i=f||e.section,i=i===null||i===undefined||i===!1?i:i.key,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"section.key",{hash:{}})),r+=v(i)+'"><i class="icon-th"></i> Browse</a>\n\n				<a class="btn btn-inverse edit-btn"><i class="icon-pencil"></i> Edit</a>\n\n				<div class="btn-group refresh-btn-group ',f=n.section,i=f||e.section,i=i===null||i===undefined||i===!1?i:i.refreshing,s=n["if"],l=c.program(2,g,t),l.hash={},l.fn=l,l.inverse=c.noop,i=s.call(e,i,l);if(i||i===0)r+=i;r+='">\n					<a class="btn btn-split btn-inverse refresh-btn "><i class="icon-repeat"></i> Refresh</a>\n					<a class="btn btn-inverse dropdown-toggle" data-toggle="dropdown">\n						<span class="caret"></span>\n					</a>\n					<ul class="dropdown-menu pull-right">\n						<li><a class="refresh-btn" data-refresh-type="turbo" href="#">Turbo Scan (Default)</a></li>\n						<li><a class="refresh-btn" data-refresh-type="deep" href="#">Deep Scan</a></li>\n					</ul>\n				</div>\n\n				<a class="btn btn-inverse stop-refresh-btn ',f=n.section,i=f||e.section,i=i===null||i===undefined||i===!1?i:i.refreshing,s=n.unless,l=c.program(4,y,t),l.hash={},l.fn=l,l.inverse=c.noop,i=s.call(e,i,l);if(i||i===0)r+=i;return r+='"><i class="icon-remove-sign"></i> Stop Refresh</a>\n			</div>\n		',r}function g(e,t){return"hide"}function y(e,t){return"hide"}function b(e,t){return'<i class="icon-pencil"></i>'}function w(e,t){return'\n	<div id="controls-banner" class="banner">\n		<span class="banner-title">Maintenance</span>\n	</div>\n\n	<div class="section-controls-row">\n		<div class="section-control">\n			<a class="btn btn-inverse empty-trash-btn"><i class="icon-trash"></i> Empty Trash</a>\n			<div class="help-block">By default the media server doesn\'t remove information for media right away. This helps if a drive is temporarily disconnected. When you empty the trash for a section, all information about missing media is deleted. No files on disk are touched.</div>\n		</div>\n\n		<div class="section-control">\n			<a class="btn btn-inverse force-refresh-btn"><i class="icon-refresh"></i> Force Refresh</a>\n			<div class="help-block">Forces a download of fresh media information from the Internet. This can take a long time. Any locked fields are not modified.</div>\n		</div>\n\n		<div class="section-control">\n			<a class="btn btn-inverse analyze-media-btn"><i class="icon-magic"></i> Analyze Media</a>\n			<div class="help-block">Analyzes all the media files in the library section. The analysis captures information about the media which helps Plex decide how to optimally play back the media.</div>\n		</div>\n\n		<div class="section-control">\n			<a class="btn btn-danger delete-btn"><i class="icon-minus-sign"></i> Delete</a>\n			<div class="help-block">Removes a library section and all items inside. It does not delete any media files. View progress and ratings are preserved, in case any of the items are added in the future.</div>\n		</div>\n	</div>\n'}n=n||e.helpers;var s="",o,u,a,f,l,c=this,h="function",p=n.helperMissing,d=void 0,v=this.escapeExpression;s+='<div class="manage-section-row row">\n	<i class="section-icon plex-icon-',f=n.section,o=f||t.section,o=o===null||o===undefined||o===!1?o:o.type,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"section.type",{hash:{}})),s+=v(o)+'-large"></i>\n\n	<div class="section-details">\n		',f=n.shared,o=f||t.shared,u=n.unless,l=c.program(1,m,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;s+='\n\n		<h1 class="section-title">',o=25,f=n.section,u=f||t.section,u=u===null||u===undefined||u===!1?u:u.title,f=n.truncate,a=f||t.truncate,typeof a===h?o=a.call(t,u,o,{hash:{}}):a===d?o=p.call(t,"truncate",u,o,{hash:{}}):o=a,s+=v(o)+" ",f=n.shared,o=f||t.shared,u=n.unless,l=c.program(6,b,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;s+='</h1>\n		<input class="section-title-input input-large input-dark span4 hide" type="text" value="',f=n.section,o=f||t.section,o=o===null||o===undefined||o===!1?o:o.title,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"section.title",{hash:{}})),s+=v(o)+'">\n\n		<div class="metadata">\n			<span class="metadata-label">Scanner</span>\n			',f=n.section,o=f||t.section,o=o===null||o===undefined||o===!1?o:o.scanner,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"section.scanner",{hash:{}})),s+=v(o)+'\n		</div>\n\n		<div class="metadata">\n			<span class="metadata-label">Agent</span>\n			',f=n.section,o=f||t.section,o=o===null||o===undefined||o===!1?o:o.agent,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"section.agent",{hash:{}})),s+=v(o)+'\n		</div>\n\n		<div class="metadata">\n			<span class="metadata-label">Language</span>\n			',f=n.languageName,o=f||t.languageName,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"languageName",{hash:{}})),s+=v(o)+"\n		</div>\n	</div>\n</div>\n\n",f=n.shared,o=f||t.shared,u=n.unless,l=c.program(8,w,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;return s+='\n\n<div id="on-deck-banner" class="banner hide">\n	<span class="banner-title">On Deck</span> <span class="banner-count"></span>\n</div>\n\n<div id="recently-added-banner" class="banner hide">\n	<span class="banner-title">Recently Added</span> <span class="banner-count"></span>\n</div>\n',s})}),define("hb!templates/lists/media/items/PosterRowListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<a href="#!/servers/',u=n.serverID,o=u||t.serverID,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"serverID",{hash:{}})),s+=h(o)+"/sections/",u=n.sectionID,o=u||t.sectionID,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"sectionID",{hash:{}})),s+=h(o)+"/details/",u=n.media,o=u||t.media,o=o===null||o===undefined||o===!1?o:o.ratingKey,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"media.ratingKey",{hash:{}})),s+=h(o)+'">\n	<img class="poster">\n\n	<span class="media-count"></span>\n\n	<span class="unwatched-count"></span>\n</a>\n\n<div class="poster-title"></div>\n',s})}),define("plex/view/lists/media/items/PosterRowListItem",["hb!templates/lists/media/items/PosterRowListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),sectionID:this.model.section.id,media:this.model.toJSON()})),this.bindView(),this},bindings:{".poster-title":{modelAttr:"title"},".poster":{modelAttr:"thumb",format:function(e,t){e.prop("src","img/posters/poster_small.png");var n=this.model.get("grandparentThumb")||t;if(!n)return;var r=Handlebars.helpers.transcodeImage.call(this,this.model.server,n,116,155);e.data("original",r),this.trigger("change:poster")}},".media-count":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){var n=0,r=this.model.get("Media");return _.isArray(r)&&(n=r.length),n}},".unwatched-count":{modelAttr:"unviewedLeafCount",hideEmpty:!0}}});return n}),define("plex/view/lists/media/PosterRowList",["plex/view/lists/BaseList","plex/view/lists/media/items/PosterRowListItem","lazyload"],function(e,t){var n=e.extend({tagName:"ul",className:"tile-list poster-row-list",loadPosterThrottle:null,initialize:function(){this.setup(t),this.loadPosterThrottle=_.throttle(_.debounce(this.loadPoster,500),100)},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(t){var n=e.prototype.addItem.call(this,t);this.addBinding(n,"change:poster",this.loadPosterThrottle),this.loadPosterThrottle()},loadPoster:function(){this.$(".poster").lazyload({threshold:100})}});return n}),define("plex/view/ManageSectionView",["hb!templates/ManageSectionView.tpl","plex/model/AppModel","plex/control/Dispatcher","plex/control/utils/StringUtil","plex/control/utils/LanguageUtil","plex/control/utils/SectionTypes","plex/model/media/collections/MediaCollection","plex/view/BaseView","plex/view/lists/media/PosterRowList","plex/view/modals/EditSectionModal"],function(e,t,n,r,i,s,o,u,a,f){var l=u.extend({className:"container well",onDeckList:null,recentlyAddedList:null,events:{"click .section-title":"onTitleClick","blur .section-title-input":"onTitleInputBlur","keyup .section-title-input":"onTitleInputKeyUp","click .edit-btn":"onEditClick","click .refresh-btn":"onRefreshClick","click .stop-refresh-btn":"onStopRefreshClick","click .empty-trash-btn":"onEmptyTrashClick","click .force-refresh-btn":"onForceRefreshClick","click .analyze-media-btn":"onAnalyzeMediaClick","click .delete-btn":"onDeleteClick"},initialize:function(){this.onDeck=new o([],{server:this.model.server,section:this.model,type:"onDeck",size:6}),this.recentlyAdded=new o([],{server:this.model.server,section:this.model,type:"recentlyAdded",size:6}),this.onDeckList=this.registerView(new a({collection:this.onDeck})),this.recentlyAddedList=this.registerView(new a({collection:this.recentlyAdded})),this.addBinding(this.onDeck,"reset",this.onOnDeckReset),this.addBinding(this.recentlyAdded,"reset",this.onRecentlyAddedReset),this.addBinding(this.model,"change:title",this.onTitleChange),this.addBinding(this.model,"change:refreshing",this.onRefreshingChange),this.addBinding(this.model,"destroy",function(e){n.trigger("navigate:server",e.server.id)}),this.onDeck.fetch(),this.recentlyAdded.fetch()},render:function(){return this.$el.html(e({serverID:this.model.server.id,shared:this.model.server.get("shared"),section:this.model.toJSON(),sectionTypes:s.getSectionTypes(),languageName:i.getLanguageName(this.model.get("language"))})),this.$("#on-deck-banner").after(this.onDeckList.render().el),this.$("#recently-added-banner").after(this.recentlyAddedList.render().el),this},onOnDeckReset:function(){var e=$("#on-deck-banner"),t=this.onDeck.length;t?(e.removeClass("hide"),e.find(".banner-count").html(t)):e.addClass("hide")},onRecentlyAddedReset:function(){var e=$("#recently-added-banner"),t=this.recentlyAdded.length;t?(e.removeClass("hide"),e.find(".banner-count").html(t)):e.addClass("hide")},onTitleChange:function(e,t){var n=this.$(".section-title"),i=e.previous("title");n.html(n.html().replace(i,r.truncate(t,25)))},onRefreshingChange:function(e,t){t?(this.$(".refresh-btn-group").addClass("hide"),this.$(".stop-refresh-btn").removeClass("hide")):(this.$(".refresh-btn-group").removeClass("hide"),this.$(".stop-refresh-btn").addClass("hide"))},onTitleClick:function(e){this.model.server.get("shared")||(this.$(".section-title").addClass("hide"),this.$(".section-title-input").removeClass("hide").focus().select())},onTitleInputBlur:function(e){var t=$(e.target).val();this.model.get("title")!==t&&this.model.save("title",t),this.$(".section-title").removeClass("hide"),this.$(".section-title-input").addClass("hide")},onTitleInputKeyUp:function(e){e.keyCode===13&&$(e.target).blur()},onEditClick:function(e){e.preventDefault(),t.set("modal",new f({server:this.model.server,section:this.model}))},onRefreshClick:function(e){e.preventDefault();var t={},r=$(e.target).data("refreshType");r&&(t[r]=!0),this.$(".refresh-btn-group").addClass("hide"),this.$(".stop-refresh-btn").removeClass("hide"),n.trigger("command:StartLibraryScan",this.model.server,this.model,t)},onStopRefreshClick:function(e){e.preventDefault(),this.$(".refresh-btn-group").removeClass("hide"),this.$(".stop-refresh-btn").addClass("hide"),n.trigger("command:StopLibraryScan",this.model.server,this.model)},onEmptyTrashClick:function(e){e.preventDefault(),n.trigger("command:EmptyTrash",this.model.server,this.model)},onForceRefreshClick:function(e){e.preventDefault(),n.trigger("command:StartLibraryScan",this.model.server,this.model,{force:!0})},onAnalyzeMediaClick:function(e){e.preventDefault(),n.trigger("command:StartMediaAnalysis",this.model.server,this.model)},onDeleteClick:function(e){e.preventDefault(),n.trigger("command:DeleteSection",this.model)}});return l}),define("hb!templates/SectionView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function y(e,t){var r="",i,s;r+='\n		<ul class="iconbar">\n			<li>\n				<a class="gray banner-icon-btn" rel="tooltip" data-tooltip-position="fixed" title="Manage" href="#!/servers/',c=n.serverID,i=c||e.serverID,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"serverID",{hash:{}})),r+=g(i)+"/sections/",c=n.section,i=c||e.section,i=i===null||i===undefined||i===!1?i:i.key,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"section.key",{hash:{}})),r+=g(i)+'/manage">\n					<i class="icon-wrench"></i>\n				</a>\n			</li>\n\n			<li>\n				<a class="gray banner-icon-btn edit-btn" rel="tooltip" data-tooltip-position="fixed" title="Edit" href="#">\n					<i class="icon-pencil"></i>\n				</a>\n			</li>\n\n			<li class="dropdown refresh-dropdown ',c=n.section,i=c||e.section,i=i===null||i===undefined||i===!1?i:i.refreshing,s=n["if"],h=p.program(2,b,t),h.hash={},h.fn=h,h.inverse=p.noop,i=s.call(e,i,h);if(i||i===0)r+=i;r+='">\n				<a class="gray banner-icon-btn refresh-btn" rel="tooltip" data-tooltip-position="fixed" title="Refresh" href="#"><i class="icon-repeat"></i></a><a class="gray dropdown-toggle" href="#refresh-options" data-toggle="dropdown"><i class="icon-caret-down"></i></a>\n\n				<ul class="dropdown-menu pull-right">\n					<li><a class="refresh-btn" data-refresh-type="turbo" href="#">Turbo Scan (Default)</a></li>\n					<li><a class="refresh-btn" data-refresh-type="deep" href="#">Deep Scan</a></li>\n				</ul>\n			</li>\n\n			<li class="stop-refresh ',c=n.section,i=c||e.section,i=i===null||i===undefined||i===!1?i:i.refreshing,s=n.unless,h=p.program(4,w,t),h.hash={},h.fn=h,h.inverse=p.noop,i=s.call(e,i,h);if(i||i===0)r+=i;return r+='">\n				<a class="gray banner-icon-btn stop-refresh-btn" rel="tooltip" data-tooltip-position="fixed" title="Stop Refresh" href="#"><i class="icon-remove-sign"></i></a><i class="icon-caret-down disabled"></i>\n			</li>\n		</ul>\n	',r}function b(e,t){return"hide"}function w(e,t){return"hide"}function E(e,t){return'\n				<h2 class="type-header">Type</h2>\n			'}n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;s+='<div id="section-banner" class="banner banner-fixed animated slideDown">\n	',c=n.shared,o=c||t.shared,u=n.unless,h=p.program(1,y,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;s+='\n\n	<span class="banner-title">',c=n.section,o=c||t.section,o=o===null||o===undefined||o===!1?o:o.title,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"section.title",{hash:{}})),s+=g(o)+'</span> <span class="banner-count">',c=n.totalSize,o=c||t.totalSize,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"totalSize",{hash:{}})),s+=g(o)+'</span>\n</div>\n\n<div class="section-row row-fluid">\n	<div class="media-list-container span9"></div>\n\n	<div class="sidebar well span3">\n		<div class="sidebar-content">\n			<div class="list-type-btn-group btn-group" data-toggle="buttons-radio">\n				<a class="poster-tile-list-btn btn btn-inverse ',o="",u="selected active",a="poster-tile-list",c=n.listType,f=c||t.listType,c=n.eq,l=c||t.eq,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"eq",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'">\n					<i class="icon-th-large"></i>\n				</a>\n\n				<a class="poster-list-btn btn btn-inverse ',o="",u="selected active",a="poster-list",c=n.listType,f=c||t.listType,c=n.eq,l=c||t.eq,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"eq",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'">\n					<i class="icon-th-list"></i>\n				</a>\n\n				<a class="compact-list-btn btn btn-inverse ',o="",u="selected active",a="compact-list",c=n.listType,f=c||t.listType,c=n.eq,l=c||t.eq,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"eq",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'">\n					<i class="icon-align-justify"></i>\n				</a>\n			</div>\n\n			<input type="text" class="input-dark input-search sidebar-search" placeholder="Search" value="',c=n.search,o=c||t.search,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"search",{hash:{}})),s+=g(o)+'">\n\n			',c=n.showTypes,o=c||t.showTypes,u=n["if"],h=p.program(6,E,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;return s+='\n\n			<h2 class="filter-header">Filter</h2>\n\n			<h2 class="sort-header">Sort</h2>\n		</div>\n	</div>\n</div>\n',s})}),define("plex/control/utils/MediaTypes",["underscore"],function(){var e=function(){this.types=[{id:1,typeString:"movie",label:"Movie"},{id:2,typeString:"show",label:"Show",related:[4]},{id:4,typeString:"episode",label:"Episode",related:[2]},{id:8,typeString:"artist",label:"Artist",related:[9]},{id:9,typeString:"album",label:"Album",related:[8]},{id:13,typeString:"photo",label:"Photo"}],this.byID=_.reduce(this.types,function(e,t){return e[t.id]=t,e},{}),this.byType=_.reduce(this.types,function(e,t){return e[t.typeString]=t,e},{}),this.getMediaTypes=function(){return this.types},this.getMediaType=function(e){return this.byID[e]},this.getMediaTypeByString=function(e){return this.byType[e]},this.getRelatedMediaTypes=function(e){var t=this.byType[e],n=_.map(t.related,_.bind(function(e){return this.byID[e]},this));return n.unshift(t),n}};return new e}),define("hb!templates/lists/sidebar/items/FilterListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return"unwatched-toggle"}function m(e,t){return"popover-toggle"}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<a class="dark-gray clear-filters-btn hide" href="#">\n	<i class="icon-remove-sign"></i>\n</a>\n\n<a class="gray ',a=n.unwatched,o=a||t.unwatched,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.program(3,m,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+='" data-tooltip-position="fixed" href="#">\n	',a=n.filter,o=a||t.filter,o=o===null||o===undefined||o===!1?o:o.title,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"filter.title",{hash:{}})),s+=d(o)+"\n</a>\n",s})}),define("hb!templates/lists/sidebar/FilterOptionList.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<ul class="filter-option-list"></ul>'})}),define("hb!templates/lists/sidebar/items/FilterOptionListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return'checked="checked"'}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<label class="checkbox"><input type="checkbox" class="filter-checkbox" value="',a=n.option,o=a||t.option,o=o===null||o===undefined||o===!1?o:o.key,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"option.key",{hash:{}})),s+=d(o)+'" data-title="',a=n.option,o=a||t.option,o=o===null||o===undefined||o===!1?o:o.title,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"option.title",{hash:{}})),s+=d(o)+'" ',a=n.checked,o=a||t.checked,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+="> ",a=n.option,o=a||t.option,o=o===null||o===undefined||o===!1?o:o.title,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"option.title",{hash:{}})),s+=d(o)+"</label>",s})}),define("plex/view/lists/sidebar/items/FilterOptionListItem",["hb!templates/lists/sidebar/items/FilterOptionListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",className:"filter-option",checked:!1,initialize:function(e){this.checked=e.checked,this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e({option:this.model.toJSON(),checked:this.checked})),this}});return n}),define("plex/view/lists/sidebar/FilterOptionList",["hb!templates/lists/sidebar/FilterOptionList.tpl","plex/view/lists/BaseList","plex/view/lists/sidebar/items/FilterOptionListItem"],function(e,t,n){var r=t.extend({selectedOptions:null,initialize:function(){this.setup(n,".filter-option-list")},render:function(){return this.$el.html(e()),this.populate(this.collection),this},addItem:function(e){if(e.get("title")){var t=_.find(this.selectedOptions,function(t){return t==e.get("title")}),r=new n({model:e,checked:t});this.registerView(r),this.items[e.id]=r,this.$(".filter-option-list").append(r.render().el)}}});return r}),define("text!templates/popovers/StickyPopover.tpl",[],function(){return'<div class="popover popover-fixed">\n	<div class="arrow"></div>\n	<div class="popover-inner">\n		<a class="gray popover-close-btn" href="#"><i class="icon-remove-sign"></i></a>\n\n		<h3 class="popover-title"></h3>\n\n		<div class="popover-content">\n			<p></p>\n		</div>\n	</div>\n</div>'}),define("plex/view/popovers/StickyPopover",["text!templates/popovers/StickyPopover.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({$selector:null,events:{"click .popover-close-btn":"onCloseClick"},initialize:function(t){this.$selector=t.$selector,this.$selector.popover({trigger:"manual",placement:t.placement,title:t.title,content:t.content,template:e})},show:function(){return this.$selector.popover("show"),this.setElement(".popover:last"),this},hide:function(){return this.$selector.popover("hide"),this},toggle:function(){return this.$selector.popover("toggle"),this.setElement(".popover:last"),this},onCloseClick:function(e){e.preventDefault(),this.hide()}});return n}),define("plex/view/lists/sidebar/items/FilterListItem",["hb!templates/lists/sidebar/items/FilterListItem.tpl","plex/control/Dispatcher","plex/view/BaseView","plex/view/lists/sidebar/FilterOptionList","plex/view/popovers/StickyPopover"],function(e,t,n,r,i){var s=n.extend({tagName:"li",optionList:null,popover:null,selectedOptions:null,events:{"click .unwatched-toggle":"onUnwatchedToggleClick","click .popover-toggle":"onPopoverToggleClick","click .clear-filters-btn":"onClearFiltersClick"},initialize:function(e){_.bindAll(this,"onFilterChange"),this.optionList=this.registerView(new r({collection:this.model.get("options")}));var t=[],n=e.list.activeFilters;for(var i=0,s=n.length;i<s;i++){var o=n[i];o.key===this.model.id&&(t=o.titles)}this.selectedOptions=this.optionList.selectedOptions=t,this.addBinding(this.model,"change",this.render)},render:function(){var t=this.model.id==="viewCount";return this.$el.html(e({filter:this.model.toJSON(),unwatched:t})),t?this.selectedOptions.length>0&&this.$(".unwatched-toggle").addClass("selected"):this.updateLabel(),this},updateLabel:function(){var e=this.$(".popover-toggle"),t=this.model.get("title"),n=this.selectedOptions.length;if(n){e.addClass("selected"),t+=": ";for(var r=0;r<n;r++)t+=this.selectedOptions[r],r+1<n&&(t+=", ");this.$(".clear-filters-btn").removeClass("hide")}else e.removeClass("selected"),this.$(".clear-filters-btn").addClass("hide");e.text(t)},onUnwatchedToggleClick:function(e){e.preventDefault();var n=$(e.target),r={key:this.model.id,title:"Unwatched",value:0};n.hasClass("selected")?t.trigger("filter:remove",r):t.trigger("filter:add",r),n.toggleClass("selected")},onPopoverToggleClick:function(e){e.preventDefault();var t=this.model.get("options");this.trigger("popover:hide",this),t.fetch().done(_.bind(function(){this.optionList.render();if(this.popover){var e=this.$(".popover-toggle").data("popover");e.options.content=this.optionList.$el.html()}else this.popover=this.registerView(new i({$selector:this.$(".popover-toggle"),placement:"left",title:this.model.get("title"),content:this.optionList.$el.html()}));this.popover.toggle(),this.popover.$(".filter-checkbox").on("change",this.onFilterChange)},this))},onClearFiltersClick:function(e){e.preventDefault(),t.trigger("filter:removeAll",{key:this.model.id}),this.selectedOptions.length=0,this.optionList.selectedOptions=this.selectedOptions,this.updateLabel()},onFilterChange:function(e){var n=$(e.target),r=n.is(":checked"),i={key:this.model.id,title:n.data("title"),value:n.val()};r?(t.trigger("filter:add",i),this.selectedOptions.push(i.title)):(t.trigger("filter:remove",i),this.selectedOptions=_.reject(this.selectedOptions,function(e){return e===i.title})),this.optionList.selectedOptions=this.selectedOptions,this.updateLabel()}});return s}),define("plex/view/lists/sidebar/FilterList",["plex/view/lists/BaseList","plex/view/lists/sidebar/items/FilterListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"filter-list",activeFilters:null,initialize:function(e){this.setup(t),this.activeFilters=e.activeFilters,this.collection.populate()},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(t){var n=e.prototype.addItem.call(this,t);this.addBinding(n,"popover:hide",this.onHidePopover)},onHidePopover:function(e){_.each(this.items,function(t){e!==t&&t.popover&&t.$(".popover-toggle").popover("hide")})}});return n}),define("hb!templates/lists/sidebar/items/SortListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function d(e,t){var r="",i,s;r+='\n	<a class="gray selected" href="#">',u=n.sort,i=u||e.sort,i=i===null||i===undefined||i===!1?i:i.title,typeof i===l?i=i.call(e,{hash:{}}):i===h&&(i=c.call(e,"sort.title",{hash:{}})),r+=p(i),u=n.descending,i=u||e.descending,s=n["if"],a=f.program(2,v,t),a.hash={},a.fn=a,a.inverse=f.program(4,m,t),i=s.call(e,i,a);if(i||i===0)r+=i;return r+="</a>\n",r}function v(e,t){return'<i class="icon-caret-down"></i>'}function m(e,t){return'<i class="icon-caret-up"></i>'}function g(e,t){var r="",i;return r+='\n	<a class="gray" href="#">',u=n.sort,i=u||e.sort,i=i===null||i===undefined||i===!1?i:i.title,typeof i===l?i=i.call(e,{hash:{}}):i===h&&(i=c.call(e,"sort.title",{hash:{}})),r+=p(i)+"</a>\n",r}n=n||e.helpers;var s,o,u,a,f=this,l="function",c=n.helperMissing,h=void 0,p=this.escapeExpression;return u=n.active,s=u||t.active,o=n["if"],a=f.program(1,d,i),a.hash={},a.fn=a,a.inverse=f.program(6,g,i),s=o.call(t,s,a),s||s===0?s:""})}),define("plex/view/lists/sidebar/items/SortListItem",["hb!templates/lists/sidebar/items/SortListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({tagName:"li",active:!1,direction:"desc",events:{click:"onClick"},initialize:function(e){var n=e.list.activeSort;this.addBinding(this.model,"change",this.render),this.addBinding(t,"sort:change",this.onSortChange),this.model.id===n.key&&(this.active=!0,this.direction=n.direction)},render:function(){var t={active:this.active,descending:this.direction==="desc",sort:this.model.toJSON()};return this.$el.html(e(t)),this},onClick:function(e){e.preventDefault(),this.active?this.direction==="desc"?this.direction="asc":this.active=!1:(this.active=!0,this.direction="desc"),this.render(),this.active?t.trigger("sort:change",{key:this.model.id,direction:this.direction}):t.trigger("sort:change",{key:null})},onSortChange:function(e){this.model.id!==e.key&&(this.active=!1),this.render()}});return r}),define("plex/view/lists/sidebar/SortList",["plex/view/lists/BaseList","plex/view/lists/sidebar/items/SortListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"filter-list",activeSort:null,initialize:function(e){this.setup(t),this.activeSort=e.activeSort,this.collection.populate()},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("hb!templates/lists/sidebar/items/MediaTypeListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return"selected"}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<a class="gray ',a=n.active,o=a||t.active,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+='" href="#">',a=n.label,o=a||t.label,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"label",{hash:{}})),s+=d(o)+"</a>\n",s})}),define("plex/view/lists/sidebar/items/MediaTypeListItem",["hb!templates/lists/sidebar/items/MediaTypeListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({tagName:"li",active:!1,direction:"desc",events:{click:"onClick"},initialize:function(e){var n=e.list.activeType;this.addBinding(t,"mediaType:change",this.onMediaTypeChange),this.model.id===n&&(this.active=!0)},render:function(){var t={active:this.active,label:this.model.label};return this.$el.html(e(t)),this},onClick:function(e){e.preventDefault(),this.active=!0,this.render(),t.trigger("mediaType:change",this.model.id)},onMediaTypeChange:function(e){this.model.id!==e&&(this.active=!1),this.render()}});return r}),define("plex/view/lists/sidebar/MediaTypeList",["plex/view/BaseView","plex/view/lists/sidebar/items/MediaTypeListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"filter-list",activeType:null,initialize:function(e){this.activeType=e.activeType},render:function(){return this.$el.empty(),_.each(this.collection,_.bind(function(e){var n=this.registerView(new t({model:e,list:this}));this.$el.append(n.render().el)},this)),this}});return n}),define("hb!templates/lists/media/items/PosterTileListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function g(e,t){var r="",i;return r+='\n	<div class="poster-subtitle">\n		S',f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.parentIndex,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"media.parentIndex",{hash:{}})),r+=v(i)+"E",f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.index,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"media.index",{hash:{}})),r+=v(i)+" &middot; ",f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.title,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"media.title",{hash:{}})),r+=v(i)+"\n	</div>\n",r}function y(e,t){var r="",i;return r+='\n	<div class="poster-subtitle">\n		',f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.title,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"media.title",{hash:{}})),r+=v(i)+"\n	</div>\n",r}n=n||e.helpers;var s="",o,u,a,f,l,c=this,h="function",p=n.helperMissing,d=void 0,v=this.escapeExpression,m=n.blockHelperMissing;s+='<a href="#!/servers/',f=n.serverID,o=f||t.serverID,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"serverID",{hash:{}})),s+=v(o)+"/sections/",f=n.sectionID,o=f||t.sectionID,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"sectionID",{hash:{}})),s+=v(o)+"/details/",f=n.media,o=f||t.media,o=o===null||o===undefined||o===!1?o:o.ratingKey,typeof o===h?o=o.call(t,{hash:{}}):o===d&&(o=p.call(t,"media.ratingKey",{hash:{}})),s+=v(o)+'">\n	<img class="poster">\n\n	<span class="media-count"></span>\n\n	<span class="unwatched-count"></span>\n</a>\n\n<div class="poster-title"></div>\n\n',o="episode",f=n.media,u=f||t.media,u=u===null||u===undefined||u===!1?u:u.type,f=n.if_eq,a=f||t.if_eq,l=c.program(1,g,i),l.hash={},l.fn=l,l.inverse=c.noop,f&&typeof a===h?o=a.call(t,u,o,l):o=m.call(t,a,u,o,l);if(o||o===0)s+=o;s+="\n\n",o="album",f=n.media,u=f||t.media,u=u===null||u===undefined||u===!1?u:u.type,f=n.if_eq,a=f||t.if_eq,l=c.program(3,y,i),l.hash={},l.fn=l,l.inverse=c.noop,f&&typeof a===h?o=a.call(t,u,o,l):o=m.call(t,a,u,o,l);if(o||o===0)s+=o;return s+="\n",s})}),define("plex/view/lists/media/items/PosterTileListItem",["hb!templates/lists/media/items/PosterTileListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),sectionID:this.model.section.id,media:this.model.toJSON()})),this.$el.addClass(this.model.get("type")),this.bindView(),this},bindings:{".poster-title":{modelAttr:"title",format:function(e,t){var n=this.model.get("type");switch(n){case"episode":return this.model.get("grandparentTitle");case"album":return this.model.get("parentTitle");default:return t}}},".poster":{modelAttr:"thumb",format:function(e,t){var n=this.model.get("type"),r,i,s;switch(n){case"episode":r="img/posters/poster_wide_small.png",i=150,s=120;break;case"album":r="img/posters/poster_square_small.png",i=150,s=150;break;default:r="img/posters/poster_small.png",i=150,s=200}if(this.model.get("directory")){e.prop("src","img/posters/folder_small.png");return}e.prop("src",r);if(!t)return;var o=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,i,s);e.data("original",o),this.trigger("change:poster")}},".media-count":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){var n=0,r=this.model.get("Media");return _.isArray(r)&&(n=r.length),n}},".unwatched-count":{modelAttr:"unviewedLeafCount",hideEmpty:!0}}});return n}),define("plex/view/lists/media/PosterTileList",["plex/view/lists/BaseList","plex/view/lists/media/items/PosterTileListItem","lazyload"],function(e,t){var n=e.extend({tagName:"ul",className:"tile-list poster-tile-list",loadPosterThrottle:null,initialize:function(){this.setup(t),this.loadPosterThrottle=_.throttle(_.debounce(this.loadPoster,500),100)},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(t){var n=e.prototype.addItem.call(this,t);this.addBinding(n,"change:poster",this.loadPosterThrottle),this.loadPosterThrottle()},loadPoster:function(){this.$(".poster").lazyload({threshold:100})}});return n}),define("hb!templates/lists/media/items/PosterListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<a href="#!/servers/',u=n.serverID,o=u||t.serverID,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"serverID",{hash:{}})),s+=h(o)+"/sections/",u=n.sectionID,o=u||t.sectionID,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"sectionID",{hash:{}})),s+=h(o)+"/details/",u=n.media,o=u||t.media,o=o===null||o===undefined||o===!1?o:o.ratingKey,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"media.ratingKey",{hash:{}})),s+=h(o)+'">\n	<img class="media-poster poster">\n\n	<div class="poster-details">\n		<div class="metadata-right">\n			<div class="media-duration metadata metadata-headline"></div>\n\n			<div class="media-rating metadata"></div>\n		</div>\n\n		<h3 class="media-title"></h3>\n\n		<div class="media-tagline metadata"></div>\n\n		<div class="media-available metadata metadata-top"></div>\n		<div class="media-year metadata metadata-top"></div>\n\n		<div class="media-summary summary"></div>\n	</div>\n</a>\n',s})}),define("plex/view/lists/media/items/PosterListItem",["hb!templates/lists/media/items/PosterListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",className:"well",initialize:function(){this.addBinding(this.model,"change",function(){this.render(),this.trigger("change:poster")})},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),sectionID:this.model.section.id,media:this.model.toJSON()})),this.bindView(),this},bindings:{".media-title":{modelAttr:"title",format:function(e,t){return Handlebars.helpers.truncate.call(this,t,40)}},".media-poster":{modelAttr:"thumb",format:function(e,t){e.prop("src","img/posters/poster_mini.png");if(!t)return;var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,100,150);e.data("original",n),this.trigger("change:poster")}},".media-duration":{modelAttr:"duration",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.formatMinutes.call(this,t)}},".media-rating":{modelAttr:"rating",hideEmpty:!0,format:function(e,t){return t?'<span class="rating">'+Handlebars.helpers.starRating.call(this,t)+"</span>":""}},".media-tagline":{modelAttr:"tagline",hideEmpty:!0,format:function(e,t){return t?'<div class="tagline">'+Handlebars.helpers.truncate.call(this,t,55)+"</div>":""}},".media-available":{modelAttr:"originallyAvailableAt",hideEmpty:!0,format:function(e,t){if(!t)return;var n='<span class="metadata-label">';return this.model.get("type")==="show"?n+="Start Date</span>":n+="Release Date</span>",n+Handlebars.helpers.formatDate.call(this,t)}},".media-year":{modelAttr:"year",hideEmpty:!0,format:function(e,t){return this.model.get("originallyAvailableAt")||!t?"":'<span class="metadata-label">Year</span>'+t}},".media-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,180)}}}});return n}),define("plex/view/lists/media/PosterList",["plex/view/lists/BaseList","plex/view/lists/media/items/PosterListItem","lazyload"],function(e,t){var n=e.extend({tagName:"ul",className:"poster-list",loadPosterThrottle:null,initialize:function(){this.setup(t),this.loadPosterThrottle=_.throttle(_.debounce(this.loadPoster,500),100)},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(t){var n=e.prototype.addItem.call(this,t);this.addBinding(n,"change:poster",this.loadPosterThrottle),this.loadPosterThrottle()},loadPoster:function(){this.$(".poster").lazyload({threshold:100})}});return n}),define("hb!templates/lists/media/items/CompactListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<a href="#!/servers/',u=n.serverID,o=u||t.serverID,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"serverID",{hash:{}})),s+=h(o)+"/sections/",u=n.sectionID,o=u||t.sectionID,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"sectionID",{hash:{}})),s+=h(o)+"/details/",u=n.media,o=u||t.media,o=o===null||o===undefined||o===!1?o:o.ratingKey,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"media.ratingKey",{hash:{}})),s+=h(o)+'">\n	<span class="media-rating rating"></span>\n\n	<span class="media-title"></span> <span class="media-year metadata-compact"></span>\n</a>\n',s})}),define("plex/view/lists/media/items/CompactListItem",["hb!templates/lists/media/items/CompactListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e({serverID:this.model.server.id,sectionID:this.model.section.id,media:this.model.toJSON()})),this.bindView(),this},bindings:{".media-title":{modelAttr:"title",format:function(e,t){return Handlebars.helpers.truncate.call(this,t,40)}},".media-year":{modelAttr:"year"},".media-rating":{modelAttr:"rating",hideEmpty:!0,format:function(e,t){return t?Handlebars.helpers.starRating.call(this,t):""}}}});return n}),define("plex/view/lists/media/CompactList",["plex/view/lists/BaseList","plex/view/lists/media/items/CompactListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"compact-list",initialize:function(){this.setup(t)},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("plex/view/SectionView",["hb!templates/SectionView.tpl","plex/control/Dispatcher","plex/control/utils/MediaTypes","plex/model/AppModel","plex/model/FilterModel","plex/view/BaseView","plex/view/lists/sidebar/FilterList","plex/view/lists/sidebar/SortList","plex/view/lists/sidebar/MediaTypeList","plex/view/lists/media/PosterTileList","plex/view/lists/media/PosterList","plex/view/lists/media/CompactList","plex/view/modals/EditSectionModal"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=s.extend({className:"container-fluid",view:"poster",filter:"all",search:"",list:null,typeList:null,filterList:null,sortList:null,searchTimeout:null,loading:!1,events:{"click .poster-tile-list-btn":"onPosterTileListClick","click .poster-list-btn":"onPosterListClick","click .compact-list-btn":"onCompactListClick","keydown .sidebar-search":"onSearchKeyDown","click .refresh-btn":"onRefreshClick","click .stop-refresh-btn":"onStopRefreshClick","click .edit-btn":"onEditClick"},initialize:function(e){var i=r.get("settings"),s=i.get("listType"),h,p=this.model.get("media"),d=this.model.get("filters"),v=n.getRelatedMediaTypes(this.model.get("type"));p.mediaType=p.mediaType||v[0].id,d.mediaType=d.mediaType||v[0].id;switch(s){case"poster-tile-list":h=f;break;case"poster-list":h=l;break;case"compact-list":h=c;break;default:h=f}this.list=this.registerView(new h({collection:p})),this.filterList=this.registerView(new o({collection:d,activeFilters:p.filters})),this.sortList=this.registerView(new u({collection:this.model.get("sorts"),activeSort:p.sort})),v.length>1&&(this.mediaTypeList=this.registerView(new a({collection:v,activeType:p.mediaType}))),_.bindAll(this,"onScroll"),$(window).on("scroll",this.onScroll),this.addBinding(t,"filter:add",_.bind(this.onAddFilter,this)),this.addBinding(t,"filter:remove",_.bind(this.onRemoveFilter,this)),this.addBinding(t,"filter:removeAll",_.bind(this.onRemoveAllFilters,this)),this.addBinding(t,"sort:change",_.bind(this.onSortChange,this)),this.addBinding(t,"mediaType:change",_.bind(this.onMediaTypeChange,this)),this.addBinding(this.model,"change:refreshing",this.onRefreshingChange),this.addBinding(p,"reset",function(e){this.$("#section-banner .banner-count").html(e.totalSize)}),p.page=0,p.reset(),p.fetch()},render:function(){return this.$el.html(e({serverID:this.model.server.id,shared:this.model.server.get("shared"),section:this.model.toJSON(),totalSize:this.model.get("media").totalSize,listType:r.get("settings").get("listType"),showTypes:!!this.mediaTypeList,filter:this.filter,search:this.model.get("media").search})),this.$(".media-list-container").html(this.list.render().el),this.$(".filter-header").after(this.filterList.render().el),this.$(".sort-header").after(this.sortList.render().el),this.mediaTypeList&&this.$(".type-header").after(this.mediaTypeList.render().el),this.$el.tooltip({selector:".banner-icon-btn",placement:"bottom"}),this},destroy:function(){$(window).off("scroll",this.onScroll),s.prototype.destroy.call(this)},propagateFilters:function(e){var t=this.model.get("filters");t.each(function(t){var n=t.get("options");n.activeFilters=e})},propagateMediaType:function(e){var t=this.model.get("filters");t.each(function(t){var n=t.get("options");n.activeType=e})},onRefreshingChange:function(e,t){t?(this.$(".refresh-dropdown").addClass("hide"),this.$(".stop-refresh").removeClass("hide")):(this.$(".refresh-dropdown").removeClass("hide"),this.$(".stop-refresh").addClass("hide"))},onScroll:function(){var e=$(document).height(),t=$(window).height(),n=$(window).scrollTop();!this.loading&&e-t-n<200&&(this.loading=!0,this.model.get("media").next().done(_.bind(function(){this.loading=!1},this)))},onPosterTileListClick:function(e){e.preventDefault();if(this.view!=="poster-tile-list"){var t=r.get("settings");t.save("listType","poster-tile-list"),this.removeView(this.list),this.list=this.registerView(new f({collection:this.model.get("media")})),this.$(".media-list-container").html(this.list.render().el)}},onPosterListClick:function(e){e.preventDefault();if(this.view!=="poster-list"){var t=r.get("settings");t.save("listType","poster-list"),this.removeView(this.list),this.list=this.registerView(new l({collection:this.model.get("media")})),this.$(".media-list-container").html(this.list.render().el)}},onCompactListClick:function(e){e.preventDefault();if(this.view!=="compact-list"){var t=r.get("settings");t.save("listType","compact-list"),this.removeView(this.list),this.list=this.registerView(new c({collection:this.model.get("media")})),this.$(".media-list-container").html(this.list.render().el)}},onSearchKeyDown:function(e){var t=this.model.get("media");this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(_.bind(function(){var n=this.$(e.target).val();t.search!==n&&(n===""?this.onRemoveFilter({key:"title",value:t.search}):(this.onAddFilter({key:"title",value:n},!0),t.search=n))},this),500)},onRefreshClick:function(e){e.preventDefault();var n={},r=$(e.target).data("refreshType");r&&(n[r]=!0),this.$(".refresh-dropdown").addClass("hide"),this.$(".stop-refresh").removeClass("hide"),$(".tooltip").remove(),t.trigger("command:StartLibraryScan",this.model.server,this.model,n)},onStopRefreshClick:function(e){e.preventDefault(),this.$(".refresh-dropdown").removeClass("hide"),this.$(".stop-refresh").addClass("hide"),$(".tooltip").remove(),t.trigger("command:StopLibraryScan",this.model.server,this.model)},onEditClick:function(e){e.preventDefault(),r.set("modal",new h({server:this.model.server,section:this.model}))},onAddFilter:function(e,t){var n=this.model.get("media"),r=n.filters;n.page=0;var i=_.find(r,function(t){return t.key===e.key});i?(t&&(i.titles.length=0,i.values.length=0),i.titles.push(e.title),i.values.push(e.value)):r.push({key:e.key,titles:[e.title],values:[e.value]}),this.propagateFilters(r),n.fetch()},onRemoveFilter:function(e){var t=this.model.get("media"),n=t.filters;t.page=0;var r=_.find(n,function(t){return t.key===e.key});r&&(r.titles=_.reject(r.titles,function(t){return t===e.title}),r.values=_.reject(r.values,function(t){return t===e.value})),this.propagateFilters(n),t.fetch()},onRemoveAllFilters:function(e){var t=this.model.get("media"),n=t.filters;t.page=0;var r=_.find(n,function(t){return t.key===e.key});r&&(r.titles.length=0,r.values.length=0),this.propagateFilters(n),t.fetch()},onSortChange:function(e){var t=this.model.get("media");t.sort=e,t.page=0,t.fetch()},onMediaTypeChange:function(e){var t=this.model.get("media"),n=this.model.get("filters");t.mediaType=e,n.mediaType=e,t.page=0,t.filters=[],this.propagateFilters(t.filters),this.propagateMediaType(e),t.fetch(),n.fetch()}});return p}),define("hb!templates/details/DetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<div class="fanart"></div>\n<div class="fanart-overlay"></div>\n'})}),define("hb!templates/details/MovieDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i;return r+='\n			<a class="btn btn-inverse" href="#!/servers/',a=n.serverID,i=a||e.serverID,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"serverID",{hash:{}})),r+=d(i)+"/sections/",a=n.sectionID,i=a||e.sectionID,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"sectionID",{hash:{}})),r+=d(i)+"/edit/",a=n.movie,i=a||e.movie,i=i===null||i===undefined||i===!1?i:i.ratingKey,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"movie.ratingKey",{hash:{}})),r+=d(i)+'">\n				<i class="icon-pencil"></i> Edit\n			</a>\n		',r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<div class="details-row row-fluid">\n	<div class="details-controls">\n		<div class="poster-container">\n			<img class="movie-poster poster large-poster">\n\n			<span class="media-count"></span>\n		</div>\n\n		<a class="btn btn-primary" href="#!/servers/',a=n.serverID,o=a||t.serverID,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"serverID",{hash:{}})),s+=d(o)+"/sections/",a=n.sectionID,o=a||t.sectionID,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"sectionID",{hash:{}})),s+=d(o)+"/player/",a=n.movie,o=a||t.movie,o=o===null||o===undefined||o===!1?o:o.ratingKey,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"movie.ratingKey",{hash:{}})),s+=d(o)+'">\n			<i class="icon-play"></i> Play\n		</a>\n\n		',a=n.shared,o=a||t.shared,u=n.unless,f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+='\n\n		<div class="media-flags">\n			<img class="movie-video-resolution media-flag">\n			<img class="movie-audio-codec media-flag">\n			<img class="movie-audio-channels media-flag">\n		</div>\n	</div>\n\n	<div class="details-metadata">\n		<div class="metadata-right">\n			<h1 class="movie-year"></h1>\n\n			<div class="movie-content-rating metadata"><img class="media-flag"></div>\n\n			<div class="movie-rating metadata"></div>\n		</div>\n\n		<h1 class="movie-title"></h1>\n\n		<div class="movie-genre metadata"></div>\n\n		<div class="metadata metadata-duration">\n			<span class="movie-duration"></span>\n\n			<div class="unwatched-icon unwatched-partial-icon"></div>\n			<div class="unwatched-icon unwatched-full-icon"></div>\n		</div>\n\n		<h2 class="movie-tagline tagline"></h2>\n\n		<div class="movie-director metadata metadata-top"></div>\n		<div class="movie-writer metadata"></div>\n		<div class="movie-cast metadata"></div>\n\n		<div class="movie-summary summary"></div>\n\n		<div class="media-flags">\n			<img class="movie-studio studio">\n		</div>\n	</div>\n</div>\n',s})}),define("hb!templates/details/ActionBarView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i,s;r+="\n			",a=n.showRefresh,i=a||e.showRefresh,s=n["if"],f=l.program(2,m,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+="\n			",a=n.showFavorite,i=a||e.showFavorite,s=n["if"],f=l.program(4,g,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+="\n			",a=n.showDownload,i=a||e.showDownload,s=n["if"],f=l.program(6,y,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+="\n			",a=n.showWatch,i=a||e.showWatch,s=n["if"],f=l.program(9,w,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+="\n			",a=n.showUnwatch,i=a||e.showUnwatch,s=n["if"],f=l.program(11,E,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+="\n			",a=n.showFixMatch,i=a||e.showFixMatch,s=n["if"],f=l.program(13,S,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+="\n			",a=n.showUnmatch,i=a||e.showUnmatch,s=n["if"],f=l.program(15,x,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+="\n			",a=n.showSplitApart,i=a||e.showSplitApart,s=n["if"],f=l.program(17,T,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+="\n			",a=n.showEdit,i=a||e.showEdit,s=n["if"],f=l.program(19,N,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+="\n			",a=n.showInfo,i=a||e.showInfo,s=n["if"],f=l.program(21,C,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+="\n			",a=n.showPlaylistDelete,i=a||e.showPlaylistDelete,s=n["if"],f=l.program(23,k,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n		",r}function m(e,t){return'<li><a class="actionbar-icon-btn refresh-icon-btn" href="#" rel="tooltip" data-tooltip-position="fixed" title="Refresh">Refresh</a></li>'}function g(e,t){return'<li><a class="actionbar-icon-btn favorite-icon-btn" href="#" rel="tooltip" data-tooltip-position="fixed" title="Favorite">Favorite</a></li>'}function y(e,t){var r,i;return a=n.downloadUrl,r=a||e.downloadUrl,i=n["if"],f=l.program(7,b,t),f.hash={},f.fn=f,f.inverse=l.noop,r=i.call(e,r,f),r||r===0?r:""}function b(e,t){var r="",i;return r+='<li><a class="actionbar-icon-btn download-icon-btn" href="',a=n.downloadUrl,i=a||e.downloadUrl,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"downloadUrl",{hash:{}})),r+=d(i)+'" rel="tooltip" data-tooltip-position="fixed" title="Download" download="',a=n.downloadName,i=a||e.downloadName,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"downloadName",{hash:{}})),r+=d(i)+'">Download</a></li>',r}function w(e,t){return'<li><a class="actionbar-icon-btn watch-icon-btn" href="#" rel="tooltip" data-tooltip-position="fixed" title="Mark as Watched">Mark as Watched</a></li>'}function E(e,t){return'<li><a class="actionbar-icon-btn unwatch-icon-btn" href="#" rel="tooltip" data-tooltip-position="fixed" title="Mark as Unwatched">Mark as Unwatched</a></li>'}function S(e,t){return'<li><a class="actionbar-icon-btn fix-match-icon-btn" href="#" rel="tooltip" data-tooltip-position="fixed" title="Fix Incorrect Match">Fix Incorrect Match</a></li>'}function x(e,t){return'<li><a class="actionbar-icon-btn unmatch-icon-btn" href="#" rel="tooltip" data-tooltip-position="fixed" title="Unmatch">Unmatch</a></li>'}function T(e,t){return'<li><a class="actionbar-icon-btn split-apart-icon-btn" href="#" rel="tooltip" data-tooltip-position="fixed" title="Split Apart">Split Apart</a></li>'}function N(e,t){return'<li><a class="actionbar-icon-btn edit-icon-btn" href="#" rel="tooltip" data-tooltip-position="fixed" title="Edit">Edit</a></li>'}function C(e,t){return'<li><a class="actionbar-icon-btn info-icon-btn" href="#" rel="tooltip" data-tooltip-position="fixed" title="Info">Info</a></li>'}function k(e,t){return'<li><a class="actionbar-icon-btn delete-playlist-icon-btn" href="#" rel="tooltip" data-tooltip-position="fixed" title="Delete from Playlist">Delete from Playlist</a></li>'}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<div class="actionbar">\n	<ul class="iconbar">\n		',a=n.shared,o=a||t.shared,u=n.unless,f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n	</ul>\n</div>\n",s})}),define("hb!templates/modals/FixMatchModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return'\n				<h4>This media is currently unmatched.</h4>\n\n				<div class="find-match">\n					<a class="match-btn btn btn-primary btn-medium" href="#">Match</a>\n				</div>\n			'}function m(e,t){var r="",i,s;r+="\n				<h4>Select the correct ",a=n.type,i=a||e.type,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"type",{hash:{}})),r+=d(i)+' from the list below</h4>\n\n				<h4 class="match-results-loading',a=n.loading,i=a||e.loading,s=n.unless,f=l.program(4,g,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+='">\n					Searching for possible matches...\n				</h4>\n				<div class="match-results',a=n.loading,i=a||e.loading,s=n["if"],f=l.program(6,y,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+='">\n					',a=n.results,i=a||e.results,s=n.each,f=l.program(8,b,t),f.hash={},f.fn=f,f.inverse=l.program(11,E,t),i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n				</div>\n			",r}function g(e,t){return" hide"}function y(e,t){return" hide"}function b(e,t){var r="",i,s;r+='\n						<div class="row-fluid">\n							<div class="span10">\n								<a class="match-result" data-guid="',a=n.guid,i=a||e.guid,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"guid",{hash:{}})),r+=d(i)+'" data-name="',a=n.name,i=a||e.name,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"name",{hash:{}})),r+=d(i)+'" href="#">\n									',a=n.name,i=a||e.name,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"name",{hash:{}})),r+=d(i),a=n.year,i=a||e.year,s=n["if"],f=l.program(9,w,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+='\n								</a>\n							</div>\n							<div class="span2">\n								<div class="match-score">\n									<div class="bar" style="width: ',a=n.score,i=a||e.score,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"score",{hash:{}})),r+=d(i)+'%"></div>\n								</div>\n							</div>\n						</div>\n					',r}function w(e,t){var r="",i;return r+=" (",a=n.year,i=a||e.year,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"year",{hash:{}})),r+=d(i)+")",r}function E(e,t){return'\n						<h4 class="no-matches">No matches found</h4>\n					'}function S(e,t){var r="",i,s;r+='\n						<option value="',a=n.identifier,i=a||e.identifier,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"identifier",{hash:{}})),r+=d(i)+'"',a=n.selected,i=a||e.selected,s=n["if"],f=l.program(14,x,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+=">",a=n.name,i=a||e.name,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"name",{hash:{}})),r+=d(i)+"</option>\n						",r}function x(e,t){return" selected"}function T(e,t){return'\n						<option value="">Loading...</option>\n						'}function N(e,t){var r="",i;return r+='\n						<option value="',a=n.value,i=a||e.value,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"value",{hash:{}})),r+=d(i)+'">',a=n.label,i=a||e.label,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"label",{hash:{}})),r+=d(i)+"</option>\n						",r}function C(e,t){var r="",i,s,o,u;return r+='\n	<div class="media-location">\n		File: ',i=12,s=60,a=n.path,o=a||e.path,a=n.truncateMiddle,u=a||e.truncateMiddle,typeof u===c?i=u.call(e,o,s,i,{hash:{}}):u===p?i=h.call(e,"truncateMiddle",o,s,i,{hash:{}}):i=u,r+=d(i)+"\n	</div>\n	",r}function k(e,t){return'\n			<a class="pull-left toggle-custom" href="#">Custom Search</a>\n			<a class="pull-left toggle-default hide" href="#">Default Search</a>\n		'}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal">Ã</button>\n	<h3>Fix Incorrect Match</h3>\n</div>\n\n<form class="modal-form fix-match-form">\n	<div class="modal-body">\n\n		<div class="fix-match-results">\n			',a=n.unmatched,o=a||t.unmatched,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.program(3,m,i),o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n		</div>\n\n		<div class="fix-match-search row-fluid hide">\n			<div class="span6">\n				<div class="control-group">\n					<label>Name</label>\n					<input type="text" name="name" value="',a=n.media,o=a||t.media,o=o===null||o===undefined||o===!1?o:o.title,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"media.title",{hash:{}})),s+=d(o)+'">\n				</div>\n\n				<div class="control-group">\n					<label>Year</label>\n					<input type="text" name="year" value="',a=n.media,o=a||t.media,o=o===null||o===undefined||o===!1?o:o.year,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"media.year",{hash:{}})),s+=d(o)+'">\n				</div>\n			</div>\n\n			<div class="span6">\n				<div class="control-group">\n					<label>Search using</label>\n					<select name="agent">\n						',a=n.agents,o=a||t.agents,u=n.each,f=l.program(13,S,i),f.hash={},f.fn=f,f.inverse=l.program(16,T,i),o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n					</select>\n				</div>\n\n				<div class="control-group">\n					<label>Language</label>\n					<select name="language">\n						',a=n.languages,o=a||t.languages,u=n.each,f=l.program(18,N,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+="\n					</select>\n				</div>\n			</div>\n		</div>\n\n	</div>\n\n	",a=n.path,o=a||t.path,u=n["if"],f=l.program(20,C,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='\n\n	<div class="modal-footer">\n		',a=n.unmatched,o=a||t.unmatched,u=n.unless,f=l.program(22,k,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+='\n\n		<button class="cancel-btn btn btn-inverse">Cancel</button>\n		<button type="submit" class="search-btn btn btn-primary hide"><i class="icon-search"></i> Search</button>\n	</div>\n</form>\n\n',s})}),define("plex/model/MatchResultModel",["plex/model/BaseModel"],function(e){var t=e.extend({idAttribute:"guid",whitelistedAttrs:["guid","name","lang","score","year"],parse:function(e){var t=$.xml2json(e)||e;return t=_.pick(t,this.whitelistedAttrs),t._cacheKey=null,t}});return t}),define("plex/model/collections/MatchResultCollection",["plex/model/collections/BaseCollection","plex/model/MatchResultModel"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.media=t.media,this.server=t.server},url:function(){return"/library/metadata/"+this.media.id+"/matches"},parse:function(e){return $.xml2json(e).SearchResult}});return n}),define("hb!templates/lists/MatchUsingDropdownList.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<a class="match-using dropdown-toggle" href="#match-using-dropdown-list" data-toggle="dropdown">Match Using <i class="icon-caret-down"></i></a>\n\n<ul class="dropdown-menu dropdown-menu-large"></ul>\n'})}),define("hb!templates/lists/items/MatchUsingDropdownListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<a href="#">',u=n.name,o=u||t.name,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"name",{hash:{}})),s+=h(o)+"</a>\n",s})}),define("plex/view/lists/items/MatchUsingDropdownListItem",["hb!templates/lists/items/MatchUsingDropdownListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({tagName:"li",media:null,events:{"click a":"onClick"},initialize:function(e){this.media=e.list.model,this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e(this.model.toJSON())),this},onClick:function(e){e.preventDefault(),t.trigger("command:MatchUsing",this.media,this.model)}});return r}),define("plex/view/lists/MatchUsingDropdownList",["hb!templates/lists/MatchUsingDropdownList.tpl","plex/view/lists/BaseList","plex/view/lists/items/MatchUsingDropdownListItem"],function(e,t,n){var r=t.extend({id:"match-using-dropdown-list",tagName:"span",className:"dropdown pull-left",initialize:function(){this.setup(n,".dropdown-menu")},render:function(){return this.$el.html(e()),this.populate(this.collection),this},addItem:function(e){if(e.id!=="com.plexapp.agents.none")return t.prototype.addItem.call(this,e)}});return r}),define("plex/view/modals/FixMatchModal",["hb!templates/modals/FixMatchModal.tpl","plex/control/Dispatcher","plex/control/utils/LanguageUtil","plex/control/utils/SectionTypes","plex/model/collections/AgentCollection","plex/model/collections/MatchResultCollection","plex/view/BaseView","plex/view/lists/MatchUsingDropdownList"],function(e,t,n,r,i,s,o,u){var a=function(e){return _.map(e,function(e){return'<option value="'+e.value+'"'+(e.selected?" selected":"")+">"+e.label+"</option>"}).join("\n")},f=function(e,t){for(var n=0;n<e.options.length;n++)if(t==e.options[n].value){e.selectedIndex=n;return}},l=function(e){return e?_.map(e.get("language"),function(e){return{label:n.getLanguageName(e),value:e}}):[]},c=o.extend({name:"fixMatchModal",className:"fix-match-modal modal fade",matchUsingList:null,events:{hidden:"onClose","click .match-btn":"onMatchClick","click .match-result":"onMatchResultClick",'change select[name="agent"]':"onAgentChange","submit form":"onSubmitSearch","click .toggle-custom":"onToggleCustomClick","click .toggle-default":"onToggleDefaultClick","click .cancel-btn":"onCancel"},initialize:function(e){var n=r.getSectionTypeByString(this.model.section.get("type"));this.results=new s([],{server:this.model.server,media:this.model}),this.agents=new i([],{server:this.model.server,sectionType:n.typeID}),this.loading=!0,this.addBinding(t,"hide:fixMatchModal",this.onCancel),this.addBinding(this.results,"reset",function(e){this.loading=!1,this.render()}),this.results.populate({hideLoadingAlert:!0}),this.agents.populate({hideLoadingAlert:!0}).done(_.bind(function(e){var t=this.$("select[name=agent]");if(t){var n=this.model.section.get("agent");t.empty().append(a(e.map(function(e){return{label:e.get("name"),value:e.get("identifier"),selected:n==e.get("identifier")}}))),this.setLanguages(e.get(n))}},this)),this.matchUsingList=this.registerView(new u({model:this.model,collection:this.agents}))},render:function(){var t=this.model.section.get("agent"),n=this.agents.get(t),r=this.model.get("guid"),i={media:this.model.toJSON(),results:this.results.toJSON(),agents:this.agents.toJSON(),languages:l(n),loading:this.loading,type:this.model.get("type")||"item",path:this.model.getMediaLocation(),unmatched:!r||/none\:\/\//.test(r)};return _.each(i.agents,function(e){e.identifier===t&&(e.selected=!0)}),this.$el.html(e(i)).modal(),this.$(".modal-footer").prepend(this.matchUsingList.render().el),this},setLanguages:function(e){var t=this.$('select[name="language"]');t.empty(),e&&t.append(a(l(e)))},onClose:function(e){t.trigger("destroy:modal",this)},onMatchClick:function(e){e.preventDefault();var n=this.model.section.get("agent"),r=this.agents.get(n);t.trigger("command:MatchUsing",this.model,r)},onMatchResultClick:function(e){e.preventDefault();var t=$(e.target),n={guid:t.data("guid"),name:t.data("name")};$.ajax({type:"PUT",url:this.model.server.resolveUrl("/library/metadata/"+this.model.id+"/match?"+$.param(n)),headers:this.model.server.getHeaders()}),this.$el.modal("hide")},onAgentChange:function(e){var t=this.agents.get(e.target.value);this.setLanguages(t)},onSubmitSearch:function(e){e.preventDefault();var t=e.target,n={title:t.name.value,year:t.year.value,agent:t.agent.value,language:t.language.value,manual:1};this.$(".match-results").addClass("hide"),this.$(".match-results-loading").removeClass("hide"),this.$(".fix-match-search").addClass("hide"),this.$(".fix-match-results").removeClass("hide"),this.$(".toggle-custom").toggleClass("hide"),this.$(".toggle-default").toggleClass("hide"),this.$(".search-btn").toggleClass("hide"),this.loading=!0,this.results.fetch({data:n,processData:!0,hideLoadingAlert:!0})},onToggleCustomClick:function(e){e.preventDefault(),this.$(".fix-match-results").addClass("hide"),this.$(".fix-match-search").removeClass("hide"),this.$(".toggle-custom").toggleClass("hide"),this.$(".toggle-default").toggleClass("hide"),this.$(".search-btn").toggleClass("hide")},onToggleDefaultClick:function(e){e.preventDefault(),this.$(".fix-match-search").addClass("hide"),this.$(".fix-match-results").removeClass("hide"),this.$(".toggle-custom").toggleClass("hide"),this.$(".toggle-default").toggleClass("hide"),this.$(".search-btn").toggleClass("hide")},onCancel:function(e){e&&e.preventDefault(),this.$el.modal("hide")}});return c}),define("plex/view/details/ActionBarView",["hb!templates/details/ActionBarView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","plex/view/modals/FixMatchModal"],function(e,t,n,r,i){var s={movie:{showRefresh:!0,showShare:!0,showDownload:!0,showWatch:!0,showFixMatch:!0,showUnmatch:!0,showSplitApart:!0},show:{showRefresh:!0,showShare:!0,showFixMatch:!0,showUnmatch:!0},season:{showShare:!0},episode:{showRefresh:!0,showShare:!0,showDownload:!0,showWatch:!0},artist:{showRefresh:!0,showShare:!0,showFixMatch:!0,showUnmatch:!0},album:{showRefresh:!0,showShare:!0,showFixMatch:!0,showUnmatch:!0},track:{showShare:!0,showDownload:!0},photo:{showEdit:!0},playlistItem:{showPlaylistDelete:!0}},o=r.extend({events:{"click .refresh-icon-btn":"onRefreshClick","click .favorite-icon-btn":"onFavoriteClick","click .share-icon-btn":"onShareClick","click .watch-icon-btn":"onWatchClick","click .unwatch-icon-btn":"onUnwatchClick","click .fix-match-icon-btn":"onFixMatchClick","click .unmatch-icon-btn":"onUnmatchClick","click .split-apart-icon-btn":"onSplitApartClick","click .edit-icon-btn":"onEditClick","click .delete-playlist-icon-btn":"onDeletePlaylistClick"},initialize:function(e){var t=_.clone(s[this.model.get("type")]);this.visibilityOptions=_.extend(t,_.pick(e,"showFavorite","showShare","showDownload","showWatch","showUnwatch","showFixMatch","showEdit","showInfo"));if(this.visibilityOptions.showWatch||this.visibilityOptions.showUnwatch)this.addBinding(this.model,"change:viewCount",this.render),this.addBinding(this.model,"change:viewOffset",this.render);this.visibilityOptions.showUnmatch&&this.addBinding(this.model,"change:guid",this.render),this.visibilityOptions.showSplitApart&&this.addBinding(this.model,"change:Media",this.render)},render:function(){var t=_.extend({},this.visibilityOptions);t.shared=this.model.server.get("shared"),t.downloadUrl=this.model.getDownloadUrl();var n=this.model.getMediaLocation();if(n){var r=/[^\/\\]+$/;t.downloadName=_.first(r.exec(n))}var i=!!this.model.get("viewCount"),s=!!this.model.get("viewOffset");if(t.showWatch||t.showUnwatch)t.showWatch=!i||s,t.showUnwatch=i||s;if(t.showSplitApart){var o=this.model.get("Media");t.showSplitApart=_.isArray(o)&&o.length}if(t.showUnmatch){var u=this.model.get("guid");if(!u||/(local|none)\:\/\//.test(u))t.showUnmatch=!1}return this.$el.html(e(t)),$(".tooltip").remove(),this.$el.tooltip({selector:".actionbar-icon-btn",placement:"right"}),this},onRefreshClick:function(e){e.preventDefault(),t.trigger("command:RefreshMetadata",this.model)},onFavoriteClick:function(e){e.preventDefault()},onShareClick:function(e){e.preventDefault()},onWatchClick:function(e){e.preventDefault(),t.trigger("command:MarkWatched",this.model)},onUnwatchClick:function(e){e.preventDefault(),t.trigger("command:MarkUnwatched",this.model)},onFixMatchClick:function(e){e.preventDefault();var t=new i({model:this.model});n.set("modal",t)},onUnmatchClick:function(e){e.preventDefault(),t.trigger("command:Unmatch",this.model)},onSplitApartClick:function(e){e.preventDefault(),t.trigger("command:SplitApart",this.model)},onEditClick:function(e){e.preventDefault(),t.trigger("navigate:edit",this.model.server.id,this.model.section.id,this.model.id)},onDeletePlaylistClick:function(e){e.preventDefault(),this.model.destroy()}});return o}),define("plex/view/details/MovieDetailsView",["hb!templates/details/MovieDetailsView.tpl","plex/view/BaseView","plex/view/details/ActionBarView"],function(e,t,n){var r=t.extend({className:"details movie-details",initialize:function(){this.actionBar=this.registerView(new n({model:this.model}))},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),shared:this.model.server.get("shared"),sectionID:this.model.section.id,movie:this.model.toJSON()})),this.$el.prepend(this.actionBar.render().el),this.bindView(),this},bindings:{".movie-title":{modelAttr:"title"},".movie-poster":{modelAttr:"thumb",format:function(e,t){e.prop("src","img/posters/poster_large.png");if(!t)return;var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,280,420);e.data("original",n),this.trigger("change:poster")}},".media-count":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){var n=0,r=this.model.get("Media");return _.isArray(r)&&(n=r.length),n}},".movie-year":{modelAttr:"year",hideEmpty:!0},".movie-content-rating":{modelAttr:"contentRating",hideEmpty:!0,format:function(e,t){if(!t){e.addClass("hide");return}var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"contentRating",flag:t,width:24,height:60};e.removeClass("hide"),e.find("img").prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".movie-rating":{modelAttr:"rating",hideEmpty:!0,format:function(e,t){return t?'<span class="rating">'+Handlebars.helpers.starRating.call(this,t)+"</span>":""}},".movie-genre":{modelAttr:"Genre",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";var n=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:100,maxTags:2}});return'<span class="metadata-label">'+n+"</span>"}},".movie-duration":{modelAttr:"duration",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.formatMinutes.call(this,t)}},".unwatched-icon":{modelAttr:"viewCount",format:function(e,t){var n=this.model.get("viewOffset");t||n?e.addClass("hide"):(e.removeClass("hide"),this.$(".unwatched-partial-icon").addClass("hide"))}},".unwatched-partial-icon":{modelAttr:"viewOffset",format:function(e,t){t?(e.removeClass("hide"),this.$(".unwatched-full-icon").addClass("hide")):e.addClass("hide")}},".movie-tagline":{modelAttr:"tagline",hideEmpty:!0},".movie-director":{modelAttr:"Director",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";var n=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">Director</span>'+n}},".movie-writer":{modelAttr:"Writer",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";var n=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">Writer</span>'+n}},".movie-cast":{modelAttr:"Role",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";var n=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">Cast</span>'+n}},".movie-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,700)}},".movie-video-resolution":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){if(!t||!t.videoResolution){e.addClass("hide");return}var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"videoResolution",flag:t.videoResolution,width:100,height:20};e.removeClass("hide"),e.prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".movie-audio-codec":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){if(!t||!t.audioCodec){e.addClass("hide");return}var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"audioCodec",flag:t.audioCodec,width:100,height:20};e.removeClass("hide"),e.prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".movie-audio-channels":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){if(!t||!t.audioChannels){e.addClass("hide");return}var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"audioChannels",flag:t.audioChannels,width:100,height:20};e.removeClass("hide"),e.prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".movie-studio":{modelAttr:"studio",hideEmpty:!0,format:function(e,t){if(!t){e.addClass("hide");return}var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"studio",flag:t,width:200,height:40};e.removeClass("hide"),e.prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}}}});return r}),define("hb!templates/details/ShowDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i;return r+='\n			<a class="btn btn-inverse" href="#!/servers/',a=n.serverID,i=a||e.serverID,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"serverID",{hash:{}})),r+=d(i)+"/sections/",a=n.sectionID,i=a||e.sectionID,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"sectionID",{hash:{}})),r+=d(i)+"/edit/",a=n.show,i=a||e.show,i=i===null||i===undefined||i===!1?i:i.ratingKey,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"show.ratingKey",{hash:{}})),r+=d(i)+'">\n				<i class="icon-pencil"></i> Edit\n			</a>\n		',r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<div class="details-row row-fluid">\n	<div class="details-controls">\n		<div class="poster-container">\n			<img class="show-poster poster large-poster">\n\n			<span class="show-unwatched-count unwatched-count"></span>\n		</div>\n\n		',a=n.shared,o=a||t.shared,u=n.unless,f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+='\n	</div>\n\n	<div class="details-metadata">\n		<div class="metadata-right">\n			<h1 class="show-year"></h1>\n\n			<div class="show-content-rating metadata"><img class="media-flag"></div>\n\n			<div class="show-rating metadata"></div>\n		</div>\n\n		<h1 class="show-title"></h1>\n\n		<div class="show-genre metadata metadata-top"></div>\n\n		<div class="show-duration metadata"></div>\n\n		<div class="show-summary summary"></div>\n\n		<div class="media-flags">\n			<img class="show-studio studio">\n		</div>\n	</div>\n</div>\n\n<div id="seasons-banner" class="banner">\n	<span class="banner-title">Seasons</span> <span class="banner-count"></span>\n</div>\n',s})}),define("hb!templates/lists/media/items/SeasonTileListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function y(e,t){var r="",i;return r+='\n		<span class="unwatched-count">',c=n.season,i=c||e.season,i=i===null||i===undefined||i===!1?i:i.unviewedLeafCount,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"season.unviewedLeafCount",{hash:{}})),r+=g(i)+"</span>\n	",r}n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;s+='<a href="#!/servers/',c=n.serverID,o=c||t.serverID,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"serverID",{hash:{}})),s+=g(o)+"/sections/",c=n.sectionID,o=c||t.sectionID,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"sectionID",{hash:{}})),s+=g(o)+"/details/",c=n.season,o=c||t.season,o=o===null||o===undefined||o===!1?o:o.ratingKey,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"season.ratingKey",{hash:{}})),s+=g(o)+'">\n	<img class="poster" data-original="',o=200,u=150,c=n.season,a=c||t.season,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" src="img/posters/poster_small.png" alt="',c=n.season,o=c||t.season,o=o===null||o===undefined||o===!1?o:o.title,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"season.title",{hash:{}})),s+=g(o)+'">\n\n	',c=n.season,o=c||t.season,o=o===null||o===undefined||o===!1?o:o.unviewedLeafCount,u=n["if"],h=p.program(1,y,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;return s+='\n</a>\n\n<div class="poster-title">',c=n.season,o=c||t.season,o=o===null||o===undefined||o===!1?o:o.title,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"season.title",{hash:{}})),s+=g(o)+"</div>\n",s})}),define("plex/view/lists/media/items/SeasonTileListItem",["hb!templates/lists/media/items/SeasonTileListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,sectionID:this.model.section.id,season:this.model.toJSON()})),this}});return n}),define("plex/view/lists/media/SeasonTileList",["plex/view/lists/BaseList","plex/view/lists/media/items/SeasonTileListItem","lazyload"],function(e,t){var n=e.extend({tagName:"ul",className:"tile-list poster-tile-list season-tile-list",loadPosterThrottle:null,initialize:function(){this.setup(t),this.loadPosterThrottle=_.throttle(_.debounce(this.loadPoster,500),100),this.collection.fetch()},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(t){typeof t.get("index")!="undefined"&&(e.prototype.addItem.call(this,t),this.loadPosterThrottle())},loadPoster:function(){this.$(".poster").lazyload({threshold:100})}});return n}),define("plex/view/details/ShowDetailsView",["hb!templates/details/ShowDetailsView.tpl","plex/view/BaseView","plex/view/details/ActionBarView","plex/view/lists/media/SeasonTileList"],function(e,t,n,r){var i=t.extend({className:"details",seasonList:null,initialize:function(){var e=this.model.get("seasons");this.addBinding(e,"reset",this.onSeasonsReset),this.seasonList=this.registerView(new r({collection:e})),this.actionBar=this.registerView(new n({model:this.model}))},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),shared:this.model.server.get("shared"),sectionID:this.model.section.id,show:this.model.toJSON()})),this.$el.prepend(this.actionBar.render().el),this.$("#seasons-banner").after(this.seasonList.render().el),this.bindView(),this},bindings:{".show-title":{modelAttr:"title"},".show-poster":{modelAttr:"thumb",format:function(e,t){e.prop("src","img/posters/poster_medium.png");if(!t)return;var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,200,300);e.data("original",n),this.trigger("change:poster")}},".show-unwatched-count":{modelAttr:"unviewedLeafCount",hideEmpty:!0},".show-year":{modelAttr:"year",hideEmpty:!0},".show-content-rating":{modelAttr:"contentRating",hideEmpty:!0,format:function(e,t){if(!t){e.addClass("hide");return}var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"contentRating",flag:t,width:24,height:60};e.removeClass("hide"),e.find("img").prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".show-rating":{modelAttr:"rating",hideEmpty:!0,format:function(e,t){return t?'<span class="rating">'+Handlebars.helpers.starRating.call(this,t)+"</span>":""}},".show-genre":{modelAttr:"Genre",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";var n=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">Genre</span>'+n}},".show-duration":{modelAttr:"duration",hideEmpty:!0,format:function(e,t){return'<span class="metadata-label">Episode Duration</span>'+Handlebars.helpers.formatMinutes.call(this,t)}},".show-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,700)}},".show-studio":{modelAttr:"studio",hideEmpty:!0,format:function(e,t){if(!t){e.addClass("hide");return}var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"studio",flag:t,width:200,height:40};e.removeClass("hide"),e.prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}}},onSeasonsReset:function(){var e=this.model.get("seasons").length;e=e===1?1:e-1,this.$("#seasons-banner .banner-count").html(e)}});return i}),define("hb!templates/details/SeasonDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<div class="details-row row-fluid">\n	<div class="details-controls">\n		<div class="poster-container">\n			<img class="season-poster poster large-poster">\n\n			<span class="season-unwatched-count unwatched-count"></span>\n		</div>\n\n	</div>\n\n	<div class="details-metadata">\n		<h1>\n			<a class="show-title" href="#!/servers/',u=n.serverID,o=u||t.serverID,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"serverID",{hash:{}})),s+=h(o)+"/sections/",u=n.sectionID,o=u||t.sectionID,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"sectionID",{hash:{}})),s+=h(o)+"/details/",u=n.season,o=u||t.season,o=o===null||o===undefined||o===!1?o:o.parentRatingKey,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"season.parentRatingKey",{hash:{}})),s+=h(o)+'"></a>\n		</h1>\n\n		<h2 class="season-title"></h2>\n\n		<div class="season-summary"></div>\n	</div>\n</div>\n\n<div id="episodes-banner" class="banner">\n	<span class="banner-title">Episodes</span> <span class="banner-count"></span>\n</div>\n',s})}),define("hb!templates/lists/media/items/EpisodeListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function y(e,t){var r="",i,s;r+='\n				<div class="metadata"><span class="rating">',c=n.episode,i=c||e.episode,i=i===null||i===undefined||i===!1?i:i.rating,c=n.starRating,s=c||e.starRating,typeof s===d?i=s.call(e,i,{hash:{}}):s===m?i=v.call(e,"starRating",i,{hash:{}}):i=s;if(i||i===0)r+=i;return r+="</span></div>\n			",r}function b(e,t){return'\n				<div class="unwatched-icon unwatched-partial-icon"></div>\n			'}function w(e,t){var r="",i,s;r+="\n				",c=n.episode,i=c||e.episode,i=i===null||i===undefined||i===!1?i:i.watched,s=n.unless,h=p.program(6,E,t),h.hash={},h.fn=h,h.inverse=p.noop,i=s.call(e,i,h);if(i||i===0)r+=i;return r+="\n			",r}function E(e,t){return'\n					<div class="unwatched-icon"></div>\n				'}function S(e,t){var r="",i,s;return r+='\n			<div class="metadata metadata-top">\n				<span class="metadata-label">Release Date</span>',c=n.episode,i=c||e.episode,i=i===null||i===undefined||i===!1?i:i.originallyAvailableAt,c=n.formatDate,s=c||e.formatDate,typeof s===d?i=s.call(e,i,{hash:{}}):s===m?i=v.call(e,"formatDate",i,{hash:{}}):i=s,r+=g(i)+"\n			</div>\n		",r}function x(e,t){var r="",i,s,o;return r+='\n			<div class="summary">',i=180,c=n.episode,s=c||e.episode,s=s===null||s===undefined||s===!1?s:s.summary,c=n.truncate,o=c||e.truncate,typeof o===d?i=o.call(e,s,i,{hash:{}}):o===m?i=v.call(e,"truncate",s,i,{hash:{}}):i=o,r+=g(i)+"</div>\n		",r}n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;s+='<a href="#!/servers/',c=n.serverID,o=c||t.serverID,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"serverID",{hash:{}})),s+=g(o)+"/sections/",c=n.sectionID,o=c||t.sectionID,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"sectionID",{hash:{}})),s+=g(o)+"/details/",c=n.episode,o=c||t.episode,o=o===null||o===undefined||o===!1?o:o.ratingKey,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"episode.ratingKey",{hash:{}})),s+=g(o)+'">\n	<img class="poster" data-original="',o=200,u=200,c=n.episode,a=c||t.episode,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" src="img/posters/poster_wide_medium.png">\n\n	<div class="poster-details">\n		<div class="metadata-right">\n			<div class="metadata metadata-headline">',c=n.episode,o=c||t.episode,o=o===null||o===undefined||o===!1?o:o.parentTitle,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"episode.parentTitle",{hash:{}})),s+=g(o)+" Episode ",c=n.episode,o=c||t.episode,o=o===null||o===undefined||o===!1?o:o.index,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"episode.index",{hash:{}})),s+=g(o)+"</div>\n\n			",c=n.episode,o=c||t.episode,o=o===null||o===undefined||o===!1?o:o.rating,u=n["if"],h=p.program(1,y,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;s+="\n		</div>\n\n		<h3>\n			",o=35,c=n.episode,u=c||t.episode,u=u===null||u===undefined||u===!1?u:u.title,c=n.truncate,a=c||t.truncate,typeof a===d?o=a.call(t,u,o,{hash:{}}):a===m?o=v.call(t,"truncate",u,o,{hash:{}}):o=a,s+=g(o)+"\n\n			",c=n.episode,o=c||t.episode,o=o===null||o===undefined||o===!1?o:o.viewOffset,u=n["if"],h=p.program(3,b,i),h.hash={},h.fn=h,h.inverse=p.program(5,w,i),o=u.call(t,o,h);if(o||o===0)s+=o;s+="\n		</h3>\n\n		",c=n.episode,o=c||t.episode,o=o===null||o===undefined||o===!1?o:o.originallyAvailableAt,u=n["if"],h=p.program(8,S,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;s+="\n\n		",c=n.episode,o=c||t.episode,o=o===null||o===undefined||o===!1?o:o.summary,u=n["if"],h=p.program(10,x,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;return s+="\n	</div>\n</a>\n",s})}),define("plex/view/lists/media/items/EpisodeListItem",["hb!templates/lists/media/items/EpisodeListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",className:"episode well",initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,sectionID:this.model.section.id,episode:this.model.toJSON()})),this}});return n}),define("plex/view/lists/media/EpisodeList",["plex/view/lists/BaseList","plex/view/lists/media/items/EpisodeListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"poster-list episode-list",initialize:function(){this.setup(t),this.loadPosterThrottle=_.throttle(_.debounce(this.loadPoster,500),100),this.collection.fetch()},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(t){e.prototype.addItem.call(this,t),this.loadPosterThrottle()},loadPoster:function(){this.$(".poster").lazyload({threshold:100})}});return n}),define("plex/view/details/SeasonDetailsView",["hb!templates/details/SeasonDetailsView.tpl","plex/view/BaseView","plex/view/details/ActionBarView","plex/view/lists/media/EpisodeList"],function(e,t,n,r){var i=t.extend({className:"details",episodeList:null,initialize:function(){var e=this.model.get("episodes");this.addBinding(e,"reset",this.onEpisodesReset),this.episodeList=this.registerView(new r({collection:e})),this.actionBar=this.registerView(new n({model:this.model}))},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),sectionID:this.model.section.id,season:this.model.toJSON()})),this.$el.prepend(this.actionBar.render().el),this.$el.append(this.episodeList.render().el),this.bindView(),this},bindings:{".show-title":{modelAttr:"parentTitle"},".season-title":{modelAttr:"title"},".season-poster":{modelAttr:"thumb",format:function(e,t){e.prop("src","img/posters/poster_small.png");if(!t)return;var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,150,200);e.data("original",n),this.trigger("change:poster")}},".season-unwatched-count":{modelAttr:"unviewedLeafCount",hideEmpty:!0},".season-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,700)}}},onEpisodesReset:function(){var e=this.model.get("episodes").length;this.$("#episodes-banner .banner-count").html(e)}});return i}),define("hb!templates/details/EpisodeDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i;return r+='\n			<a class="btn btn-inverse" href="#!/servers/',a=n.serverID,i=a||e.serverID,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"serverID",{hash:{}})),r+=d(i)+"/sections/",a=n.sectionID,i=a||e.sectionID,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"sectionID",{hash:{}})),r+=d(i)+"/edit/",a=n.episode,i=a||e.episode,i=i===null||i===undefined||i===!1?i:i.ratingKey,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"episode.ratingKey",{hash:{}})),r+=d(i)+'">\n				<i class="icon-pencil"></i> Edit\n			</a>\n		',r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<div class="details-row row-fluid episode">\n	<div class="details-controls">\n		<img class="episode-poster poster large-poster">\n\n		<a class="btn btn-primary" href="#!/servers/',a=n.serverID,o=a||t.serverID,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"serverID",{hash:{}})),s+=d(o)+"/sections/",a=n.sectionID,o=a||t.sectionID,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"sectionID",{hash:{}})),s+=d(o)+"/player/",a=n.episode,o=a||t.episode,o=o===null||o===undefined||o===!1?o:o.ratingKey,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"episode.ratingKey",{hash:{}})),s+=d(o)+'">\n			<i class="icon-play"></i> Play\n		</a>\n\n		',a=n.shared,o=a||t.shared,u=n.unless,f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+='\n\n		<div class="media-flags">\n			<img class="episode-studio studio">\n\n			<img class="episode-video-resolution media-flag">\n			<img class="episode-audio-codec media-flag">\n			<img class="episode-audio-channels media-flag">\n		</div>\n	</div>\n\n	<div class="details-metadata">\n		<div class="metadata-right">\n			<div class="episode-content-rating metadata"><img class="media-flag"></div>\n			<h2 class="episode-duration"></h2>\n			<div class="episode-available metadata"></div>\n			<div class="episode-rating metadata"></div>\n		</div>\n\n		<h1>\n			<a class="show-title" href="#!/servers/',a=n.serverID,o=a||t.serverID,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"serverID",{hash:{}})),s+=d(o)+"/sections/",a=n.sectionID,o=a||t.sectionID,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"sectionID",{hash:{}})),s+=d(o)+"/details/",a=n.episode,o=a||t.episode,o=o===null||o===undefined||o===!1?o:o.grandparentRatingKey,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"episode.grandparentRatingKey",{hash:{}})),s+=d(o)+'"></a>\n		</h1>\n\n		<h2>\n			<span class="episode-title"></span>\n\n			<div class="unwatched-icon unwatched-partial-icon"></div>\n			<div class="unwatched-icon unwatched-full-icon"></div>\n		</h2>\n\n		<div class="metadata">\n			<a class="season-title" href="#!/servers/',a=n.serverID,o=a||t.serverID,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"serverID",{hash:{}})),s+=d(o)+"/sections/",a=n.sectionID,o=a||t.sectionID,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"sectionID",{hash:{}})),s+=d(o)+"/details/",a=n.episode,o=a||t.episode,o=o===null||o===undefined||o===!1?o:o.parentRatingKey,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"episode.parentRatingKey",{hash:{}})),s+=d(o)+'"></a>\n		</div>\n\n		<div class="episode-director metadata metadata-top"></div>\n		<div class="episode-writer metadata"></div>\n		<div class="episode-cast metadata"></div>\n\n		<h2 class="episode-tagline tagline"></h2>\n\n		<div class="episode-summary summary"></div>\n\n	</div>\n</div>\n',s})}),define("plex/view/details/EpisodeDetailsView",["hb!templates/details/EpisodeDetailsView.tpl","plex/view/BaseView","plex/view/details/ActionBarView"],function(e,t,n){var r=t.extend({className:"details",initialize:function(){this.actionBar=this.registerView(new n({model:this.model}))},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),shared:this.model.server.get("shared"),sectionID:this.model.section.id,episode:this.model.toJSON()})),this.$el.prepend(this.actionBar.render().el),this.bindView(),this},bindings:{".show-title":{modelAttr:"grandparentTitle"},".season-title":{modelAttr:"parentIndex",format:function(e,t){return"Season "+t}},".episode-title":{modelAttr:"title"},".episode-poster":{modelAttr:"thumb",format:function(e,t){e.prop("src","img/posters/poster_wide_large.png");if(!t)return;var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,280,420);e.data("original",n),this.trigger("change:poster")}},".episode-content-rating":{modelAttr:"contentRating",hideEmpty:!0,format:function(e,t){if(!t){e.addClass("hide");return}var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"contentRating",flag:t,width:24,height:60};e.removeClass("hide"),e.find("img").prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".episode-available":{modelAttr:"originallyAvailableAt",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.formatDate.call(this,t)}},".episode-rating":{modelAttr:"rating",hideEmpty:!0,format:function(e,t){return t?'<span class="rating">'+Handlebars.helpers.starRating.call(this,t)+"</span>":""}},".episode-duration":{modelAttr:"duration",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.formatMinutes.call(this,t)}},".unwatched-icon":{modelAttr:"viewCount",format:function(e,t){var n=this.model.get("viewOffset");t||n?e.addClass("hide"):(e.removeClass("hide"),this.$(".unwatched-partial-icon").addClass("hide"))}},".unwatched-partial-icon":{modelAttr:"viewOffset",format:function(e,t){t?(e.removeClass("hide"),this.$(".unwatched-full-icon").addClass("hide")):e.addClass("hide")}},".episode-tagline":{modelAttr:"tagline",hideEmpty:!0},".episode-director":{modelAttr:"Director",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";var n=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">Director</span>'+n}},".episode-writer":{modelAttr:"Writer",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";var n=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">Writer</span>'+n}},".episode-cast":{modelAttr:"Role",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";var n=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">Cast</span>'+n}},".episode-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,700)}},".episode-video-resolution":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){if(!t||!t.videoResolution){e.addClass("hide");return}var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"videoResolution",flag:t.videoResolution,width:100,height:20};e.removeClass("hide"),e.prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".episode-audio-codec":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){if(!t||!t.audioCodec){e.addClass("hide");return}var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"audioCodec",flag:t.audioCodec,width:100,height:20};e.removeClass("hide"),e.prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".episode-audio-channels":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){if(!t||!t.audioChannels){e.addClass("hide");return}var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"audioChannels",flag:t.audioChannels,width:100,height:20};e.removeClass("hide"),e.prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".episode-studio":{modelAttr:"studio",hideEmpty:!0,format:function(e,t){if(!t){e.addClass("hide");return}var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"studio",flag:t,width:200,height:40};e.removeClass("hide"),e.prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}}}});return r}),define("hb!templates/details/ArtistDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i;return r+='\n			<a class="btn btn-inverse" href="#!/servers/',a=n.serverID,i=a||e.serverID,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"serverID",{hash:{}})),r+=d(i)+"/sections/",a=n.sectionID,i=a||e.sectionID,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"sectionID",{hash:{}})),r+=d(i)+"/edit/",a=n.artist,i=a||e.artist,i=i===null||i===undefined||i===!1?i:i.ratingKey,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"artist.ratingKey",{hash:{}})),r+=d(i)+'">\n				<i class="icon-pencil"></i> Edit\n			</a>\n		',r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<div class="details-row row-fluid">\n	<div class="details-controls">\n		<img class="artist-poster poster large-poster">\n\n		',a=n.shared,o=a||t.shared,u=n.unless,f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+='\n	</div>\n\n	<div class="details-metadata">\n		<h1 class="artist-title"></h1>\n\n		<div class="artist-genre metadata metadata-top"></div>\n\n		<div class="artist-summary summary"></div>\n	</div>\n</div>\n\n<div id="albums-banner" class="banner">\n	<span class="banner-title">Albums</span> <span class="banner-count"></span>\n</div>\n',s})}),define("hb!templates/lists/media/items/AlbumListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function y(e,t){var r="",i;return r+='\n		<div class="album-year">',c=n.album,i=c||e.album,i=i===null||i===undefined||i===!1?i:i.year,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"album.year",{hash:{}})),r+=g(i)+"</div>\n	",r}n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;s+='<div class="album-art">\n	<a class="album-link" href="#!/servers/',c=n.serverID,o=c||t.serverID,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"serverID",{hash:{}})),s+=g(o)+"/sections/",c=n.sectionID,o=c||t.sectionID,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"sectionID",{hash:{}})),s+=g(o)+"/details/",c=n.album,o=c||t.album,o=o===null||o===undefined||o===!1?o:o.ratingKey,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"album.ratingKey",{hash:{}})),s+=g(o)+'">\n		<img class="poster" data-original="',o=200,u=200,c=n.album,a=c||t.album,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" src="img/posters/poster_square_medium.png">\n	</a>\n\n	<div class="album-title">',c=n.album,o=c||t.album,o=o===null||o===undefined||o===!1?o:o.title,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"album.title",{hash:{}})),s+=g(o)+"</div>\n\n	",c=n.album,o=c||t.album,o=o===null||o===undefined||o===!1?o:o.year,u=n["if"],h=p.program(1,y,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;return s+="\n</div>\n",s})}),define("hb!templates/lists/media/items/TrackListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i,s;return r+='\n		<span class="track-duration">',a=n.duration,i=a||e.duration,a=n.formatDuration,s=a||e.formatDuration,typeof s===c?i=s.call(e,i,{hash:{}}):s===p?i=h.call(e,"formatDuration",i,{hash:{}}):i=s,r+=d(i)+"</span>\n	",r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<a href="#">\n	',a=n.duration,o=a||t.duration,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+='\n\n	<span class="track-number">',a=n.index,o=a||t.index,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"index",{hash:{}})),s+=d(o)+"</span>\n\n	",a=n.title,o=a||t.title,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"title",{hash:{}})),s+=d(o)+'\n\n	<i class="icon-pencil"></i>\n</a>\n',s})}),define("plex/view/lists/media/items/TrackListItem",["hb!templates/lists/media/items/TrackListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({tagName:"li",events:{click:"onClick"},initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e(this.model.toJSON())),this},onClick:function(e){e.preventDefault(),$(e.target).hasClass("icon-pencil")?t.trigger("navigate:edit",this.model.server.id,this.model.section.id,this.model.id):t.trigger("play:music",this.model.media,this.model)}});return r}),define("plex/view/lists/media/TrackList",["plex/view/lists/BaseList","plex/view/lists/media/items/TrackListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"compact-list track-list",initialize:function(){this.setup(t),this.collection.fetch()},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("plex/view/lists/media/items/AlbumListItem",["hb!templates/lists/media/items/AlbumListItem.tpl","plex/view/BaseView","plex/view/lists/media/TrackList"],function(e,t,n){var r=t.extend({tagName:"li",trackList:null,initialize:function(){this.trackList=this.registerView(new n({collection:this.model.get("tracks")})),this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,sectionID:this.model.section.id,album:this.model.toJSON()})),this.$el.append(this.trackList.render().el),this}});return r}),define("plex/view/lists/media/AlbumList",["plex/view/lists/BaseList","plex/view/lists/media/items/AlbumListItem","lazyload"],function(e,t){var n=e.extend({tagName:"ul",className:"album-list",loadPosterThrottle:null,initialize:function(){this.setup(t),this.loadPosterThrottle=_.throttle(_.debounce(this.loadPoster,500),100),this.collection.fetch()},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(t){typeof t.get("index")!="undefined"&&(e.prototype.addItem.call(this,t),this.loadPosterThrottle())},loadPoster:function(){this.$(".poster").lazyload({threshold:100})}});return n}),define("plex/view/details/ArtistDetailsView",["hb!templates/details/ArtistDetailsView.tpl","plex/view/BaseView","plex/view/details/ActionBarView","plex/view/lists/media/AlbumList"],function(e,t,n,r){var i=t.extend({className:"details",albumList:null,initialize:function(){var e=this.model.get("albums");this.addBinding(e,"reset",this.onAlbumsReset),this.albumList=this.registerView(new r({collection:e})),this.actionBar=this.registerView(new n({model:this.model}))},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),shared:this.model.server.get("shared"),sectionID:this.model.section.id,artist:this.model.toJSON()})),this.$el.prepend(this.actionBar.render().el),this.$("#albums-banner").after(this.albumList.render().el),this.bindView(),this},bindings:{".artist-title":{modelAttr:"title"},".artist-poster":{modelAttr:"thumb",format:function(e,t){e.prop("src","img/posters/poster_square_large.png");if(!t)return;var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,280,420);e.data("original",n),this.trigger("change:poster")}},".artist-genre":{modelAttr:"Genre",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";var n=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">Genre</span>'+n}},".artist-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,700)}}},onAlbumsReset:function(){var e=this.model.get("albums").length;e=e===1?1:e-1,this.$("#albums-banner .banner-count").html(e)}});return i}),define("hb!templates/details/AlbumDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i;return r+='\n			<a class="btn btn-inverse" href="#!/servers/',a=n.serverID,i=a||e.serverID,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"serverID",{hash:{}})),r+=d(i)+"/sections/",a=n.sectionID,i=a||e.sectionID,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"sectionID",{hash:{}})),r+=d(i)+"/edit/",a=n.album,i=a||e.album,i=i===null||i===undefined||i===!1?i:i.ratingKey,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"album.ratingKey",{hash:{}})),r+=d(i)+'">\n				<i class="icon-pencil"></i> Edit\n			</a>\n		',r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<div class="details-row row-fluid">\n	<div class="details-controls">\n		<img class="album-poster poster large-poster">\n\n		<a class="btn btn-primary play-btn" href="#">\n			<i class="icon-play"></i> Play\n		</a>\n\n		',a=n.shared,o=a||t.shared,u=n.unless,f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+='\n	</div>\n\n	<div class="details-metadata">\n		<h1>\n			<a class="artist-title" href="#!/servers/',a=n.serverID,o=a||t.serverID,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"serverID",{hash:{}})),s+=d(o)+"/sections/",a=n.sectionID,o=a||t.sectionID,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"sectionID",{hash:{}})),s+=d(o)+"/details/",a=n.album,o=a||t.album,o=o===null||o===undefined||o===!1?o:o.parentRatingKey,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"album.parentRatingKey",{hash:{}})),s+=d(o)+'"></a>\n		</h1>\n\n		<h2 class="album-title"></h2>\n\n		<div class="album-genre metadata metadata-top"></div>\n\n		<div class="album-summary summary"></div>\n	</div>\n</div>\n\n<div id="tracks-banner" class="banner">\n	<span class="banner-title">Tracks</span> <span class="banner-count"></span>\n</div>\n',s})}),define("plex/view/details/AlbumDetailsView",["hb!templates/details/AlbumDetailsView.tpl","plex/control/Dispatcher","plex/view/BaseView","plex/view/details/ActionBarView","plex/view/lists/media/TrackList"],function(e,t,n,r,i){var s=n.extend({className:"details",trackList:null,events:{"click .play-btn":"onPlayClick"},initialize:function(){var e=this.model.get("tracks");this.addBinding(e,"reset",this.onTracksReset),this.trackList=this.registerView(new i({collection:e})),this.actionBar=this.registerView(new r({model:this.model}))},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),shared:this.model.server.get("shared"),sectionID:this.model.section.id,album:this.model.toJSON()})),this.$el.prepend(this.actionBar.render().el),this.$("#tracks-banner").after(this.trackList.render().el),this.bindView(),this},bindings:{".artist-title":{modelAttr:"parentTitle"},".album-title":{modelAttr:"title"},".album-poster":{modelAttr:"thumb",format:function(e,t){e.prop("src","img/posters/poster_square_large.png");if(!t)return;var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,280,420);e.data("original",n),this.trigger("change:poster")}},".album-genre":{modelAttr:"Genre",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";var n=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">Genre</span>'+n}},".album-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,700)}}},onTracksReset:function(){var e=this.model.get("tracks").length;this.$("#tracks-banner .banner-count").html(e)},onPlayClick:function(e){e.preventDefault(),t.trigger("play:music",this.model,this.model.get("tracks").first())}});return s}),define("hb!templates/details/PhotoDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a,f,l,c,h=this,p="function",d=n.helperMissing,v=void 0,m=this.escapeExpression;return s+='<div class="photo-container">\n	<a class="previous-btn hide" href="#"><i class="icon-chevron-left"></i></a>\n	<a class="next-btn hide" href="#"><i class="icon-chevron-right"></i></a>\n\n	<div class="photo-info">',o=20,c=n.photo,u=c||t.photo,u=u===null||u===undefined||u===!1?u:u.title,c=n.truncate,a=c||t.truncate,typeof a===p?o=a.call(t,u,o,{hash:{}}):a===v?o=d.call(t,"truncate",u,o,{hash:{}}):o=a,s+=m(o)+'</div>\n\n	<img class="photo-shadow" src="',o=940,u=940,c=n.photo,a=c||t.photo,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===p?o=l.call(t,f,a,u,o,{hash:{}}):l===v?o=d.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=m(o)+'">\n</div>\n',s})}),define("plex/model/media/collections/PhotoCollection",["plex/model/collections/BaseCollection","plex/model/media/PhotoModel"],function(e,t){var n=e.extend({model:t,url:function(){return this.parentKey?this.parentKey+"/children":"library/sections/"+this.section.id+"/all"},initialize:function(e,t){this.server=t.server,this.section=t.section,this.parentKey=t.parentKey},parse:function(e){var t=$.xml2json(e).Photo;return t}});return n}),define("plex/view/details/PhotoDetailsView",["hb!templates/details/PhotoDetailsView.tpl","plex/control/Dispatcher","plex/model/media/collections/PhotoCollection","plex/view/BaseView","plex/view/details/ActionBarView"],function(e,t,n,r,i){var s=r.extend({className:"details photo-details",siblings:null,previousPhoto:null,nextPhoto:null,events:{"click .previous-btn":"onPreviousClick","click .next-btn":"onNextClick"},initialize:function(){this.siblings=new n([],{server:this.model.server,section:this.model.section,parentKey:this.model.get("parentKey")}),this.addBinding(this.siblings,"reset",this.onSiblingsReset),this.siblings.fetch(),this.actionBar=this.registerView(new i({model:this.model}))},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,sectionID:this.model.section.id,photo:this.model.toJSON()})),this.$el.prepend(this.actionBar.render().el),this},onSiblingsReset:function(e){var t=e.get(this.model.id),n=e.indexOf(t);this.previousPhoto=null,this.nextPhoto=null,n>0&&(this.previousPhoto=e.at(n-1),this.$(".previous-btn").removeClass("hide")),n+1<e.length-1&&(this.nextPhoto=e.at(n+1),this.$(".next-btn").removeClass("hide"))},onPreviousClick:function(e){e.preventDefault(),t.trigger("navigate:details",this.model.server.id,this.model.section.id,this.previousPhoto.id)},onNextClick:function(e){e.preventDefault(),t.trigger("navigate:details",this.model.server.id,this.model.section.id,this.nextPhoto.id)}});return s}),define("plex/view/details/FolderDetailsView",["plex/view/BaseView","plex/view/lists/media/PosterTileList"],function(e,t){var n=e.extend({className:"details folder-details",folderList:null,initialize:function(){var e=this.model.get("children");this.folderList=this.registerView(new t({collection:e})),e.fetch()},render:function(){return this.$el.empty(),this.$el.append(this.folderList.render().el),this}});return n}),define("hb!templates/details/PlaylistItemDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function y(e,t){var r="",i;return r+='\n				<div class="metadata metadata-headline">',c=n.media,i=c||e.media,i=i===null||i===undefined||i===!1?i:i.year,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"media.year",{hash:{}})),r+=g(i)+"</div>\n			",r}function b(e,t){var r="",i,s,o,u,a,f,l,h;return r+='\n				<div class="metadata"><img class="media-flag" src="',i=30,s=60,c=n.media,o=c||e.media,o=o===null||o===undefined||o===!1?o:o.contentRating,u="contentRating",c=n.media,a=c||e.media,a=a===null||a===undefined||a===!1?a:a.mediaTagVersion,c=n.media,f=c||e.media,f=f===null||f===undefined||f===!1?f:f.mediaTagPrefix,c=n.serverObj,l=c||e.serverObj,c=n.transcodeMediaFlag,h=c||e.transcodeMediaFlag,typeof h===d?i=h.call(e,l,f,a,u,o,s,i,{hash:{}}):h===m?i=v.call(e,"transcodeMediaFlag",l,f,a,u,o,s,i,{hash:{}}):i=h,r+=g(i)+'"></div>\n			',r}function w(e,t){var r="",i,s;r+='\n				<div class="metadata"><span class="rating">',c=n.media,i=c||e.media,i=i===null||i===undefined||i===!1?i:i.rating,c=n.starRating,s=c||e.starRating,typeof s===d?i=s.call(e,i,{hash:{}}):s===m?i=v.call(e,"starRating",i,{hash:{}}):i=s;if(i||i===0)r+=i;return r+="</span></div>\n			",r}function E(e,t){var r="",i,s;return r+='\n				<span class="metadata-duration">',c=n.media,i=c||e.media,i=i===null||i===undefined||i===!1?i:i.duration,c=n.formatMinutes,s=c||e.formatMinutes,typeof s===d?i=s.call(e,i,{hash:{}}):s===m?i=v.call(e,"formatMinutes",i,{hash:{}}):i=s,r+=g(i)+"</span>\n			",r}function S(e,t){var r="",i,s;r+="\n				",c=n.media,i=c||e.media,i=i===null||i===undefined||i===!1?i:i.duration,s=n["if"],h=p.program(10,x,t),h.hash={},h.fn=h,h.inverse=p.noop,i=s.call(e,i,h);if(i||i===0)r+=i;return r+="\n				<span>",c=n.media,i=c||e.media,i=i===null||i===undefined||i===!1?i:i.sourceTitle,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"media.sourceTitle",{hash:{}})),r+=g(i)+"</span>\n			",r}function x(e,t){return"&middot;"}function T(e,t){var r="",i,s,o;return r+='\n			<div class="metadata metadata-top">\n				<span class="metadata-label">Genre</span>',i=150,c=n.media,s=c||e.media,s=s===null||s===undefined||s===!1?s:s.Genre,c=n.truncateTagList,o=c||e.truncateTagList,typeof o===d?i=o.call(e,s,i,{hash:{}}):o===m?i=v.call(e,"truncateTagList",s,i,{hash:{}}):i=o,r+=g(i)+"\n			</div>\n		",r}function N(e,t){var r="",i,s,o;return r+='\n			<div class="metadata">\n				<span class="metadata-label">Director</span>',i=150,c=n.media,s=c||e.media,s=s===null||s===undefined||s===!1?s:s.Director,c=n.truncateTagList,o=c||e.truncateTagList,typeof o===d?i=o.call(e,s,i,{hash:{}}):o===m?i=v.call(e,"truncateTagList",s,i,{hash:{}}):i=o,r+=g(i)+"\n			</div>\n		",r}function C(e,t){var r="",i,s,o;return r+='\n			<div class="metadata">\n				<span class="metadata-label">Writer</span>',i=150,c=n.media,s=c||e.media,s=s===null||s===undefined||s===!1?s:s.Writer,c=n.truncateTagList,o=c||e.truncateTagList,typeof o===d?i=o.call(e,s,i,{hash:{}}):o===m?i=v.call(e,"truncateTagList",s,i,{hash:{}}):i=o,r+=g(i)+"\n			</div>\n		",r}function k(e,t){var r="",i,s,o;return r+='\n			<div class="metadata">\n				<span class="metadata-label">Cast</span>',i=150,c=n.media,s=c||e.media,s=s===null||s===undefined||s===!1?s:s.Role,c=n.truncateTagList,o=c||e.truncateTagList,typeof o===d?i=o.call(e,s,i,{hash:{}}):o===m?i=v.call(e,"truncateTagList",s,i,{hash:{}}):i=o,r+=g(i)+"\n			</div>\n		",r}function L(e,t){var r="",i;return r+='\n			<h2 class="tagline">\n				',c=n.media,i=c||e.media,i=i===null||i===undefined||i===!1?i:i.tagline,typeof i===d?i=i.call(e,{hash:{}}):i===m&&(i=v.call(e,"media.tagline",{hash:{}})),r+=g(i)+"\n			</h2>\n		",r}function A(e,t){var r="",i,s,o;return r+='\n			<div class="summary">',i=700,c=n.media,s=c||e.media,s=s===null||s===undefined||s===!1?s:s.summary,c=n.truncate,o=c||e.truncate,typeof o===d?i=o.call(e,s,i,{hash:{}}):o===m?i=v.call(e,"truncate",s,i,{hash:{}}):i=o,r+=g(i)+"</div>\n		",r}n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;s+='<div class="details-row row-fluid">\n	<div class="details-controls">\n		<img class="poster large-poster" data-original="',o=420,u=280,c=n.media,a=c||t.media,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" src="img/posters/poster_large.png">\n\n		<a class="btn btn-primary" href="#!/playlist/',c=n.playlistName,o=c||t.playlistName,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"playlistName",{hash:{}})),s+=g(o)+"/player/",c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.id,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"media.id",{hash:{}})),s+=g(o)+'">\n			<i class="icon-play"></i> Play\n		</a>\n	</div>\n\n	<div class="details-metadata">\n		<div class="metadata-right">\n			',c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.year,u=n["if"],h=p.program(1,y,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;s+="\n\n			",c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.contentRating,u=n["if"],h=p.program(3,b,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;s+="\n\n			",c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.rating,u=n["if"],h=p.program(5,w,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;s+="\n		</div>\n\n		<h1>",c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.title,typeof o===d?o=o.call(t,{hash:{}}):o===m&&(o=v.call(t,"media.title",{hash:{}})),s+=g(o)+'</h1>\n\n		<div class="metadata">\n			',c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.duration,u=n["if"],h=p.program(7,E,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;s+="\n\n			",c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.sourceTitle,u=n["if"],h=p.program(9,S,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;s+="\n		</div>\n\n		",c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.Genre,u=n["if"],h=p.program(12,T,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;s+="\n\n		",c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.Director,u=n["if"],h=p.program(14,N,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;s+="\n\n		",c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.Writer,u=n["if"],h=p.program(16,C,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;s+="\n\n		",c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.Role,u=n["if"],h=p.program(18,k,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;s+="\n\n		",c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.tagline,u=n["if"],h=p.program(20,L,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;s+="\n\n		",c=n.media,o=c||t.media,o=o===null||o===undefined||o===!1?o:o.summary,u=n["if"],h=p.program(22,A,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;return s+="\n\n	</div>\n</div>\n",s})}),define("plex/view/details/PlaylistItemDetailsView",["hb!templates/details/PlaylistItemDetailsView.tpl","plex/model/AppModel","plex/view/BaseView","plex/view/details/ActionBarView"],function(e,t,n,r){var i=n.extend({className:"details",initialize:function(){var e=!!this.model.get("viewCount");this.actionBar=this.registerView(new r({model:this.model,showWatch:!e,showUnwatch:e}))},render:function(){return this.$el.html(e({serverURL:t.get("primaryServer").url(),serverObj:t.get("primaryServer"),media:this.model.toJSON(),playlistName:this.model.get("playlistName")})),this.$el.prepend(this.actionBar.render().el),this}});return i}),define("hb!templates/details/UnknownDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<i class="plex-icon-sad"></i>\n\n<span class="fatal-message">This media type is not yet supported.</span>\n'})}),define("plex/view/details/UnknownDetailsView",["hb!templates/details/UnknownDetailsView.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({className:"details",render:function(){return this.$el.html(e({serverID:this.model.server.id,sectionID:this.model.section.id,item:this.model.toJSON()})),this}});return n}),define("plex/view/details/DetailsView",["hb!templates/details/DetailsView.tpl","plex/view/BaseView","plex/view/details/MovieDetailsView","plex/view/details/ShowDetailsView","plex/view/details/SeasonDetailsView","plex/view/details/EpisodeDetailsView","plex/view/details/ArtistDetailsView","plex/view/details/AlbumDetailsView","plex/view/details/PhotoDetailsView","plex/view/details/FolderDetailsView","plex/view/details/PlaylistItemDetailsView","plex/view/details/UnknownDetailsView","lazyload"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=t.extend({className:"container-fluid container-wide",detailsView:null,initialize:function(){var e=this.model.get("type");switch(e){case"movie":this.detailsView=this.registerView(new n({model:this.model}));break;case"show":this.detailsView=this.registerView(new r({model:this.model}));break;case"season":this.detailsView=this.registerView(new i({model:this.model}));break;case"episode":this.detailsView=this.registerView(new s({model:this.model}));break;case"artist":this.detailsView=this.registerView(new o({model:this.model}));break;case"album":this.detailsView=this.registerView(new u({model:this.model}));break;case"photo":this.detailsView=this.registerView(new a({model:this.model}));break;case"folder":this.detailsView=this.registerView(new f({model:this.model}));break;case"playlistItem":this.detailsView=this.registerView(new l({model:this.model}));break;default:this.$el.addClass("fatal-container"),this.detailsView=this.registerView(new c({model:this.model}))}this.loadPosterDelay=_.debounce(this.loadPoster,800),this.addBinding(this.detailsView,"change:poster",this.loadPosterDelay)},render:function(){return this.$el.html(e({serverURL:this.model.server.url(),serverObj:this.model.server,media:this.model.toJSON()})),this.$el.prepend(this.detailsView.render().el),this.bindView(),this.loadPosterDelay(),this},loadPoster:function(){this.$(".poster").lazyload({threshold:100})},bindings:{".fanart":{modelAttr:"art",hideEmpty:!0,format:function(e,t){t?(e.removeClass("hide"),e.css("background-image","url("+Handlebars.helpers.transcodeImage.call(this,this.model.server,t,1280,720)+")"),this.$(".fanart-overlay").removeClass("hide")):(e.addClass("hide"),this.$(".fanart-overlay").addClass("hide"))}}}});return h}),define("hb!templates/edit/EditAlbumView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;return s+='<div class="details-row row-fluid">\n	<div class="details-controls">\n		<img class="poster large-poster" data-original="',o=420,u=280,c=n.media,a=c||t.media,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" src="img/posters/poster_square_large.png">\n\n		<a class="btn btn-inverse change-poster-btn" href="#">\n			<i class="icon-pencil"></i> Change Poster\n		</a>\n		<a class="btn btn-inverse change-background-btn" href="#">\n			<i class="icon-pencil"></i> Change Background\n		</a>\n	</div>\n\n	<form class="edit-metadata-form">\n		<div class="row-fluid">\n			<div class="span5">\n				',o={},u="title",o.name=u,u="Album",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.title,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.title,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span5">\n				',o={},u="titleSort",o.name=u,u="Sort Album",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.titleSort,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.titleSort,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span2">\n				',o={},u="year",o.name=u,u="Year",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.year,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.year,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span5">\n				',o={},u="originallyAvailableAt",o.name=u,u="Release Date",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.originallyAvailableAt,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.originallyAvailableAt,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span3">\n				',o={},u="rating",o.name=u,u="Rating",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.rating,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.rating,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span4">\n				',o={},u="contentRating",o.name=u,u="Content Rating",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.contentRating,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.contentRating,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span6">\n				',o={},u="genre",o.name=u,u="Genres",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.Genre,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.genre,o.locked=u,c=n.tagValues,u=c||t.tagValues,u=u===null||u===undefined||u===!1?u:u.genre,o.options=u,c=n.lockableTagInput,u=c||t.lockableTagInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTagInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span6">\n				',o={},u="studio",o.name=u,u="Record Label",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.studio,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.studio,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span12">\n				',o={},u="summary",o.name=u,u="Review",o.label=u,u="textarea",o.type=u,u="6",o.rows=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.summary,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.summary,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n	</form>\n</div>\n\n<div class="banner edit-metadata-form-actions">\n	<button type="submit" class="btn btn-medium btn-primary">Save</button>\n	<button class="btn btn-medium btn-inverse cancel-btn">Cancel</button>\n</div>\n',s})}),define("hb!templates/modals/SelectArtworkModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){return" hide"}function m(e,t){var r="",i,s;r+='\n			<div class="artwork-options-container ',a=n.loading,i=a||e.loading,s=n["if"],f=l.program(4,g,t),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;r+='">\n				',a=n.options,i=a||e.options,s=n.each,f=l.programWithDepth(y,t,e),f.hash={},f.fn=f,f.inverse=l.noop,i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n			</div>\n			",r}function g(e,t){return" hide"}function y(e,t,r){var i="",s,o,u,f,l;return i+='\n				<a class="artwork-option" data-rating-key="',a=n.ratingKey,s=a||e.ratingKey,typeof s===c?s=s.call(e,{hash:{}}):s===p&&(s=h.call(e,"ratingKey",{hash:{}})),i+=d(s)+'" href="#">\n					<img class="poster" src="',s=200,o=150,a=n.thumb,u=a||e.thumb,a=n.serverObj,f=a||r.serverObj,a=n.transcodeImage,l=a||e.transcodeImage,typeof l===c?s=l.call(e,f,u,o,s,{hash:{}}):l===p?s=h.call(e,"transcodeImage",f,u,o,s,{hash:{}}):s=l,i+=d(s)+'">\n				</a>\n				',i}function b(e,t){return'\n			<h4 class="no-matches">No artwork found</h4>\n			'}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal">Ã</button>\n	<h3>Select Artwork</h3>\n</div>\n\n<form class="modal-form select-artwork-form">\n	<div class="modal-body">\n\n		<div class="select-artwork-options">\n			<h4 class="select-artwork-loading',a=n.loading,o=a||t.loading,u=n.unless,f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+='">\n				Searching for artwork...\n			</h4>\n			',a=n.options,o=a||t.options,o=o===null||o===undefined||o===!1?o:o.length,u=n["if"],f=l.program(3,m,i),f.hash={},f.fn=f,f.inverse=l.program(8,b,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+='\n		</div>\n\n	</div>\n\n	<div class="modal-footer select-artwork-footer">\n		<button class="btn btn-inverse cancel-btn">Cancel</button>\n	</div>\n\n</form>\n\n',s})}),define("plex/model/media/collections/ArtworkCollection",["plex/model/collections/BaseCollection","plex/model/media/PhotoModel"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.media=t.media,this.server=this.media.server,this.section=this.media.section,this.type=t.type},url:function(){return"/library/metadata/"+this.media.id+"/"+this.type+"s"},parse:function(e){return $.xml2json(e).Photo}});return n}),define("plex/view/modals/SelectArtworkModal",["hb!templates/modals/SelectArtworkModal.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","plex/model/media/collections/ArtworkCollection"],function(e,t,n,r,i){var s=r.extend({name:"selectArtworkModal",className:"modal fade",events:{hidden:"onClose","click .artwork-option":"onArtworkOptionClick","click .cancel-btn":"onCancel"},initialize:function(e){this.type=e.type,this.artwork=new i([],{media:this.model,type:this.type}),this.loading=!0,this.addBinding(this.artwork,"reset",function(e){this.loading=!1,this.render()}),this.artwork.populate()},render:function(){var t={media:this.model.toJSON(),options:this.artwork.toJSON(),loading:this.loading,serverURL:this.model.server.url(),serverObj:this.model.server};return this.$el.html(e(t)).modal(),this},onClose:function(e){t.trigger("destroy:modal",this)},onArtworkOptionClick:function(e){e.preventDefault();var r=$(e.currentTarget),i={url:r.data("ratingKey")};t.trigger("command:ShowLoading",!0),$.ajax({type:"PUT",url:this.model.server.resolveUrl("/library/metadata/"+this.model.id+"/"+this.type+"?"+$.param(i)),headers:this.model.server.getHeaders(),success:_.bind(function(){t.trigger("command:ShowLoading",!1),this.$el.modal("hide")},this),error:function(){t.trigger("command:ShowLoading",!1),n.set({error:"Unable to set artwork"})}})},onCancel:function(e){e.preventDefault(),this.$el.modal("hide")}});return s}),function(){var e;e=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return e.nodeName==="OPTGROUP"?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,n,r,i,s,o;t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:e.label,children:0,disabled:e.disabled}),s=e.childNodes,o=[];for(r=0,i=s.length;r<i;r++)n=s[r],o.push(this.add_option(n,t,e.disabled));return o},e.prototype.add_option=function(e,t,n){if(e.nodeName==="OPTION")return e.text!==""?(t!=null&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:n===!0?n:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},e}(),e.select_to_array=function(t){var n,r,i,s,o;r=new e,o=t.childNodes;for(i=0,s=o.length;i<s;i++)n=o[i],r.add_node(n);return r.parsed},this.SelectParser=e}.call(this),function(){var e,t;t=this,e=function(){function e(e,t){this.form_field=e,this.options=t!=null?t:{},this.set_default_values(),this.is_multiple=this.form_field.multiple,this.set_default_text(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||Infinity},e.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(e){var t=this;if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)},e.prototype.input_blur=function(e){var t=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return t.blur_test()},100)},e.prototype.result_add_option=function(e){var t,n;return e.disabled?"":(e.dom_id=this.container_id+"_o_"+e.array_index,t=e.selected&&this.is_multiple?[]:["active-result"],e.selected&&t.push("result-selected"),e.group_array_index!=null&&t.push("group-option"),e.classes!==""&&t.push(e.classes),n=e.style.cssText!==""?' style="'+e.style+'"':"",'<li id="'+e.dom_id+'" class="'+t.join(" ")+'"'+n+">"+e.html+"</li>")},e.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.keyup_checker=function(e){var t,n;t=(n=e.which)!=null?n:e.keyCode,this.search_field_scale();switch(t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:e.preventDefault();if(this.results_showing||this.options.allow_option_creation)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.generate_field_id=function(){var e;return e=this.generate_random_id(),this.form_field.id=e,e},e.prototype.generate_random_char=function(){var e,t,n;return e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=Math.floor(Math.random()*e.length),t=e.substring(n,n+1)},e}(),t.AbstractChosen=e}.call(this),function(){var e,t,n,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=this,e=jQuery,e.fn.extend({chosen:function(n){return!e.browser.msie||e.browser.version!=="6.0"&&e.browser.version!=="7.0"?this.each(function(r){var i;i=e(this);if(!i.hasClass("chzn-done"))return i.data("chosen",new t(this,n))}):this}}),t=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return s(i,t),i.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},i.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},i.prototype.set_up_html=function(){var t,r,i,s;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",this.f_width=this.form_field_jq.outerWidth(),t=e("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+(this.form_field_jq[0].style.width||this.f_width+"px")+";"}),this.is_multiple?t.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):t.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(t),this.container=e("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),r=this.container.height(),i=this.f_width-n(this.dropdown),this.dropdown.css({width:i+"px",top:r+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),s=i-n(this.search_container)-n(this.search_field),this.search_field.css({width:s+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},i.prototype.register_observers=function(){var e=this;return this.container.mousedown(function(t){return e.container_mousedown(t)}),this.container.mouseup(function(t){return e.container_mouseup(t)}),this.container.mouseenter(function(t){return e.mouse_enter(t)}),this.container.mouseleave(function(t){return e.mouse_leave(t)}),this.search_results.mouseup(function(t){return e.search_results_mouseup(t)}),this.search_results.mouseover(function(t){return e.search_results_mouseover(t)}),this.search_results.mouseout(function(t){return e.search_results_mouseout(t)}),this.form_field_jq.bind("liszt:updated",function(t){return e.results_update_field(t)}),this.search_field.blur(function(t){return e.input_blur(t)}),this.search_field.keyup(function(t){return e.keyup_checker(t)}),this.search_field.keydown(function(t){return e.keydown_checker(t)}),this.is_multiple?(this.search_choices.click(function(t){return e.choices_click(t)}),this.search_field.focus(function(t){return e.input_focus(t)})):this.container.click(function(e){return e.preventDefault()})},i.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field();this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)},i.prototype.container_mousedown=function(t){var n;if(!this.is_disabled)return n=t!=null?e(t.target).parent().hasClass("search-choice-close"):!1,t&&t.type==="mousedown"&&!this.results_showing&&t.stopPropagation(),!this.pending_destroy_click&&!n?(this.active_field?!this.is_multiple&&t&&(e(t.target)[0]===this.selected_item[0]||e(t.target).parents("a.chzn-single").length)&&(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).click(this.click_test_action),this.results_show()),this.activate_field()):this.pending_destroy_click=!1},i.prototype.container_mouseup=function(e){if(e.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(e)},i.prototype.blur_test=function(e){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()},i.prototype.close_field=function(){return e(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return!this.is_multiple&&!this.active_field&&(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(t){return e(t.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){var e,t,n,i,s;this.parsing=!0,this.results_data=r.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),e="",s=this.results_data;for(n=0,i=s.length;n<i;n++)t=s[n],t.group?e+=this.result_add_group(t):t.empty||(e+=this.result_add_option(t),t.selected&&this.is_multiple?this.choice_build(t):t.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(t.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(e),this.parsing=!1},i.prototype.result_add_group=function(t){return t.disabled?"":(t.dom_id=this.container_id+"_g_"+t.array_index,'<li id="'+t.dom_id+'" class="group-result">'+e("<div />").text(t.label).html()+"</li>")},i.prototype.result_do_highlight=function(e){var t,n,r,i,s;if(e.length){this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),r=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),i=r+s,n=this.result_highlight.position().top+this.search_results.scrollTop(),t=n+this.result_highlight.outerHeight();if(t>=i)return this.search_results.scrollTop(t-r>0?t-r:0);if(n<s)return this.search_results.scrollTop(n)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){var e,t;if(!this.is_multiple)this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);else if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;return this.f_width=this.form_field_jq.outerWidth(),e=this.is_multiple?this.container.height():this.container.height()-1,t=this.f_width-n(this.dropdown),this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:e+"px",width:t+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},i.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},i.prototype.set_tab_index=function(e){var t;if(this.form_field_jq.attr("tabindex"))return t=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",t):(this.selected_item.attr("tabindex",t),this.search_field.attr("tabindex",-1))},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(t){var n;n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first();if(n.length)return this.result_highlight=n,this.result_select(t)},i.prototype.search_results_mouseover=function(t){var n;n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first();if(n)return this.result_do_highlight(n)},i.prototype.search_results_mouseout=function(t){if(e(t.target).hasClass("active-result"))return this.result_clear_highlight()},i.prototype.choices_click=function(t){t.preventDefault();if(this.active_field&&!e(t.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()},i.prototype.choice_build=function(t){var n,r,i=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(n=this.container_id+"_c_"+t.array_index,this.choices+=1,this.search_container.before('<li class="search-choice" id="'+n+'"><span>'+t.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+t.array_index+'"><i class="icon-remove"></i></a></li>'),r=e("#"+n).find("a").first(),r.click(function(e){return i.choice_destroy_link_click(e)}))},i.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),this.is_disabled?t.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(e(t.currentTarget)))},i.prototype.choice_destroy=function(e){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),this.result_deselect(e.attr("rel")),e.parents("li").first().remove()},i.prototype.results_reset=function(){this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()},i.prototype.results_reset_cleanup=function(){return this.selected_item.find("abbr").remove()},i.prototype.result_select=function(t){var n,r,i,s,o;if(this.result_highlight)return n=this.result_highlight,r=n.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(n):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=n,this.selected_item.removeClass("chzn-default")),n.addClass("result-selected"),o=r.substr(r.lastIndexOf("_")+1),i=this.results_data[o],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.is_multiple?this.choice_build(i):(this.selected_item.find("span").first().text(i.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!t.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale();if(this.options.allow_option_creation){s=this.search_field.val();if(!s)return;return this.allow_creation(s)&&(e("<option>",{selected:!0,value:s}).text(s).appendTo(this.form_field_jq),this.results_update_field(t)),this.form_field_jq.trigger("change"),this.search_field.val(""),this.results_hide()}},i.prototype.allow_creation=function(t){var n;return this.is_multiple?(n=this.search_choices.find("li.search-choice span").filter(function(){return e(this).text().toLowerCase()===t.toLowerCase()}),!n.length):this.selected_item.find("span").text().toLowerCase()!==t.toLowerCase()},i.prototype.result_activate=function(e){return e.addClass("active-result")},i.prototype.result_deactivate=function(e){return e.removeClass("active-result")},i.prototype.result_deselect=function(t){var n,r;return r=this.results_data[t],r.selected=!1,this.form_field.options[r.options_index].selected=!1,n=e("#"+this.container_id+"_o_"+t),n.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[r.options_index].value}),this.search_field_scale()},i.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')},i.prototype.winnow_results=function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;this.no_results_clear(),l=0,c=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html(),u=this.search_contains?"":"^",d=c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),o=new RegExp(u+d,"i"),v=new RegExp(d,"i"),n=new RegExp("^"+d+"$","i"),w=this.results_data;for(m=0,y=w.length;m<y;m++){r=w[m];if(!r.disabled&&!r.empty)if(r.group)e("#"+r.dom_id).css("display","none");else if(!this.is_multiple||!r.selected){t=!1,f=r.dom_id,a=e("#"+f);if(this.options.allow_option_creation&&c&&n.test(r.html))t=!0,l+=1,this.result_do_highlight(e("#"+r.dom_id));else if(o.test(r.html))t=!0,l+=1;else if(r.html.indexOf(" ")>=0||r.html.indexOf("[")===0){s=r.html.replace(/\[|\]/g,"").split(" ");if(s.length)for(g=0,b=s.length;g<b;g++)i=s[g],o.test(i)&&(t=!0,l+=1)}t?(c.length?(h=r.html.search(v),p=r.html.substr(0,h+c.length)+"</em>"+r.html.substr(h+c.length),p=p.substr(0,h)+"<em>"+p.substr(h)):p=r.html,a.html(p),this.result_activate(a),r.group_array_index!=null&&e("#"+this.results_data[r.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&f===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(a))}}if(l<1&&c.length){this.no_results(c);if(this.options.allow_option_creation&&this.is_multiple)return this.results_hide()}else if(!this.options.allow_option_creation)return this.winnow_results_set_highlight()},i.prototype.winnow_results_clear=function(){var t,n,r,i,s;this.search_field.val(""),n=this.search_results.find("li"),s=[];for(r=0,i=n.length;r<i;r++)t=n[r],t=e(t),t.hasClass("group-result")?s.push(t.css("display","auto")):!this.is_multiple||!t.hasClass("result-selected")?s.push(this.result_activate(t)):s.push(void 0);return s},i.prototype.winnow_results_set_highlight=function(){var e,t;if(!this.result_highlight){t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first();if(e!=null)return this.result_do_highlight(e)}},i.prototype.no_results=function(t){var n;if(!this.is_multiple&&this.options.allow_option_creation)return;return n=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(t),this.search_results.append(n)},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var t,n;this.result_highlight?this.results_showing&&(n=this.result_highlight.nextAll("li.active-result").first(),n&&this.result_do_highlight(n)):(t=this.search_results.find("li.active-result").first(),t&&this.result_do_highlight(e(t)));if(!this.results_showing)return this.results_show()},i.prototype.keyup_arrow=function(){var e;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())},i.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus"))},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(e){var t,n;t=(n=e.which)!=null?n:e.keyCode,this.search_field_scale(),t!==8&&this.pending_backstroke&&this.clear_backstroke();switch(t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},i.prototype.search_field_scale=function(){var t,n,r,i,s,o,u,a,f;if(this.is_multiple){r=0,u=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(a=0,f=o.length;a<f;a++)i=o[a],s+=i+":"+this.search_field.css(i)+";";return n=e("<div />",{style:s}),n.text(this.search_field.val()),e("body").append(n),u=n.width()+25,n.remove(),u>this.f_width-10&&(u=this.f_width-10),this.search_field.css({width:u+"px"}),t=this.container.height(),this.dropdown.css({top:t+"px"})}},i.prototype.generate_random_id=function(){var t;t="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();while(e("#"+t).length>0)t+=this.generate_random_char();return t},i}(AbstractChosen),n=function(e){var t;return t=e.outerWidth()-e.width()},r.get_side_border_padding=n}.call(this),define("chosen",function(){}),define("plex/view/edit/BaseEditView",["plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","plex/view/details/ActionBarView","plex/view/modals/SelectArtworkModal","plex/model/FilterModel","chosen"],function(e,t,n,r,i,s){var o=n.extend({className:"details",events:{"click .change-poster-btn":"onChangePosterClick","click .change-background-btn":"onChangeBackgroundClick","click .delete-btn":"onDeleteClick","click .lock-btn":"onLockClick","change .lockable-field":"onFieldChange","keypress .lockable-field":"onFieldKeyPress","click button[type=submit]":"onSubmit","click .cancel-btn":"onCancel"},tagNames:[],initialize:function(e){this.actionBar=this.registerView(new r({model:this.model})),this.tagValues={};var t=function(e){return $("<div/>").text(e).html()},n=_.bind(function(e){if(e.length==0)return;var n=e.filter.get("filter"),r=this.$("select[data-name="+n+"]")[0];if(r){var i=e.map(function(e){return"<option>"+t(e.get("title"))+"</option>"});$(r).append(i).trigger("liszt:updated")}},this);_.each(this.tagNames,function(e){var t=new s({filter:e,filterType:"string"},{server:this.model.server,section:this.model.section});this.tagValues[e]=t.get("options"),this.tagValues[e].populate().done(n)},this)},render:function(){var e=this.model.get("Field"),t={};_.isArray(e)?_.reduce(e,function(e,t){return e[t.name]=t.locked,e},t):_.isEmpty(e)||(t[e.name]=e.locked);var n={};_.each(this.tagValues,function(e,t){n[t]=e.pluck("title")});var r={media:this.model.toJSON(),serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,showDelete:this.model.server.get("allowMediaDeletion"),sectionID:this.model.section.id,locked:t,type:this.model.get("type")||"item",path:this.model.getMediaLocation(),tagValues:n};return this.$el.html(this.tpl(r)),this.$el.prepend(this.actionBar.render().el),_.defer(_.bind(function(){this.$(".chzn-select").chosen({allow_option_creation:!0})},this)),this},navigateToDetails:function(){e.trigger("navigate:details",this.model.server.id,this.model.section.id,this.model.id)},onChangePosterClick:function(e){e.preventDefault();var n=new i({model:this.model,type:"poster"});t.set({modal:n})},onChangeBackgroundClick:function(e){e.preventDefault();var n=new i({model:this.model,type:"art"});t.set({modal:n})},onDeleteClick:function(t){t.preventDefault(),e.trigger("command:DeleteMedia",this.model)},onLockClick:function(e){e.preventDefault(),$(e.currentTarget).toggleClass("selected")},onFieldChange:function(e){$(e.currentTarget).parent().siblings(".lock-btn").addClass("selected")},onFieldKeyPress:function(e){$(e.currentTarget).parent().siblings(".lock-btn").addClass("selected")},onSubmit:function(e){e.preventDefault();var n=$("form.edit-metadata-form"),r=_.reduce(n.serializeArray(),function(e,t){return e[t.name]=t.value,e},{}),i=$(".lock-btn.selected").map(function(e,t){return{name:$(t).data("field"),locked:"1"}}).get();r.Field=i;var s=this.model.changedAttributes(r)||{};if("Field"in s){var o=_.reduce(this.model.get("Field"),function(e,t){return e[t.name]="0",e},{});_.reduce(i,function(e,t){return t.name in e?delete e[t.name]:e[t.name]="1",e},o),s.Field=_.map(o,function(e,t){return{name:t,locked:e}})}var u=_.reduce(n.find(".chzn-select"),function(e,t){var n=$(t),r=n.data("name");return r=r.charAt(0).toUpperCase()+r.slice(1),e[r]=_.map($(t.parentNode).find("ul.chzn-choices li.search-choice span"),function(e){return{tag:$(e).text()}}),e},{});_.each(u,function(e,t){var n=_.pluck(this.model.get(t),"tag"),r=_.pluck(e,"tag");_.isEqual(n,r)||(s[t]=e)},this),_.isEmpty(s)?this.navigateToDetails():this.model.save(s,{success:_.bind(function(e){this.navigateToDetails()},this),error:function(){t.set("alert",{status:"error",message:"There was a problem saving your changes."})}})},onCancel:function(e){e.preventDefault(),this.navigateToDetails()}});return o}),define("plex/view/edit/EditAlbumView",["hb!templates/edit/EditAlbumView.tpl","plex/view/edit/BaseEditView"],function(e,t){var n=t.extend({tpl:e,tagNames:["genre"]});return n}),define("hb!templates/edit/EditArtistView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;return s+='<div class="details-row row-fluid">\n	<div class="details-controls">\n		<img class="poster large-poster" data-original="',o=420,u=280,c=n.media,a=c||t.media,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" src="img/posters/poster_square_large.png">\n\n		<a class="btn btn-inverse change-poster-btn" href="#">\n			<i class="icon-pencil"></i> Change Poster\n		</a>\n		<a class="btn btn-inverse change-background-btn" href="#">\n			<i class="icon-pencil"></i> Change Background\n		</a>\n	</div>\n\n	<form class="edit-metadata-form">\n		<div class="row-fluid">\n			<div class="span6">\n				',o={},u="title",o.name=u,u="Artist",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.title,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.title,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span6">\n				',o={},u="titleSort",o.name=u,u="Sort Artist",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.titleSort,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.titleSort,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span9">\n				',o={},u="tagline",o.name=u,u="Tagline",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.tagline,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.tagline,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span3">\n				',o={},u="rating",o.name=u,u="Rating",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.rating,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.rating,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span12">\n				',o={},u="summary",o.name=u,u="Biography",o.label=u,u="textarea",o.type=u,u="8",o.rows=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.summary,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.summary,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span12">\n				',o={},u="collection",o.name=u,u="Collections",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.Collection,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.collection,o.locked=u,c=n.tagValues,u=c||t.tagValues,u=u===null||u===undefined||u===!1?u:u.collection,o.options=u,c=n.lockableTagInput,u=c||t.lockableTagInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTagInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n	</form>\n</div>\n\n<div class="banner edit-metadata-form-actions">\n	<button type="submit" class="btn btn-medium btn-primary">Save</button>\n	<button class="btn btn-medium btn-inverse cancel-btn">Cancel</button>\n</div>\n',s})}),define("plex/view/edit/EditArtistView",["hb!templates/edit/EditArtistView.tpl","plex/view/edit/BaseEditView"],function(e,t){var n=t.extend({tpl:e,tagNames:["collection"]});return n}),define("hb!templates/edit/EditEpisodeView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function y(e,t){return'\n			<a class="btn btn-danger delete-btn" href="#">\n				<i class="icon-trash"></i> Delete\n			</a>\n		'}n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;s+='<div class="details-row row-fluid">\n	<div class="details-controls">\n		<img class="poster large-poster" data-original="',o=420,u=280,c=n.media,a=c||t.media,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" src="img/posters/poster_wide_large.png">\n\n		<a class="btn btn-inverse change-poster-btn" href="#">\n			<i class="icon-pencil"></i> Change Poster\n		</a>\n		<a class="btn btn-inverse change-background-btn" href="#">\n			<i class="icon-pencil"></i> Change Background\n		</a>\n		',c=n.showDelete,o=c||t.showDelete,u=n["if"],h=p.program(1,y,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;return s+='\n	</div>\n\n	<form class="edit-metadata-form">\n		<div class="row-fluid">\n			<div class="span6">\n				',o={},u="title",o.name=u,u="Title",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.title,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.title,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span6">\n				',o={},u="titleSort",o.name=u,u="Sort Title",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.titleSort,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.titleSort,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span4">\n				',o={},u="contentRating",o.name=u,u="Content Rating",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.contentRating,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.contentRating,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span3">\n				',o={},u="rating",o.name=u,u="Rating",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.rating,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.rating,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span5">\n				',o={},u="originallyAvailableAt",o.name=u,u="Originally Available",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.originallyAvailableAt,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.originallyAvailableAt,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span12">\n				',o={},u="summary",o.name=u,u="Summary",o.label=u,u="textarea",o.type=u,u="8",o.rows=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.summary,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.summary,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span6">\n				',o={},u="writer",o.name=u,u="Writers",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.Writer,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.writer,o.locked=u,c=n.tagValues,u=c||t.tagValues,u=u===null||u===undefined||u===!1?u:u.writer,o.options=u,c=n.lockableTagInput,u=c||t.lockableTagInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTagInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span6">\n				',o={},u="director",o.name=u,u="Directors",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.Director,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.director,o.locked=u,c=n.tagValues,u=c||t.tagValues,u=u===null||u===undefined||u===!1?u:u.director,o.options=u,c=n.lockableTagInput,u=c||t.lockableTagInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTagInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n	</form>\n</div>\n\n<div class="banner edit-metadata-form-actions">\n	<button type="submit" class="btn btn-medium btn-primary">Save</button>\n	<button class="btn btn-medium btn-inverse cancel-btn">Cancel</button>\n</div>\n',s})}),define("plex/view/edit/EditEpisodeView",["hb!templates/edit/EditEpisodeView.tpl","plex/view/edit/BaseEditView"],function(e,t){var n=t.extend({tpl:e,tagNames:["director","writer"]});return n}),define("hb!templates/edit/EditMovieView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function y(e,t){return'\n			<a class="btn btn-danger delete-btn" href="#">\n				<i class="icon-trash"></i> Delete\n			</a>\n		'}n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;s+='<div class="details-row row-fluid">\n	<div class="details-controls">\n		<img class="poster large-poster" data-original="',o=420,u=280,c=n.media,a=c||t.media,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" src="img/posters/poster_large.png">\n\n		<a class="btn btn-inverse change-poster-btn" href="#">\n			<i class="icon-pencil"></i> Change Poster\n		</a>\n		<a class="btn btn-inverse change-background-btn" href="#">\n			<i class="icon-pencil"></i> Change Background\n		</a>\n		',c=n.showDelete,o=c||t.showDelete,u=n["if"],h=p.program(1,y,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;return s+='\n	</div>\n\n	<form class="edit-metadata-form">\n		<div class="row-fluid">\n			<div class="span5">\n				',o={},u="title",o.name=u,u="Title",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.title,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.title,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span5">\n				',o={},u="titleSort",o.name=u,u="Sort Title",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.titleSort,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.titleSort,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span2">\n				',o={},u="year",o.name=u,u="Year",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.year,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.year,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span5">\n				',o={},u="originalTitle",o.name=u,u="Original Title",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.originalTitle,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.originalTitle,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span3">\n				',o={},u="rating",o.name=u,u="Rating",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.rating,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.rating,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span4">\n				',o={},u="contentRating",o.name=u,u="Content Rating",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.contentRating,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.contentRating,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span7">\n				',o={},u="studio",o.name=u,u="Studio",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.studio,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.studio,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span5">\n				',o={},u="originallyAvailableAt",o.name=u,u="Originally Available",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.originallyAvailableAt,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.originallyAvailableAt,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span12">\n				',o={},u="tagline",o.name=u,u="Tagline",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.tagline,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.tagline,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span12">\n				',o={},u="summary",o.name=u,u="Summary",o.label=u,u="textarea",o.type=u,u="6",o.rows=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.summary,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.summary,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span6">\n				',o={},u="writer",o.name=u,u="Writers",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.Writer,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.writer,o.locked=u,c=n.tagValues,u=c||t.tagValues,u=u===null||u===undefined||u===!1?u:u.writer,o.options=u,c=n.lockableTagInput,u=c||t.lockableTagInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTagInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span6">\n				',o={},u="director",o.name=u,u="Directors",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.Director,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.director,o.locked=u,c=n.tagValues,u=c||t.tagValues,u=u===null||u===undefined||u===!1?u:u.director,o.options=u,c=n.lockableTagInput,u=c||t.lockableTagInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTagInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span6">\n				',o={},u="genre",o.name=u,u="Genres",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.Genre,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.genre,o.locked=u,c=n.tagValues,u=c||t.tagValues,u=u===null||u===undefined||u===!1?u:u.genre,o.options=u,c=n.lockableTagInput,u=c||t.lockableTagInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTagInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span6">\n				',o={},u="collection",o.name=u,u="Collections",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.Collection,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.collection,o.locked=u,c=n.tagValues,u=c||t.tagValues,u=u===null||u===undefined||u===!1?u:u.collection,o.options=u,c=n.lockableTagInput,u=c||t.lockableTagInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTagInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n	</form>\n</div>\n\n<div class="banner edit-metadata-form-actions">\n	<button type="submit" class="btn btn-medium btn-primary">Save</button>\n	<button class="btn btn-medium btn-inverse cancel-btn">Cancel</button>\n</div>\n',s})}),define("plex/view/edit/EditMovieView",["hb!templates/edit/EditMovieView.tpl","plex/view/edit/BaseEditView"],function(e,t){var n=t.extend({tpl:e,tagNames:["director","writer","genre","collection"]});return n}),define("hb!templates/edit/EditPhotoView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;return s+='<div class="details-row row-fluid">\n	<div class="details-controls">\n		<img class="poster large-poster" data-original="',o=420,u=280,c=n.media,a=c||t.media,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" src="img/posters/poster_square_large.png">\n\n	</div>\n\n	<form class="edit-metadata-form">\n		<div class="row-fluid">\n			<div class="span5">\n				',o={},u="title",o.name=u,u="Title",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.title,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.title,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span5">\n				',o={},u="titleSort",o.name=u,u="Sort Title",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.titleSort,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.titleSort,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span2">\n				',o={},u="year",o.name=u,u="Year",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.year,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.year,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span12">\n				',o={},u="summary",o.name=u,u="Summary",o.label=u,u="textarea",o.type=u,u="8",o.rows=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.summary,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.summary,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n	</form>\n</div>\n\n<div class="banner edit-metadata-form-actions">\n	<button type="submit" class="btn btn-medium btn-primary">Save</button>\n	<button class="btn btn-medium btn-inverse cancel-btn">Cancel</button>\n</div>\n',s})}),define("plex/view/edit/EditPhotoView",["hb!templates/edit/EditPhotoView.tpl","plex/view/edit/BaseEditView"],function(e,t){var n=t.extend({tpl:e});return n}),define("hb!templates/edit/EditShowView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;return s+='<div class="details-row row-fluid">\n	<div class="details-controls">\n		<img class="poster large-poster" data-original="',o=420,u=280,c=n.media,a=c||t.media,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" src="img/posters/poster_large.png">\n\n		<a class="btn btn-inverse change-poster-btn" href="#">\n			<i class="icon-pencil"></i> Change Poster\n		</a>\n		<a class="btn btn-inverse change-background-btn" href="#">\n			<i class="icon-pencil"></i> Change Background\n		</a>\n	</div>\n\n	<form class="edit-metadata-form">\n		<div class="row-fluid">\n			<div class="span5">\n				',o={},u="title",o.name=u,u="Title",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.title,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.title,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span5">\n				',o={},u="titleSort",o.name=u,u="Sort Title",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.titleSort,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.titleSort,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span2">\n				',o={},u="year",o.name=u,u="Year",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.year,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.year,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span5">\n				',o={},u="originalTitle",o.name=u,u="Original Title",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.originalTitle,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.originalTitle,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span3">\n				',o={},u="rating",o.name=u,u="Rating",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.rating,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.rating,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span4">\n				',o={},u="contentRating",o.name=u,u="Content Rating",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.contentRating,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.contentRating,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span7">\n				',o={},u="studio",o.name=u,u="Studio",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.studio,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.studio,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span5">\n				',o={},u="originallyAvailableAt",o.name=u,u="Originally Available",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.originallyAvailableAt,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.originallyAvailableAt,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span12">\n				',o={},u="tagline",o.name=u,u="Tagline",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.tagline,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.tagline,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span12">\n				',o={},u="summary",o.name=u,u="Summary",o.label=u,u="textarea",o.type=u,u="6",o.rows=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.summary,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.summary,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span6">\n				',o={},u="genre",o.name=u,u="Genres",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.Genre,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.genre,o.locked=u,c=n.tagValues,u=c||t.tagValues,u=u===null||u===undefined||u===!1?u:u.genre,o.options=u,c=n.lockableTagInput,u=c||t.lockableTagInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTagInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span6">\n				',o={},u="collection",o.name=u,u="Collections",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.Collection,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.collection,o.locked=u,c=n.tagValues,u=c||t.tagValues,u=u===null||u===undefined||u===!1?u:u.collection,o.options=u,c=n.lockableTagInput,u=c||t.lockableTagInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTagInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n	</form>\n</div>\n\n<div class="banner edit-metadata-form-actions">\n	<button type="submit" class="btn btn-medium btn-primary">Save</button>\n	<button class="btn btn-medium btn-inverse cancel-btn">Cancel</button>\n</div>\n',s})}),define("plex/view/edit/EditShowView",["hb!templates/edit/EditShowView.tpl","plex/view/edit/BaseEditView"],function(e,t){var n=t.extend({tpl:e,tagNames:["genre","collection"]});return n}),define("hb!templates/edit/EditTrackView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function y(e,t){return'\n			<a class="btn btn-danger delete-btn" href="#">\n				<i class="icon-trash"></i> Delete\n			</a>\n		'}n=n||e.helpers;var s="",o,u,a,f,l,c,h,p=this,d="function",v=n.helperMissing,m=void 0,g=this.escapeExpression;s+='<div class="details-row row-fluid">\n	<div class="details-controls">\n		<img class="poster large-poster" data-original="',o=420,u=280,c=n.media,a=c||t.media,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===d?o=l.call(t,f,a,u,o,{hash:{}}):l===m?o=v.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=g(o)+'" src="img/posters/poster_square_large.png">\n\n		<a class="btn btn-inverse change-poster-btn" href="#">\n			<i class="icon-pencil"></i> Change Poster\n		</a>\n		<a class="btn btn-inverse change-background-btn" href="#">\n			<i class="icon-pencil"></i> Change Background\n		</a>\n		',c=n.showDelete,o=c||t.showDelete,u=n["if"],h=p.program(1,y,i),h.hash={},h.fn=h,h.inverse=p.noop,o=u.call(t,o,h);if(o||o===0)s+=o;return s+='\n	</div>\n\n	<form class="edit-metadata-form">\n		<div class="row-fluid">\n			<div class="span12">\n				',o={},u="title",o.name=u,u="Track",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.title,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.title,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span9">\n				',o={},u="originalTitle",o.name=u,u="Album Artist",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.originalTitle,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.originalTitle,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span3">\n				',o={},u="rating",o.name=u,u="Rating",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.rating,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.rating,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span12">\n				',o={},u="summary",o.name=u,u="Lyrics",o.label=u,u="textarea",o.type=u,u="6",o.rows=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.summary,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.summary,o.locked=u,c=n.lockableTextInput,u=c||t.lockableTextInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTextInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n\n		<div class="row-fluid">\n			<div class="span6">\n				',o={},u="writer",o.name=u,u="Writers",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.Writer,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.writer,o.locked=u,c=n.tagValues,u=c||t.tagValues,u=u===null||u===undefined||u===!1?u:u.writer,o.options=u,c=n.lockableTagInput,u=c||t.lockableTagInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTagInput",h):o=u,s+=g(o)+'\n			</div>\n			<div class="span6">\n				',o={},u="director",o.name=u,u="Producers",o.label=u,c=n.media,u=c||t.media,u=u===null||u===undefined||u===!1?u:u.Director,o.value=u,c=n.locked,u=c||t.locked,u=u===null||u===undefined||u===!1?u:u.director,o.locked=u,c=n.tagValues,u=c||t.tagValues,u=u===null||u===undefined||u===!1?u:u.director,o.options=u,c=n.lockableTagInput,u=c||t.lockableTagInput,h={},h.hash=o,typeof u===d?o=u.call(t,h):u===m?o=v.call(t,"lockableTagInput",h):o=u,s+=g(o)+'\n			</div>\n		</div>\n	</form>\n</div>\n\n<div class="banner edit-metadata-form-actions">\n	<button type="submit" class="btn btn-medium btn-primary">Save</button>\n	<button class="btn btn-medium btn-inverse cancel-btn">Cancel</button>\n</div>\n',s})}),define("plex/view/edit/EditTrackView",["hb!templates/edit/EditTrackView.tpl","plex/control/Dispatcher","plex/view/edit/BaseEditView"],function(e,t,n){var r=n.extend({tpl:e,tagNames:["writer","director"],navigateToDetails:function(){t.trigger("navigate:details",this.model.server.id,this.model.section.id,this.model.get("parentRatingKey"))}});return r}),define("plex/view/edit/EditView",["hb!templates/details/DetailsView.tpl","plex/control/Dispatcher","plex/view/BaseView","plex/view/edit/EditAlbumView","plex/view/edit/EditArtistView","plex/view/edit/EditEpisodeView","plex/view/edit/EditMovieView","plex/view/edit/EditPhotoView","plex/view/edit/EditShowView","plex/view/edit/EditTrackView","plex/view/details/UnknownDetailsView","lazyload"],function(e,t,n,r,i,s,o,u,a,f,l){var c=n.extend({className:"container-fluid container-wide",editView:null,initialize:function(){var e=this.model.get("type");switch(e){case"album":this.editView=this.registerView(new r({model:this.model}));break;case"artist":this.editView=this.registerView(new i({model:this.model}));break;case"episode":this.editView=this.registerView(new s({model:this.model}));break;case"movie":this.editView=this.registerView(new o({model:this.model}));break;case"photo":this.editView=this.registerView(new u({model:this.model}));break;case"show":this.editView=this.registerView(new a({model:this.model}));break;case"track":this.editView=this.registerView(new f({model:this.model}));break;default:this.$el.addClass("fatal-container"),this.editView=this.registerView(new l({model:this.model}))}this.loadPosterDelay=_.debounce(this.loadPoster,500)},render:function(){return this.$el.html(e({serverURL:this.model.server.url(),serverObj:this.model.server,media:this.model.toJSON()})),this.$el.prepend(this.editView.render().el),this.loadPosterDelay(),this},loadPoster:function(){this.$(".poster").lazyload({threshold:100})}});return c}),define("hb!templates/players/VideoPlayerView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function m(e,t){var r="",i;return r+='\n	<video id="video-player" src="',f=n.url,i=f||e.url,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"url",{hash:{}})),r+=v(i)+'" width="860" height="485" autoplay controls></video>\n',r}function g(e,t){var r="",i,s;r+="\n	",f=n.showFlash,i=f||e.showFlash,s=n["if"],l=c.program(4,y,t),l.hash={},l.fn=l,l.inverse=c.noop,i=s.call(e,i,l);if(i||i===0)r+=i;return r+="\n",r}function y(e,t){return'\n		<div id="video-player"></div>\n	'}function b(e,t){var r="",i;return r+='\n		<h1><a href="#!/servers/',f=n.serverID,i=f||e.serverID,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"serverID",{hash:{}})),r+=v(i)+"/sections/",f=n.sectionID,i=f||e.sectionID,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"sectionID",{hash:{}})),r+=v(i)+"/details/",f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.grandparentRatingKey,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"media.grandparentRatingKey",{hash:{}})),r+=v(i)+'">',f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.grandparentTitle,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"media.grandparentTitle",{hash:{}})),r+=v(i)+'</a> <a class="secondary" href="#!/servers/',f=n.serverID,i=f||e.serverID,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"serverID",{hash:{}})),r+=v(i)+"/sections/",f=n.sectionID,i=f||e.sectionID,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"sectionID",{hash:{}})),r+=v(i)+"/details/",f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.ratingKey,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"media.ratingKey",{hash:{}})),r+=v(i)+'">',f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.title,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"media.title",{hash:{}})),r+=v(i)+"</a></h1>\n	",r}function w(e,t){var r="",i;return r+='\n		<h1><a href="#!/servers/',f=n.serverID,i=f||e.serverID,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"serverID",{hash:{}})),r+=v(i)+"/sections/",f=n.sectionID,i=f||e.sectionID,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"sectionID",{hash:{}})),r+=v(i)+"/details/",f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.ratingKey,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"media.ratingKey",{hash:{}})),r+=v(i)+'">',f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.title,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"media.title",{hash:{}})),r+=v(i)+"</a></h1>\n	",r}function E(e,t){var r="",i;return r+="\n				Season ",f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.parentIndex,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"media.parentIndex",{hash:{}})),r+=v(i)+" Episode ",f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.index,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"media.index",{hash:{}})),r+=v(i)+" &nbsp;&middot;&nbsp;\n			",r}function S(e,t){var r="",i,s;return r+="\n				",f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.originallyAvailableAt,f=n.formatDate,s=f||e.formatDate,typeof s===h?i=s.call(e,i,{hash:{}}):s===d?i=p.call(e,"formatDate",i,{hash:{}}):i=s,r+=v(i)+" &nbsp;&middot;&nbsp;\n			",r}function x(e,t){var r="",i,s;r+="\n				",f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.year,s=n["if"],l=c.program(15,T,t),l.hash={},l.fn=l,l.inverse=c.noop,i=s.call(e,i,l);if(i||i===0)r+=i;return r+="\n			",r}function T(e,t){var r="",i;return r+="\n					",f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.year,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"media.year",{hash:{}})),r+=v(i)+" &nbsp;&middot;&nbsp;\n				",r}function N(e,t){var r="",i,s;r+='\n				<span class="rating">',f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.rating,f=n.starRating,s=f||e.starRating,typeof s===h?i=s.call(e,i,{hash:{}}):s===d?i=p.call(e,"starRating",i,{hash:{}}):i=s;if(i||i===0)r+=i;return r+="</span>\n			",r}function C(e,t){var r="",i;return r+="\n			<h2>Season ",f=n.media,i=f||e.media,i=i===null||i===undefined||i===!1?i:i.parentIndex,typeof i===h?i=i.call(e,{hash:{}}):i===d&&(i=p.call(e,"media.parentIndex",{hash:{}})),r+=v(i)+"</h2>\n		",r}n=n||e.helpers;var s="",o,u,a,f,l,c=this,h="function",p=n.helperMissing,d=void 0,v=this.escapeExpression;f=n.showHTML5,o=f||t.showHTML5,u=n["if"],l=c.program(1,m,i),l.hash={},l.fn=l,l.inverse=c.program(3,g,i),o=u.call(t,o,l);if(o||o===0)s+=o;s+='\n\n<div class="video-details">\n	<a class="more-details-btn" href="#"><i class="icon-info-sign"></i> Details</a>\n	',f=n.media,o=f||t.media,o=o===null||o===undefined||o===!1?o:o.grandparentTitle,u=n["if"],l=c.program(6,b,i),l.hash={},l.fn=l,l.inverse=c.program(8,w,i),o=u.call(t,o,l);if(o||o===0)s+=o;s+='\n\n	<div class="video-more-details">\n		<div class="metadata">\n			',f=n.media,o=f||t.media,o=o===null||o===undefined||o===!1?o:o.parentIndex,u=n["if"],l=c.program(10,E,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;s+="\n\n			",f=n.media,o=f||t.media,o=o===null||o===undefined||o===!1?o:o.originallyAvailableAt,u=n["if"],l=c.program(12,S,i),l.hash={},l.fn=l,l.inverse=c.program(14,x,i),o=u.call(t,o,l);if(o||o===0)s+=o;s+="\n\n			",f=n.media,o=f||t.media,o=o===null||o===undefined||o===!1?o:o.duration,f=n.formatMinutes,u=f||t.formatMinutes,typeof u===h?o=u.call(t,o,{hash:{}}):u===d?o=p.call(t,"formatMinutes",o,{hash:{}}):o=u,s+=v(o)+"\n\n			",f=n.media,o=f||t.media,o=o===null||o===undefined||o===!1?o:o.rating,u=n["if"],l=c.program(17,N,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;s+='\n		</div>\n\n		<p class="summary">',o=700,f=n.media,u=f||t.media,u=u===null||u===undefined||u===!1?u:u.summary,f=n.truncate,a=f||t.truncate,typeof a===h?o=a.call(t,u,o,{hash:{}}):a===d?o=p.call(t,"truncate",u,o,{hash:{}}):o=a,s+=v(o)+"</p>\n\n		",f=n.media,o=f||t.media,o=o===null||o===undefined||o===!1?o:o.parentIndex,u=n["if"],l=c.program(19,C,i),l.hash={},l.fn=l,l.inverse=c.noop,o=u.call(t,o,l);if(o||o===0)s+=o;return s+="\n	</div>\n</div>\n",s})}),define("hb!templates/modals/ResumeModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a,f=this,l="function",c=n.helperMissing,h=void 0,p=this.escapeExpression;return s+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal">Ã</button>\n	<h3>Resume</h3>\n</div>\n\n<div class="modal-body">\n	<a class="offset" data-offset="',a=n.offset,o=a||t.offset,typeof o===l?o=o.call(t,{hash:{}}):o===h&&(o=c.call(t,"offset",{hash:{}})),s+=p(o)+'" href="#">Resume from ',a=n.offset,o=a||t.offset,a=n.formatDuration,u=a||t.formatDuration,typeof u===l?o=u.call(t,o,{hash:{}}):u===h?o=c.call(t,"formatDuration",o,{hash:{}}):o=u,s+=p(o)+'</a><br>\n	<a class="offset" data-offset="0" href="#">Start from beginning</a>\n</div>\n',s})}),define("plex/view/modals/ResumeModal",["hb!templates/modals/ResumeModal.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({className:"modal modal-small resume-modal fade",offset:0,events:{hidden:"onClose","click .offset":"onOffsetClick"},initialize:function(e){this.offset=e.offset},render:function(){return this.$el.html(e({offset:this.offset})).modal(),this},onClose:function(e){this.trigger("offset:select",0),t.trigger("destroy:modal",this)},onOffsetClick:function(e){e.preventDefault(),this.trigger("offset:select",$(e.target).data("offset")),this.$el.modal("hide")}});return r}),define("hb!templates/lists/media/items/EpisodeTileListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a,f,l,c,h=this,p="function",d=n.helperMissing,v=void 0,m=this.escapeExpression;return s+='<a class="card-container" href="#!/servers/',c=n.serverID,o=c||t.serverID,typeof o===p?o=o.call(t,{hash:{}}):o===v&&(o=d.call(t,"serverID",{hash:{}})),s+=m(o)+"/sections/",c=n.sectionID,o=c||t.sectionID,typeof o===p?o=o.call(t,{hash:{}}):o===v&&(o=d.call(t,"sectionID",{hash:{}})),s+=m(o)+"/player/",c=n.episode,o=c||t.episode,o=o===null||o===undefined||o===!1?o:o.ratingKey,typeof o===p?o=o.call(t,{hash:{}}):o===v&&(o=d.call(t,"episode.ratingKey",{hash:{}})),s+=m(o)+'" data-id="',c=n.episode,o=c||t.episode,o=o===null||o===undefined||o===!1?o:o.ratingKey,typeof o===p?o=o.call(t,{hash:{}}):o===v&&(o=d.call(t,"episode.ratingKey",{hash:{}})),s+=m(o)+'">\n	<img class="poster" data-original="',o=200,u=200,c=n.episode,a=c||t.episode,a=a===null||a===undefined||a===!1?a:a.thumb,c=n.serverObj,f=c||t.serverObj,c=n.transcodeImage,l=c||t.transcodeImage,typeof l===p?o=l.call(t,f,a,u,o,{hash:{}}):l===v?o=d.call(t,"transcodeImage",f,a,u,o,{hash:{}}):o=l,s+=m(o)+'" src="img/posters/poster_wide_medium.png">\n	<div class="card-overlay">\n		<h4>',o=36,c=n.episode,u=c||t.episode,u=u===null||u===undefined||u===!1?u:u.title,c=n.truncate,a=c||t.truncate,typeof a===p?o=a.call(t,u,o,{hash:{}}):a===v?o=d.call(t,"truncate",u,o,{hash:{}}):o=a,s+=m(o)+'</h4>\n\n		<p class="card-details">Episode ',c=n.episode,o=c||t.episode,o=o===null||o===undefined||o===!1?o:o.index,typeof o===p?o=o.call(t,{hash:{}}):o===v&&(o=d.call(t,"episode.index",{hash:{}})),s+=m(o)+"</p>\n	</div>\n</a>\n",s})}),define("plex/view/lists/media/items/EpisodeTileListItem",["hb!templates/lists/media/items/EpisodeTileListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",className:"episode",initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,sectionID:this.model.section.id,episode:this.model.toJSON()})),this}});return n}),define("plex/view/lists/media/EpisodeTileList",["plex/view/lists/BaseList","plex/view/lists/media/items/EpisodeTileListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"tile-list episode-tile-list",initialize:function(){this.setup(t),this.loadPosterThrottle=_.throttle(_.debounce(this.loadPoster,500),100),this.collection.fetch()},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(t){e.prototype.addItem.call(this,t),this.loadPosterThrottle()},loadPoster:function(){this.$(".poster").lazyload({threshold:100})}});return n});if(typeof jwplayer=="undefined"){var jwplayer=function(e){if(jwplayer.api)return jwplayer.api.selectPlayer(e)},$jw=jwplayer;jwplayer.version="5.10.2295 (Licensed version)",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(e){function t(t){if(!e.utils.exists(t))return;var n=t.indexOf("://"),r=t.indexOf("?");return n>0&&(r<0||r>n)}e.utils=function(){},e.utils.typeOf=function(e){var t=typeof e;return t==="object"&&(e?e instanceof Array&&(t="array"):t="null"),t},e.utils.extend=function(){var t=e.utils.extend.arguments;if(t.length>1){for(var n=1;n<t.length;n++)for(var r in t[n])t[0][r]=t[n][r];return t[0]}return null},e.utils.clone=function(t){var n,r=e.utils.clone.arguments;if(r.length==1)switch(e.utils.typeOf(r[0])){case"object":n={};for(var i in r[0])n[i]=e.utils.clone(r[0][i]);break;case"array":n=[];for(var i in r[0])n[i]=e.utils.clone(r[0][i]);break;default:return r[0]}return n},e.utils.extension=function(e){if(!e)return"";e=e.substring(e.lastIndexOf("/")+1,e.length),e=e.split("?")[0];if(e.lastIndexOf(".")>-1)return e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase();return},e.utils.html=function(e,t){e.innerHTML=t},e.utils.wrap=function(e,t){e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e)},e.utils.ajax=function(t,n,r){var i;window.XMLHttpRequest?i=new XMLHttpRequest:i=new ActiveXObject("Microsoft.XMLHTTP"),i.onreadystatechange=function(){if(i.readyState===4)if(i.status===200){if(n){if(!e.utils.exists(i.responseXML))try{if(window.DOMParser){var s=(new DOMParser).parseFromString(i.responseText,"text/xml");s&&(i=e.utils.extend({},i,{responseXML:s}))}else s=new ActiveXObject("Microsoft.XMLDOM"),s.async="false",s.loadXML(i.responseText),i=e.utils.extend({},i,{responseXML:s})}catch(o){r&&r(t)}n(i)}}else r&&r(t)};try{i.open("GET",t,!0),i.send(null)}catch(s){r&&r(t)}return i},e.utils.load=function(e,t,n){e.onreadystatechange=function(){e.readyState===4&&(e.status===200?t&&t():n&&n())}},e.utils.find=function(e,t){return e.getElementsByTagName(t)},e.utils.append=function(e,t){e.appendChild(t)},e.utils.isIE=function(){return typeof window.ActiveXObject!="undefined"},e.utils.userAgentMatch=function(e){var t=navigator.userAgent.toLowerCase();return t.match(e)!==null},e.utils.isIOS=function(){return e.utils.userAgentMatch(/iP(hone|ad|od)/i)},e.utils.isIPad=function(){return e.utils.userAgentMatch(/iPad/i)},e.utils.isIPod=function(){return e.utils.userAgentMatch(/iP(hone|od)/i)},e.utils.isAndroid=function(){return e.utils.userAgentMatch(/android/i)},e.utils.isLegacyAndroid=function(){return e.utils.userAgentMatch(/android 2.[012]/i)},e.utils.isBlackberry=function(){return e.utils.userAgentMatch(/blackberry/i)},e.utils.isMobile=function(){return e.utils.userAgentMatch(/(iP(hone|ad|od))|android/i)},e.utils.getFirstPlaylistItemFromConfig=function(e){var t={},n;return e.playlist&&e.playlist.length?n=e.playlist[0]:n=e,t.file=n.file,t.levels=n.levels,t.streamer=n.streamer,t.playlistfile=n.playlistfile,t.provider=n.provider,t.provider||(t.file&&(t.file.toLowerCase().indexOf("youtube.com")>-1||t.file.toLowerCase().indexOf("youtu.be")>-1)&&(t.provider="youtube"),t.streamer&&t.streamer.toLowerCase().indexOf("rtmp://")==0&&(t.provider="rtmp"),n.type&&(t.provider=n.type.toLowerCase())),t.provider=="audio"&&(t.provider="sound"),t},e.utils.getOuterHTML=function(e){if(e.outerHTML)return e.outerHTML;try{return(new XMLSerializer).serializeToString(e)}catch(t){return""}},e.utils.setOuterHTML=function(e,t){if(e.outerHTML)e.outerHTML=t;else{var n=document.createElement("div");n.innerHTML=t;var r=document.createRange();r.selectNodeContents(n);var i=r.extractContents();e.parentNode.insertBefore(i,e),e.parentNode.removeChild(e)}},e.utils.hasFlash=function(){if(typeof navigator.plugins!="undefined"&&typeof navigator.plugins["Shockwave Flash"]!="undefined")return!0;if(typeof window.ActiveXObject!="undefined")try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0}catch(e){}return!1},e.utils.getPluginName=function(e){return e.lastIndexOf("/")>=0&&(e=e.substring(e.lastIndexOf("/")+1,e.length)),e.lastIndexOf("-")>=0&&(e=e.substring(0,e.lastIndexOf("-"))),e.lastIndexOf(".swf")>=0&&(e=e.substring(0,e.lastIndexOf(".swf"))),e.lastIndexOf(".js")>=0&&(e=e.substring(0,e.lastIndexOf(".js"))),e},e.utils.getPluginVersion=function(e){return e.lastIndexOf("-")>=0?e.lastIndexOf(".js")>=0?e.substring(e.lastIndexOf("-")+1,e.lastIndexOf(".js")):e.lastIndexOf(".swf")>=0?e.substring(e.lastIndexOf("-")+1,e.lastIndexOf(".swf")):e.substring(e.lastIndexOf("-")+1):""},e.utils.getAbsolutePath=function(n,r){e.utils.exists(r)||(r=document.location.href);if(!e.utils.exists(n))return undefined;if(t(n))return n;var i=r.substring(0,r.indexOf("://")+3),s=r.substring(i.length,r.indexOf("/",i.length+1)),o;if(n.indexOf("/")===0)o=n.split("/");else{var u=r.split("?")[0];u=u.substring(i.length+s.length+1,u.lastIndexOf("/")),o=u.split("/").concat(n.split("/"))}var f=[];for(var l=0;l<o.length;l++){if(!o[l]||!e.utils.exists(o[l])||o[l]==".")continue;o[l]==".."?f.pop():f.push(o[l])}return i+s+"/"+f.join("/")},e.utils.pluginPathType={ABSOLUTE:"ABSOLUTE",RELATIVE:"RELATIVE",CDN:"CDN"},e.utils.getPluginPathType=function(t){if(typeof t!="string")return;t=t.split("?")[0];var n=t.indexOf("://");if(n>0)return e.utils.pluginPathType.ABSOLUTE;var r=t.indexOf("/"),i=e.utils.extension(t);return n<0&&r<0&&(!i||!isNaN(i))?e.utils.pluginPathType.CDN:e.utils.pluginPathType.RELATIVE},e.utils.mapEmpty=function(e){for(var t in e)return!1;return!0},e.utils.mapLength=function(e){var t=0;for(var n in e)t++;return t},e.utils.log=function(e,t){typeof console!="undefined"&&typeof console.log!="undefined"&&(t?console.log(e,t):console.log(e))},e.utils.css=function(t,n,r){if(e.utils.exists(t))for(var i in n)try{if(typeof n[i]=="undefined")continue;if(typeof n[i]=="number"&&i!="zIndex"&&i!="opacity"){if(isNaN(n[i]))continue;i.match(/color/i)?n[i]="#"+e.utils.strings.pad(n[i].toString(16),6):n[i]=Math.ceil(n[i])+"px"}t.style[i]=n[i]}catch(s){}},e.utils.isYouTube=function(e){return e.indexOf("youtube.com")>-1||e.indexOf("youtu.be")>-1},e.utils.transform=function(t,n,r,i,s){e.utils.exists(n)||(n=1),e.utils.exists(r)||(r=1),e.utils.exists(i)||(i=0),e.utils.exists(s)||(s=0);if(n==1&&r==1&&i==0&&s==0)t.style.webkitTransform="",t.style.MozTransform="",t.style.OTransform="";else{var o="scale("+n+","+r+") translate("+i+"px,"+s+"px)";t.style.webkitTransform=o,t.style.MozTransform=o,t.style.OTransform=o}},e.utils.stretch=function(t,n,r,i,s,o){if(typeof r=="undefined"||typeof i=="undefined"||typeof s=="undefined"||typeof o=="undefined")return;var u=r/s,a=i/o,f=0,l=0,c=!1,h={};n.parentElement&&(n.parentElement.style.overflow="hidden"),e.utils.transform(n);switch(t.toUpperCase()){case e.utils.stretching.NONE:h.width=s,h.height=o,h.top=(i-h.height)/2,h.left=(r-h.width)/2;break;case e.utils.stretching.UNIFORM:u>a?(h.width=s*a,h.height=o*a,h.width/r>.95&&(c=!0,u=Math.ceil(100*r/h.width)/100,a=1,h.width=r)):(h.width=s*u,h.height=o*u,h.height/i>.95&&(c=!0,u=1,a=Math.ceil(100*i/h.height)/100,h.height=i)),h.top=(i-h.height)/2,h.left=(r-h.width)/2;break;case e.utils.stretching.FILL:u>a?(h.width=s*u,h.height=o*u):(h.width=s*a,h.height=o*a),h.top=(i-h.height)/2,h.left=(r-h.width)/2;break;case e.utils.stretching.EXACTFIT:h.width=s,h.height=o;var p=Math.round(s/2*(1-1/u)),d=Math.round(o/2*(1-1/a));c=!0,h.top=h.left=0;break;default:}c&&e.utils.transform(n,u,a,p,d),e.utils.css(n,h)},e.utils.stretching={NONE:"NONE",FILL:"FILL",UNIFORM:"UNIFORM",EXACTFIT:"EXACTFIT"},e.utils.deepReplaceKeyName=function(t,n,r){switch(e.utils.typeOf(t)){case"array":for(var i=0;i<t.length;i++)t[i]=e.utils.deepReplaceKeyName(t[i],n,r);break;case"object":for(var s in t){var o,u;if(n instanceof Array&&r instanceof Array){if(n.length!=r.length)continue;o=n,u=r}else o=[n],u=[r];var a=s;for(var i=0;i<o.length;i++)a=a.replace(new RegExp(n[i],"g"),r[i]);t[a]=e.utils.deepReplaceKeyName(t[s],n,r),s!=a&&delete t[s]}}return t},e.utils.isInArray=function(e,t){if(!!e&&e instanceof Array){for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1}return!1},e.utils.exists=function(e){switch(typeof e){case"string":return e.length>0;case"object":return e!==null;case"undefined":return!1}return!0},e.utils.empty=function(e){if(typeof e.hasChildNodes=="function")while(e.hasChildNodes())e.removeChild(e.firstChild)},e.utils.parseDimension=function(e){return typeof e=="string"?e===""?0:e.lastIndexOf("%")>-1?e:parseInt(e.replace("px",""),10):e},e.utils.getDimensions=function(t){return t&&t.style?{x:e.utils.parseDimension(t.style.left),y:e.utils.parseDimension(t.style.top),width:e.utils.parseDimension(t.style.width),height:e.utils.parseDimension(t.style.height)}:{}},e.utils.getElementWidth=function(t){return t?t==document.body?e.utils.parentNode(t).clientWidth:t.clientWidth>0?t.clientWidth:t.style?e.utils.parseDimension(t.style.width):null:null},e.utils.getElementHeight=function(t){return t?t==document.body?e.utils.parentNode(t).clientHeight:t.clientHeight>0?t.clientHeight:t.style?e.utils.parseDimension(t.style.height):null:null},e.utils.timeFormat=function(e){return str="00:00",e>0&&(str=Math.floor(e/60)<10?"0"+Math.floor(e/60)+":":Math.floor(e/60)+":",str+=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60)),str},e.utils.useNativeFullscreen=function(){return navigator&&navigator.vendor&&navigator.vendor.indexOf("Apple")==0},e.utils.parentNode=function(e){return e?e.parentNode?e.parentNode:e.parentElement?e.parentElement:e:document.body},e.utils.getBoundingClientRect=function(e){return typeof e.getBoundingClientRect=="function"?e.getBoundingClientRect():{left:e.offsetLeft+document.body.scrollLeft,top:e.offsetTop+document.body.scrollTop,width:e.offsetWidth,height:e.offsetHeight}},e.utils.translateEventResponse=function(t,n){var r=e.utils.extend({},n);t==e.api.events.JWPLAYER_FULLSCREEN&&!r.fullscreen?(r.fullscreen=r.message=="true"?!0:!1,delete r.message):typeof r.data=="object"?(r=e.utils.extend(r,r.data),delete r.data):typeof r.metadata=="object"&&e.utils.deepReplaceKeyName(r.metadata,["__dot__","__spc__","__dsh__"],["."," ","-"]);var i=["position","duration","offset"];for(var s in i)r[i[s]]&&(r[i[s]]=Math.round(r[i[s]]*1e3)/1e3);return r},e.utils.saveCookie=function(e,t){document.cookie="jwplayer."+e+"="+t+"; path=/"},e.utils.getCookies=function(){var e={},t=document.cookie.split("; ");for(var n=0;n<t.length;n++){var r=t[n].split("=");r[0].indexOf("jwplayer.")==0&&(e[r[0].substring(9,r[0].length)]=r[1])}return e},e.utils.readCookie=function(t){return e.utils.getCookies()[t]}}(jwplayer),function(e){e.events=function(){},e.events.COMPLETE="COMPLETE",e.events.ERROR="ERROR"}(jwplayer),function(jwplayer){jwplayer.events.eventdispatcher=function(debug){var _debug=debug,_listeners,_globallisteners;this.resetEventListeners=function(){_listeners={},_globallisteners=[]},this.resetEventListeners(),this.addEventListener=function(type,listener,count){try{jwplayer.utils.exists(_listeners[type])||(_listeners[type]=[]),typeof listener=="string"&&eval("listener = "+listener),_listeners[type].push({listener:listener,count:count})}catch(err){jwplayer.utils.log("error",err)}return!1},this.removeEventListener=function(e,t){if(!_listeners[e])return;try{for(var n=0;n<_listeners[e].length;n++)if(_listeners[e][n].listener.toString()==t.toString()){_listeners[e].splice(n,1);break}}catch(r){jwplayer.utils.log("error",r)}return!1},this.addGlobalListener=function(listener,count){try{typeof listener=="string"&&eval("listener = "+listener),_globallisteners.push({listener:listener,count:count})}catch(err){jwplayer.utils.log("error",err)}return!1},this.removeGlobalListener=function(e){if(!e)return;try{for(var t=0;t<_globallisteners.length;t++)if(_globallisteners[t].listener.toString()==e.toString()){_globallisteners.splice(t,1);break}}catch(n){jwplayer.utils.log("error",n)}return!1},this.sendEvent=function(e,t){jwplayer.utils.exists(t)||(t={}),_debug&&jwplayer.utils.log(e,t);if(typeof _listeners[e]!="undefined")for(var n=0;n<_listeners[e].length;n++){try{_listeners[e][n].listener(t)}catch(r){jwplayer.utils.log("There was an error while handling a listener: "+r.toString(),_listeners[e][n].listener)}_listeners[e][n]&&(_listeners[e][n].count===1?delete _listeners[e][n]:_listeners[e][n].count>0&&(_listeners[e][n].count=_listeners[e][n].count-1))}for(var i=0;i<_globallisteners.length;i++){try{_globallisteners[i].listener(t)}catch(r){jwplayer.utils.log("There was an error while handling a listener: "+r.toString(),_globallisteners[i].listener)}_globallisteners[i]&&(_globallisteners[i].count===1?delete _globallisteners[i]:_globallisteners[i].count>0&&(_globallisteners[i].count=_globallisteners[i].count-1))}}}}(jwplayer),function(e){var t={};e.utils.animations=function(){},e.utils.animations.transform=function(e,t){e.style.webkitTransform=t,e.style.MozTransform=t,e.style.OTransform=t,e.style.msTransform=t},e.utils.animations.transformOrigin=function(e,t){e.style.webkitTransformOrigin=t,e.style.MozTransformOrigin=t,e.style.OTransformOrigin=t,e.style.msTransformOrigin=t},e.utils.animations.rotate=function(t,n){e.utils.animations.transform(t,["rotate(",n,"deg)"].join(""))},e.utils.cancelAnimation=function(e){delete t[e.id]},e.utils.fadeTo=function(n,r,i,s,o,u){if(t[n.id]!=u&&e.utils.exists(u))return;if(n.style.opacity==r)return;var f=(new Date).getTime();u>f&&setTimeout(function(){e.utils.fadeTo(n,r,i,s,0,u)},u-f),n.style.display=="none"&&(n.style.display="block"),e.utils.exists(s)||(s=n.style.opacity===""?1:n.style.opacity);if(n.style.opacity==r&&n.style.opacity!==""&&e.utils.exists(u)){r===0&&(n.style.display="none");return}e.utils.exists(u)||(u=f,t[n.id]=u),e.utils.exists(o)||(o=0);var l=i>0?(f-u)/(i*1e3):0;l=l>1?1:l;var c=r-s,h=s+l*c;h>1?h=1:h<0&&(h=0),n.style.opacity=h;if(o>0){t[n.id]=u+o*1e3,e.utils.fadeTo(n,r,i,s,0,t[n.id]);return}setTimeout(function(){e.utils.fadeTo(n,r,i,s,0,u)},10)}}(jwplayer),function(e){e.utils.arrays=function(){},e.utils.arrays.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return-1},e.utils.arrays.remove=function(t,n){var r=e.utils.arrays.indexOf(t,n);r>-1&&t.splice(r,1)}}(jwplayer),function(e){e.utils.extensionmap={"3gp":{html5:"video/3gpp",flash:"video"},"3gpp":{html5:"video/3gpp"},"3g2":{html5:"video/3gpp2",flash:"video"},"3gpp2":{html5:"video/3gpp2"},flv:{flash:"video"},f4a:{html5:"audio/mp4"},f4b:{html5:"audio/mp4",flash:"video"},f4v:{html5:"video/mp4",flash:"video"},mov:{html5:"video/quicktime",flash:"video"},m4a:{html5:"audio/mp4",flash:"video"},m4b:{html5:"audio/mp4"},m4p:{html5:"audio/mp4"},m4v:{html5:"video/mp4",flash:"video"},mp4:{html5:"video/mp4",flash:"video"},rbs:{flash:"sound"},aac:{html5:"audio/aac",flash:"video"},mp3:{html5:"audio/mp3",flash:"sound"},ogg:{html5:"audio/ogg"},oga:{html5:"audio/ogg"},ogv:{html5:"video/ogg"},webm:{html5:"video/webm"},m3u8:{html5:"audio/x-mpegurl"},gif:{flash:"image"},jpeg:{flash:"image"},jpg:{flash:"image"},swf:{flash:"image"},png:{flash:"image"},wav:{html5:"audio/x-wav"}}}(jwplayer),function(e){function r(n,r){return e.utils.exists(r)?e.utils.extend(r,t[n]):r=t[n],r}function i(t,i){if(n[t.tagName.toLowerCase()]&&!e.utils.exists(i))return n[t.tagName.toLowerCase()](t);i=r("element",i);var s={};for(var o in i)if(o!="length"){var u=t.getAttribute(o);e.utils.exists(u)&&(s[i[o]]=u)}var a=t.style["#background-color"];return a&&a!="transparent"&&a!="rgba(0, 0, 0, 0)"&&(s.screencolor=a),s}function s(t,n){n=r("media",n);var s=[],u=e.utils.selectors("source",t);for(var f in u)isNaN(f)||s.push(o(u[f]));var l=i(t,n);return e.utils.exists(l.file)&&(s[0]={file:l.file}),l.levels=s,l}function o(e,t){t=r("source",t);var n=i(e,t);return n.width=n.width?n.width:0,n.bitrate=n.bitrate?n.bitrate:0,n}function u(e,t){t=r("video",t);var n=s(e,t);return n}e.utils.mediaparser=function(){};var t={element:{width:"width",height:"height",id:"id","class":"className",name:"name"},media:{src:"file",preload:"preload",autoplay:"autostart",loop:"repeat",controls:"controls"},source:{src:"file",type:"type",media:"media","data-jw-width":"width","data-jw-bitrate":"bitrate"},video:{poster:"image"}},n={};e.utils.mediaparser.parseMedia=function(e){return i(e)},n.media=s,n.audio=s,n.source=o,n.video=u}(jwplayer),function(e){e.utils.loaderstatus={NEW:"NEW",LOADING:"LOADING",ERROR:"ERROR",COMPLETE:"COMPLETE"},e.utils.scriptloader=function(t){var n=e.utils.loaderstatus.NEW,r=new e.events.eventdispatcher;e.utils.extend(this,r),this.load=function(){if(n==e.utils.loaderstatus.NEW){n=e.utils.loaderstatus.LOADING;var i=document.createElement("script");i.onload=function(t){n=e.utils.loaderstatus.COMPLETE,r.sendEvent(e.events.COMPLETE)},i.onerror=function(t){n=e.utils.loaderstatus.ERROR,r.sendEvent(e.events.ERROR)},i.onreadystatechange=function(){if(i.readyState=="loaded"||i.readyState=="complete")n=e.utils.loaderstatus.COMPLETE,r.sendEvent(e.events.COMPLETE)},document.getElementsByTagName("head")[0].appendChild(i),i.src=t}},this.getStatus=function(){return n}}}(jwplayer),function(e){e.utils.selectors=function(t,n){e.utils.exists(n)||(n=document),t=e.utils.strings.trim(t);var r=t.charAt(0);if(r=="#")return n.getElementById(t.substr(1));if(r==".")return n.getElementsByClassName?n.getElementsByClassName(t.substr(1)):e.utils.selectors.getElementsByTagAndClass("*",t.substr(1));if(t.indexOf(".")>0){var i=t.split(".");return e.utils.selectors.getElementsByTagAndClass(i[0],i[1])}return n.getElementsByTagName(t)},e.utils.selectors.getElementsByTagAndClass=function(t,n,r){var i=[];e.utils.exists(r)||(r=document);var s=r.getElementsByTagName(t);for(var o=0;o<s.length;o++)if(e.utils.exists(s[o].className)){var u=s[o].className.split(" ");for(var f=0;f<u.length;f++)u[f]==n&&i.push(s[o])}return i}}(jwplayer),function(e){e.utils.strings=function(){},e.utils.strings.trim=function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},e.utils.strings.pad=function(e,t,n){n||(n="0");while(e.length<t)e=n+e;return e},e.utils.strings.serialize=function(e){return e==null?null:e=="true"?!0:e=="false"?!1:isNaN(Number(e))||e.length>5||e.length==0?e:Number(e)},e.utils.strings.seconds=function(e){e=e.replace(",",".");var t=e.split(":"),n=0;return e.substr(-1)=="s"?n=Number(e.substr(0,e.length-1)):e.substr(-1)=="m"?n=Number(e.substr(0,e.length-1))*60:e.substr(-1)=="h"?n=Number(e.substr(0,e.length-1))*3600:t.length>1?(n=Number(t[t.length-1]),n+=Number(t[t.length-2])*60,t.length==3&&(n+=Number(t[t.length-3])*3600)):n=Number(e),n},e.utils.strings.xmlAttribute=function(e,t){for(var n=0;n<e.attributes.length;n++)if(e.attributes[n].name&&e.attributes[n].name.toLowerCase()==t.toLowerCase())return e.attributes[n].value.toString();return""},e.utils.strings.jsonToString=function(t){var n=n||{};if(n&&n.stringify)return n.stringify(t);var r=typeof t;if(r=="object"&&t!==null){var i=[],s=t&&t.constructor==Array;for(var o in t){var u=t[o];switch(typeof u){case"string":u='"'+u.replace(/"/g,'\\"')+'"';break;case"object":e.utils.exists(u)&&(u=e.utils.strings.jsonToString(u))}s?typeof u!="function"&&i.push(String(u)):typeof u!="function"&&i.push('"'+o+'":'+String(u))}return s?"["+String(i)+"]":"{"+String(i)+"}"}if(r!="string")return String(t);t='"'+t.replace(/"/g,'\\"')+'"'}}(jwplayer),function(e){function n(e){var n=["true","false","t","f"];return n.toString().indexOf(e.toLowerCase().replace(" ",""))>=0?"boolean":t.test(e)?"color":!isNaN(parseInt(e,10))&&parseInt(e,10).toString().length==e.length?"integer":!isNaN(parseFloat(e))&&parseFloat(e).toString().length==e.length?"float":"string"}function r(t,n){if(!e.utils.exists(n))return t;switch(n){case"color":if(t.length>0)return i(t);return null;case"integer":return parseInt(t,10);case"float":return parseFloat(t);case"boolean":if(t.toLowerCase()=="true")return!0;if(t=="1")return!0;return!1}return t}function i(e){switch(e.toLowerCase()){case"blue":return parseInt("0000FF",16);case"green":return parseInt("00FF00",16);case"red":return parseInt("FF0000",16);case"cyan":return parseInt("00FFFF",16);case"magenta":return parseInt("FF00FF",16);case"yellow":return parseInt("FFFF00",16);case"black":return parseInt("000000",16);case"white":return parseInt("FFFFFF",16);default:return e=e.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2"),e.length==3&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)}return parseInt("000000",16)}var t=new RegExp(/^(#|0x)[0-9a-fA-F]{3,6}/);e.utils.typechecker=function(t,i){return i=e.utils.exists(i)?i:n(t),r(t,i)}}(jwplayer),function(e){e.utils.parsers=function(){},e.utils.parsers.localName=function(e){return e?e.localName?e.localName:e.baseName?e.baseName:"":""},e.utils.parsers.textContent=function(e){return e?e.textContent?e.textContent:e.text?e.text:"":""}}(jwplayer),function(e){e.utils.parsers.jwparser=function(){},e.utils.parsers.jwparser.PREFIX="jwplayer",e.utils.parsers.jwparser.parseEntry=function(t,n){for(var r=0;r<t.childNodes.length;r++)t.childNodes[r].prefix==e.utils.parsers.jwparser.PREFIX&&(n[e.utils.parsers.localName(t.childNodes[r])]=e.utils.strings.serialize(e.utils.parsers.textContent(t.childNodes[r])),e.utils.parsers.localName(t.childNodes[r])=="file"&&n.levels&&delete n.levels),!n.file&&String(n.link).toLowerCase().indexOf("youtube")>-1&&(n.file=n.link);return n},e.utils.parsers.jwparser.getProvider=function(t){if(t.type)return t.type;if(t.file.indexOf("youtube.com/w")>-1||t.file.indexOf("youtube.com/v")>-1||t.file.indexOf("youtu.be/")>-1)return"youtube";if(t.streamer&&t.streamer.indexOf("rtmp")==0)return"rtmp";if(t.streamer&&t.streamer.indexOf("http")==0)return"http";var n=e.utils.strings.extension(t.file);return extensions.hasOwnProperty(n)?extensions[n]:""}}(jwplayer),function(e){e.utils.parsers.mediaparser=function(){},e.utils.parsers.mediaparser.PREFIX="media",e.utils.parsers.mediaparser.parseGroup=function(t,n){var r=!1;for(var i=0;i<t.childNodes.length;i++)if(t.childNodes[i].prefix==e.utils.parsers.mediaparser.PREFIX){if(!e.utils.parsers.localName(t.childNodes[i]))continue;switch(e.utils.parsers.localName(t.childNodes[i]).toLowerCase()){case"content":r||(n.file=e.utils.strings.xmlAttribute(t.childNodes[i],"url")),e.utils.strings.xmlAttribute(t.childNodes[i],"duration")&&(n.duration=e.utils.strings.seconds(e.utils.strings.xmlAttribute(t.childNodes[i],"duration"))),e.utils.strings.xmlAttribute(t.childNodes[i],"start")&&(n.start=e.utils.strings.seconds(e.utils.strings.xmlAttribute(t.childNodes[i],"start"))),t.childNodes[i].childNodes&&t.childNodes[i].childNodes.length>0&&(n=e.utils.parsers.mediaparser.parseGroup(t.childNodes[i],n));if(e.utils.strings.xmlAttribute(t.childNodes[i],"width")||e.utils.strings.xmlAttribute(t.childNodes[i],"bitrate")||e.utils.strings.xmlAttribute(t.childNodes[i],"url"))n.levels||(n.levels=[]),n.levels.push({width:e.utils.strings.xmlAttribute(t.childNodes[i],"width"),bitrate:e.utils.strings.xmlAttribute(t.childNodes[i],"bitrate"),file:e.utils.strings.xmlAttribute(t.childNodes[i],"url")});break;case"title":n.title=e.utils.parsers.textContent(t.childNodes[i]);break;case"description":n.description=e.utils.parsers.textContent(t.childNodes[i]);break;case"keywords":n.tags=e.utils.parsers.textContent(t.childNodes[i]);break;case"thumbnail":n.image=e.utils.strings.xmlAttribute(t.childNodes[i],"url");break;case"credit":n.author=e.utils.parsers.textContent(t.childNodes[i]);break;case"player":var s=t.childNodes[i].url;if(s.indexOf("youtube.com")>=0||s.indexOf("youtu.be")>=0)r=!0,n.file=e.utils.strings.xmlAttribute(t.childNodes[i],"url");break;case"group":e.utils.parsers.mediaparser.parseGroup(t.childNodes[i],n)}}return n}}(jwplayer),function(e){function t(t){var n={};for(var r=0;r<t.childNodes.length;r++){if(!e.utils.parsers.localName(t.childNodes[r]))continue;switch(e.utils.parsers.localName(t.childNodes[r]).toLowerCase()){case"enclosure":n.file=e.utils.strings.xmlAttribute(t.childNodes[r],"url");break;case"title":n.title=e.utils.parsers.textContent(t.childNodes[r]);break;case"pubdate":n.date=e.utils.parsers.textContent(t.childNodes[r]);break;case"description":n.description=e.utils.parsers.textContent(t.childNodes[r]);break;case"link":n.link=e.utils.parsers.textContent(t.childNodes[r]);break;case"category":n.tags?n.tags+=e.utils.parsers.textContent(t.childNodes[r]):n.tags=e.utils.parsers.textContent(t.childNodes[r])}}return n=e.utils.parsers.mediaparser.parseGroup(t,n),n=e.utils.parsers.jwparser.parseEntry(t,n),new e.html5.playlistitem(n)}e.utils.parsers.rssparser=function(){},e.utils.parsers.rssparser.parse=function(n){var r=[];for(var i=0;i<n.childNodes.length;i++)if(e.utils.parsers.localName(n.childNodes[i]).toLowerCase()=="channel")for(var s=0;s<n.childNodes[i].childNodes.length;s++)e.utils.parsers.localName(n.childNodes[i].childNodes[s]).toLowerCase()=="item"&&r.push(t(n.childNodes[i].childNodes[s]));return r}}(jwplayer),function(e){var t={},n={};e.plugins=function(){},e.plugins.loadPlugins=function(r,i){return n[r]=new e.plugins.pluginloader(new e.plugins.model(t),i),n[r]},e.plugins.registerPlugin=function(r,i,s){var o=e.utils.getPluginName(r);if(t[o])t[o].registerPlugin(r,i,s);else{e.utils.log("A plugin ("+r+") was registered with the player that was not loaded. Please check your configuration.");for(var u in n)n[u].pluginFailed()}}}(jwplayer),function(e){e.plugins.model=function(t){this.addPlugin=function(n){var r=e.utils.getPluginName(n);return t[r]||(t[r]=new e.plugins.plugin(n)),t[r]}}}(jwplayer),function(e){e.plugins.pluginmodes={FLASH:"FLASH",JAVASCRIPT:"JAVASCRIPT",HYBRID:"HYBRID"},e.plugins.plugin=function(t){function f(){switch(e.utils.getPluginPathType(t)){case e.utils.pluginPathType.ABSOLUTE:return t;case e.utils.pluginPathType.RELATIVE:return e.utils.getAbsolutePath(t,window.location.href);case e.utils.pluginPathType.CDN:var r=e.utils.getPluginName(t),i=e.utils.getPluginVersion(t),s=window.location.href.indexOf("https://")==0?n.replace("http://","https://secure"):n;return s+"/"+e.version.split(".")[0]+"/"+r+"/"+r+(i!==""?"-"+i:"")+".js"}}function l(t){o=setTimeout(function(){r=e.utils.loaderstatus.COMPLETE,u.sendEvent(e.events.COMPLETE)},1e3)}function c(t){r=e.utils.loaderstatus.ERROR,u.sendEvent(e.events.ERROR)}var n="http://lp.longtailvideo.com",r=e.utils.loaderstatus.NEW,i,s,o,u=new e.events.eventdispatcher;e.utils.extend(this,u),this.load=function(){if(r==e.utils.loaderstatus.NEW){if(t.lastIndexOf(".swf")>0){i=t,r=e.utils.loaderstatus.COMPLETE,u.sendEvent(e.events.COMPLETE);return}r=e.utils.loaderstatus.LOADING;var n=new e.utils.scriptloader(f());n.addEventListener(e.events.COMPLETE,l),n.addEventListener(e.events.ERROR,c),n.load()}},this.registerPlugin=function(t,n,f){o&&(clearTimeout(o),o=undefined),n&&f?(i=f,s=n):typeof n=="string"?i=n:typeof n=="function"?s=n:!n&&!f&&(i=t),r=e.utils.loaderstatus.COMPLETE,u.sendEvent(e.events.COMPLETE)},this.getStatus=function(){return r},this.getPluginName=function(){return e.utils.getPluginName(t)},this.getFlashPath=function(){if(i)switch(e.utils.getPluginPathType(i)){case e.utils.pluginPathType.ABSOLUTE:return i;case e.utils.pluginPathType.RELATIVE:if(t.lastIndexOf(".swf")>0)return e.utils.getAbsolutePath(i,window.location.href);return e.utils.getAbsolutePath(i,f());case e.utils.pluginPathType.CDN:if(i.indexOf("-")>-1)return i+"h";return i+"-h"}return null},this.getJS=function(){return s},this.getPluginmode=function(){if(typeof i!="undefined"&&typeof s!="undefined")return e.plugins.pluginmodes.HYBRID;if(typeof i!="undefined")return e.plugins.pluginmodes.FLASH;if(typeof s!="undefined")return e.plugins.pluginmodes.JAVASCRIPT},this.getNewInstance=function(e,t,n){return new s(e,t,n)},this.getURL=function(){return t}}}(jwplayer),function(e){e.plugins.pluginloader=function(t,n){function f(){o||(o=!0,i=e.utils.loaderstatus.COMPLETE,u.sendEvent(e.events.COMPLETE))}function l(){if(!o){var t=0;for(plugin in r){var n=r[plugin].getStatus();(n==e.utils.loaderstatus.LOADING||n==e.utils.loaderstatus.NEW)&&t++}t==0&&f()}}var r={},i=e.utils.loaderstatus.NEW,s=!1,o=!1,u=new e.events.eventdispatcher;e.utils.extend(this,u),this.setupPlugins=function(e,t,n){var i={length:0,plugins:{}},s={length:0,plugins:{}};for(var o in r){var u=r[o].getPluginName();r[o].getFlashPath()&&(i.plugins[r[o].getFlashPath()]=t.plugins[o],i.plugins[r[o].getFlashPath()].pluginmode=r[o].getPluginmode(),i.length++);if(r[o].getJS()){var a=document.createElement("div");a.id=e.id+"_"+u,a.style.position="absolute",a.style.zIndex=s.length+10,s.plugins[u]=r[o].getNewInstance(e,t.plugins[o],a),s.length++,typeof s.plugins[u].resize!="undefined"&&(e.onReady(n(s.plugins[u],a,!0)),e.onResize(n(s.plugins[u],a)))}}return e.plugins=s.plugins,i},this.load=function(){i=e.utils.loaderstatus.LOADING,s=!0;for(var o in n)e.utils.exists(o)&&(r[o]=t.addPlugin(o),r[o].addEventListener(e.events.COMPLETE,l),r[o].addEventListener(e.events.ERROR,l));for(o in r)r[o].load();s=!1,l()},this.pluginFailed=function(){f()},this.getStatus=function(){return i}}}(jwplayer),function(e){var t=[];e.api=function(t){function p(e,t){return function(n,r,i,s){if(e.renderingMode=="flash"||e.renderingMode=="html5"){var u;r?(h[n]=r,u="jwplayer('"+e.id+"').callback('"+n+"')"):!r&&h[n]&&delete h[n],o.jwDockSetButton(n,u,i,s)}return t}}function d(t){a=[],e.utils.getOuterHTML(t.container)!=l&&e.api.destroyPlayer(t.id,l)}function v(e){return function(t){var n=t.newstate,i=t.oldstate;if(n==e){var s=r[n];if(s)for(var o=0;o<s.length;o++)typeof s[o]=="function"&&s[o].call(this,{oldstate:i,newstate:n})}}}function m(e,t){return function(n){if(e==n.component){var r=i[e][t];if(r)for(var s=0;s<r.length;s++)typeof r[s]=="function"&&r[s].call(this,n)}}}function g(e,t,n){var r=[];t||(t=0),n||(n=e.length-1);for(var i=t;i<=n;i++)r.push(e[i]);return r}this.container=t,this.id=t.id;var n={},r={},i={},s=[],o=undefined,u=!1,a=[],f=undefined,l=e.utils.getOuterHTML(t),c={},h={};return this.getBuffer=function(){return this.callInternal("jwGetBuffer")},this.getContainer=function(){return this.container},this.getPlugin=function(t){var n=this,r={};return t=="dock"?e.utils.extend(r,{setButton:p(n,r),show:function(){return n.callInternal("jwDockShow"),r},hide:function(){return n.callInternal("jwDockHide"),r},onShow:function(t){return n.componentListener("dock",e.api.events.JWPLAYER_COMPONENT_SHOW,t),r},onHide:function(t){return n.componentListener("dock",e.api.events.JWPLAYER_COMPONENT_HIDE,t),r}}):t=="controlbar"?e.utils.extend(r,{show:function(){return n.callInternal("jwControlbarShow"),r},hide:function(){return n.callInternal("jwControlbarHide"),r},onShow:function(t){return n.componentListener("controlbar",e.api.events.JWPLAYER_COMPONENT_SHOW,t),r},onHide:function(t){return n.componentListener("controlbar",e.api.events.JWPLAYER_COMPONENT_HIDE,t),r}}):t=="display"?e.utils.extend(r,{show:function(){return n.callInternal("jwDisplayShow"),r},hide:function(){return n.callInternal("jwDisplayHide"),r},onShow:function(t){return n.componentListener("display",e.api.events.JWPLAYER_COMPONENT_SHOW,t),r},onHide:function(t){return n.componentListener("display",e.api.events.JWPLAYER_COMPONENT_HIDE,t),r}}):this.plugins[t]},this.callback=function(e){if(h[e])return h[e]()},this.getDuration=function(){return this.callInternal("jwGetDuration")},this.getFullscreen=function(){return this.callInternal("jwGetFullscreen")},this.getHeight=function(){return this.callInternal("jwGetHeight")},this.getLockState=function(){return this.callInternal("jwGetLockState")},this.getMeta=function(){return this.getItemMeta()},this.getMute=function(){return this.callInternal("jwGetMute")},this.getPlaylist=function(){var t=this.callInternal("jwGetPlaylist");this.renderingMode=="flash"&&e.utils.deepReplaceKeyName(t,["__dot__","__spc__","__dsh__"],["."," ","-"]);for(var n=0;n<t.length;n++)e.utils.exists(t[n].index)||(t[n].index=n);return t},this.getPlaylistItem=function(t){return e.utils.exists(t)||(t=this.getCurrentItem()),this.getPlaylist()[t]},this.getPosition=function(){return this.callInternal("jwGetPosition")},this.getRenderingMode=function(){return this.renderingMode},this.getState=function(){return this.callInternal("jwGetState")},this.getVolume=function(){return this.callInternal("jwGetVolume")},this.getWidth=function(){return this.callInternal("jwGetWidth")},this.setFullscreen=function(t){return e.utils.exists(t)?this.callInternal("jwSetFullscreen",t):this.callInternal("jwSetFullscreen",!this.callInternal("jwGetFullscreen")),this},this.setMute=function(t){return e.utils.exists(t)?this.callInternal("jwSetMute",t):this.callInternal("jwSetMute",!this.callInternal("jwGetMute")),this},this.lock=function(){return this},this.unlock=function(){return this},this.load=function(e){return this.callInternal("jwLoad",e),this},this.playlistItem=function(e){return this.callInternal("jwPlaylistItem",e),this},this.playlistPrev=function(){return this.callInternal("jwPlaylistPrev"),this},this.playlistNext=function(){return this.callInternal("jwPlaylistNext"),this},this.resize=function(e,t){if(this.renderingMode=="html5")o.jwResize(e,t);else{this.container.width=e,this.container.height=t;var n=document.getElementById(this.id+"_wrapper");n&&(n.style.width=e+"px",n.style.height=t+"px")}return this},this.play=function(t){return typeof t=="undefined"?(t=this.getState(),t==e.api.events.state.PLAYING||t==e.api.events.state.BUFFERING?this.callInternal("jwPause"):this.callInternal("jwPlay")):this.callInternal("jwPlay",t),this},this.pause=function(t){return typeof t=="undefined"?(t=this.getState(),t==e.api.events.state.PLAYING||t==e.api.events.state.BUFFERING?this.callInternal("jwPause"):this.callInternal("jwPlay")):this.callInternal("jwPause",t),this},this.stop=function(){return this.callInternal("jwStop"),this},this.seek=function(e){return this.callInternal("jwSeek",e),this},this.setVolume=function(e){return this.callInternal("jwSetVolume",e),this},this.loadInstream=function(t,n){return f=new e.api.instream(this,o,t,n),f},this.onBufferChange=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_BUFFER,t)},this.onBufferFull=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_BUFFER_FULL,t)},this.onError=function(t){return this.eventListener(e.api.events.JWPLAYER_ERROR,t)},this.onFullscreen=function(t){return this.eventListener(e.api.events.JWPLAYER_FULLSCREEN,t)},this.onMeta=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_META,t)},this.onMute=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_MUTE,t)},this.onPlaylist=function(t){return this.eventListener(e.api.events.JWPLAYER_PLAYLIST_LOADED,t)},this.onPlaylistItem=function(t){return this.eventListener(e.api.events.JWPLAYER_PLAYLIST_ITEM,t)},this.onReady=function(t){return this.eventListener(e.api.events.API_READY,t)},this.onResize=function(t){return this.eventListener(e.api.events.JWPLAYER_RESIZE,t)},this.onComplete=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_COMPLETE,t)},this.onSeek=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_SEEK,t)},this.onTime=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_TIME,t)},this.onVolume=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_VOLUME,t)},this.onBeforePlay=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_BEFOREPLAY,t)},this.onBeforeComplete=function(t){return this.eventListener(e.api.events.JWPLAYER_MEDIA_BEFORECOMPLETE,t)},this.onBuffer=function(t){return this.stateListener(e.api.events.state.BUFFERING,t)},this.onPause=function(t){return this.stateListener(e.api.events.state.PAUSED,t)},this.onPlay=function(t){return this.stateListener(e.api.events.state.PLAYING,t)},this.onIdle=function(t){return this.stateListener(e.api.events.state.IDLE,t)},this.remove=function(){if(!u)throw"Cannot call remove() before player is ready";d(this)},this.setup=function(t){if(e.embed){var n=this.id;d(this);var r=e(n);return r.config=t,new e.embed(r)}return this},this.registerPlugin=function(t,n,r){e.plugins.registerPlugin(t,n,r)},this.setPlayer=function(e,t){o=e,this.renderingMode=t},this.stateListener=function(t,n){return r[t]||(r[t]=[],this.eventListener(e.api.events.JWPLAYER_PLAYER_STATE,v(t))),r[t].push(n),this},this.detachMedia=function(){if(this.renderingMode=="html5")return this.callInternal("jwDetachMedia")},this.attachMedia=function(){if(this.renderingMode=="html5")return this.callInternal("jwAttachMedia")},this.componentListener=function(e,t,n){return i[e]||(i[e]={}),i[e][t]||(i[e][t]=[],this.eventListener(t,m(e,t))),i[e][t].push(n),this},this.addInternalListener=function(t,n){try{t.jwAddEventListener(n,'function(dat) { jwplayer("'+this.id+'").dispatchEvent("'+n+'", dat); }')}catch(r){e.utils.log("Could not add internal listener")}},this.eventListener=function(e,t){return n[e]||(n[e]=[],o&&u&&this.addInternalListener(o,e)),n[e].push(t),this},this.dispatchEvent=function(e){if(n[e]){var t=_utils.translateEventResponse(e,arguments[1]);for(var r=0;r<n[e].length;r++)typeof n[e][r]=="function"&&n[e][r].call(this,t)}},this.dispatchInstreamEvent=function(e){f&&f.dispatchEvent(e,arguments)},this.callInternal=function(){if(u){var e=arguments[0],t=[];for(var n=1;n<arguments.length;n++)t.push(arguments[n]);return typeof o!="undefined"&&typeof o[e]=="function"?t.length==2?o[e](t[0],t[1]):t.length==1?o[e](t[0]):o[e]():null}a.push(arguments)},this.playerReady=function(t){u=!0,o||this.setPlayer(document.getElementById(t.id)),this.container=document.getElementById(this.id);for(var r in n)this.addInternalListener(o,r);this.eventListener(e.api.events.JWPLAYER_PLAYLIST_ITEM,function(e){c={}}),this.eventListener(e.api.events.JWPLAYER_MEDIA_META,function(t){e.utils.extend(c,t.metadata)}),this.dispatchEvent(e.api.events.API_READY);while(a.length>0)this.callInternal.apply(this,a.shift())},this.getItemMeta=function(){return c},this.getCurrentItem=function(){return this.callInternal("jwGetPlaylistIndex")},this},e.api.selectPlayer=function(t){var n;e.utils.exists(t)||(t=0),t.nodeType?n=t:typeof t=="string"&&(n=document.getElementById(t));if(n){var r=e.api.playerById(n.id);return r?r:e.api.addPlayer(new e.api(n))}return typeof t=="number"?e.getPlayers()[t]:null},e.api.events={API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed"},e.api.events.state={BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},e.api.playerById=function(e){for(var n=0;n<t.length;n++)if(t[n].id==e)return t[n];return null},e.api.addPlayer=function(e){for(var n=0;n<t.length;n++)if(t[n]==e)return e;return t.push(e),e},e.api.destroyPlayer=function(n,r){var i=-1;for(var s=0;s<t.length;s++)if(t[s].id==n){i=s;continue}if(i>=0){try{t[i].callInternal("jwDestroy")}catch(o){}var u=document.getElementById(t[i].id);document.getElementById(t[i].id+"_wrapper")&&(u=document.getElementById(t[i].id+"_wrapper"));if(u)if(r)e.utils.setOuterHTML(u,r);else{var f=document.createElement("div"),l=u.id;u.id.indexOf("_wrapper")==u.id.length-8&&(newID=u.id.substring(0,u.id.length-8)),f.setAttribute("id",l),u.parentNode.replaceChild(f,u)}t.splice(i,1)}return null},e.getPlayers=function(){return t.slice(0)}}(jwplayer);var _userPlayerReady=typeof playerReady=="function"?playerReady:undefined;playerReady=function(e){var t=jwplayer.api.playerById(e.id);t?t.playerReady(e):jwplayer.api.selectPlayer(e.id).playerReady(e),_userPlayerReady&&_userPlayerReady.call(this,e)},function(e){e.api.instream=function(t,n,r,i){function h(){s.callInternal("jwLoadInstream",r,i)}function p(e,t){o.jwInstreamAddEventListener(t,'function(dat) { jwplayer("'+s.id+'").dispatchInstreamEvent("'+t+'", dat); }')}function d(e,t){return l[e]||(l[e]=[],p(o,e)),l[e].push(t),this}function v(t,n){return c[t]||(c[t]=[],d(e.api.events.JWPLAYER_PLAYER_STATE,m(t))),c[t].push(n),this}function m(e){return function(t){var n=t.newstate,r=t.oldstate;if(n==e){var i=c[n];if(i)for(var s=0;s<i.length;s++)typeof i[s]=="function"&&i[s].call(this,{oldstate:r,newstate:n,type:t.type})}}}var s=t,o=n,u=r,f=i,l={},c={};this.dispatchEvent=function(e,t){if(l[e]){var n=_utils.translateEventResponse(e,t[1]);for(var r=0;r<l[e].length;r++)typeof l[e][r]=="function"&&l[e][r].call(this,n)}},this.onError=function(t){return d(e.api.events.JWPLAYER_ERROR,t)},this.onFullscreen=function(t){return d(e.api.events.JWPLAYER_FULLSCREEN,t)},this.onMeta=function(t){return d(e.api.events.JWPLAYER_MEDIA_META,t)},this.onMute=function(t){return d(e.api.events.JWPLAYER_MEDIA_MUTE,t)},this.onComplete=function(t){return d(e.api.events.JWPLAYER_MEDIA_COMPLETE,t)},this.onSeek=function(t){return d(e.api.events.JWPLAYER_MEDIA_SEEK,t)},this.onTime=function(t){return d(e.api.events.JWPLAYER_MEDIA_TIME,t)},this.onVolume=function(t){return d(e.api.events.JWPLAYER_MEDIA_VOLUME,t)},this.onBuffer=function(t){return v(e.api.events.state.BUFFERING,t)},this.onPause=function(t){return v(e.api.events.state.PAUSED,t)},this.onPlay=function(t){return v(e.api.events.state.PLAYING,t)},this.onIdle=function(t){return v(e.api.events.state.IDLE,t)},this.onInstreamClick=function(t){return d(e.api.events.JWPLAYER_INSTREAM_CLICK,t)},this.onInstreamDestroyed=function(t){return d(e.api.events.JWPLAYER_INSTREAM_DESTROYED,t)},this.play=function(e){o.jwInstreamPlay(e)},this.pause=function(e){o.jwInstreamPause(e)},this.seek=function(e){o.jwInstreamSeek(e)},this.destroy=function(){o.jwInstreamDestroy()},this.getState=function(){return o.jwInstreamGetState()},this.getDuration=function(){return o.jwInstreamGetDuration()},this.getPosition=function(){return o.jwInstreamGetPosition()},h()}}(jwplayer),function(e){function n(){if(!document.body)return setTimeout(n,15);var r=t.selectors.getElementsByTagAndClass("video","jwplayer");for(var i=0;i<r.length;i++){var s=r[i];s.id==""&&(s.id="jwplayer_"+Math.round(Math.random()*1e5)),e(s.id).setup({})}}var t=e.utils;e.embed=function(n){function u(e,t){for(var n in t)typeof e[n]=="function"&&e[n].call(e,t[n])}function f(){if(o.getStatus()==t.loaderstatus.COMPLETE){for(var r=0;r<s.modes.length;r++)if(s.modes[r].type&&e.embed[s.modes[r].type]){var i=s.modes[r].config,f=s;if(i){f=t.extend(t.clone(s),i);var l=["file","levels","playlist"];for(var p=0;p<l.length;p++){var v=l[p];if(t.exists(i[v]))for(var m=0;m<l.length;m++)if(m!=p){var g=l[m];t.exists(f[g])&&!t.exists(i[g])&&delete f[g]}}}var y=new e.embed[s.modes[r].type](document.getElementById(n.id),s.modes[r],f,o,n);if(y.supportsConfig())return y.embed(),u(n,s.events),n}t.log("No suitable players found"),new e.embed.logo(t.extend({hide:!0},s.components.logo),"none",n.id)}}var r={width:400,height:300,components:{controlbar:{position:"over"}}},i=t.mediaparser.parseMedia(n.container),s=new e.embed.config(t.extend(r,i,n.config),this),o=e.plugins.loadPlugins(n.id,s.plugins);return o.addEventListener(e.events.COMPLETE,f),o.addEventListener(e.events.ERROR,f),o.load(),n},n()}(jwplayer),function(e){function n(e){var n=[{type:"flash",src:e?e:"/jwplayer/player.swf"},{type:"html5"},{type:"download"}];return t.isAndroid()&&(n[0]=n.splice(1,1,n[0])[0]),n}function i(e){var t=e.toLowerCase(),n=["left","right","top","bottom"];for(var r=0;r<n.length;r++)if(t==n[r])return!0;return!1}function s(e){var t=!1;return t=e instanceof Array||typeof e=="object"&&!e.position&&!e.size,t}function o(e){if(typeof e=="string")if(parseInt(e).toString()==e||e.toLowerCase().indexOf("px")>-1)return parseInt(e);return e}function a(e){var n={};switch(t.typeOf(e.plugins)){case"object":for(var r in e.plugins)n[t.getPluginName(r)]=r;break;case"string":var i=e.plugins.split(",");for(var s=0;s<i.length;s++)n[t.getPluginName(i[s])]=i[s]}return n}function f(e,n,r,i){t.typeOf(e[n])!="object"&&(e[n]={});var s=e[n][r];t.typeOf(s)!="object"&&(e[n][r]=s={});if(i)if(n=="plugins"){var o=t.getPluginName(r);s[i]=e[o+"."+i],delete e[o+"."+i]}else s[i]=e[r+"."+i],delete e[r+"."+i]}var t=e.utils,r={players:"modes",autoplay:"autostart"},u=["playlist","dock","controlbar","logo","display"];e.embed.deserialize=function(e){var n=a(e);for(var r in n)f(e,"plugins",n[r]);for(var i in e)if(i.indexOf(".")>-1){var s=i.split("."),o=s[0],i=s[1];t.isInArray(u,o)?f(e,"components",o,i):n[o]&&f(e,"plugins",n[o],i)}return e},e.embed.config=function(i,a){var f=t.extend({},i),l;s(f.playlist)&&(l=f.playlist,delete f.playlist),f=e.embed.deserialize(f),f.height=o(f.height),f.width=o(f.width);if(typeof f.plugins=="string"){var p=f.plugins.split(",");typeof f.plugins!="object"&&(f.plugins={});for(var d=0;d<p.length;d++){var v=t.getPluginName(p[d]);typeof f[v]=="object"?(f.plugins[p[d]]=f[v],delete f[v]):f.plugins[p[d]]={}}}for(var m=0;m<u.length;m++){var y=u[m];t.exists(f[y])&&(typeof f[y]!="object"?(f.components[y]||(f.components[y]={}),y=="logo"?f.components[y].file=f[y]:f.components[y].position=f[y],delete f[y]):(f.components[y]||(f.components[y]={}),t.extend(f.components[y],f[y]),delete f[y])),typeof f[y+"size"]!="undefined"&&(f.components[y]||(f.components[y]={}),f.components[y].size=f[y+"size"],delete f[y+"size"])}typeof f.icons!="undefined"&&(f.components.display||(f.components.display={}),f.components.display.icons=f.icons,delete f.icons);for(var b in r)f[b]&&(f[r[b]]||(f[r[b]]=f[b]),delete f[b]);var w;return f.flashplayer&&!f.modes?(w=n(f.flashplayer),delete f.flashplayer):f.modes?(typeof f.modes=="string"?w=n(f.modes):f.modes instanceof Array?w=f.modes:typeof f.modes=="object"&&f.modes.type&&(w=[f.modes]),delete f.modes):w=n(),f.modes=w,l&&(f.playlist=l),f}}(jwplayer),function(e){e.embed.download=function(t,n,r,i,s){function o(t,n,r){if(r)return!1;var i=["image","sound","youtube","http"];if(n&&i.toString().indexOf(n)>-1)return!0;if(!n||n&&n=="video"){var s=e.utils.extension(t);if(s&&e.utils.extensionmap[s])return!0}return!1}this.embed=function(){function g(e){_imageWidth=i.display_image.naturalWidth,_imageHeight=i.display_image.naturalHeight,y()}function y(){e.utils.stretch(e.utils.stretching.UNIFORM,i.display_image,o,u,_imageWidth,_imageHeight)}var n=e.utils.extend({},r),i={},o=r.width?r.width:480;typeof o!="number"&&(o=parseInt(o,10));var u=r.height?r.height:320;typeof u!="number"&&(u=parseInt(u,10));var l,h,p,d={};r.playlist&&r.playlist.length?(d.file=r.playlist[0].file,h=r.playlist[0].image,d.levels=r.playlist[0].levels):(d.file=r.file,h=r.image,d.levels=r.levels),d.file?l=d.file:d.levels&&d.levels.length&&(l=d.levels[0].file),p=l?"pointer":"auto";var v={display:{style:{cursor:p,width:o,height:u,backgroundColor:"#000",position:"relative",textDecoration:"none",border:"none",display:"block"}},display_icon:{style:{cursor:p,position:"absolute",display:l?"block":"none",top:0,left:0,border:0,margin:0,padding:0,zIndex:3,width:50,height:50,backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALdJREFUeNrs18ENgjAYhmFouDOCcQJGcARHgE10BDcgTOIosAGwQOuPwaQeuFRi2p/3Sb6EC5L3QCxZBgAAAOCorLW1zMn65TrlkH4NcV7QNcUQt7Gn7KIhxA+qNIR81spOGkL8oFJDyLJRdosqKDDkK+iX5+d7huzwM40xptMQMkjIOeRGo+VkEVvIPfTGIpKASfYIfT9iCHkHrBEzf4gcUQ56aEzuGK/mw0rHpy4AAACAf3kJMACBxjAQNRckhwAAAABJRU5ErkJggg==)"}},display_iconBackground:{style:{cursor:p,position:"absolute",display:l?"block":"none",top:(u-50)/2,left:(o-50)/2,border:0,width:50,height:50,margin:0,padding:0,zIndex:2,backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEpJREFUeNrszwENADAIA7DhX8ENoBMZ5KR10EryckCJiIiIiIiIiIiIiIiIiIiIiIh8GmkRERERERERERERERERERERERGRHSPAAPlXH1phYpYaAAAAAElFTkSuQmCC)"}},display_image:{style:{width:o,height:u,display:h?"block":"none",position:"absolute",cursor:p,left:0,top:0,margin:0,padding:0,textDecoration:"none",zIndex:1,border:"none"}}},m=function(n,r,i){var s=document.createElement(n);return i?s.id=i:s.id=t.id+"_jwplayer_"+r,e.utils.css(s,v[r].style),s};i.display=m("a","display",t.id),l&&i.display.setAttribute("href",e.utils.getAbsolutePath(l)),i.display_image=m("img","display_image"),i.display_image.setAttribute("alt","Click to download..."),h&&i.display_image.setAttribute("src",e.utils.getAbsolutePath(h)),i.display_icon=m("div","display_icon"),i.display_iconBackground=m("div","display_iconBackground"),i.display.appendChild(i.display_image),i.display_iconBackground.appendChild(i.display_icon),i.display.appendChild(i.display_iconBackground),_css=e.utils.css,_hide=function(e){_css(e,{display:"none"})},i.display_image.onerror=function(e){_hide(i.display_image)},i.display_image.onload=g,t.parentNode.replaceChild(i.display,t);var w=r.plugins&&r.plugins.logo?r.plugins.logo:{};i.display.appendChild(new e.embed.logo(r.components.logo,"download",t.id)),s.container=document.getElementById(s.id),s.setPlayer(i.display,"download")},this.supportsConfig=function(){if(!r)return!0;var t=e.utils.getFirstPlaylistItemFromConfig(r);if(typeof t.file=="undefined"&&typeof t.levels=="undefined")return!0;if(t.file)return o(t.file,t.provider,t.playlistfile);if(t.levels&&t.levels.length)for(var n=0;n<t.levels.length;n++)if(t.levels[n].file&&o(t.levels[n].file,t.provider,t.playlistfile))return!0}}}(jwplayer),function(e){e.embed.flash=function(t,n,r,i,s){function o(e,t,n){var r=document.createElement("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function u(t,n,r){return function(i){r&&document.getElementById(s.id+"_wrapper").appendChild(n);var o=document.getElementById(s.id).getPluginConfig("display");t.resize(o.width,o.height);var u={left:o.x,top:o.y};e.utils.css(n,u)}}function f(e){if(!e)return{};var t={};for(var n in e){var r=e[n];for(var i in r)t[n+"."+i]=r[i]}return t}function l(e,t){if(e[t]){var n=e[t];for(var r in n){var i=n[r];if(typeof i=="string")e[r]||(e[r]=i);else for(var s in i)e[r+"."+s]||(e[r+"."+s]=i[s])}delete e[t]}}function c(t){if(!t)return{};var n={},r=[];for(var i in t){var s=e.utils.getPluginName(i),o=t[i];r.push(i);for(var u in o)n[s+"."+u]=o[u]}return n.plugins=r.join(","),n}function h(t){var n=t.netstreambasepath?"":"netstreambasepath="+encodeURIComponent(window.location.href.split("#")[0])+"&";for(var r in t)typeof t[r]=="object"?n+=r+"="+encodeURIComponent("[[JSON]]"+e.utils.strings.jsonToString(t[r]))+"&":n+=r+"="+encodeURIComponent(t[r])+"&";return n.substring(0,n.length-1)}this.embed=function(){r.id=s.id;var f,p=e.utils.extend({},r),d=p.width,v=p.height;t.id+"_wrapper"==t.parentNode.id?f=document.getElementById(t.id+"_wrapper"):(f=document.createElement("div"),f.id=t.id+"_wrapper",e.utils.wrap(t,f),e.utils.css(f,{position:"relative",width:d,height:v}));var y=i.setupPlugins(s,p,u);y.length>0?e.utils.extend(p,c(y.plugins)):delete p.plugins;var w=["height","width","modes","events"];for(var E=0;E<w.length;E++)delete p[w[E]];var S="opaque";p.wmode&&(S=p.wmode),l(p,"components"),l(p,"providers"),typeof p["dock.position"]!="undefined"&&p["dock.position"].toString().toLowerCase()=="false"&&(p.dock=p["dock.position"],delete p["dock.position"]);var x=e.utils.getCookies();for(var T in x)typeof p[T]=="undefined"&&(p[T]=x[T]);var N="#000000",C;if(e.utils.isIE()){var L='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" bgcolor="'+N+'" width="100%" height="100%" id="'+t.id+'" name="'+t.id+'" tabindex=0"">';L+='<param name="movie" value="'+n.src+'">',L+='<param name="allowfullscreen" value="true">',L+='<param name="allowscriptaccess" value="always">',L+='<param name="seamlesstabbing" value="true">',L+='<param name="wmode" value="'+S+'">',L+='<param name="flashvars" value="'+h(p)+'">',L+="</object>",e.utils.setOuterHTML(t,L),C=document.getElementById(t.id)}else{var A=document.createElement("object");A.setAttribute("type","application/x-shockwave-flash"),A.setAttribute("data",n.src),A.setAttribute("width","100%"),A.setAttribute("height","100%"),A.setAttribute("bgcolor","#000000"),A.setAttribute("id",t.id),A.setAttribute("name",t.id),A.setAttribute("tabindex",0),o(A,"allowfullscreen","true"),o(A,"allowscriptaccess","always"),o(A,"seamlesstabbing","true"),o(A,"wmode",S),o(A,"flashvars",h(p)),t.parentNode.replaceChild(A,t),C=A}s.container=C,s.setPlayer(C,"flash")},this.supportsConfig=function(){if(e.utils.hasFlash()){if(!r)return!0;var t=e.utils.getFirstPlaylistItemFromConfig(r);if(typeof t.file=="undefined"&&typeof t.levels=="undefined")return!0;if(t.file)return flashCanPlay(t.file,t.provider);if(t.levels&&t.levels.length)for(var n=0;n<t.levels.length;n++)if(t.levels[n].file&&flashCanPlay(t.levels[n].file,t.provider))return!0}return!1},flashCanPlay=function(t,n){var r=["video","http","sound","image"];if(n&&r.toString().indexOf(n)<0)return!0;var i=e.utils.extension(t);return i?e.utils.exists(e.utils.extensionmap[i])&&!e.utils.exists(e.utils.extensionmap[i].flash)?!1:!0:!0}}}(jwplayer),function(e){e.embed.html5=function(t,n,r,i,s){function o(e,n,r){return function(i){var s=document.getElementById(t.id+"_displayarea");r&&s.appendChild(n),e.resize(s.clientWidth,s.clientHeight),n.left=s.style.left,n.top=s.style.top}}this.embed=function(){if(!e.html5)return null;i.setupPlugins(s,r,o),t.innerHTML="";var n=e.utils.extend({screencolor:"0x000000"},r),u=["plugins","modes","events"];for(var l=0;l<u.length;l++)delete n[u[l]];n.levels&&!n.sources&&(n.sources=r.levels),n.skin&&n.skin.toLowerCase().indexOf(".zip")>0&&(n.skin=n.skin.replace(/\.zip/i,".xml"));var h=new(e.html5(t).setup)(n);s.container=document.getElementById(s.id),s.setPlayer(h,"html5")},this.supportsConfig=function(){if(!!e.vid.canPlayType){if(!r)return!0;var t=e.utils.getFirstPlaylistItemFromConfig(r);if(typeof t.file=="undefined"&&typeof t.levels=="undefined")return!0;if(t.file)return html5CanPlay(e.vid,t.file,t.provider,t.playlistfile);if(t.levels&&t.levels.length)for(var n=0;n<t.levels.length;n++)if(t.levels[n].file&&html5CanPlay(e.vid,t.levels[n].file,t.provider,t.playlistfile))return!0}return!1},html5CanPlay=function(t,n,r,i){if(i)return!1;if(r&&r=="youtube")return!0;if(r&&r!="video"&&r!="http"&&r!="sound")return!1;if(navigator.userAgent.match(/BlackBerry/i)!==null)return!1;var s=e.utils.extension(n);return!e.utils.exists(s)||!e.utils.exists(e.utils.extensionmap[s])?!0:e.utils.exists(e.utils.extensionmap[s].html5)?e.utils.isLegacyAndroid()&&s.match(/m4v|mp4/)?!0:browserCanPlay(t,e.utils.extensionmap[s].html5):!1},browserCanPlay=function(e,t){return t?e.canPlayType(t)?!0:t=="audio/mp3"&&navigator.userAgent.match(/safari/i)?e.canPlayType("audio/mpeg"):!1:!0}}}(jwplayer),function(e){e.embed.logo=function(t,n,r){function u(){f(),c(),h()}function f(){if(i.prefix){var n=e.version.split(/\W/).splice(0,2).join("/");i.prefix.indexOf(n)<0&&(i.prefix+=n+"/")}o=e.utils.extend({},i,t)}function l(){var e={border:"none",textDecoration:"none",position:"absolute",cursor:"pointer",zIndex:10};e.display=o.hide?"none":"block";var t=o.position.toLowerCase().split("-");for(var n in t)e[t[n]]=o.margin;return e}function c(){s=document.createElement("img"),s.id=r+"_jwplayer_logo",s.style.display="none",s.onload=function(e){_css(s,l()),d()};if(!o.file)return;o.file.indexOf("http://")===0?s.src=o.file:s.src=o.prefix+o.file}function h(){o.link?(s.onmouseover=v,s.onmouseout=d,s.onclick=p):this.mouseEnabled=!1}function p(e){typeof e!="undefined"&&(e.preventDefault(),e.stopPropagation()),o.link&&window.open(o.link,o.linktarget);return}function d(e){o.link&&(s.style.opacity=o.out);return}function v(e){o.hide&&(s.style.opacity=o.over);return}var i={prefix:"http://l.longtailvideo.com/"+n+"/",file:"",link:"",linktarget:"_top",margin:8,out:.5,over:1,timeout:5,hide:!1,position:"bottom-left"};_css=e.utils.css;var s,o;u();if(!o.file)return;return s}}(jwplayer),function(e){e.html5=function(t){var n=t;return this.setup=function(t){return e.utils.extend(this,new e.html5.api(n,t)),this},this}}(jwplayer),function(e){var t=e.utils,n=t.css,r=t.isIOS();e.html5.view=function(i,s,o){function L(){function e(){return u.skin.getComponentSettings("display")&&u.skin.getComponentSettings("display").backgroundcolor?u.skin.getComponentSettings("display").backgroundcolor:parseInt("000000",16)}h=document.createElement("div"),h.id=f.id,h.className=f.className,_videowrapper=document.createElement("div"),_videowrapper.id=h.id+"_video_wrapper",f.id=h.id+"_video",n(h,{position:"relative",height:l.height,width:l.width,padding:0,backgroundColor:e(),zIndex:0}),n(f,{width:"100%",height:"100%",top:0,left:0,zIndex:1,margin:"auto",display:"block"}),n(_videowrapper,{overflow:"hidden",position:"absolute",top:0,left:0,bottom:0,right:0}),t.wrap(f,h),t.wrap(f,_videowrapper),m=document.createElement("div"),m.id=h.id+"_displayarea",h.appendChild(m),_instreamArea=document.createElement("div"),_instreamArea.id=h.id+"_instreamarea",n(_instreamArea,{overflow:"hidden",position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:100,background:"000000",display:"none"}),h.appendChild(_instreamArea)}function A(){for(var e=0;e<l.plugins.order.length;e++){var n=l.plugins.order[e];t.exists(l.plugins.object[n].getDisplayElement)&&(l.plugins.object[n].height=t.parseDimension(l.plugins.object[n].getDisplayElement().style.height),l.plugins.object[n].width=t.parseDimension(l.plugins.object[n].getDisplayElement().style.width),l.plugins.config[n].currentPosition=l.plugins.config[n].position)}_()}function O(e){S=l.fullscreen}function M(t){if(C)return;switch(t.newstate){case e.api.events.state.PLAYING:l.getMedia()&&l.getMedia().hasChrome()&&(m.style.display="none");break;default:m.style.display="block"}q()}function _(e){var n=l.getMedia()?l.getMedia().getDisplayElement():null;if(t.exists(n)){w!=n&&(w&&w.parentNode&&w.parentNode.replaceChild(n,w),w=n);for(var r=0;r<l.plugins.order.length;r++){var i=l.plugins.order[r];t.exists(l.plugins.object[i].getDisplayElement)&&(l.plugins.config[i].currentPosition=l.plugins.config[i].position)}}P(l.width,l.height)}function D(t){switch(t.keyCode){case 27:u.jwGetFullscreen()&&u.jwSetFullscreen(!1);break;case 32:u.jwGetState()!=e.api.events.state.IDLE&&u.jwGetState()!=e.api.events.state.PAUSED?u.jwPause():u.jwPlay()}}function P(e,i){if(h.style.display=="none")return;var s=[].concat(l.plugins.order);s.reverse(),g=s.length+2;if(S&&$())try{l.fullscreen&&!l.getMedia().getDisplayElement().webkitDisplayingFullscreen&&(l.fullscreen=!1)}catch(o){}if(!l.fullscreen){p=e,v=i,typeof e=="string"&&e.indexOf("%")>0?p=t.getElementWidth(t.parentNode(h))*parseInt(e.replace("%"),"")/100:p=e,typeof i=="string"&&i.indexOf("%")>0?v=t.getElementHeight(t.parentNode(h))*parseInt(i.replace("%"),"")/100:v=i;var u={top:0,bottom:0,left:0,right:0,width:p,height:v,position:"absolute"};n(m,u);var a={},f;try{f=l.plugins.object.display.getDisplayElement()}catch(o){}f&&(a.width=t.parseDimension(f.style.width),a.height=t.parseDimension(f.style.height));var y=t.extend({},u,a,{zIndex:_instreamArea.style.zIndex,display:_instreamArea.style.display});n(_instreamArea,y),n(h,{height:v,width:p});var w=B(j,s);if(w.length>0){g+=w.length;var E=w.indexOf("playlist"),N=w.indexOf("controlbar");E>=0&&N>=0&&(w[E]=w.splice(N,1,w[E])[0]),B(F,w,!0)}x=t.getElementWidth(m),T=t.getElementHeight(m)}else!$()&&!r&&B(I,s,!0);q()}function B(r,i,s){H=0;var o=[];for(var u=0;u<i.length;u++){var f=i[u];if(t.exists(l.plugins.object[f].getDisplayElement))if(l.plugins.config[f].currentPosition!=e.html5.view.positions.NONE){var c=r(f,g--);if(!c)o.push(f);else{var h=c.width,p=c.height;s&&(delete c.width,delete c.height),n(l.plugins.object[f].getDisplayElement(),c),l.plugins.object[f].resize(h,p)}}else n(l.plugins.object[f].getDisplayElement(),{display:"none"})}return o}function j(e,n){if(t.exists(l.plugins.object[e].getDisplayElement)&&l.plugins.config[e].position&&V(l.plugins.config[e].position)){t.exists(l.plugins.object[e].getDisplayElement().parentNode)||h.appendChild(l.plugins.object[e].getDisplayElement());var r=R(e);return r.zIndex=n,r}return!1}function F(e,n){return t.exists(l.plugins.object[e].getDisplayElement().parentNode)||m.appendChild(l.plugins.object[e].getDisplayElement()),{position:"absolute",width:t.getElementWidth(m)-t.parseDimension(m.style.right),height:t.getElementHeight(m)-t.parseDimension(m.style.bottom),zIndex:n}}function I(e,t){return{position:"fixed",width:l.width,height:l.height,zIndex:t}}function V(t){return[e.html5.view.positions.TOP,e.html5.view.positions.RIGHT,e.html5.view.positions.BOTTOM,e.html5.view.positions.LEFT].toString().indexOf(t.toUpperCase())>-1}function $(){return u.jwGetState()!=e.api.events.state.IDLE&&!E&&l.getMedia()&&l.getMedia().getDisplayElement()&&l.getMedia().getDisplayElement().webkitSupportsFullscreen&&t.useNativeFullscreen()?!0:!1}var u=i,f=s,l=o,h,p,v,m,g,y,w,E=!1,S=!1,x,T,N,C,k;this.setup=function(){l&&l.getMedia()&&(f=l.getMedia().getDisplayElement()),L(),A(),u.jwAddEventListener(e.api.events.JWPLAYER_PLAYER_STATE,M),u.jwAddEventListener(e.api.events.JWPLAYER_MEDIA_LOADED,_),u.jwAddEventListener(e.api.events.JWPLAYER_MEDIA_BEFOREPLAY,O),u.jwAddEventListener(e.api.events.JWPLAYER_MEDIA_META,function(e){q()});var n;t.exists(window.onresize)&&(n=window.onresize),window.onresize=function(e){if(t.exists(n))try{n(e)}catch(r){}if(u.jwGetFullscreen()){if(!$()){var i=t.getBoundingClientRect(document.body);l.width=Math.abs(i.left)+Math.abs(i.right),l.height=window.innerHeight,P(l.width,l.height)}}else P(l.width,l.height)}};var H,q=this.resizeMedia=function(){m.style.position="absolute";var i=l.getMedia()?l.getMedia().getDisplayElement():k;if(!i)return;if(i&&i.tagName.toLowerCase()=="video"){if(!i.videoWidth||!i.videoHeight){i.style.width=m.style.width,i.style.height=m.style.height;return}i.style.position="absolute",t.fadeTo(i,1,.25),i.parentNode&&(i.parentNode.style.left=m.style.left,i.parentNode.style.top=m.style.top);if(l.fullscreen&&u.jwGetStretching()==e.utils.stretching.EXACTFIT&&!t.isMobile()){var s=document.createElement("div");t.stretch(e.utils.stretching.UNIFORM,s,t.getElementWidth(m),t.getElementHeight(m),x,T),t.stretch(e.utils.stretching.EXACTFIT,i,t.parseDimension(s.style.width),t.parseDimension(s.style.height),i.videoWidth?i.videoWidth:400,i.videoHeight?i.videoHeight:300),n(i,{left:s.style.left,top:s.style.top})}else r||t.stretch(u.jwGetStretching(),i,t.getElementWidth(m),t.getElementHeight(m),i.videoWidth?i.videoWidth:400,i.videoHeight?i.videoHeight:300)}else{var o=l.plugins.object.display.getDisplayElement();o?l.getMedia().resize(t.parseDimension(o.style.width),t.parseDimension(o.style.height)):l.getMedia().resize(t.parseDimension(m.style.width),t.parseDimension(m.style.height))}},R=this.getComponentPosition=function(n){var r={position:"absolute",margin:0,padding:0,top:null},i=l.plugins.config[n].currentPosition.toLowerCase();switch(i.toUpperCase()){case e.html5.view.positions.TOP:r.top=t.parseDimension(m.style.top),r.left=t.parseDimension(m.style.left),r.width=t.getElementWidth(m)-t.parseDimension(m.style.left)-t.parseDimension(m.style.right),r.height=l.plugins.object[n].height,m.style[i]=t.parseDimension(m.style[i])+l.plugins.object[n].height+"px",m.style.height=t.getElementHeight(m)-r.height+"px";break;case e.html5.view.positions.RIGHT:r.top=t.parseDimension(m.style.top),r.right=t.parseDimension(m.style.right),r.width=l.plugins.object[n].width,r.height=t.getElementHeight(m)-t.parseDimension(m.style.top)-t.parseDimension(m.style.bottom),m.style.width=t.getElementWidth(m)-r.width+"px";break;case e.html5.view.positions.BOTTOM:r.left=t.parseDimension(m.style.left),r.width=t.getElementWidth(m)-t.parseDimension(m.style.left)-t.parseDimension(m.style.right),r.height=l.plugins.object[n].height,r.bottom=t.parseDimension(m.style.bottom+H),H+=r.height,m.style.height=t.getElementHeight(m)-r.height+"px";break;case e.html5.view.positions.LEFT:r.top=t.parseDimension(m.style.top),r.left=t.parseDimension(m.style.left),r.width=l.plugins.object[n].width,r.height=t.getElementHeight(m)-t.parseDimension(m.style.top)-t.parseDimension(m.style.bottom),m.style[i]=t.parseDimension(m.style[i])+l.plugins.object[n].width+"px",m.style.width=t.getElementWidth(m)-r.width+"px";break;default:}return r};this.resize=P;var U,z,W,X=this.fullscreen=function(e){if(r)return;var i;try{i=l.getMedia().getDisplayElement()}catch(s){}e&&(z=l.width,W=l.height);var o={position:"fixed",width:"100%",height:"100%",top:0,left:0,zIndex:2147483e3},u={position:"relative",height:z,width:W,zIndex:0};if($()&&i&&i.webkitSupportsFullscreen){if(e&&!i.webkitDisplayingFullscreen)try{n(i,o),t.transform(i),U=m.style.display,m.style.display="none",i.webkitEnterFullscreen()}catch(a){}else if(!e){n(i,u),q();if(i.webkitDisplayingFullscreen)try{i.webkitExitFullscreen()}catch(a){}m.style.display=U}E=!1}else{if(e){document.onkeydown=D,clearInterval(y);var f=t.getBoundingClientRect(document.body);l.width=Math.abs(f.left)+Math.abs(f.right),l.height=window.innerHeight,n(h,o),o.zIndex=1,l.getMedia()&&l.getMedia().getDisplayElement()&&n(l.getMedia().getDisplayElement(),o),o.zIndex=2,n(m,o),E=!0}else document.onkeydown="",l.width=p,l.height=v,n(h,u),E=!1;P(l.width,l.height)}};this.setupInstream=function(e,n){t.css(_instreamArea,{display:"block",position:"absolute"}),m.style.display="none",_instreamArea.appendChild(e),k=n,C=!0};var J=this.destroyInstream=function(){_instreamArea.style.display="none",_instreamArea.innerHTML="",m.style.display="block",k=null,C=!1,P(l.width,l.height)}},e.html5.view.positions={TOP:"TOP",RIGHT:"RIGHT",BOTTOM:"BOTTOM",LEFT:"LEFT",OVER:"OVER",NONE:"NONE"}}(jwplayer),function(e){var t={backgroundcolor:"",margin:10,font:"Arial,sans-serif",fontsize:10,fontcolor:parseInt("000000",16),fontstyle:"normal",fontweight:"bold",buttoncolor:parseInt("ffffff",16),position:e.html5.view.positions.BOTTOM,idlehide:!1,hideplaylistcontrols:!1,forcenextprev:!1,layout:{left:{position:"left",elements:[{name:"play",type:"button"},{name:"divider",type:"divider"},{name:"prev",type:"button"},{name:"divider",type:"divider"},{name:"next",type:"button"},{name:"divider",type:"divider"},{name:"elapsed",type:"text"}]},center:{position:"center",elements:[{name:"time",type:"slider"}]},right:{position:"right",elements:[{name:"duration",type:"text"},{name:"blank",type:"button"},{name:"divider",type:"divider"},{name:"mute",type:"button"},{name:"volume",type:"slider"},{name:"divider",type:"divider"},{name:"fullscreen",type:"button"}]}}};_utils=e.utils,_css=_utils.css,_hide=function(e){_css(e,{display:"none"})},_show=function(e){_css(e,{display:"block"})},e.html5.controlbar=function(n,r){function M(){return x||(x=i.skin.getSkinElement("controlbar","background"),x||(x={width:0,height:0,src:null})),x}function _(){f=0,l=0,u=0;if(!w){var e={height:M().height,backgroundColor:s.backgroundcolor};o=document.createElement("div"),o.id=i.id+"_jwplayer_controlbar",_css(o,e)}var t=i.skin.getSkinElement("controlbar","capLeft"),n=i.skin.getSkinElement("controlbar","capRight");t&&$("capLeft","left",!1,o),U("background",o,{position:"absolute",height:M().height,left:t?t.width:0,zIndex:0},"img"),M().src&&(y.background.src=M().src),U("elements",o,{position:"relative",height:M().height,zIndex:1}),n&&$("capRight","right",!1,o)}function D(){var e=["timeSlider","volumeSlider","timeSliderRail","volumeSliderRail"];for(var t in e){var n=e[t];typeof y[n]!="undefined"&&(E[n]=_utils.getBoundingClientRect(y[n]))}}function H(t){if(T)return;clearTimeout(N);if(s.position==e.html5.view.positions.OVER||i.jwGetFullscreen())switch(i.jwGetState()){case e.api.events.state.PAUSED:case e.api.events.state.IDLE:o&&o.style.opacity<1&&(!s.idlehide||_utils.exists(t))&&(P=!1,setTimeout(function(){P||j()},100)),s.idlehide&&(N=setTimeout(function(){B()},2e3));break;default:P=!0,t&&j(),N=setTimeout(function(){B()},2e3)}else j()}function B(){T||(q(),o.style.opacity==1&&(_utils.cancelAnimation(o),_utils.fadeTo(o,0,.1,1,0)))}function j(){T||(I(),o.style.opacity==0&&(_utils.cancelAnimation(o),_utils.fadeTo(o,1,.1,0,0)))}function F(e){return function(){k&&C!=e&&(C=e,O.sendEvent(e,{component:"controlbar",boundingRect:R()}))}}function R(){return s.position==e.html5.view.positions.OVER||i.jwGetFullscreen()?_utils.getDimensions(o):{x:0,y:0,width:0,height:0}}function U(e,t,n,r){var i;return w?i=document.getElementById(o.id+"_"+e):(r||(r="div"),i=document.createElement(r),y[e]=i,i.id=o.id+"_"+e,t.appendChild(i)),_utils.exists(n)&&_css(i,n),i}function z(){if(i.jwGetHeight()<=40){s.layout=_utils.clone(s.layout);for(var e=0;e<s.layout.left.elements.length;e++)s.layout.left.elements[e].name=="fullscreen"&&s.layout.left.elements.splice(e,1);for(e=0;e<s.layout.right.elements.length;e++)s.layout.right.elements[e].name=="fullscreen"&&s.layout.right.elements.splice(e,1);ot()}W(s.layout.left),W(s.layout.center),W(s.layout.right)}function W(e,t){var n=e.position=="right"?"right":"left",r=_utils.extend([],e.elements);_utils.exists(t)&&r.reverse();var e=U(e.position+"Group",y.elements,{"float":"left",styleFloat:"left",cssFloat:"left",height:"100%"});for(var i=0;i<r.length;i++)V(r[i],n,e)}function X(){return u++}function V(e,t,n){var r,s,o,u,a;n||(n=y.elements);if(e.type=="divider"){$("divider"+X(),t,!0,n,undefined,e.width,e.element);return}switch(e.name){case"play":$("playButton",t,!1,n),$("pauseButton",t,!0,n),Y("playButton","jwPlay"),Y("pauseButton","jwPause");break;case"prev":$("prevButton",t,!0,n),Y("prevButton","jwPlaylistPrev");break;case"stop":$("stopButton",t,!0,n),Y("stopButton","jwStop");break;case"next":$("nextButton",t,!0,n),Y("nextButton","jwPlaylistNext");break;case"elapsed":$("elapsedText",t,!0,n,null,null,i.skin.getSkinElement("controlbar","elapsedBackground"));break;case"time":s=_utils.exists(i.skin.getSkinElement("controlbar","timeSliderCapLeft"))?i.skin.getSkinElement("controlbar","timeSliderCapLeft").width:0,o=_utils.exists(i.skin.getSkinElement("controlbar","timeSliderCapRight"))?i.skin.getSkinElement("controlbar","timeSliderCapRight").width:0,r=t=="left"?s:o,a={height:M().height,position:"relative","float":"left",styleFloat:"left",cssFloat:"left"};var f=U("timeSlider",n,a);$("timeSliderCapLeft",t,!0,f,"relative"),$("timeSliderRail",t,!1,f,"relative"),$("timeSliderBuffer",t,!1,f,"absolute"),$("timeSliderProgress",t,!1,f,"absolute"),$("timeSliderThumb",t,!1,f,"absolute"),$("timeSliderCapRight",t,!0,f,"relative"),Z("time");break;case"fullscreen":$("fullscreenButton",t,!1,n),$("normalscreenButton",t,!0,n),Y("fullscreenButton","jwSetFullscreen",!0),Y("normalscreenButton","jwSetFullscreen",!1);break;case"volume":s=_utils.exists(i.skin.getSkinElement("controlbar","volumeSliderCapLeft"))?i.skin.getSkinElement("controlbar","volumeSliderCapLeft").width:0,o=_utils.exists(i.skin.getSkinElement("controlbar","volumeSliderCapRight"))?i.skin.getSkinElement("controlbar","volumeSliderCapRight").width:0,r=t=="left"?s:o,u=i.skin.getSkinElement("controlbar","volumeSliderRail").width+s+o,a={height:M().height,position:"relative",width:u,"float":"left",styleFloat:"left",cssFloat:"left"};var l=U("volumeSlider",n,a);$("volumeSliderCapLeft",t,!1,l,"relative"),$("volumeSliderRail",t,!1,l,"relative"),$("volumeSliderProgress",t,!1,l,"absolute"),$("volumeSliderThumb",t,!1,l,"absolute"),$("volumeSliderCapRight",t,!1,l,"relative"),Z("volume");break;case"mute":$("muteButton",t,!1,n),$("unmuteButton",t,!0,n),Y("muteButton","jwSetMute",!0),Y("unmuteButton","jwSetMute",!1);break;case"duration":$("durationText",t,!0,n,null,null,i.skin.getSkinElement("controlbar","durationBackground"))}}function $(e,t,n,r,o,u,a){if(_utils.exists(i.skin.getSkinElement("controlbar",e))||e.indexOf("Text")>0||e.indexOf("divider")===0){var c={height:"100%",position:o?o:"relative",display:"block","float":"left",styleFloat:"left",cssFloat:"left"};(e.indexOf("next")===0||e.indexOf("prev")===0)&&(i.jwGetPlaylist().length<2||s.hideplaylistcontrols.toString()=="true")&&s.forcenextprev.toString()!="true"&&(n=!1,c.display="none");var h;if(e.indexOf("Text")>0)e.innerhtml="00:00",c.font=s.fontsize+"px/"+(M().height+1)+"px "+s.font,c.color=s.fontcolor,c.textAlign="center",c.fontWeight=s.fontweight,c.fontStyle=s.fontstyle,c.cursor="default",a&&(c.background="url("+a.src+") no-repeat center",c.backgroundSize="100% "+M().height+"px"),c.padding="0 5px";else if(e.indexOf("divider")===0)if(u)isNaN(parseInt(u))||(h=parseInt(u));else if(a){var p=i.skin.getSkinElement("controlbar",a);p&&(c.background="url("+p.src+") repeat-x center left",h=p.width)}else c.background="url("+i.skin.getSkinElement("controlbar","divider").src+") repeat-x center left",h=i.skin.getSkinElement("controlbar","divider").width;else c.background="url("+i.skin.getSkinElement("controlbar",e).src+") repeat-x center left",h=i.skin.getSkinElement("controlbar",e).width;t=="left"?n&&(f+=h):t=="right"&&n&&(l+=h),_utils.typeOf(r)=="undefined"&&(r=y.elements),c.width=h;if(w)_css(y[e],c);else{var d=U(e,r,c);_utils.exists(i.skin.getSkinElement("controlbar",e+"Over"))&&(d.onmouseover=function(t){d.style.backgroundImage=["url(",i.skin.getSkinElement("controlbar",e+"Over").src,")"].join("")},d.onmouseout=function(t){d.style.backgroundImage=["url(",i.skin.getSkinElement("controlbar",e).src,")"].join("")}),e.indexOf("divider")==0&&d.setAttribute("class","divider"),d.innerHTML="&nbsp;"}}}function J(){i.jwAddEventListener(e.api.events.JWPLAYER_PLAYLIST_LOADED,K),i.jwAddEventListener(e.api.events.JWPLAYER_PLAYLIST_ITEM,Q),i.jwAddEventListener(e.api.events.JWPLAYER_MEDIA_BUFFER,tt),i.jwAddEventListener(e.api.events.JWPLAYER_PLAYER_STATE,rt),i.jwAddEventListener(e.api.events.JWPLAYER_MEDIA_TIME,st),i.jwAddEventListener(e.api.events.JWPLAYER_MEDIA_MUTE,nt),i.jwAddEventListener(e.api.events.JWPLAYER_MEDIA_VOLUME,ft),i.jwAddEventListener(e.api.events.JWPLAYER_MEDIA_COMPLETE,it)}function K(){s.hideplaylistcontrols||(i.jwGetPlaylist().length>1||s.forcenextprev.toString()=="true"?(_show(y.nextButton),_show(y.prevButton)):(_hide(y.nextButton),_hide(y.prevButton)),at(),G())}function Q(e){d=i.jwGetPlaylist()[e.index].duration,S=-1,st({id:i.id,duration:d,position:0}),tt({id:i.id,bufferProgress:0})}function G(){st({id:i.id,duration:i.jwGetDuration(),position:0}),tt({id:i.id,bufferProgress:0}),nt({id:i.id,mute:i.jwGetMute()}),rt({id:i.id,newstate:e.api.events.state.IDLE}),ft({id:i.id,volume:i.jwGetVolume()})}function Y(e,t,n){if(w)return;if(_utils.exists(i.skin.getSkinElement("controlbar",e))){var r=y[e];_utils.exists(r)&&(_css(r,{cursor:"pointer"}),t=="fullscreen"?r.onmouseup=function(e){e.stopPropagation(),i.jwSetFullscreen(!i.jwGetFullscreen())}:r.onmouseup=function(e){e.stopPropagation(),_utils.exists(n)?i[t](n):i[t]()})}}function Z(e){if(w)return;var t=y[e+"Slider"];_css(y.elements,{cursor:"pointer"}),_css(t,{cursor:"pointer"}),t.onmousedown=function(t){c=e},t.onmouseup=function(e){e.stopPropagation(),et(e.pageX)},t.onmousemove=function(t){if(c=="time"){h=!0;var n=t.pageX-E[e+"Slider"].left-window.pageXOffset;_css(y[c+"SliderThumb"],{left:n})}}}function et(t){h=!1;var n;if(c=="time"){n=t-E.timeSliderRail.left+window.pageXOffset;var r=n/E.timeSliderRail.width*d;r<0?r=0:r>d&&(r=d-3),(i.jwGetState()==e.api.events.state.PAUSED||i.jwGetState()==e.api.events.state.IDLE)&&i.jwPlay(),i.jwSeek(r)}else if(c=="volume"){n=t-E.volumeSliderRail.left-window.pageXOffset;var s=Math.round(n/E.volumeSliderRail.width*100);s<10?s=0:s>100&&(s=100),i.jwGetMute()&&i.jwSetMute(!1),i.jwSetVolume(s)}c="none"}function tt(e){_utils.exists(e.bufferPercent)&&(v=e.bufferPercent);if(E.timeSliderRail){var t=i.skin.getSkinElement("controlbar","timeSliderCapLeft"),n=E.timeSliderRail.width,r=isNaN(Math.round(n*v/100))?0:Math.round(n*v/100);_css(y.timeSliderBuffer,{width:r,left:t?t.width:0})}}function nt(e){e.mute?(_hide(y.muteButton),_show(y.unmuteButton),_hide(y.volumeSliderProgress)):(_show(y.muteButton),_hide(y.unmuteButton),_show(y.volumeSliderProgress))}function rt(t){t.newstate==e.api.events.state.BUFFERING||t.newstate==e.api.events.state.PLAYING?(_show(y.pauseButton),_hide(y.playButton)):(_hide(y.pauseButton),_show(y.playButton)),H(),t.newstate==e.api.events.state.IDLE?(_hide(y.timeSliderBuffer),_hide(y.timeSliderProgress),_hide(y.timeSliderThumb),st({id:i.id,duration:i.jwGetDuration(),position:0})):(_show(y.timeSliderBuffer),t.newstate!=e.api.events.state.BUFFERING&&(_show(y.timeSliderProgress),_show(y.timeSliderThumb)))}function it(e){tt({bufferPercent:0}),st(_utils.extend(e,{position:0,duration:d}))}function st(e){_utils.exists(e.position)&&(p=e.position);var t=!1;_utils.exists(e.duration)&&e.duration!=d&&(d=e.duration,t=!0);var n=p===d===0?0:p/d,r=E.timeSliderRail;if(r){var s=isNaN(Math.round(r.width*n))?0:Math.round(r.width*n),o=i.skin.getSkinElement("controlbar","timeSliderCapLeft"),u=s+(o?o.width:0);y.timeSliderProgress&&(_css(y.timeSliderProgress,{width:s,left:o?o.width:0}),h||y.timeSliderThumb&&(y.timeSliderThumb.style.left=u+"px"))}y.durationText&&(y.durationText.innerHTML=_utils.timeFormat(d));if(y.elapsedText){var a=_utils.timeFormat(p);y.elapsedText.innerHTML=a,S!=a.length&&(t=!0,S=a.length)}t&&at()}function ot(){var e=y.elements.childNodes,t,n;for(var r=0;r<e.length;r++){var i=e[r].childNodes;for(var s in i){if(isNaN(parseInt(s,10)))continue;i[s].id.indexOf(o.id+"_divider")===0&&n&&n.id.indexOf(o.id+"_divider")===0&&i[s].style.backgroundImage==n.style.backgroundImage?i[s].style.display="none":i[s].id.indexOf(o.id+"_divider")===0&&t&&t.style.display!="none"&&(i[s].style.display="block"),i[s].style.display!="none"&&(n=i[s]),t=i[s]}}}function ut(){i.jwGetFullscreen()?(_show(y.normalscreenButton),_hide(y.fullscreenButton)):(_hide(y.normalscreenButton),_show(y.fullscreenButton)),i.jwGetState()==e.api.events.state.BUFFERING||i.jwGetState()==e.api.events.state.PLAYING?(_show(y.pauseButton),_hide(y.playButton)):(_hide(y.pauseButton),_show(y.playButton)),i.jwGetMute()==1?(_hide(y.muteButton),_show(y.unmuteButton),_hide(y.volumeSliderProgress)):(_show(y.muteButton),_hide(y.unmuteButton),_show(y.volumeSliderProgress))}function at(){ot(),ut();var t={width:m},n={"float":"left",styleFloat:"left",cssFloat:"left"};if(s.position==e.html5.view.positions.OVER||i.jwGetFullscreen())t.left=s.margin,t.width-=2*s.margin,t.top=g-M().height-s.margin,t.height=M().height;var r=i.skin.getSkinElement("controlbar","capLeft"),u=i.skin.getSkinElement("controlbar","capRight");n.width=t.width-(r?r.width:0)-(u?u.width:0);var f=_utils.getBoundingClientRect(y.leftGroup).width,l=_utils.getBoundingClientRect(y.rightGroup).width,c=n.width-f-l-1,h=c,p=i.skin.getSkinElement("controlbar","timeSliderCapLeft"),d=i.skin.getSkinElement("controlbar","timeSliderCapRight");return _utils.exists(p)&&(h-=p.width),_utils.exists(d)&&(h-=d.width),y.timeSlider.style.width=c+"px",y.timeSliderRail.style.width=h+"px",_css(o,t),_css(y.elements,n),_css(y.background,n),D(),t}function ft(e){if(_utils.exists(y.volumeSliderRail)){var t=isNaN(e.volume/100)?1:e.volume/100,n=_utils.parseDimension(y.volumeSliderRail.style.width),r=isNaN(Math.round(n*t))?0:Math.round(n*t),s=_utils.parseDimension(y.volumeSliderRail.style.right),o=_utils.exists(i.skin.getSkinElement("controlbar","volumeSliderCapLeft"))?i.skin.getSkinElement("controlbar","volumeSliderCapLeft").width:0;_css(y.volumeSliderProgress,{width:r,left:o});if(y.volumeSliderThumb){var u=r-Math.round(_utils.parseDimension(y.volumeSliderThumb.style.width)/2);u=Math.min(Math.max(u,0),n-_utils.parseDimension(y.volumeSliderThumb.style.width)),_css(y.volumeSliderThumb,{left:u})}_utils.exists(y.volumeSliderCapLeft)&&_css(y.volumeSliderCapLeft,{left:0})}}function lt(){try{var e=i.id.indexOf("_instream")>0?i.id.replace("_instream",""):i.id;A=document.getElementById(e),A.addEventListener("mousemove",H)}catch(t){_utils.log("Could not add mouse listeners to controlbar: "+t)}}function ct(){_(),z(),D(),w=!0,J(),s.idlehide=s.idlehide.toString().toLowerCase()=="true",s.position==e.html5.view.positions.OVER&&s.idlehide?(o.style.opacity=0,k=!0):(o.style.opacity=1,setTimeout(function(){k=!0,I()},1)),lt(),G()}window.controlbar=this;var i=n,s=_utils.extend({},t,i.skin.getComponentSettings("controlbar"),r);if(s.position==e.html5.view.positions.NONE||typeof e.html5.view.positions[s.position]=="undefined")return;_utils.mapLength(i.skin.getComponentLayout("controlbar"))>0&&(s.layout=i.skin.getComponentLayout("controlbar"));var o,u,f,l,c="none",h,p,d,v,m,g,y={},w=!1,E={},S=-1,x,T=!1,N,C,k=!1,L=!1,A,O=new e.html5.eventdispatcher;_utils.extend(this,O),this.getDisplayElement=function(){return o},this.resize=function(e,t){lt(),_utils.cancelAnimation(o),m=e,g=t,L!=i.jwGetFullscreen()&&(L=i.jwGetFullscreen(),L||H(),C=undefined);var n=at();return st({id:i.id,duration:d,position:p}),tt({id:i.id,bufferPercent:v}),n},this.show=function(){T&&(T=!1,_show(o),I())},this.hide=function(){T||(T=!0,_hide(o),q())};var P,I=F(e.api.events.JWPLAYER_COMPONENT_SHOW),q=F(e.api.events.JWPLAYER_COMPONENT_HIDE);return ct(),this}}(jwplayer),function(e){var t=["width","height","state","playlist","item","position","buffer","duration","volume","mute","fullscreen"],n=e.utils;e.html5.controller=function(t,r,s,o){function S(e){y?E.sendEvent(e.type,e):g.push(e)}function x(t){if(!y){y=!0,E.sendEvent(e.api.events.JWPLAYER_READY,t),e.utils.exists(window.playerReady)&&playerReady(t),e.utils.exists(window[s.config.playerReady])&&window[s.config.playerReady](t);while(g.length>0){var n=g.shift();E.sendEvent(n.type,n)}s.config.autostart&&!e.utils.isIOS()&&F();while(z.length>0){var r=z.shift();X(r.method,r.arguments)}}}function T(){try{m=T;if(!d){d=!0,E.sendEvent(e.api.events.JWPLAYER_MEDIA_BEFOREPLAY),d=!1;if(v){v=!1,m=null;return}}return _(a.item),a.playlist[a.item].levels[0].file.length>0&&(h||a.state==e.api.events.state.IDLE?(a.getMedia().load(a.playlist[a.item]),h=!1):a.state==e.api.events.state.PAUSED&&a.getMedia().play()),!0}catch(t){E.sendEvent(e.api.events.JWPLAYER_ERROR,t),m=null}return!1}function N(){try{if(a.playlist[a.item].levels[0].file.length>0)switch(a.state){case e.api.events.state.PLAYING:case e.api.events.state.BUFFERING:a.getMedia()&&a.getMedia().pause();break;default:d&&(v=!0)}return!0}catch(t){E.sendEvent(e.api.events.JWPLAYER_ERROR,t)}return!1}function C(t){try{if(a.playlist[a.item].levels[0].file.length>0){typeof t!="number"&&(t=parseFloat(t));switch(a.state){case e.api.events.state.IDLE:p<0&&(p=a.playlist[a.item].start,a.playlist[a.item].start=t),d||T();break;case e.api.events.state.PLAYING:case e.api.events.state.PAUSED:case e.api.events.state.BUFFERING:a.seek(t)}}return!0}catch(n){E.sendEvent(e.api.events.JWPLAYER_ERROR,n)}return!1}function k(t){m=null,n.exists(t)||(t=!0);try{return(a.state!=e.api.events.state.IDLE||t)&&a.getMedia()&&a.getMedia().stop(t),d&&(v=!0),!0}catch(r){E.sendEvent(e.api.events.JWPLAYER_ERROR,r)}return!1}function L(){try{a.playlist[a.item].levels[0].file.length>0&&(a.config.shuffle?_(O()):a.item+1==a.playlist.length?_(0):_(a.item+1));if(a.state!=e.api.events.state.IDLE){var t=a.state;a.state=e.api.events.state.IDLE,E.sendEvent(e.api.events.JWPLAYER_PLAYER_STATE,{oldstate:t,newstate:e.api.events.state.IDLE})}return T(),!0}catch(n){E.sendEvent(e.api.events.JWPLAYER_ERROR,n)}return!1}function A(){try{a.playlist[a.item].levels[0].file.length>0&&(a.config.shuffle?_(O()):a.item===0?_(a.playlist.length-1):_(a.item-1));if(a.state!=e.api.events.state.IDLE){var t=a.state;a.state=e.api.events.state.IDLE,E.sendEvent(e.api.events.JWPLAYER_PLAYER_STATE,{oldstate:t,newstate:e.api.events.state.IDLE})}return T(),!0}catch(n){E.sendEvent(e.api.events.JWPLAYER_ERROR,n)}return!1}function O(){var e=null;if(a.playlist.length>1)while(!n.exists(e))e=Math.floor(Math.random()*a.playlist.length),e==a.item&&(e=null);else e=0;return e}function M(t){if(!a.playlist||!a.playlist[t])return!1;try{if(a.playlist[t].levels[0].file.length>0){var n=a.state;n!==e.api.events.state.IDLE&&(a.playlist[a.item]&&a.playlist[a.item].provider==a.playlist[t].provider?k(!1):k()),_(t),T()}return!0}catch(r){E.sendEvent(e.api.events.JWPLAYER_ERROR,r)}return!1}function _(t){if(!a.playlist[t])return;a.setActiveMediaProvider(a.playlist[t]),a.item!=t&&(a.item=t,h=!0,E.sendEvent(e.api.events.JWPLAYER_PLAYLIST_ITEM,{index:t}))}function D(t){try{_(a.item);var n=a.getMedia();switch(typeof t){case"number":n.volume(t);break;case"string":n.volume(parseInt(t,10))}return a.setVolume(t),!0}catch(r){E.sendEvent(e.api.events.JWPLAYER_ERROR,r)}return!1}function P(t){try{_(a.item);var n=a.getMedia();return typeof t=="undefined"?(n.mute(!a.mute),a.setMute(!a.mute)):t.toString().toLowerCase()=="true"?(n.mute(!0),a.setMute(!0)):(n.mute(!1),a.setMute(!1)),!0}catch(r){E.sendEvent(e.api.events.JWPLAYER_ERROR,r)}return!1}function H(t,n){try{return a.width=t,a.height=n,f.resize(t,n),E.sendEvent(e.api.events.JWPLAYER_RESIZE,{width:a.width,height:a.height}),!0}catch(r){E.sendEvent(e.api.events.JWPLAYER_ERROR,r)}return!1}function B(t,n){try{return typeof t=="undefined"&&(t=!a.fullscreen),typeof n=="undefined"&&(n=!0),t!=a.fullscreen&&(a.fullscreen=t.toString().toLowerCase()=="true",f.fullscreen(a.fullscreen),n&&E.sendEvent(e.api.events.JWPLAYER_FULLSCREEN,{fullscreen:a.fullscreen}),E.sendEvent(e.api.events.JWPLAYER_RESIZE,{width:a.width,height:a.height})),!0}catch(r){E.sendEvent(e.api.events.JWPLAYER_ERROR,r)}return!1}function j(t){try{return k(),d&&(v=!1),a.loadPlaylist(t),a.playlist[a.item].provider?(_(a.item),a.config.autostart.toString().toLowerCase()=="true"&&!n.isIOS()&&!d&&T(),!0):!1}catch(r){E.sendEvent(e.api.events.JWPLAYER_ERROR,r)}return!1}function F(e){n.isIOS()||(_(a.item),a.config.autostart.toString().toLowerCase()=="true"&&!n.isIOS()&&T())}function I(e){B(e.fullscreen,!1)}function q(){try{return a.getMedia().detachMedia()}catch(e){return null}}function R(){try{var e=a.getMedia().attachMedia();typeof m=="function"&&m()}catch(t){return null}}function U(){if(a.state!=e.api.events.state.IDLE)return;m=U;switch(a.config.repeat.toUpperCase()){case e.html5.controller.repeatoptions.SINGLE:T();break;case e.html5.controller.repeatoptions.ALWAYS:a.item==a.playlist.length-1&&!a.config.shuffle?M(0):L();break;case e.html5.controller.repeatoptions.LIST:a.item==a.playlist.length-1&&!a.config.shuffle?(k(),_(0)):L();break;default:k()}}function W(e){return function(){y?X(e,arguments):z.push({method:e,arguments:arguments})}}function X(e,t){var n=[];for(i=0;i<t.length;i++)n.push(t[i]);e.apply(this,n)}var u=t,a=s,f=o,l=r,h=!0,p=-1,d=!1,v=!1,m,g=[],y=!1,w=n.exists(a.config.debug)&&a.config.debug.toString().toLowerCase()=="console",E=new e.html5.eventdispatcher(l.id,w);n.extend(this,E),a.addGlobalListener(S),a.addEventListener(e.api.events.JWPLAYER_MEDIA_BUFFER_FULL,function(){a.getMedia().play()}),a.addEventListener(e.api.events.JWPLAYER_MEDIA_TIME,function(e){e.position>=a.playlist[a.item].start&&p>=0&&(a.playlist[a.item].start=p,p=-1)}),a.addEventListener(e.api.events.JWPLAYER_MEDIA_COMPLETE,function(e){setTimeout(U,25)}),a.addEventListener(e.api.events.JWPLAYER_PLAYLIST_LOADED,F),a.addEventListener(e.api.events.JWPLAYER_FULLSCREEN,I),e.html5.controller.repeatoptions={LIST:"LIST",ALWAYS:"ALWAYS",SINGLE:"SINGLE",NONE:"NONE"};var z=[];this.play=W(T),this.pause=W(N),this.seek=W(C),this.stop=W(k),this.next=W(L),this.prev=W(A),this.item=W(M),this.setVolume=W(D),this.setMute=W(P),this.resize=W(H),this.setFullscreen=W(B),this.load=W(j),this.playerReady=x,this.detachMedia=q,this.attachMedia=R,this.beforePlay=function(){return d},this.destroy=function(){a.getMedia()&&a.getMedia().destroy()}}}(jwplayer),function(e){e.html5.defaultSkin=function(){return this.text='<?xml version="1.0" ?><skin author="LongTail Video" name="Five" version="1.1"><components><component name="controlbar"><settings><setting name="margin" value="20"/><setting name="fontsize" value="11"/><setting name="fontcolor" value="0x000000"/></settings><layout><group position="left"><button name="play"/><divider name="divider"/><button name="prev"/><divider name="divider"/><button name="next"/><divider name="divider"/><text name="elapsed"/></group><group position="center"><slider name="time"/></group><group position="right"><text name="duration"/><divider name="divider"/><button name="blank"/><divider name="divider"/><button name="mute"/><slider name="volume"/><divider name="divider"/><button name="fullscreen"/></group></layout><elements><element name="background" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAIAAABvFaqvAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAElJREFUOI3t1LERACAMQlFgGvcfxNIhHMK4gsUvUviOmgtNsiAZkBSEKxKEnCYkkQrJn/YwbUNiSDDYRZaQRDaShv+oX9GBZEIuK+8hXVLs+/YAAAAASUVORK5CYII="/><element name="blankButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAYCAYAAAAyJzegAAAAFElEQVQYV2P8//8/AzpgHBUc7oIAGZdH0RjKN8EAAAAASUVORK5CYII="/><element name="capLeft" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAYCAYAAAA7zJfaAAAAQElEQVQIWz3LsRGAMADDQJ0XB5bMINABZ9GENGrszxhjT2WLSqxEJG2JQrTMdV2q5LpOAvyRaVmsi7WdeZ/7+AAaOTq7BVrfOQAAAABJRU5ErkJggg=="/><element name="capRight" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAYCAYAAAA7zJfaAAAAQElEQVQIWz3LsRGAMADDQJ0XB5bMINABZ9GENGrszxhjT2WLSqxEJG2JQrTMdV2q5LpOAvyRaVmsi7WdeZ/7+AAaOTq7BVrfOQAAAABJRU5ErkJggg=="/><element name="divider" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAYCAIAAAC0rgCNAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADhJREFUCB0FwcENgEAAw7Aq+893g8APUILNOQcbFRktVGqUVFRkWNz3xTa2sUaLNUosKlRUvvf5AdbWOTtzmzyWAAAAAElFTkSuQmCC"/><element name="playButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAANUlEQVR42u2RsQkAAAjD/NTTPaW6dXLrINJA1kBpGPMAjDWmOgp1HFQXx+b1KOefO4oxY57R73YnVYCQUCQAAAAASUVORK5CYII="/><element name="pauseButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAIUlEQVQ4jWNgGAWjYOiD/0gYG3/U0FFDB4Oho2AUDAYAAEwiL9HrpdMVAAAAAElFTkSuQmCC"/><element name="prevButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAQklEQVQ4y2NgGAWjYOiD/1AMA/JAfB5NjCJD/YH4PRaLyDa0H4lNNUP/DxlD59PCUBCIp3ZEwYA+NZLUKBgFgwEAAN+HLX9sB8u8AAAAAElFTkSuQmCC"/><element name="nextButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAQElEQVQ4y2NgGAWjYOiD/0B8Hojl0cT+U2ooCL8HYn9qGwrD/bQw9P+QMXQ+tSMqnpoRBUpS+tRMUqNgFAwGAADxZy1/mHvFnAAAAABJRU5ErkJggg=="/><element name="timeSliderRail" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAOElEQVRIDe3BwQkAIRADwAhhw/nU/kWwUK+KPITMABFh19Y+F0acY8CJvX9wYpXgRElwolSIiMf9ZWEDhtwurFsAAAAASUVORK5CYII="/><element name="timeSliderBuffer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAN0lEQVRIDe3BwQkAMQwDMBcc55mRe9zi7RR+FCwBEWG39vcfGHFm4MTuhhMlwYlVBSdKhYh43AW/LQMKm1spzwAAAABJRU5ErkJggg=="/><element name="timeSliderProgress" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAIElEQVRIiWNgGAWjYBTQBfynMR61YCRYMApGwSigMQAAiVWPcbq6UkIAAAAASUVORK5CYII="/><element name="timeSliderThumb" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAYCAYAAAA/OUfnAAAAO0lEQVQYlWP4//8/Awwz0JgDBP/BeN6Cxf/hnI2btiI4u/fsQ3AOHjqK4Jw4eQbBOX/hEoKDYjSd/AMA4cS4mfLsorgAAAAASUVORK5CYII="/><element name="muteButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAYCAYAAADKx8xXAAAAJklEQVQ4y2NgGAUjDcwH4v/kaPxPikZkxcNVI9mBQ5XoGAWDFwAAsKAXKQQmfbUAAAAASUVORK5CYII="/><element name="unmuteButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAYCAYAAADKx8xXAAAAMklEQVQ4y2NgGAWDHPyntub5xBr6Hwv/Pzk2/yfVG/8psRFE25Oq8T+tQnsIaB4FVAcAi2YVysVY52AAAAAASUVORK5CYII="/><element name="volumeSliderRail" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAgMAAACdGdVrAAAACVBMVEUAAACmpqampqbBXAu8AAAAAnRSTlMAgJsrThgAAAArSURBVAhbY2AgErBAyA4I2QEhOyBkB4TsYOhAoaCCUCUwDTDtMMNgRuMHAFB5FoGH5T0UAAAAAElFTkSuQmCC"/><element name="volumeSliderProgress" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAgMAAACdGdVrAAAACVBMVEUAAAAAAAAAAACDY+nAAAAAAnRSTlMAgJsrThgAAAArSURBVAhbY2AgErBAyA4I2QEhOyBkB4TsYOhAoaCCUCUwDTDtMMNgRuMHAFB5FoGH5T0UAAAAAElFTkSuQmCC"/><element name="volumeSliderCapRight" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAYCAYAAAAyJzegAAAAFElEQVQYV2P8//8/AzpgHBUc7oIAGZdH0RjKN8EAAAAASUVORK5CYII="/><element name="fullscreenButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAQklEQVRIiWNgGAWjYMiD/0iYFDmSLbDHImdPLQtgBpEiR7Zl2NijAA5oEkT/0Whi5UiyAJ8BVMsHNMtoo2AUDAIAAGdcIN3IDNXoAAAAAElFTkSuQmCC"/><element name="normalscreenButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAP0lEQVRIx2NgGAWjYMiD/1RSQ5QB/wmIUWzJfzx8qhj+n4DYCAY0DyJ7PBbYU8sHMEvwiZFtODXUjIJRMJgBACpWIN2ZxdPTAAAAAElFTkSuQmCC"/></elements></component><component name="display"><elements><element name="background" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAQMAAAAk8RryAAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlOZpuml+rYAAAASSURBVBhXY2AYJuA/GBwY6jQAyDyoK8QcL4QAAAAASUVORK5CYII="/><element name="playIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAiUlEQVR42u3XSw2AMBREURwgAQlIQAISKgUpSEFKJeCg5b0E0kWBTVcD9ySTsL0Jn9IBAAAA+K2UUrBlW/Rr5ZDoIeeuoFkxJD9ss03aIXXQqB9SttoG7ZA6qNcOKdttiwcJh9RB+iFl4SshkRBuLR72+9cvH0SOKI2HRo7x/Fi1/uoCAAAAwLsD8ki99IlO2dQAAAAASUVORK5CYII="/><element name="muteIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAVUlEQVR42u3WMQrAIAxAUW/g/SdvGmvpoOBeSHgPsjj5QTANAACARCJilIhYM0tEvJM+Ik3Id9E957kQIb+F3OdCPC0hPkQriqWx9hp/x/QGAABQyAPLB22VGrpLDgAAAABJRU5ErkJggg=="/><element name="errorIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAA/0lEQVR42u2U0QmEMBAF7cASLMESUoIlpARLSCkpwRJSgiWkhOvAXD4WsgRkyaG5DbyB+Yvg8KITAAAAAAAYk+u61mwk15EjPtlEfihmqIiZR1Qx80ghjgdUuiHXGHSVsoag0x6x8DUoyjD5KovmEJ9NTDMRPIT0mtdIUkjlonuNohO+Ha99DTmkuGgKCTcvebAzx82ZoCWC3/3aIMWSRucaxcjORSFY4xpFdjYJGp1rFGcyCYZ/RVh6AUnfcNZ2zih3/mGj1jVCdiNDwyrq1rA/xMdeEXvDVdnYc1vDc3uPkDObXrlaxbNHSOohQhr/WOeLEWfWTgAAAAAAADzNF9sHJ7PJ57MlAAAAAElFTkSuQmCC"/><element name="bufferIcon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAACBklEQVR42u3Zv0sCYRzH8USTzOsHHEWGkC1HgaDgkktGDjUYtDQ01RDSljQ1BLU02+rk1NTm2NLq4Nx/0L/h9fnCd3j4cnZe1/U8xiO8h3uurufF0/3COd/3/0UWYiEWYiEWYiGJQ+J8xuPxKhXjEMZANinjIZhkGuVRNioE4wVURo4JkHm0xKWmhRAc1bh1EyCUw5BcBIjHiApKa4CErko6DEJwuRo6IRKzyJD8FJAyI3Zp2zRImiBcRhlfo5RtlxCcE3CcDNpGrhYIT2IhAJKilO0VRmzJ32fAMTpBTS0QMfGwlcuKMRftE0DJ0wCJdcOsCkBdXP3Mh9CEFUBTPS9mDZJBG6io4aqVzMdCokCw9H3kT6j/C/9iDdSeUMNC7DkyyxAs/Rk6Qss8FPWRZgdVtUH4DjxEn1zxh+/zj1wHlf4MQhNGrwqA6sY40U8JonRJwEQh+AO3AvCG6gHv4U7IY4krxkroWoAOkoQMGfCBrgIm+YBGqPENpIJ66CJg3x66Y0gnSUidAEEnNr9jjLiWMn5DiWP0OC/oAsCgkq43xBdGDMQr7YASP/vEkHvdl1+JOCcEV5sC4hGEOzTlPuKgd0b0xD4JkRcOgnRRTjdErkYhAsQVq6IdUuPJtmk7BCL3t/h88cx91pKQkI/pkDx6pmYTIjEoxiHsN1YWYiEWYiEWknhflZ5IErA5nr8AAAAASUVORK5CYII="/></elements></component><component name="dock"><settings><setting name="fontcolor" value="0xffffff"/></settings><elements><element name="button" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAQMAAAAk8RryAAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlOZpuml+rYAAAASSURBVBhXY2AYJuA/GBwY6jQAyDyoK8QcL4QAAAAASUVORK5CYII="/></elements></component><component name="playlist"><settings><setting name="backgroundcolor" value="0xe8e8e8"/></settings><elements><element name="item" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAIAAAC1nk4lAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHBJREFUaN7t2MENwCAMBEEe9N8wSKYC/D8YV7CyJoRkVtVImxkZPQInMxoP0XiIxkM0HsGbjjSNBx544IEHHnjggUe/6UQeey0PIh7XTftGxKPj4eXCtLsHHh+ZxkO0Iw8PR55Ni8ZD9Hu/EAoP0dc5RRg9qeRjVF8AAAAASUVORK5CYII="/><element name="sliderCapTop" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAHCAYAAADnCQYGAAAAFUlEQVQokWP8//8/A7UB46ihI9hQAKt6FPPXhVGHAAAAAElFTkSuQmCC"/><element name="sliderRail" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAYAAABiS3YzAAAAKElEQVQ4y2P4//8/Az68bNmy/+iYkB6GUUNHDR01dNTQUUNHDaXcUABUDOKhcxnsSwAAAABJRU5ErkJggg=="/><element name="sliderThumb" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAYAAABiS3YzAAAAJUlEQVQ4T2P4//8/Ay4MBP9xYbz6Rg0dNXTU0FFDRw0dNZRyQwHH4NBa7GJsXAAAAABJRU5ErkJggg=="/><element name="sliderCapBottom" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAHCAYAAADnCQYGAAAAFUlEQVQokWP8//8/A7UB46ihI9hQAKt6FPPXhVGHAAAAAElFTkSuQmCC"/></elements></component></components></skin>',this.xml=null,window.DOMParser?(parser=new DOMParser,this.xml=parser.parseFromString(this.text,"text/xml")):(this.xml=new ActiveXObject("Microsoft.XMLDOM"),this.xml.async="false",this.xml.loadXML(this.text)),this}}(jwplayer),function(e){_utils=e.utils,_css=_utils.css,_hide=function(e){_css(e,{display:"none"})},_show=function(e){_css(e,{display:"block"})},e.html5.display=function(t,n){function M(){o.display=P("div","display"),o.display_text=P("div","display_text"),o.display.appendChild(o.display_text),o.display_image=P("img","display_image"),o.display_image.onerror=function(e){_hide(o.display_image)},o.display_image.onload=_,o.display_icon=P("div","display_icon"),o.display_iconBackground=P("div","display_iconBackground"),o.display.appendChild(o.display_image),o.display_iconBackground.appendChild(o.display_icon),o.display.appendChild(o.display_iconBackground),H(),setTimeout(function(){N=!0,i.icons.toString()=="true"&&J()},1)}function _(t){l=o.display_image.naturalWidth,c=o.display_image.naturalHeight,D();if(s.jwGetState()==e.api.events.state.IDLE||s.jwGetPlaylist()[s.jwGetPlaylistIndex()].provider=="sound")_css(o.display_image,{display:"block",opacity:0}),_utils.fadeTo(o.display_image,1,.1);E=!1}function D(){if(s.jwGetFullscreen()&&s.jwGetStretching()==e.utils.stretching.EXACTFIT){var t=document.createElement("div");_utils.stretch(e.utils.stretching.UNIFORM,t,u,f,k,L),_utils.stretch(e.utils.stretching.EXACTFIT,o.display_image,_utils.parseDimension(t.style.width),_utils.parseDimension(t.style.height),l,c),_css(o.display_image,{left:t.style.left,top:t.style.top})}else _utils.stretch(s.jwGetStretching(),o.display_image,u,f,l,c)}function P(e,t){var n=document.createElement(e);return n.id=s.id+"_jwplayer_"+t,_css(n,O[t].style),n}function H(){for(var e in o)_utils.exists(O[e].click)&&(o[e].onclick=O[e].click)}function B(t){typeof t.preventDefault!="undefined"?t.preventDefault():t.returnValue=!1;if(typeof C=="function"){C(t);return}s.jwGetState()!=e.api.events.state.PLAYING?s.jwPlay():s.jwPause()}function j(e){if(d){F();return}o.display_icon.style.backgroundImage=["url(",s.skin.getSkinElement("display",e).src,")"].join(""),_css(o.display_icon,{width:s.skin.getSkinElement("display",e).width,height:s.skin.getSkinElement("display",e).height,top:(s.skin.getSkinElement("display","background").height-s.skin.getSkinElement("display",e).height)/2,left:(s.skin.getSkinElement("display","background").width-s.skin.getSkinElement("display",e).width)/2}),I(),_utils.exists(s.skin.getSkinElement("display",e+"Over"))?(o.display_icon.onmouseover=function(t){o.display_icon.style.backgroundImage=["url(",s.skin.getSkinElement("display",e+"Over").src,")"].join("")},o.display_icon.onmouseout=function(t){o.display_icon.style.backgroundImage=["url(",s.skin.getSkinElement("display",e).src,")"].join("")}):(o.display_icon.onmouseover=null,o.display_icon.onmouseout=null)}function F(){i.icons.toString()=="true"&&(_hide(o.display_icon),_hide(o.display_iconBackground),K())}function I(){!T&&i.icons.toString()=="true"&&(_show(o.display_icon),_show(o.display_iconBackground),J())}function q(e){d=!0,F(),o.display_text.innerHTML=e.message,_show(o.display_text),o.display_text.style.top=(f-_utils.getBoundingClientRect(o.display_text).height)/2+"px"}function R(){S=!1,o.display_image.style.display="none"}function U(){y=""}function z(t){(t.type==e.api.events.JWPLAYER_PLAYER_STATE||t.type==e.api.events.JWPLAYER_PLAYLIST_ITEM)&&d&&(d=!1,_hide(o.display_text));var n=s.jwGetState();if(n==y)return;y=n,g>=0&&clearTimeout(g),b||s.jwGetState()==e.api.events.state.PLAYING||s.jwGetState()==e.api.events.state.PAUSED?X(s.jwGetState()):g=setTimeout(W(s.jwGetState()),500)}function W(e){return function(){X(e)}}function X(t){_utils.exists(p)&&(clearInterval(p),p=null,_utils.animations.rotate(o.display_icon,0));switch(t){case e.api.events.state.BUFFERING:_utils.isIPod()?(R(),F()):(s.jwGetPlaylist()[s.jwGetPlaylistIndex()].provider=="sound"&&V(),h=0,p=setInterval(function(){h+=v,_utils.animations.rotate(o.display_icon,h%360)},m),j("bufferIcon"),b=!0);break;case e.api.events.state.PAUSED:_utils.isIPod()||(s.jwGetPlaylist()[s.jwGetPlaylistIndex()].provider!="sound"&&_css(o.display_image,{background:"transparent no-repeat center center"}),j("playIcon"),b=!0);break;case e.api.events.state.IDLE:s.jwGetPlaylist()[s.jwGetPlaylistIndex()]&&s.jwGetPlaylist()[s.jwGetPlaylistIndex()].image?V():R(),j("playIcon"),b=!0;break;default:s.jwGetPlaylist()[s.jwGetPlaylistIndex()]&&s.jwGetPlaylist()[s.jwGetPlaylistIndex()].provider=="sound"?_utils.isIPod()?(R(),b=!1):V():(R(),b=!1),s.jwGetMute()&&i.showmute?j("muteIcon"):F()}g=-1}function V(){if(s.jwGetPlaylist()[s.jwGetPlaylistIndex()]){var e=s.jwGetPlaylist()[s.jwGetPlaylistIndex()].image;e&&(e!=x?(x=e,E=!0,o.display_image.src=_utils.getAbsolutePath(e)):!E&&!S&&(S=!0,o.display_image.style.opacity=0,o.display_image.style.display="block",_utils.fadeTo(o.display_image,1,.1)))}}function $(e){return function(){if(!N)return;!T&&w!=e&&(w=e,A.sendEvent(e,{component:"display",boundingRect:_utils.getDimensions(o.display_iconBackground)}))}}var r={icons:!0,showmute:!1},i=_utils.extend({},r,n),s=t,o={},u,f,l,c,h,p,d,v=_utils.exists(s.skin.getComponentSettings("display").bufferrotation)?parseInt(s.skin.getComponentSettings("display").bufferrotation,10):15,m=_utils.exists(s.skin.getComponentSettings("display").bufferinterval)?parseInt(s.skin.getComponentSettings("display").bufferinterval,10):100,g=-1,y=e.api.events.state.IDLE,b=!0,w,E=!1,S=!0,x="",T=!1,N=!1,C,k,L,A=new e.html5.eventdispatcher;_utils.extend(this,A);var O={display:{style:{cursor:"pointer",top:0,left:0,overflow:"hidden"},click:B},display_icon:{style:{cursor:"pointer",position:"absolute",top:(s.skin.getSkinElement("display","background").height-s.skin.getSkinElement("display","playIcon").height)/2,left:(s.skin.getSkinElement("display","background").width-s.skin.getSkinElement("display","playIcon").width)/2,border:0,margin:0,padding:0,zIndex:3,display:"none"}},display_iconBackground:{style:{cursor:"pointer",position:"absolute",top:(f-s.skin.getSkinElement("display","background").height)/2,left:(u-s.skin.getSkinElement("display","background").width)/2,border:0,backgroundImage:["url(",s.skin.getSkinElement("display","background").src,")"].join(""),width:s.skin.getSkinElement("display","background").width,height:s.skin.getSkinElement("display","background").height,margin:0,padding:0,zIndex:2,display:"none"}},display_image:{style:{display:"none",width:u,height:f,position:"absolute",cursor:"pointer",left:0,top:0,margin:0,padding:0,textDecoration:"none",zIndex:1}},display_text:{style:{zIndex:4,position:"relative",opacity:.8,backgroundColor:parseInt("000000",16),color:parseInt("ffffff",16),textAlign:"center",fontFamily:"Arial,sans-serif",padding:"0 5px",fontSize:14}}};s.jwAddEventListener(e.api.events.JWPLAYER_PLAYER_STATE,z),s.jwAddEventListener(e.api.events.JWPLAYER_MEDIA_MUTE,z),s.jwAddEventListener(e.api.events.JWPLAYER_PLAYLIST_LOADED,U),s.jwAddEventListener(e.api.events.JWPLAYER_PLAYLIST_ITEM,z),s.jwAddEventListener(e.api.events.JWPLAYER_ERROR,q),M(),this.getDisplayElement=function(){return o.display},this.resize=function(e,t){if(s.jwGetFullscreen()&&_utils.isMobile())return;_css(o.display,{width:e,height:t}),_css(o.display_text,{width:e-10,top:(t-_utils.getBoundingClientRect(o.display_text).height)/2}),_css(o.display_iconBackground,{top:(t-s.skin.getSkinElement("display","background").height)/2,left:(e-s.skin.getSkinElement("display","background").width)/2});if(u!=e||f!=t)u=e,f=t,w=undefined,J();s.jwGetFullscreen()||(k=e,L=t),D(),z({})},this.show=function(){T&&(T=!1,X(s.jwGetState()))},this.hide=function(){T||(F(),T=!0)};var J=$(e.api.events.JWPLAYER_COMPONENT_SHOW),K=$(e.api.events.JWPLAYER_COMPONENT_HIDE);return this.setAlternateClickHandler=function(e){C=e},this.revertAlternateClickHandler=function(){C=undefined},this}}(jwplayer),function(e){var t=e.utils,n=t.css;e.html5.dock=function(r,i){function s(){return{align:e.html5.view.positions.RIGHT}}function S(e){return"url("+e+") no-repeat center center"}function x(e){}function T(n,i){P();if(f.length>0){var s=10,p=s,g=-1,y=r.skin.getSkinElement("dock","button").height,b=r.skin.getSkinElement("dock","button").width,w=n-b-s,E,S;o.align==e.html5.view.positions.LEFT&&(g=1,w=s);for(var x=0;x<f.length;x++){var T=Math.floor(p/i);p+y+s>(T+1)*i&&(p=(T+1)*i+s,T=Math.floor(p/i));var N=u[f[x]].div;N.style.top=p%i+"px",N.style.left=w+(r.skin.getSkinElement("dock","button").width+s)*T*g+"px";var C={x:t.parseDimension(N.style.left),y:t.parseDimension(N.style.top),width:b,height:y};if(!E||C.x<=E.x&&C.y<=E.y)E=C;if(!S||C.x>=S.x&&C.y>=S.y)S=C;N.style.width=b+"px",N.style.height=y+"px",p+=r.skin.getSkinElement("dock","button").height+s}v={x:E.x,y:E.y,width:S.x-E.x+S.width,height:E.y-S.y+S.height}}if(d!=r.jwGetFullscreen()||l!=n||h!=i)l=n,h=i,d=r.jwGetFullscreen(),m=undefined,setTimeout(L,1)}function N(e){return function(){!p&&m!=e&&f.length>0&&(m=e,w.sendEvent(e,{component:"dock",boundingRect:v}))}}function C(n){t.isMobile()?n.newstate==e.api.events.state.IDLE?O():M():k()}function k(n){if(p)return;clearTimeout(y);if(i.position==e.html5.view.positions.OVER||r.jwGetFullscreen())switch(r.jwGetState()){case e.api.events.state.PAUSED:case e.api.events.state.IDLE:E&&E.style.opacity<1&&(!i.idlehide||t.exists(n))&&D(),i.idlehide&&(y=setTimeout(function(){_()},2e3));break;default:t.exists(n)&&D(),y=setTimeout(function(){_()},2e3)}else D()}function _(){p||(A(),E.style.opacity==1&&(t.cancelAnimation(E),t.fadeTo(E,0,.1,1,0)))}function D(){p||(L(),E.style.opacity==0&&(t.cancelAnimation(E),t.fadeTo(E,1,.1,0,0)))}function P(){try{g=document.getElementById(r.id),g.addEventListener("mousemove",k)}catch(e){t.log("Could not add mouse listeners to dock: "+e)}}var o=t.extend({},s(),i);if(o.align=="FALSE")return;var u={},f=[],l,h,p=!1,d=!1,v={x:0,y:0,width:0,height:0},m,g,y,w=new e.html5.eventdispatcher;t.extend(this,w);var E=document.createElement("div");E.id=r.id+"_jwplayer_dock",E.style.opacity=1,P(),r.jwAddEventListener(e.api.events.JWPLAYER_PLAYER_STATE,C),this.getDisplayElement=function(){return E},this.setButton=function(n,i,s,o){!i&&u[n]?(t.arrays.remove(f,n),E.removeChild(u[n].div),delete u[n]):i&&(u[n]||(u[n]={}),u[n].handler=i,u[n].outGraphic=s,u[n].overGraphic=o,u[n].div||(f.push(n),u[n].div=document.createElement("div"),u[n].div.style.position="absolute",E.appendChild(u[n].div),u[n].div.appendChild(document.createElement("div")),u[n].div.childNodes[0].style.position="relative",u[n].div.childNodes[0].style.width="100%",u[n].div.childNodes[0].style.height="100%",u[n].div.childNodes[0].style.zIndex=10,u[n].div.childNodes[0].style.cursor="pointer",u[n].div.appendChild(document.createElement("img")),u[n].div.childNodes[1].style.position="absolute",u[n].div.childNodes[1].style.left=0,u[n].div.childNodes[1].style.top=0,r.skin.getSkinElement("dock","button")&&(u[n].div.childNodes[1].src=r.skin.getSkinElement("dock","button").src),u[n].div.childNodes[1].style.zIndex=9,u[n].div.childNodes[1].style.cursor="pointer",u[n].div.onmouseover=function(){u[n].overGraphic&&(u[n].div.childNodes[0].style.background=S(u[n].overGraphic)),r.skin.getSkinElement("dock","buttonOver")&&(u[n].div.childNodes[1].src=r.skin.getSkinElement("dock","buttonOver").src)},u[n].div.onmouseout=function(){u[n].outGraphic&&(u[n].div.childNodes[0].style.background=S(u[n].outGraphic)),r.skin.getSkinElement("dock","button")&&(u[n].div.childNodes[1].src=r.skin.getSkinElement("dock","button").src)},r.skin.getSkinElement("dock","button")&&(u[n].div.childNodes[1].src=r.skin.getSkinElement("dock","button").src)),u[n].outGraphic?u[n].div.childNodes[0].style.background=S(u[n].outGraphic):u[n].overGraphic&&(u[n].div.childNodes[0].style.background=S(u[n].overGraphic)),i&&(u[n].div.onclick=function(t){t.preventDefault(),e(r.id).callback(n),u[n].overGraphic&&(u[n].div.childNodes[0].style.background=S(u[n].overGraphic)),r.skin.getSkinElement("dock","button")&&(u[n].div.childNodes[1].src=r.skin.getSkinElement("dock","button").src)})),T(l,h)};var L=N(e.api.events.JWPLAYER_COMPONENT_SHOW),A=N(e.api.events.JWPLAYER_COMPONENT_HIDE);this.resize=T;var O=function(){n(E,{display:"block"}),p&&(p=!1,L())},M=function(){n(E,{display:"none"}),p||(A(),p=!0)};return this.hide=M,this.show=O,this}}(jwplayer),function(e){e.html5.eventdispatcher=function(t,n){var r=new e.events.eventdispatcher(n);e.utils.extend(this,r),this.sendEvent=function(n,i){e.utils.exists(i)||(i={}),e.utils.extend(i,{id:t,version:e.version,type:n}),r.sendEvent(n,i)}}}(jwplayer),function(e){var t=e.utils;e.html5.instream=function(n,r,i,s){function L(){_fakemodel=new e.html5.model(this,c.getMedia()?c.getMedia().getDisplayElement():c.container,c),N=new e.html5.eventdispatcher,l.jwAddEventListener(e.api.events.JWPLAYER_RESIZE,B),l.jwAddEventListener(e.api.events.JWPLAYER_FULLSCREEN,B)}function A(){_fakemodel.setMute(c.mute),_fakemodel.setVolume(c.volume)}function O(){E||(E=new e.html5.mediavideo(_fakemodel,c.getMedia()?c.getMedia().getDisplayElement():c.container),E.addGlobalListener(M),E.addEventListener(e.api.events.JWPLAYER_MEDIA_META,P),E.addEventListener(e.api.events.JWPLAYER_MEDIA_COMPLETE,D),E.addEventListener(e.api.events.JWPLAYER_MEDIA_BUFFER_FULL,_)),E.attachMedia()}function M(e){T&&H(e.type,e)}function _(e){T&&E.play()}function D(e){T&&setTimeout(function(){k.jwInstreamDestroy(!0)},10)}function P(e){e.metadata.width&&e.metadata.height&&h.resizeMedia()}function H(e,t,n){(T||n)&&N.sendEvent(e,t)}function B(){var e=c.plugins.object.display.getDisplayElement().style;if(S){var n=c.plugins.object.controlbar.getDisplayElement().style;S.resize(t.parseDimension(e.width),t.parseDimension(e.height)),_css(S.getDisplayElement(),t.extend({},n,{zIndex:1001,opacity:1}))}x&&(x.resize(t.parseDimension(e.width),t.parseDimension(e.height)),_css(x.getDisplayElement(),t.extend({},e,{zIndex:1e3}))),h&&h.resizeMedia()}var o={controlbarseekable:"always",controlbarpausable:!0,controlbarstoppable:!0,playlistclickable:!0},u,f,l=n,c=r,h=i,p=s,d,v,m,g,y,w,E,S,x,T=!1,N,C,k=this;return this.load=function(n,r){A(),T=!0,f=t.extend(o,r),u=e.html5.playlistitem(n),O(),C=document.createElement("div"),C.id=k.id+"_instream_container",p.detachMedia(),d=E.getDisplayElement(),w=c.playlist[c.item],y=l.jwGetState(),(y==e.api.events.state.BUFFERING||y==e.api.events.state.PLAYING)&&d.pause(),v=d.src?d.src:d.currentSrc,m=d.innerHTML,g=d.currentTime,x=new e.html5.display(k,t.extend({},c.plugins.config.display)),x.setAlternateClickHandler(function(t){_fakemodel.state==e.api.events.state.PAUSED?k.jwInstreamPlay():H(e.api.events.JWPLAYER_INSTREAM_CLICK,t)}),C.appendChild(x.getDisplayElement());if(!t.isMobile()){S=new e.html5.controlbar(k,t.extend({},c.plugins.config.controlbar,{}));if(c.plugins.config.controlbar.position==e.html5.view.positions.OVER)C.appendChild(S.getDisplayElement());else{var i=c.plugins.object.controlbar.getDisplayElement().parentNode;i.appendChild(S.getDisplayElement())}}h.setupInstream(C,d),B(),E.load(u)},this.jwInstreamDestroy=function(t){if(!T)return;T=!1,y!=e.api.events.state.IDLE?(E.load(w,!1),E.stop(!1)):E.stop(!0),E.detachMedia(),h.destroyInstream();if(S)try{S.getDisplayElement().parentNode.removeChild(S.getDisplayElement())}catch(n){}H(e.api.events.JWPLAYER_INSTREAM_DESTROYED,{reason:t?"complete":"destroyed"},!0),p.attachMedia();if(y==e.api.events.state.BUFFERING||y==e.api.events.state.PLAYING)d.play(),c.playlist[c.item]==w&&c.getMedia().seek(g);return},this.jwInstreamAddEventListener=function(e,t){N.addEventListener(e,t)},this.jwInstreamRemoveEventListener=function(e,t){N.removeEventListener(e,t)},this.jwInstreamPlay=function(){if(!T)return;E.play(!0)},this.jwInstreamPause=function(){if(!T)return;E.pause(!0)},this.jwInstreamSeek=function(e){if(!T)return;E.seek(e)},this.jwInstreamGetState=function(){return T?_fakemodel.state:undefined},this.jwInstreamGetPosition=function(){return T?_fakemodel.position:undefined},this.jwInstreamGetDuration=function(){return T?_fakemodel.duration:undefined},this.playlistClickable=function(){return!T||f.playlistclickable.toString().toLowerCase()=="true"},this.jwPlay=function(e){f.controlbarpausable.toString().toLowerCase()=="true"&&this.jwInstreamPlay()},this.jwPause=function(e){f.controlbarpausable.toString().toLowerCase()=="true"&&this.jwInstreamPause()},this.jwStop=function(){f.controlbarstoppable.toString().toLowerCase()=="true"&&(this.jwInstreamDestroy(),l.jwStop())},this.jwSeek=function(e){switch(f.controlbarseekable.toLowerCase()){case"always":this.jwInstreamSeek(e);break;case"backwards":_fakemodel.position>e&&this.jwInstreamSeek(e)}},this.jwGetPosition=function(){},this.jwGetDuration=function(){},this.jwGetWidth=l.jwGetWidth,this.jwGetHeight=l.jwGetHeight,this.jwGetFullscreen=l.jwGetFullscreen,this.jwSetFullscreen=l.jwSetFullscreen,this.jwGetVolume=function(){return c.volume},this.jwSetVolume=function(e){E.volume(e),l.jwSetVolume(e)},this.jwGetMute=function(){return c.mute},this.jwSetMute=function(e){E.mute(e),l.jwSetMute(e)},this.jwGetState=function(){return _fakemodel.state},this.jwGetPlaylist=function(){return[u]},this.jwGetPlaylistIndex=function(){return 0},this.jwGetStretching=function(){return c.config.stretching},this.jwAddEventListener=function(e,t){N.addEventListener(e,t)},this.jwRemoveEventListener=function(e,t){N.removeEventListener(e,t)},this.skin=l.skin,this.id=l.id+"_instream",L(),this}}(jwplayer),function(e){var t={prefix:"",file:"",link:"",linktarget:"_top",margin:8,out:.5,over:1,timeout:5,hide:!0,position:"bottom-left"};_css=e.utils.css,e.html5.logo=function(n,r){function l(){c(),i.jwAddEventListener(e.api.events.JWPLAYER_PLAYER_STATE,E),h(),p()}function c(){if(t.prefix){var i=n.version.split(/\W/).splice(0,2).join("/");t.prefix.indexOf(i)<0&&(t.prefix+=i+"/")}r.position==e.html5.view.positions.OVER&&(r.position=t.position);try{window.location.href.indexOf("https")==0&&(t.prefix=t.prefix.replace("http://l.longtailvideo.com","https://securel.longtailvideo.com"))}catch(s){}o=e.utils.extend({},t,r)}function h(){u=document.createElement("img"),u.id=i.id+"_jwplayer_logo",u.style.display="none",u.onload=function(e){_css(u,g()),v()};if(!o.file)return;o.file.indexOf("/")>=0?u.src=o.file:u.src=o.prefix+o.file}function p(){o.link?(u.onmouseover=m,u.onmouseout=v,u.onclick=d):this.mouseEnabled=!1}function d(e){typeof e!="undefined"&&e.stopPropagation();if(!f)return;i.jwPause(),i.jwSetFullscreen(!1),o.link&&window.open(o.link,o.linktarget);return}function v(e){o.link&&f&&(u.style.opacity=o.out);return}function m(e){f&&(u.style.opacity=o.over);return}function g(){var e={textDecoration:"none",position:"absolute",cursor:"pointer"};e.display=o.hide.toString()=="true"&&!f?"none":"block";var t=o.position.toLowerCase().split("-");for(var n in t)e[t[n]]=parseInt(o.margin);return e}function y(){o.hide.toString()=="true"&&(u.style.display="block",u.style.opacity=0,e.utils.fadeTo(u,o.out,.1,parseFloat(u.style.opacity)),s=setTimeout(function(){w()},o.timeout*1e3)),f=!0}function w(){f=!1,o.hide.toString()=="true"&&e.utils.fadeTo(u,0,.1,parseFloat(u.style.opacity))}function E(t){t.newstate==e.api.events.state.BUFFERING&&(clearTimeout(s),y())}var i=n,s,o,u,f=!1;l();if(!o.file)return;return this.resize=function(e,t){},this.getDisplayElement=function(){return u},this}}(jwplayer),function(e){var t={ended:e.api.events.state.IDLE,playing:e.api.events.state.PLAYING,pause:e.api.events.state.PAUSED,buffering:e.api.events.state.BUFFERING},n=e.utils,r=n.isMobile(),i,s,o={};e.html5.mediavideo=function(u,l){function D(e,t){return p[e]?p[e]:(p[e]=function(e){n.exists(e.target.parentNode)&&t(e)},p[e])}function P(){E=e.api.events.state.IDLE,k=!0,w=H(),w.setAttribute("x-webkit-airplay","allow"),y.parentNode&&(w.id=y.id,y.parentNode.replaceChild(w,y))}function H(){var e=o[m.id];e||(y.tagName.toLowerCase()=="video"?e=y:e=document.createElement("video"),o[m.id]=e,e.id||(e.id=y.id));for(var t in h)e.addEventListener(t,D(t,h[t]),!0);return e}function B(t){if(t==e.api.events.state.PAUSED&&E==e.api.events.state.IDLE)return;if(r)switch(t){case e.api.events.state.PLAYING:G();break;case e.api.events.state.BUFFERING:case e.api.events.state.PAUSED:Y()}if(E!=t){var n=E;m.state=E=t,Z(e.api.events.JWPLAYER_PLAYER_STATE,{oldstate:n,newstate:t})}}function j(e){}function F(t){var n=Math.round(w.volume*100);Z(e.api.events.JWPLAYER_MEDIA_VOLUME,{volume:n},!0),Z(e.api.events.JWPLAYER_MEDIA_MUTE,{mute:w.muted},!0)}function I(t){if(!k)return;var r;if(n.exists(t)&&t.lengthComputable&&t.total)r=t.loaded/t.total*100;else if(n.exists(w.buffered)&&w.buffered.length>0){var i=w.buffered.length-1;i>=0&&(r=w.buffered.end(i)/w.duration*100)}n.useNativeFullscreen()&&n.exists(w.webkitDisplayingFullscreen)&&m.fullscreen!=w.webkitDisplayingFullscreen&&Z(e.api.events.JWPLAYER_FULLSCREEN,{fullscreen:w.webkitDisplayingFullscreen},!0),O===!1&&E==e.api.events.state.BUFFERING&&(Z(e.api.events.JWPLAYER_MEDIA_BUFFER_FULL),O=!0),A||(r==100&&(A=!0),n.exists(r)&&r>m.buffer&&(m.buffer=Math.round(r),Z(e.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:Math.round(r)})))}function q(t){if(!k)return;if(n.exists(t)&&n.exists(t.target)){L>0&&!isNaN(t.target.duration)&&(isNaN(m.duration)||m.duration<1)&&(t.target.duration==Infinity?m.duration=0:m.duration=Math.round(t.target.duration*10)/10),!S&&w.readyState>0&&B(e.api.events.state.PLAYING);if(E==e.api.events.state.PLAYING){if(w.readyState>0&&(N>-1||!S)){S=!0;try{w.currentTime!=N&&N>-1&&(w.currentTime=N,N=-1)}catch(r){}w.volume=m.volume/100,w.muted=m.mute}m.position=m.duration>0?Math.round(t.target.currentTime*10)/10:0,Z(e.api.events.JWPLAYER_MEDIA_TIME,{position:m.position,duration:m.duration});if(m.position>=m.duration&&(m.position>0||m.duration>0)){J();return}}}I(t)}function R(e){}function U(e){if(!k)return;i&&s&&(w.style.width=i,w.style.height=s,i=_previousHieght=0),t[e.type]&&(e.type=="ended"?J():B(t[e.type]))}function z(t){if(!k)return;var n=Math.round(w.duration*10)/10,r={height:w.videoHeight,width:w.videoWidth,duration:n};L||(m.duration<n||isNaN(m.duration))&&w.duration!=Infinity&&(m.duration=n),Z(e.api.events.JWPLAYER_MEDIA_META,{metadata:r})}function W(t){if(!k)return;if(E==e.api.events.state.IDLE)return;var r="There was an error: ";if(t.target.error&&t.target.tagName.toLowerCase()=="video"||t.target.parentNode.error&&t.target.parentNode.tagName.toLowerCase()=="video"){var i=n.exists(t.target.error)?t.target.error:t.target.parentNode.error;switch(i.code){case i.MEDIA_ERR_ABORTED:n.log("User aborted the video playback.");return;case i.MEDIA_ERR_NETWORK:r="A network error caused the video download to fail part-way: ";break;case i.MEDIA_ERR_DECODE:r="The video playback was aborted due to a corruption problem or because the video used features your browser did not support: ";break;case i.MEDIA_ERR_SRC_NOT_SUPPORTED:r="The video could not be loaded, either because the server or network failed or because the format is not supported: ";break;default:r="An unknown error occurred: "}}else{if(t.target.tagName.toLowerCase()!="source"){n.log("An unknown error occurred.  Continuing...");return}M--;if(M>0)return;if(n.userAgentMatch(/firefox/i)){n.log("The video could not be loaded, either because the server or network failed or because the format is not supported."),_(!1);return}r="The video could not be loaded, either because the server or network failed or because the format is not supported: "}_(!1),r+=X(),_error=!0,Z(e.api.events.JWPLAYER_ERROR,{message:r});return}function X(){var t="";for(var n in x.levels){var r=x.levels[n],i=y.ownerDocument.createElement("source");t+=e.utils.getAbsolutePath(r.file),n<x.levels.length-1&&(t+=", ")}return t}function V(){n.exists(T)||(T=setInterval(function(){I()},100))}function $(){clearInterval(T),T=null}function J(){E==e.api.events.state.PLAYING&&(_(!1),Z(e.api.events.JWPLAYER_MEDIA_BEFORECOMPLETE),Z(e.api.events.JWPLAYER_MEDIA_COMPLETE))}function K(t){n.exists(w.webkitDisplayingFullscreen)&&m.fullscreen&&!w.webkitDisplayingFullscreen&&Z(e.api.events.JWPLAYER_FULLSCREEN,{fullscreen:!1},!0)}function Q(e){if(e.length>0&&n.userAgentMatch(/Safari/i)&&!n.userAgentMatch(/Chrome/i)){var t=-1;for(var r=0;r<e.length;r++)switch(n.extension(e[r].file)){case"mp4":t<0&&(t=r);break;case"webm":e.splice(r,1)}if(t>0){var i=e.splice(t,1)[0];e.unshift(i)}}}function G(){setTimeout(function(){w.setAttribute("controls","controls")},100)}function Y(){setTimeout(function(){w.removeAttribute("controls")},250)}function Z(e,t,n){if(k||n)t?v.sendEvent(e,t):v.sendEvent(e)}var h={abort:j,canplay:U,canplaythrough:U,durationchange:z,emptied:j,ended:U,error:W,loadeddata:z,loadedmetadata:z,loadstart:U,pause:U,play:j,playing:U,progress:I,ratechange:j,seeked:U,seeking:U,stalled:U,suspend:U,timeupdate:q,volumechange:F,waiting:U,canshowcurrentframe:j,dataunavailable:j,empty:j,load:R,loadedfirstframe:j,webkitfullscreenchange:K},p={},v=new e.html5.eventdispatcher;n.extend(this,v);var m=u,y=l,w,E,S,x,T,N,C=!1,k=!1,L=!1,A,O,M;P(),this.load=function(t,o){typeof o=="undefined"&&(o=!0);if(!k)return;x=t,L=x.duration>0,m.duration=x.duration,n.empty(w),w.style.display="block",w.style.opacity=1,i&&s&&(w.style.width=i,w.style.height=s,i=_previousHieght=0),M=0,Q(t.levels);if(t.levels&&t.levels.length>0)if(t.levels.length==1||n.isIOS())w.src=t.levels[0].file;else{w.src&&w.removeAttribute("src");for(var u=0;u<t.levels.length;u++){var l=w.ownerDocument.createElement("source");l.src=t.levels[u].file,w.appendChild(l),M++}}else w.src=t.file;w.volume=m.volume/100,w.muted=m.mute,r&&G(),A=O=S=!1,m.buffer=0,n.exists(t.start)||(t.start=0),N=t.start>0?t.start:-1,Z(e.api.events.JWPLAYER_MEDIA_LOADED),(!r&&t.levels.length==1||!C)&&w.load(),C=!1,o&&(B(e.api.events.state.BUFFERING),Z(e.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:0}),V()),w.videoWidth>0&&w.videoHeight>0&&z()},this.play=function(){if(!k)return;V(),O?B(e.api.events.state.PLAYING):(w.load(),B(e.api.events.state.BUFFERING)),w.play()},this.pause=function(){if(!k)return;w.pause(),B(e.api.events.state.PAUSED)},this.seek=function(e){if(!k)return;!S&&w.readyState>0?!(m.duration<=0||isNaN(m.duration))&&!(m.position<=0||isNaN(m.position))&&(w.currentTime=e,w.play()):N=e};var _=this.stop=function(t){if(!k)return;n.exists(t)||(t=!0),$();if(t){O=!1;var r=navigator.userAgent;if(w.webkitSupportsFullscreen)try{w.webkitExitFullscreen()}catch(o){}w.style.opacity=0,Y(),n.isIE()?w.src="":w.removeAttribute("src"),n.empty(w),w.load(),C=!0}if(n.isIPod())i=w.style.width,s=w.style.height,w.style.width=0,w.style.height=0;else if(n.isIPad()){w.style.display="none";try{w.webkitExitFullscreen()}catch(u){}}B(e.api.events.state.IDLE)};this.fullscreen=function(e){e===!0?this.resize("100%","100%"):this.resize(m.config.width,m.config.height)},this.resize=function(e,t){},this.volume=function(t){r||(w.volume=t/100,Z(e.api.events.JWPLAYER_MEDIA_VOLUME,{volume:t/100}))},this.mute=function(t){r||(w.muted=t,Z(e.api.events.JWPLAYER_MEDIA_MUTE,{mute:t}))},this.getDisplayElement=function(){return w},this.hasChrome=function(){return r&&E==e.api.events.state.PLAYING},this.detachMedia=function(){return k=!1,this.getDisplayElement()},this.attachMedia=function(){k=!0},this.destroy=function(){if(w&&w.parentNode){$();for(var e in h)w.removeEventListener(e,D(e,h[e]),!0);n.empty(w),y=w.parentNode,w.parentNode.removeChild(w),delete o[m.id],w=null}}}}(jwplayer),function(e){var t={ended:e.api.events.state.IDLE,playing:e.api.events.state.PLAYING,pause:e.api.events.state.PAUSED,buffering:e.api.events.state.BUFFERING},n=e.utils.css;e.html5.mediayoutube=function(t,r){function c(t){if(u!=t){var n=u;s.state=t,u=t,i.sendEvent(e.api.events.JWPLAYER_PLAYER_STATE,{oldstate:n,newstate:t})}}function h(e){var t=e.levels[0].file;t=["http://www.youtube.com/v/",p(t),"&amp;hl=en_US&amp;fs=1&autoplay=1"].join(""),f=document.createElement("object"),f.id=o.id,f.style.position="absolute";var n={movie:t,allowfullscreen:"true",allowscriptaccess:"always"};for(var r in n){var i=document.createElement("param");i.name=r,i.value=n[r],f.appendChild(i)}l=document.createElement("embed"),f.appendChild(l);var s={src:t,type:"application/x-shockwave-flash",allowfullscreen:"true",allowscriptaccess:"always",width:f.width,height:f.height};for(var u in s)l.setAttribute(u,s[u]);f.appendChild(l),f.style.zIndex=2147483e3,o!=f&&o.parentNode&&o.parentNode.replaceChild(f,o),o=f}function p(e){var t=e.split(/\?|\#\!/),n="";for(var r=0;r<t.length;r++)t[r].substr(0,2)=="v="&&(n=t[r].substr(2));return n==""&&(e.indexOf("/v/")>=0?n=e.substr(e.indexOf("/v/")+3):e.indexOf("youtu.be")>=0?n=e.substr(e.indexOf("youtu.be/")+9):n=e),n.indexOf("?")>-1&&(n=n.substr(0,n.indexOf("?"))),n.indexOf("&")>-1&&(n=n.substr(0,n.indexOf("&"))),n}var i=new e.html5.eventdispatcher;e.utils.extend(this,i);var s=t,o=document.getElementById(r.id),u=e.api.events.state.IDLE,f,l;return this.getDisplayElement=this.detachMedia=function(){return o},this.attachMedia=function(){},this.play=function(){u==e.api.events.state.IDLE?(i.sendEvent(e.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100}),i.sendEvent(e.api.events.JWPLAYER_MEDIA_BUFFER_FULL),c(e.api.events.state.PLAYING)):u==e.api.events.state.PAUSED&&c(e.api.events.state.PLAYING)},this.pause=function(){c(e.api.events.state.PAUSED)},this.seek=function(e){},this.stop=function(t){_utils.exists(t)||(t=!0),s.position=0,c(e.api.events.state.IDLE),t&&n(o,{display:"none"})},this.volume=function(t){s.setVolume(t),i.sendEvent(e.api.events.JWPLAYER_MEDIA_VOLUME,{volume:Math.round(t)})},this.mute=function(t){o.muted=t,i.sendEvent(e.api.events.JWPLAYER_MEDIA_MUTE,{mute:t})},this.resize=function(e,t){e*t>0&&f&&(f.width=l.width=e,f.height=l.height=t)},this.fullscreen=function(e){e===!0?this.resize("100%","100%"):this.resize(s.config.width,s.config.height)},this.load=function(t){h(t),n(f,{display:"block"}),c(e.api.events.state.BUFFERING),i.sendEvent(e.api.events.JWPLAYER_MEDIA_BUFFER,{bufferPercent:0}),i.sendEvent(e.api.events.JWPLAYER_MEDIA_LOADED),this.play()},this.hasChrome=function(){return u!=e.api.events.state.IDLE},this.embed=l,this}}(jwplayer),function(jwplayer){var _configurableStateVariables=["width","height","start","duration","volume","mute","fullscreen","item","plugins","stretching"],_utils=jwplayer.utils;jwplayer.html5.model=function(api,container,options){function _loadExternal(e){var t=new jwplayer.html5.playlistloader;t.addEventListener(jwplayer.api.events.JWPLAYER_PLAYLIST_LOADED,function(e){_model.playlist=new jwplayer.html5.playlist(e),_loadComplete(!0)}),t.addEventListener(jwplayer.api.events.JWPLAYER_ERROR,function(e){_model.playlist=new jwplayer.html5.playlist({playlist:[]}),_loadComplete(!1)}),t.load(e)}function _loadComplete(){_model.config.shuffle?_model.item=_getShuffleItem():(_model.config.item>=_model.playlist.length?_model.config.item=_model.playlist.length-1:_model.config.item<0&&(_model.config.item=0),_model.item=_model.config.item),_model.position=0,_model.duration=_model.playlist.length>0?_model.playlist[_model.item].duration:0,_eventDispatcher.sendEvent(jwplayer.api.events.JWPLAYER_PLAYLIST_LOADED,{playlist:_model.playlist}),_eventDispatcher.sendEvent(jwplayer.api.events.JWPLAYER_PLAYLIST_ITEM,{index:_model.item})}function _getShuffleItem(){var e=null;if(_model.playlist.length>1)while(!jwplayer.utils.exists(e))e=Math.floor(Math.random()*_model.playlist.length),e==_model.item&&(e=null);else e=0;return e}function forward(e){switch(e.type){case jwplayer.api.events.JWPLAYER_MEDIA_LOADED:_container=_media.getDisplayElement();break;case jwplayer.api.events.JWPLAYER_MEDIA_MUTE:this.mute=e.mute;break;case jwplayer.api.events.JWPLAYER_MEDIA_VOLUME:this.volume=e.volume}_eventDispatcher.sendEvent(e.type,e)}var _api=api,_container=container,_cookies=_utils.getCookies(),_model={id:_container.id,playlist:[],state:jwplayer.api.events.state.IDLE,position:0,buffer:0,container:_container,config:{width:480,height:320,item:-1,skin:undefined,file:undefined,image:undefined,start:0,duration:0,bufferlength:5,volume:_cookies.volume?_cookies.volume:90,mute:_cookies.mute&&_cookies.mute.toString().toLowerCase()=="true"?!0:!1,fullscreen:!1,repeat:"",stretching:jwplayer.utils.stretching.UNIFORM,autostart:!1,debug:undefined,screencolor:undefined}},_media,_eventDispatcher=new jwplayer.html5.eventdispatcher,_components=["display","logo","controlbar","playlist","dock"];jwplayer.utils.extend(_model,_eventDispatcher);for(var option in options){if(typeof options[option]=="string"){var type=/color$/.test(option)?"color":null;options[option]=jwplayer.utils.typechecker(options[option],type)}var config=_model.config,path=option.split(".");for(var edge in path)edge==path.length-1?config[path[edge]]=options[option]:(jwplayer.utils.exists(config[path[edge]])||(config[path[edge]]={}),config=config[path[edge]])}for(var index in _configurableStateVariables){var configurableStateVariable=_configurableStateVariables[index];_model[configurableStateVariable]=_model.config[configurableStateVariable]}var pluginorder=_components.concat([]);if(jwplayer.utils.exists(_model.plugins)&&typeof _model.plugins=="string"){var userplugins=_model.plugins.split(",");for(var userplugin in userplugins)typeof userplugins[userplugin]=="string"&&pluginorder.push(userplugins[userplugin].replace(/^\s+|\s+$/g,""))}jwplayer.utils.isMobile()?(pluginorder=["display","logo","dock","playlist"],jwplayer.utils.exists(_model.config.repeat)||(_model.config.repeat="list")):_model.config.chromeless&&(pluginorder=["logo","dock","playlist"],jwplayer.utils.exists(_model.config.repeat)||(_model.config.repeat="list")),_model.plugins={order:pluginorder,config:{},object:{}};if(typeof _model.config.components!="undefined")for(var component in _model.config.components)_model.plugins.config[component]=_model.config.components[component];var playlistVisible=!1;for(var pluginIndex in _model.plugins.order){var pluginName=_model.plugins.order[pluginIndex],pluginConfig=jwplayer.utils.exists(_model.plugins.config[pluginName])?_model.plugins.config[pluginName]:{};_model.plugins.config[pluginName]=jwplayer.utils.exists(_model.plugins.config[pluginName])?jwplayer.utils.extend(_model.plugins.config[pluginName],pluginConfig):pluginConfig,jwplayer.utils.exists(_model.plugins.config[pluginName].position)?(pluginName=="playlist"&&(playlistVisible=!0),_model.plugins.config[pluginName].position=_model.plugins.config[pluginName].position.toString().toUpperCase()):pluginName=="playlist"?_model.plugins.config[pluginName].position=jwplayer.html5.view.positions.NONE:_model.plugins.config[pluginName].position=jwplayer.html5.view.positions.OVER}_model.plugins.config.controlbar&&playlistVisible&&(_model.plugins.config.controlbar.hideplaylistcontrols=!0);if(typeof _model.plugins.config.dock!="undefined"){if(typeof _model.plugins.config.dock!="object"){var position=_model.plugins.config.dock.toString().toUpperCase();_model.plugins.config.dock={position:position}}typeof _model.plugins.config.dock.position!="undefined"&&(_model.plugins.config.dock.align=_model.plugins.config.dock.position,_model.plugins.config.dock.position=jwplayer.html5.view.positions.OVER);if(typeof _model.plugins.config.dock.idlehide=="undefined")try{_model.plugins.config.dock.idlehide=_model.plugins.config.controlbar.idlehide}catch(e){}}_model.loadPlaylist=function(arg){var input;if(typeof arg=="string")if(arg.indexOf("[")==0||arg.indexOf("{")=="0")try{input=eval(arg)}catch(err){input=arg}else input=arg;else input=arg;var config;switch(jwplayer.utils.typeOf(input)){case"object":config=input;break;case"array":config={playlist:input};break;default:config={file:input}}_model.playlist=new jwplayer.html5.playlist(config),_model.item=_model.config.item>=0?_model.config.item:0,!_model.playlist[0].provider&&_model.playlist[0].file?_loadExternal(_model.playlist[0].file):_loadComplete()};var _mediaProviders={};return _model.setActiveMediaProvider=function(e){e.provider=="audio"&&(e.provider="sound");var t=e.provider,n=_media?_media.getDisplayElement():null;if(t=="sound"||t=="http"||t=="")t="video";if(!jwplayer.utils.exists(_mediaProviders[t])){switch(t){case"video":_media=new jwplayer.html5.mediavideo(_model,n?n:_container);break;case"youtube":_media=new jwplayer.html5.mediayoutube(_model,n?n:_container)}if(!jwplayer.utils.exists(_media))return!1;_media.addGlobalListener(forward),_mediaProviders[t]=_media}else _media!=_mediaProviders[t]&&(_media&&_media.stop(),_media=_mediaProviders[t]);return!0},_model.getMedia=function(){return _media},_model.seek=function(e){return _eventDispatcher.sendEvent(jwplayer.api.events.JWPLAYER_MEDIA_SEEK,{position:_model.position,offset:e}),_media.seek(e)},_model.setVolume=function(e){_utils.saveCookie("volume",e),_model.volume=e},_model.setMute=function(e){_utils.saveCookie("mute",e),_model.mute=e},_model.setupPlugins=function(){if(!jwplayer.utils.exists(_model.plugins)||!jwplayer.utils.exists(_model.plugins.order)||_model.plugins.order.length==0)return jwplayer.utils.log("No plugins to set up"),_model;for(var e=0;e<_model.plugins.order.length;e++)try{var t=_model.plugins.order[e];jwplayer.utils.exists(jwplayer.html5[t])?t=="playlist"?_model.plugins.object[t]=new jwplayer.html5.playlistcomponent(_api,_model.plugins.config[t]):_model.plugins.object[t]=new jwplayer.html5[t](_api,_model.plugins.config[t]):_model.plugins.order.splice(plugin,plugin+1),typeof _model.plugins.object[t].addGlobalListener=="function"&&_model.plugins.object[t].addGlobalListener(forward)}catch(n){jwplayer.utils.log("Could not setup "+t)}},_model}}(jwplayer),function(e){e.html5.playlist=function(t){var n=[];if(t.playlist&&t.playlist instanceof Array&&t.playlist.length>0)for(var r in t.playlist)isNaN(parseInt(r))||n.push(new e.html5.playlistitem(t.playlist[r]));else n.push(new e.html5.playlistitem(t));return n}}(jwplayer),function(e){var t={size:180,position:e.html5.view.positions.NONE,itemheight:60,thumbs:!0,fontcolor:"#000000",overcolor:"",activecolor:"",backgroundcolor:"#f8f8f8",font:"_sans",fontsize:"",fontstyle:"",fontweight:""},n={_sans:"Arial, Helvetica, sans-serif",_serif:"Times, Times New Roman, serif",_typewriter:"Courier New, Courier, monospace"};_utils=e.utils,_css=_utils.css,_hide=function(e){_css(e,{display:"none"})},_show=function(e){_css(e,{display:"block"})},e.html5.playlistcomponent=function(r,i){function g(){u=document.createElement("div"),u.id=s.id+"_jwplayer_playlistcomponent",u.style.overflow="hidden";switch(o.position){case e.html5.view.positions.RIGHT:case e.html5.view.positions.LEFT:u.style.width=o.size+"px";break;case e.html5.view.positions.TOP:case e.html5.view.positions.BOTTOM:u.style.height=o.size+"px"}O(),m.item&&(o.itemheight=m.item.height),u.style.backgroundColor="#C6C6C6",s.jwAddEventListener(e.api.events.JWPLAYER_PLAYLIST_LOADED,x),s.jwAddEventListener(e.api.events.JWPLAYER_PLAYLIST_ITEM,L),s.jwAddEventListener(e.api.events.JWPLAYER_PLAYER_STATE,A)}function y(){var e=document.createElement("ul");return _css(e,{width:u.style.width,minWidth:u.style.width,height:u.style.height,backgroundColor:o.backgroundcolor,backgroundImage:m.background?"url("+m.background.src+")":"",color:o.fontcolor,listStyle:"none",margin:0,padding:0,fontFamily:n[o.font]?n[o.font]:n._sans,fontSize:(o.fontsize?o.fontsize:11)+"px",fontStyle:o.fontstyle,fontWeight:o.fontweight,overflowY:"auto"}),e}function w(e){return function(){var t=d.getElementsByClassName("item")[e],n=o.fontcolor,r=m.item?"url("+m.item.src+")":"";e==s.jwGetPlaylistIndex()&&(o.activecolor!==""&&(n=o.activecolor),m.itemActive&&(r="url("+m.itemActive.src+")")),_css(t,{color:o.overcolor!==""?o.overcolor:n,backgroundImage:m.itemOver?"url("+m.itemOver.src+")":r})}}function E(e){return function(){var t=d.getElementsByClassName("item")[e],n=o.fontcolor,r=m.item?"url("+m.item.src+")":"";e==s.jwGetPlaylistIndex()&&(o.activecolor!==""&&(n=o.activecolor),m.itemActive&&(r="url("+m.itemActive.src+")")),_css(t,{color:n,backgroundImage:r})}}function S(t){var n=h[t],r=document.createElement("li");r.className="item",_css(r,{height:o.itemheight,display:"block",cursor:"pointer",backgroundImage:m.item?"url("+m.item.src+")":"",backgroundSize:"100% "+o.itemheight+"px"}),r.onmouseover=w(t),r.onmouseout=E(t);var i=document.createElement("div"),s=new Image,u=0,c=0,p=0;k()&&(n.image||n["playlist.image"]||m.itemImage)&&(s.className="image",m.itemImage?(u=(o.itemheight-m.itemImage.height)/2,c=m.itemImage.width,p=m.itemImage.height):(c=o.itemheight*4/3,p=o.itemheight),_css(i,{height:p,width:c,"float":"left",styleFloat:"left",cssFloat:"left",margin:"0 5px 0 0",background:"black",overflow:"hidden",margin:u+"px",position:"relative"}),_css(s,{position:"relative"}),i.appendChild(s),s.onload=function(){e.utils.stretch(e.utils.stretching.FILL,s,c,p,this.naturalWidth,this.naturalHeight)},n["playlist.image"]?s.src=n["playlist.image"]:n.image?s.src=n.image:m.itemImage&&(s.src=m.itemImage.src),r.appendChild(i));var d=f-c-u*2;l<o.itemheight*h.length&&(d-=15);var v=document.createElement("div");_css(v,{position:"relative",height:"100%",overflow:"hidden"});var g=document.createElement("span");n.duration>0&&(g.className="duration",_css(g,{fontSize:(o.fontsize?o.fontsize:11)+"px",fontWeight:o.fontweight?o.fontweight:"bold",width:"40px",height:o.fontsize?o.fontsize+10:20,lineHeight:24,"float":"right",styleFloat:"right",cssFloat:"right"}),g.innerHTML=_utils.timeFormat(n.duration),v.appendChild(g));var y=document.createElement("span");y.className="title",_css(y,{padding:"5px 5px 0 "+(u?0:"5px"),height:o.fontsize?o.fontsize+10:20,lineHeight:o.fontsize?o.fontsize+10:20,overflow:"hidden","float":"left",styleFloat:"left",cssFloat:"left",width:(n.duration>0?d-50:d)-10+"px",fontSize:(o.fontsize?o.fontsize:13)+"px",fontWeight:o.fontweight?o.fontweight:"bold"}),y.innerHTML=n?n.title:"",v.appendChild(y);if(n.description){var b=document.createElement("span");b.className="description",_css(b,{display:"block","float":"left",styleFloat:"left",cssFloat:"left",margin:0,paddingLeft:y.style.paddingLeft,paddingRight:y.style.paddingRight,lineHeight:(o.fontsize?o.fontsize+4:16)+"px",overflow:"hidden",position:"relative"}),b.innerHTML=n.description,v.appendChild(b)}return r.appendChild(v),r}function x(e){u.innerHTML="",h=T();if(!h)return;items=[],d=y();for(var t=0;t<h.length;t++){var n=S(t);n.onclick=N(t),d.appendChild(n),items.push(n)}v=s.jwGetPlaylistIndex(),E(v)(),u.appendChild(d);if(_utils.isIOS()&&window.iScroll){d.style.height=o.itemheight*h.length+"px";var r=new iScroll(u.id)}}function T(){var e=s.jwGetPlaylist(),t=[];for(var n=0;n<e.length;n++)e[n]["ova.hidden"]||t.push(e[n]);return t}function N(e){return function(){s.jwPlaylistItem(e),s.jwPlay(!0)}}function C(){d.scrollTop=s.jwGetPlaylistIndex()*o.itemheight}function k(){return o.thumbs.toString().toLowerCase()=="true"}function L(e){v>=0&&(E(v)(),v=e.index),E(e.index)(),C()}function A(){if(o.position==e.html5.view.positions.OVER)switch(s.jwGetState()){case e.api.events.state.IDLE:_show(u);break;default:_hide(u)}}function O(){for(var e in m)m[e]=M(e)}function M(e){return s.skin.getSkinElement("playlist",e)}var s=r,o=e.utils.extend({},t,s.skin.getComponentSettings("playlist"),i);if(o.position==e.html5.view.positions.NONE||typeof e.html5.view.positions[o.position]=="undefined")return;var u,f,l,h,p,d,v=-1,m={background:undefined,item:undefined,itemOver:undefined,itemImage:undefined,itemActive:undefined};return this.getDisplayElement=function(){return u},this.resize=function(e,t){f=e,l=t;if(s.jwGetFullscreen())_hide(u);else{var n={display:"block",width:f,height:l};_css(u,n)}},this.show=function(){_show(u)},this.hide=function(){_hide(u)},g(),this}}(jwplayer),function(e){function t(t){if(e.utils.isYouTube(t.file))return"youtube";var n=e.utils.extension(t.file),r;if(n&&e.utils.extensionmap[n]){if(n=="m3u8")return"video";r=e.utils.extensionmap[n].html5}else t.type&&(r=t.type);if(r){var i=r.split("/")[0];if(i=="audio")return"sound";if(i=="video")return i}return""}e.html5.playlistitem=function(n){var r={author:"",date:"",description:"",image:"",link:"",mediaid:"",tags:"",title:"",provider:"",file:"",streamer:"",duration:-1,start:0,currentLevel:-1,levels:[]},i=e.utils.extend({},r,n);return i.type&&(i.provider=i.type,delete i.type),i.levels.length===0&&(i.levels[0]=new e.html5.playlistitemlevel(i)),i.provider?i.provider=i.provider.toLowerCase():i.provider=t(i.levels[0]),i}}(jwplayer),function(e){e.html5.playlistitemlevel=function(t){var n={file:"",streamer:"",bitrate:0,width:0};for(var r in n)e.utils.exists(t[r])&&(n[r]=t[r]);return n}}(jwplayer),function(e){e.html5.playlistloader=function(){function n(n){var i=[];try{var i=e.utils.parsers.rssparser.parse(n.responseXML.firstChild);t.sendEvent(e.api.events.JWPLAYER_PLAYLIST_LOADED,{playlist:new e.html5.playlist({playlist:i})})}catch(s){r("Could not parse the playlist")}}function r(n){t.sendEvent(e.api.events.JWPLAYER_ERROR,{message:n?n:"Could not load playlist an unknown reason."})}var t=new e.html5.eventdispatcher;e.utils.extend(this,t),this.load=function(t){e.utils.ajax(t,n,r)}}}(jwplayer),function(e){e.html5.skin=function(){var t={},n=!1;this.load=function(r,i){new e.html5.skinloader(r,function(e){n=!0,t=e,i()},function(){new e.html5.skinloader("",function(e){n=!0,t=e,i()})})},this.getSkinElement=function(r,i){if(n)try{return t[r].elements[i]}catch(s){e.utils.log("No such skin component / element: ",[r,i])}return null},this.getComponentSettings=function(e){return n&&t&&t[e]?t[e].settings:null},this.getComponentLayout=function(e){return n?t[e].layout:null}}}(jwplayer),function(e){e.html5.skinloader=function(t,n,r){function h(){typeof l!="string"||l===""?p(e.html5.defaultSkin().xml):e.utils.ajax(e.utils.getAbsolutePath(l),function(t){try{if(e.utils.exists(t.responseXML)){p(t.responseXML);return}}catch(n){m()}p(e.html5.defaultSkin().xml)},function(t){p(e.html5.defaultSkin().xml)})}function p(t){var n=t.getElementsByTagName("component");if(n.length===0)return;for(var r=0;r<n.length;r++){var s=n[r].getAttribute("name"),o={settings:{},elements:{},layout:{}};i[s]=o;var f=n[r].getElementsByTagName("elements")[0].getElementsByTagName("element");for(var l=0;l<f.length;l++)v(f[l],s);var c=n[r].getElementsByTagName("settings")[0];if(c&&c.childNodes.length>0){var h=c.getElementsByTagName("setting");for(var p=0;p<h.length;p++){var m=h[p].getAttribute("name"),g=h[p].getAttribute("value"),y=/color$/.test(m)?"color":null;i[s].settings[m]=e.utils.typechecker(g,y)}}var w=n[r].getElementsByTagName("layout")[0];if(w&&w.childNodes.length>0){var E=w.getElementsByTagName("group");for(var S=0;S<E.length;S++){var x=E[S];i[s].layout[x.getAttribute("position")]={elements:[]};for(var T=0;T<x.attributes.length;T++){var N=x.attributes[T];i[s].layout[x.getAttribute("position")][N.name]=N.value}var C=x.getElementsByTagName("*");for(var k=0;k<C.length;k++){var L=C[k];i[s].layout[x.getAttribute("position")].elements.push({type:L.tagName});for(var A=0;A<L.attributes.length;A++){var O=L.attributes[A];i[s].layout[x.getAttribute("position")].elements[k][O.name]=O.value}e.utils.exists(i[s].layout[x.getAttribute("position")].elements[k].name)||(i[s].layout[x.getAttribute("position")].elements[k].name=L.tagName)}}}u=!1,d()}}function d(){clearInterval(f),c||(f=setInterval(function(){g()},100))}function v(t,n){var r=new Image,s=t.getAttribute("name"),u=t.getAttribute("src"),f;if(u.indexOf("data:image/png;base64,")===0)f=u;else{var h=e.utils.getAbsolutePath(l),p=h.substr(0,h.lastIndexOf("/"));f=[p,n,u].join("/")}i[n].elements[s]={height:0,width:0,src:"",ready:!1,image:r},r.onload=function(e){y(r,s,n)},r.onerror=function(e){c=!0,d(),o()},r.src=f}function m(){for(var e in i){var t=i[e];for(var n in t.elements){var r=t.elements[n],s=r.image;s.onload=null,s.onerror=null,delete r.image,delete t.elements[n]}delete i[e]}}function g(){for(var e in i)if(e!="properties")for(var t in i[e].elements)if(!i[e].elements[t].ready)return;u===!1&&(clearInterval(f),s(i))}function y(t,n,r){i[r]&&i[r].elements[n]?(i[r].elements[n].height=t.height,i[r].elements[n].width=t.width,i[r].elements[n].src=t.src,i[r].elements[n].ready=!0,d()):e.utils.log("Loaded an image for a missing element: "+r+"."+n)}var i={},s=n,o=r,u=!0,f,l=t,c=!1;h()}}(jwplayer),function(e){e.html5.api=function(t,n){function f(){s.state==e.api.events.state.PLAYING||s.state==e.api.events.state.BUFFERING?u.pause():u.play()}function l(e){return function(){return s[e]}}function c(e,t,n){return function(){var r=s.plugins.object[e];r&&r[t]&&typeof r[t]=="function"&&r[t].apply(r,n)}}function p(e){return function(){if(h&&typeof h[e]=="function")return h[e].apply(this,arguments);_utils.log("Could not call instream method - instream API not initialized")}}function d(){s.config.playlistfile?(s.addEventListener(e.api.events.JWPLAYER_PLAYLIST_LOADED,v),s.loadPlaylist(s.config.playlistfile)):typeof s.config.playlist=="string"?(s.addEventListener(e.api.events.JWPLAYER_PLAYLIST_LOADED,v),s.loadPlaylist(s.config.playlist)):(s.loadPlaylist(s.config),setTimeout(v,25))}function v(t){s.removeEventListener(e.api.events.JWPLAYER_PLAYLIST_LOADED,v),s.setupPlugins(),o.setup();var t={id:r.id,version:r.version};u.playerReady(t)}var r={},i=document.createElement("div");t.parentNode.replaceChild(i,t),i.id=t.id,r.version=e.version,r.id=i.id;var s=new e.html5.model(r,i,n),o=new e.html5.view(r,i,s),u=new e.html5.controller(r,i,s,o);r.skin=new e.html5.skin,r.jwPlay=function(e){typeof e=="undefined"?f():e.toString().toLowerCase()=="true"?u.play():u.pause()},r.jwPause=function(e){typeof e=="undefined"?f():e.toString().toLowerCase()=="true"?u.pause():u.play()},r.jwStop=u.stop,r.jwSeek=u.seek,r.jwPlaylistItem=function(e){if(!h)return u.item(e);if(h.playlistClickable())return h.jwInstreamDestroy(),u.item(e)},r.jwPlaylistNext=u.next,r.jwPlaylistPrev=u.prev,r.jwResize=u.resize,r.jwLoad=u.load,r.jwDetachMedia=u.detachMedia,r.jwAttachMedia=u.attachMedia,r.jwGetPlaylistIndex=l("item"),r.jwGetPosition=l("position"),r.jwGetDuration=l("duration"),r.jwGetBuffer=l("buffer"),r.jwGetWidth=l("width"),r.jwGetHeight=l("height"),r.jwGetFullscreen=l("fullscreen"),r.jwSetFullscreen=u.setFullscreen,r.jwGetVolume=l("volume"),r.jwSetVolume=u.setVolume,r.jwGetMute=l("mute"),r.jwSetMute=u.setMute,r.jwGetStretching=function(){return s.stretching.toUpperCase()},r.jwGetState=l("state"),r.jwGetVersion=function(){return r.version},r.jwGetPlaylist=function(){return s.playlist},r.jwAddEventListener=u.addEventListener,r.jwRemoveEventListener=u.removeEventListener,r.jwSendEvent=u.sendEvent,r.jwDockSetButton=function(e,t,n,r){s.plugins.object.dock&&s.plugins.object.dock.setButton&&s.plugins.object.dock.setButton(e,t,n,r)},r.jwControlbarShow=c("controlbar","show"),r.jwControlbarHide=c("controlbar","hide"),r.jwDockShow=c("dock","show"),r.jwDockHide=c("dock","hide"),r.jwDisplayShow=c("display","show"),r.jwDisplayHide=c("display","hide");var h;return r.jwLoadInstream=function(t,n){h||(h=new e.html5.instream(r,s,o,u)),setTimeout(function(){h.load(t,n)},10)},r.jwInstreamDestroy=function(){h&&h.jwInstreamDestroy()},r.jwInstreamAddEventListener=p("jwInstreamAddEventListener"),r.jwInstreamRemoveEventListener=p("jwInstreamRemoveEventListener"),r.jwInstreamGetState=p("jwInstreamGetState"),r.jwInstreamGetDuration=p("jwInstreamGetDuration"),r.jwInstreamGetPosition=p("jwInstreamGetPosition"),r.jwInstreamPlay=p("jwInstreamPlay"),r.jwInstreamPause=p("jwInstreamPause"),r.jwInstreamSeek=p("jwInstreamSeek"),r.jwDestroy=function(){u.destroy()},r.jwGetLevel=function(){},r.jwGetBandwidth=function(){},r.jwGetLockState=function(){},r.jwLock=function(){},r.jwUnlock=function(){},s.config.chromeless&&!e.utils.isIOS()?d():r.skin.load(s.config.skin,d),r}}(jwplayer)}define("jwplayer",function(){});var swfobject=function(){function C(){if(b)return;try{var e=a.getElementsByTagName("body")[0].appendChild(U("span"));e.parentNode.removeChild(e)}catch(t){return}b=!0;var n=c.length;for(var r=0;r<n;r++)c[r]()}function k(e){b?e():c[c.length]=e}function L(t){if(typeof u.addEventListener!=e)u.addEventListener("load",t,!1);else if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof u.attachEvent!=e)z(u,"onload",t);else if(typeof u.onload=="function"){var n=u.onload;u.onload=function(){n(),t()}}else u.onload=t}function A(){l?O():M()}function O(){var n=a.getElementsByTagName("body")[0],r=U(t);r.setAttribute("type",i);var s=n.appendChild(r);if(s){var o=0;(function(){if(typeof s.GetVariable!=e){var t=s.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),T.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(o<10){o++,setTimeout(arguments.callee,10);return}n.removeChild(r),s=null,M()})()}else M()}function M(){var t=h.length;if(t>0)for(var n=0;n<t;n++){var r=h[n].id,i=h[n].callbackFn,s={success:!1,id:r};if(T.pv[0]>0){var o=R(r);if(o)if(W(h[n].swfVersion)&&!(T.wk&&T.wk<312))V(r,!0),i&&(s.success=!0,s.ref=_(r),i(s));else if(h[n].expressInstall&&D()){var u={};u.data=h[n].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));P(u,a,r,i)}else H(o),i&&i(s)}else{V(r,!0);if(i){var p=_(r);p&&typeof p.SetVariable!=e&&(s.success=!0,s.ref=p),i(s)}}}}function _(n){var r=null,i=R(n);if(i&&i.nodeName=="OBJECT")if(typeof i.SetVariable!=e)r=i;else{var s=i.getElementsByTagName(t)[0];s&&(r=s)}return r}function D(){return!w&&W("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function P(t,n,r,i){w=!0,g=i||null,y={success:!1,id:r};var o=R(r);if(o){o.nodeName=="OBJECT"?(v=B(o),m=null):(v=o,m=r),t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310)t.width="310";if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137)t.height="137";a.title=a.title.slice(0,47)+" - Flash Player Installation";var f=T.ie&&T.win?"ActiveX":"PlugIn",l="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+a.title;typeof n.flashvars!=e?n.flashvars+="&"+l:n.flashvars=l;if(T.ie&&T.win&&o.readyState!=4){var c=U("div");r+="SWFObjectNew",c.setAttribute("id",r),o.parentNode.insertBefore(c,o),o.style.display="none",function(){o.readyState==4?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}j(t,n,r)}}function H(e){if(T.ie&&T.win&&e.readyState!=4){var t=U("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(B(e),t),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(B(e),e)}function B(e){var n=U("div");if(T.win&&T.ie)n.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&n.appendChild(i[o].cloneNode(!0))}}}return n}function j(n,r,s){var o,u=R(s);if(T.wk&&T.wk<312)return o;if(u){typeof n.id==e&&(n.id=s);if(T.ie&&T.win){var a="";for(var f in n)n[f]!=Object.prototype[f]&&(f.toLowerCase()=="data"?r.movie=n[f]:f.toLowerCase()=="styleclass"?a+=' class="'+n[f]+'"':f.toLowerCase()!="classid"&&(a+=" "+f+'="'+n[f]+'"'));var l="";for(var c in r)r[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+r[c]+'" />');u.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>",p[p.length]=n.id,o=R(n.id)}else{var h=U(t);h.setAttribute("type",i);for(var d in n)n[d]!=Object.prototype[d]&&(d.toLowerCase()=="styleclass"?h.setAttribute("class",n[d]):d.toLowerCase()!="classid"&&h.setAttribute(d,n[d]));for(var v in r)r[v]!=Object.prototype[v]&&v.toLowerCase()!="movie"&&F(h,v,r[v]);u.parentNode.replaceChild(h,u),o=h}}return o}function F(e,t,n){var r=U("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function I(e){var t=R(e);t&&t.nodeName=="OBJECT"&&(T.ie&&T.win?(t.style.display="none",function(){t.readyState==4?q(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function q(e){var t=R(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function R(e){var t=null;try{t=a.getElementById(e)}catch(n){}return t}function U(e){return a.createElement(e)}function z(e,t,n){e.attachEvent(t,n),d[d.length]=[e,t,n]}function W(e){var t=T.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function X(n,r,i,s){if(T.ie&&T.mac)return;var o=a.getElementsByTagName("head")[0];if(!o)return;var u=i&&typeof i=="string"?i:"screen";s&&(E=null,S=null);if(!E||S!=u){var f=U("style");f.setAttribute("type","text/css"),f.setAttribute("media",u),E=o.appendChild(f),T.ie&&T.win&&typeof a.styleSheets!=e&&a.styleSheets.length>0&&(E=a.styleSheets[a.styleSheets.length-1]),S=u}T.ie&&T.win?E&&typeof E.addRule==t&&E.addRule(n,r):E&&typeof a.createTextNode!=e&&E.appendChild(a.createTextNode(n+" {"+r+"}"))}function V(e,t){if(!x)return;var n=t?"visible":"hidden";b&&R(e)?R(e).style.visibility=n:X("#"+e,"visibility:"+n)}function $(t){var n=/[\\\"<>\.;]/,r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s="SWFObjectExprInst",o="onreadystatechange",u=window,a=document,f=navigator,l=!1,c=[A],h=[],p=[],d=[],v,m,g,y,b=!1,w=!1,E,S,x=!0,T=function(){var s=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,o=f.userAgent.toLowerCase(),c=f.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(o),p=c?/mac/.test(c):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=!1,m=[0,0,0],g=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t)g=f.plugins[n].description,g&&(typeof f.mimeTypes==e||!f.mimeTypes[i]||!!f.mimeTypes[i].enabledPlugin)&&(l=!0,v=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u.ActiveXObject!=e)try{var y=new ActiveXObject(r);y&&(g=y.GetVariable("$version"),g&&(v=!0,g=g.split(" ")[1].split(","),m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:s,pv:m,wk:d,ie:v,win:h,mac:p}}(),N=function(){if(!T.w3)return;(typeof a.readyState!=e&&a.readyState=="complete"||typeof a.readyState==e&&(a.getElementsByTagName("body")[0]||a.body))&&C(),b||(typeof a.addEventListener!=e&&a.addEventListener("DOMContentLoaded",C,!1),T.ie&&T.win&&(a.attachEvent(o,function(){a.readyState=="complete"&&(a.detachEvent(o,arguments.callee),C())}),u==top&&function(){if(b)return;try{a.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()}()),T.wk&&function(){if(b)return;if(!/loaded|complete/.test(a.readyState)){setTimeout(arguments.callee,0);return}C()}(),L(C))}(),J=function(){T.ie&&T.win&&window.attachEvent("onunload",function(){var e=d.length;for(var t=0;t<e;t++)d[t][0].detachEvent(d[t][1],d[t][2]);var n=p.length;for(var r=0;r<n;r++)I(p[r]);for(var i in T)T[i]=null;T=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(T.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,h[h.length]=i,V(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(T.w3)return _(e)},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h={success:!1,id:r};T.w3&&!(T.wk&&T.wk<312)&&n&&r&&i&&s&&o?(V(r,!1),k(function(){i+="",s+="";var p={};if(l&&typeof l===t)for(var d in l)p[d]=l[d];p.data=n,p.width=i,p.height=s;var v={};if(f&&typeof f===t)for(var m in f)v[m]=f[m];if(a&&typeof a===t)for(var g in a)typeof v.flashvars!=e?v.flashvars+="&"+g+"="+a[g]:v.flashvars=g+"="+a[g];if(W(o)){var y=j(p,v,r);p.id==r&&V(r,!0),h.success=!0,h.ref=y}else{if(u&&D()){p.data=u,P(p,v,r,c);return}V(r,!0)}c&&c(h)})):c&&c(h)},switchOffAutoHideShow:function(){x=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:W,createSWF:function(e,t,n){return T.w3?j(e,t,n):undefined},showExpressInstall:function(e,t,n,r){T.w3&&D()&&P(e,t,n,r)},removeSWF:function(e){T.w3&&I(e)},createCSS:function(e,t,n,r){T.w3&&X(e,t,n,r)},addDomLoadEvent:k,addLoadEvent:L,getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return $(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return $(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(w){var e=R(s);e&&v&&(e.parentNode.replaceChild(v,e),m&&(V(m,!0),T.ie&&T.win&&(v.style.display="block")),g&&g(y)),w=!1}}}}();define("swfobject",function(){}),define("plex/view/players/VideoPlayerView",["hb!templates/players/VideoPlayerView.tpl","plex/control/Dispatcher","plex/control/utils/TranscodeUtil","plex/model/AppModel","plex/model/media/collections/EpisodeCollection","plex/view/BaseView","plex/view/modals/ResumeModal","plex/view/lists/media/EpisodeTileList","jwplayer","swfobject"],function(e,t,n,r,i,s,o,u){var a=s.extend({className:"container",player:null,url:null,session:null,resumeModal:null,episodeList:null,html5:!0,jwplayerReady:!1,timelineInterval:null,pingInterval:null,events:{"click .more-details-btn":"onMoreDetailsClick"},initialize:function(){_.bindAll(this,"timeline","ping","onTranscodeSuccess","onTranscodeError","onReady","onPlay","onTimeUpdate","onPause","onIdle","onEnded"),this.server=this.model.server,this.transcodeServer=this.server.get("supportsTranscoding")?this.server:r.get("primaryServer");if(this.model.get("parentKey")){var e=new i([],{server:this.model.server,section:this.model.section,url:this.model.get("parentKey")+"/children"});this.episodeList=new u({collection:e})}var t=_.bind(function(){n.video(this.model,this.onTranscodeSuccess,this.onTranscodeError)},this);this.model.resolveIndirect().done(t).fail(_.bind(function(){window.location=this.model.get("url")},this))},render:function(t,n){return this.$el.html(e({serverID:this.model.server.id,sectionID:this.model.section.id,media:this.model.toJSON(),showHTML5:t,showFlash:n,url:this.url})),this.episodeList&&this.$(".video-more-details").append(this.episodeList.render().el),this},play:function(e,n){var r=this.canPlayHLS(),i=this.canPlayFlash();this.render(r,i);if(r){var s=this.$("#video-player");this.$("video")[0].src=e,this.offset=n,s.on("play",this.onPlay),s.on("timeupdate",this.onTimeUpdate),s.on("pause",this.onPause),s.on("ended",this.onEnded)}else i?(this.html5=!1,jwplayer("video-player").setup({file:e,flashplayer:"swf/jwplayer/player.swf",provider:"swf/jwplayer/adaptiveProvider.swf",skin:"swf/jwplayer/plex.zip",width:860,height:485,volume:100,mute:!1,autostart:!0,start:n,events:{onReady:this.onReady,onPlay:this.onPlay,onPause:this.onPause,onIdle:this.onIdle}})):(this.html5=!1,t.trigger("navigate:error","Sorry, the Flash Player or a browser that supports HLS is required to play videos."))},timeline:function(){var e,t,n;if(this.html5){var i=this.$("#video-player")[0];e=Math.round(i.currentTime*1e3),t=Math.round(i.duration*1e3),i.ended?n="stopped":i.paused?n="paused":n="playing"}else{e=Math.round(jwplayer().getPosition()*1e3),t=Math.round(jwplayer().getDuration()*1e3),n=jwplayer().getState();switch(n){case"BUFFERING":n="buffering";break;case"PLAYING":n="playing";break;case"PAUSED":n="paused";break;case"IDLE":n="stopped"}}var s="/:/timeline?time="+e;s+="&duration="+t,s+="&state="+n,s+="&ratingKey="+this.model.id,s+="&X-Plex-Client-Identifier="+r.get("clientID"),$.ajax({url:this.server.resolveUrl(s),headers:this.server.getHeaders()})},ping:function(){var e="/video/:/transcode/segmented/ping?session="+this.session;$.ajax({url:this.transcodeServer.resolveUrl(e),headers:this.transcodeServer.getHeaders()})},destroy:function(){if(this.html5){var e=this.$("#video-player");e.off("play",this.onPlay),e.off("timeupdate",this.onTimeUpdate),e.off("pause",this.onPause),e.off("ended",this.onEnded)}else this.jwplayerReady&&jwplayer("video-player").remove();this.timelineInterval&&clearInterval(this.timelineInterval),this.pingInterval&&clearInterval(this.pingInterval);if(this.session){var t="/video/:/transcode/segmented/stop?session="+this.session;$.ajax({url:this.transcodeServer.resolveUrl(t),headers:this.transcodeServer.getHeaders()})}s.prototype.destroy.call(this)},canPlayFlash:function(){return swfobject.hasFlashPlayerVersion("10")},canPlayHLS:function(){var e=document.createElement("video");return e.canPlayType&&e.canPlayType("application/x-mpegURL").replace(/^no$/,"")},onTranscodeSuccess:function(e,t){this.url=e,this.session=t;var n=this.model.get("viewOffset")||0;n?(this.resumeModal=new o({offset:n}),this.addBinding(this.resumeModal,"offset:select",this.onOffsetSelect),r.set("modal",this.resumeModal)):this.play(e,0)},onTranscodeError:function(e,n,r){t.trigger("navigate:error","There was an error attempting to play this video.")},onOffsetSelect:function(e){this.removeBinding(this.resumeModal,"offset:select",this.onOffsetSelect),this.play(this.url,e/1e3)},onReady:function(){this.jwplayerReady=!0},onPlay:function(e){this.timelineInterval||(this.timelineInterval=setInterval(this.timeline,1e4)),this.pingInterval&&clearInterval(this.pingInterval)},onTimeUpdate:function(e){if(this.offset){var t=this.offset;this.offset=null,_.delay(function(){e.target.currentTime=t},100)}},onPause:function(e){this.pingInterval=setInterval(this.ping,3e4)},onIdle:function(e){this.timelineInterval&&clearInterval(this.timelineInterval),this.pingInterval=setInterval(this.ping,3e4)},onEnded:function(e){this.timelineInterval&&clearInterval(this.timelineInterval)},onMoreDetailsClick:function(e){e.preventDefault(),$(e.target).toggleClass("selected"),this.$(".video-more-details").toggleClass("open")}});return a}),define("hb!templates/channels/BrowseChannelsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a,f,l,c,h=this,p="function",d=n.helperMissing,v=void 0,m=this.escapeExpression;return s+='<div class="browse-channels-row row">\n	<h1>My Channels</h1>\n</div>\n\n<div id="filters-banner" class="banner">\n	<div class="pull-right">\n		<a href="#!/servers/',c=n.serverID,o=c||t.serverID,typeof o===p?o=o.call(t,{hash:{}}):o===v&&(o=d.call(t,"serverID",{hash:{}})),s+=m(o)+'/channels/directory"><i class="icon-th"></i> Directory</a>\n	</div>\n\n	<ul class="horizontal-filter-list channel-filter-list">\n		<li class="all-filter channel-filter ',o="",u="selected",a="all",c=n.view,f=c||t.view,c=n.eq,l=c||t.eq,typeof l===p?o=l.call(t,f,a,u,o,{hash:{}}):l===v?o=d.call(t,"eq",f,a,u,o,{hash:{}}):o=l,s+=m(o)+'"><a href="#">All</a></li>\n		<li class="video-filter channel-filter ',o="",u="selected",a="video",c=n.view,f=c||t.view,c=n.eq,l=c||t.eq,typeof l===p?o=l.call(t,f,a,u,o,{hash:{}}):l===v?o=d.call(t,"eq",f,a,u,o,{hash:{}}):o=l,s+=m(o)+'"><a href="#">',c=n.video,o=c||t.video,typeof o===p?o=o.call(t,{hash:{}}):o===v&&(o=d.call(t,"video",{hash:{}})),s+=m(o)+' Video</a></li>\n		<li class="music-filter channel-filter ',o="",u="selected",a="music",c=n.view,f=c||t.view,c=n.eq,l=c||t.eq,typeof l===p?o=l.call(t,f,a,u,o,{hash:{}}):l===v?o=d.call(t,"eq",f,a,u,o,{hash:{}}):o=l,s+=m(o)+'"><a href="#">',c=n.music,o=c||t.music,typeof o===p?o=o.call(t,{hash:{}}):o===v&&(o=d.call(t,"music",{hash:{}})),s+=m(o)+' Music</a></li>\n		<li class="photo-filter channel-filter ',o="",u="selected",a="photo",c=n.view,f=c||t.view,c=n.eq,l=c||t.eq,typeof l===p?o=l.call(t,f,a,u,o,{hash:{}}):l===v?o=d.call(t,"eq",f,a,u,o,{hash:{}}):o=l,s+=m(o)+'"><a href="#">',c=n.photo,o=c||t.photo,typeof o===p?o=o.call(t,{hash:{}}):o===v&&(o=d.call(t,"photo",{hash:{}})),s+=m(o)+" Photo</a></li>\n	</ul>\n</div>\n",s})}),define("plex/view/channels/BrowseChannelsView",["hb!templates/channels/BrowseChannelsView.tpl","plex/view/BaseView","plex/view/lists/channels/ChannelList"],function(e,t,n){var r=t.extend({className:"playlist-container container well",view:"all",events:{"click .all-filter a":"onAllClick","click .video-filter a":"onVideoClick","click .music-filter a":"onMusicClick","click .photo-filter a":"onPhotoClick"},initialize:function(){this.listCollection=new Backbone.Collection(this.collection.all()),this.list=this.registerView(new n({collection:this.listCollection})),this.addBinding(this.collection,"reset",this.onReset),this.addBinding(this.collection,"destroy",this.onDestroy),this.collection.fetch()},render:function(){var t=this.collection.video().length,n=this.collection.music().length,r=this.collection.photo().length;return this.$el.html(e({serverID:this.collection.server.id,view:this.view,video:t,music:n,photo:r})),this.$el.append(this.list.render().el),this},onReset:function(e){this.listCollection.reset(this.collection.all()),this.render()},onDestroy:function(e){this.render()},onAllClick:function(e){e.preventDefault(),this.view="all",this.$(".channel-filter").removeClass("selected"),this.$(".all-filter").addClass("selected"),this.listCollection.reset(this.collection.all())},onVideoClick:function(e){e.preventDefault(),this.view="video",this.$(".channel-filter").removeClass("selected"),this.$(".video-filter").addClass("selected"),this.listCollection.reset(this.collection.video())},onMusicClick:function(e){e.preventDefault(),this.view="music",this.$(".channel-filter").removeClass("selected"),this.$(".music-filter").addClass("selected"),this.listCollection.reset(this.collection.music())},onPhotoClick:function(e){e.preventDefault(),this.view="photo",this.$(".channel-filter").removeClass("selected"),this.$(".photo-filter").addClass("selected"),this.listCollection.reset(this.collection.photo())}});return r}),define("hb!templates/channels/ChannelDirectoryView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function m(e,t,r){var i="",s,o,u;i+='\n			<li class="',a=n.key,s=a||e.key,a=n.activeFilter,o=a||r.activeFilter,a=n.if_eq,u=a||e.if_eq,f=l.program(2,g,t),f.hash={},f.fn=f,f.inverse=l.noop,a&&typeof u===c?s=u.call(e,o,s,f):s=h.call(e,u,o,s,f);if(s||s===0)i+=s;return i+='">\n				<a href="#!/servers/',a=n.serverID,s=a||r.serverID,typeof s===c?s=s.call(e,{hash:{}}):s===d&&(s=p.call(e,"...serverID",{hash:{}})),i+=v(s)+"/channels/directory?filter=",a=n.key,s=a||e.key,a=n.encodeURL,o=a||e.encodeURL,typeof o===c?s=o.call(e,s,{hash:{}}):o===d?s=p.call(e,"encodeURL",s,{hash:{}}):s=o,i+=v(s)+'">\n					',a=n.title,s=a||e.title,typeof s===c?s=s.call(e,{hash:{}}):s===d&&(s=p.call(e,"title",{hash:{}})),i+=v(s)+"\n				</a>\n			</li>\n		",i}function g(e,t){return"selected"}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.blockHelperMissing,p=n.helperMissing,d=void 0,v=this.escapeExpression;s+='<h1>Channel Directory</h1>\n\n<div id="filters-banner" class="banner">\n	<ul class="horizontal-filter-list">\n		',a=n.filters,o=a||t.filters,u=n.each,f=l.programWithDepth(m,i,t),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n	</ul>\n</div>\n",s})}),define("hb!templates/lists/channels/items/ChannelDirectoryListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;return s+='<a href="#!/servers/',f=n.serverID,o=f||t.serverID,typeof o===c?o=o.call(t,{hash:{}}):o===p&&(o=h.call(t,"serverID",{hash:{}})),s+=d(o)+"/channels/directory?filter=",f=n.activeFilter,o=f||t.activeFilter,f=n.encodeURL,u=f||t.encodeURL,typeof u===c?o=u.call(t,o,{hash:{}}):u===p?o=h.call(t,"encodeURL",o,{hash:{}}):o=u,s+=d(o)+"&key=",f=n.channelDirectory,o=f||t.channelDirectory,o=o===null||o===undefined||o===!1?o:o.key,f=n.encodeURL,u=f||t.encodeURL,typeof u===c?o=u.call(t,o,{hash:{}}):u===p?o=h.call(t,"encodeURL",o,{hash:{}}):o=u,s+=d(o)+'">\n	',o=40,f=n.channelDirectory,u=f||t.channelDirectory,u=u===null||u===undefined||u===!1?u:u.title,f=n.truncate,a=f||t.truncate,typeof a===c?o=a.call(t,u,o,{hash:{}}):a===p?o=h.call(t,"truncate",u,o,{hash:{}}):o=a,s+=d(o)+"\n</a>\n",s})}),define("plex/view/lists/channels/items/ChannelDirectoryListItem",["hb!templates/lists/channels/items/ChannelDirectoryListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var r=n.extend({tagName:"li",initialize:function(e){this.list=e.list,this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e({serverID:this.model.server.id,activeFilter:this.list.activeFilter,channelDirectory:this.model.toJSON()})),this}});return r}),define("plex/view/lists/channels/ChannelDirectoryList",["plex/view/lists/BaseList","plex/view/lists/channels/items/ChannelDirectoryListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"compact-list channel-directory-list",initialize:function(e){this.activeFilter=e.activeFilter,this.setup(t)},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("plex/view/channels/ChannelDirectoryView",["hb!templates/channels/ChannelDirectoryView.tpl","plex/model/collections/ChannelCollection","plex/view/BaseView","plex/view/lists/channels/ChannelDirectoryList","plex/view/lists/channels/ChannelTileList"],function(e,t,n,r,i){var s=n.extend({className:"channel-directory-container container well",channels:null,channelList:null,initialize:function(e){this.activeFilter=e.activeFilter||"/system/appstore/featured",this.activeKey=e.activeKey||this.activeFilter,this.channels=new t([],{server:this.collection.server,url:this.activeKey}),this.channels.fetch().done(_.bind(function(){this.channels.viewGroup==="Store:Info"?this.channelList=this.registerView(new i({collection:this.channels})):this.channelList=this.registerView(new r({collection:this.channels,activeFilter:this.activeFilter})),this.render()},this))},render:function(){return this.$el.html(e({serverID:this.collection.server.id,activeFilter:this.activeFilter,filters:this.collection.toJSON()})),this.channelList&&this.$("#filters-banner").after(this.channelList.render().el),this}});return s}),define("hb!templates/channels/ChannelView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t,r){var i="",s,o,u,v,y;i+='\n			<li class="well">\n				<a href="#!/servers/',a=n.serverID,s=a||r.serverID,typeof s===c?s=s.call(e,{hash:{}}):s===p&&(s=h.call(e,"...serverID",{hash:{}})),i+=d(s)+"/channels/player?key=",s=e.key,a=n.encodeURL,o=a||e.encodeURL,typeof o===c?s=o.call(e,s,{hash:{}}):o===p?s=h.call(e,"encodeURL",s,{hash:{}}):s=o,i+=d(s)+'">\n					<img class="poster channel-poster" data-original="',s=150,o=100,u=e.thumb,a=n.serverObj,v=a||r.serverObj,a=n.transcodeImage,y=a||e.transcodeImage,typeof y===c?s=y.call(e,v,u,o,s,{hash:{}}):y===p?s=h.call(e,"transcodeImage",v,u,o,s,{hash:{}}):s=y,i+=d(s)+'" src="img/posters/poster_square_small.png" width="100">\n\n					<div class="poster-details">\n						<div class="metadata-right">\n							',s=e.duration,o=n["if"],f=l.program(2,m,t),f.hash={},f.fn=f,f.inverse=l.noop,s=o.call(e,s,f);if(s||s===0)i+=s;i+="\n						</div>\n\n						<h3>",s=e.title,typeof s===c?s=s.call(e,{hash:{}}):s===p&&(s=h.call(e,"this.title",{hash:{}})),i+=d(s)+"</h3>\n\n						",s=e.summary,o=n["if"],f=l.program(4,g,t),f.hash={},f.fn=f,f.inverse=l.noop,s=o.call(e,s,f);if(s||s===0)i+=s;return i+="\n					</div>\n				</a>\n			</li>\n		",i}function m(e,t){var r="",i,s;return r+='\n								<div class="metadata metadata-headline">',i=e.duration,a=n.formatMinutes,s=a||e.formatMinutes,typeof s===c?i=s.call(e,i,{hash:{}}):s===p?i=h.call(e,"formatMinutes",i,{hash:{}}):i=s,r+=d(i)+"</div>\n							",r}function g(e,t){var r="",i,s,o;return r+='\n							<div class="summary">',i=180,s=e.summary,a=n.truncate,o=a||e.truncate,typeof o===c?i=o.call(e,s,i,{hash:{}}):o===p?i=h.call(e,"truncate",s,i,{hash:{}}):i=o,r+=d(i)+"</div>\n						",r}function y(e,t,r){var i="",s,o;i+="\n			",s=e.settings,o=n.unless,f=l.programWithDepth(b,t,r),f.hash={},f.fn=f,f.inverse=l.noop,s=o.call(e,s,f);if(s||s===0)i+=s;return i+="\n		",i}function b(e,t,r){var i="",s,o,u,f,l;return i+='\n				<li class="well">\n					<a href="#!/servers/',a=n.serverID,s=a||r.serverID,typeof s===c?s=s.call(e,{hash:{}}):s===p&&(s=h.call(e,"......serverID",{hash:{}})),i+=d(s)+"/channels?key=",s=e.key,a=n.encodeURL,o=a||e.encodeURL,typeof o===c?s=o.call(e,s,{hash:{}}):o===p?s=h.call(e,"encodeURL",s,{hash:{}}):s=o,i+=d(s)+'">\n						<img class="poster channel-poster" data-original="',s=150,o=100,u=e.thumb,a=n.serverObj,f=a||r.serverObj,a=n.transcodeImage,l=a||e.transcodeImage,typeof l===c?s=l.call(e,f,u,o,s,{hash:{}}):l===p?s=h.call(e,"transcodeImage",f,u,o,s,{hash:{}}):s=l,i+=d(s)+'" src="img/posters/poster_square_small.png" width="100">\n\n						<div class="poster-details">\n							<h3>',s=e.title,typeof s===c?s=s.call(e,{hash:{}}):s===p&&(s=h.call(e,"this.title",{hash:{}})),i+=d(s)+"</h3>\n						</div>\n					</a>\n				</li>\n			",i}function w(e,t){var r="",i,s,o,u,f;return r+='\n	<div class="fanart" style="background-image: url(',i=720,s=1280,a=n.channel,o=a||e.channel,o=o===null||o===undefined||o===!1?o:o.art,a=n.serverObj,u=a||e.serverObj,a=n.transcodeImage,f=a||e.transcodeImage,typeof f===c?i=f.call(e,u,o,s,i,{hash:{}}):f===p?i=h.call(e,"transcodeImage",u,o,s,i,{hash:{}}):i=f,r+=d(i)+');"></div>\n',r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;s+='<div class="details">\n	<ul class="poster-list">\n		',a=n.channel,o=a||t.channel,o=o===null||o===undefined||o===!1?o:o.Video,u=n.each,f=l.programWithDepth(v,i,t),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+="\n\n		",a=n.channel,o=a||t.channel,o=o===null||o===undefined||o===!1?o:o.Directory,u=n.each,f=l.programWithDepth(y,i,t),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;s+="\n	</ul>\n</div>\n\n",a=n.channel,o=a||t.channel,o=o===null||o===undefined||o===!1?o:o.art,u=n["if"],f=l.program(9,w,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n",s})}),define("plex/view/channels/ChannelView",["hb!templates/channels/ChannelView.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({className:"container",initialize:function(){this.loadPosterDelay=_.debounce(this.loadPoster,500)},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,channel:this.model.toJSON()})),this.loadPosterDelay(),this},loadPoster:function(){this.$(".poster").lazyload({threshold:100})}});return n}),define("hb!templates/ErrorView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<i class="plex-icon-sad"></i>\n\n<span class="fatal-message">',u=n.error,o=u||t.error,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"error",{hash:{}})),s+=h(o)+"</span>\n",s})}),define("plex/view/ErrorView",["hb!templates/ErrorView.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({className:"container fatal-container",error:null,initialize:function(e){this.error=e.error},render:function(){return this.$el.html(e({error:this.error})),this}});return n}),define("hb!templates/LoginView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i,s;r+='\n	<div class="fatal-container">\n		',a=n.hasPlexPass,i=a||e.hasPlexPass,s=n["if"],f=l.program(2,m,t),f.hash={},f.fn=f,f.inverse=l.program(7,b,t),i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n	</div>\n",r}function m(e,t){var r="",i,s;r+="\n			",a=n.isUnavailable,i=a||e.isUnavailable,s=n["if"],f=l.program(3,g,t),f.hash={},f.fn=f,f.inverse=l.program(5,y,t),i=s.call(e,i,f);if(i||i===0)r+=i;return r+="\n		",r}function g(e,t){return'\n				<i class="plex-icon-sad"></i>\n				<span class="fatal-message">This server is unavailable to you. <a class="sign-out-btn" href="#">Sign Out</a></span>\n			'}function y(e,t){var r="",i;return r+='\n				<i class="plex-icon-myplex"></i>\n				<span class="fatal-message">You are signed in as ',a=n.myPlex,i=a||e.myPlex,i=i===null||i===undefined||i===!1?i:i.username,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"myPlex.username",{hash:{}})),r+=d(i)+'. <a class="sign-out-btn" href="#">Sign Out</a></span>\n			',r}function b(e,t){var r="",i;return r+='\n			<i class="plex-icon-sad"></i>\n			<span class="fatal-message">Sorry, you need to have a <a href="',a=n.plexpassUrl,i=a||e.plexpassUrl,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"plexpassUrl",{hash:{}})),r+=d(i)+'">PlexPass</a> subscription for this.</span>\n		',r}function w(e,t){var r="",i;return r+='\n	<form class="row-fluid login-form">\n		<div class="span3"></div>\n		<div class="span6 login-body">\n			<i class="plex-icon-myplex"></i>\n\n			<h3>Sign in to your <a href="',a=n.myPlex,i=a||e.myPlex,i=i===null||i===undefined||i===!1?i:i.url,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"myPlex.url",{hash:{}})),r+=d(i)+'">myPlex</a> account</h3>\n\n			<div class="control-group">\n				<input type="text" class="span12" name="username" placeholder="username or email">\n			</div>\n\n			<div class="control-group">\n				<input type="password" class="span12" name="password" placeholder="password">\n			</div>\n\n			<div class="control-group">\n				<input type="submit" class="btn btn-medium btn-primary pull-right" value="Sign In">\n				<label>\n					<input type="checkbox" name="rememberMe" value="1">\n					Remember me\n				</label>\n			</div>\n		</div>\n	</form>\n',r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;a=n.myPlex,o=a||t.myPlex,o=o===null||o===undefined||o===!1?o:o.signedIn,u=n["if"],f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.program(9,w,i),o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n",s})}),define("plex/view/LoginView",["hb!templates/LoginView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView"],function(e,t,n,r){var i=r.extend({className:"container well login-container",events:{"submit .login-form":"onSubmit","click .sign-out-btn":"onSignOutClick"},render:function(){var t=n.get("myPlex");return this.$el.html(e({myPlex:t.toJSON(),isUnavailable:n.get("isUnavailable"),hasPlexPass:n.checkPlexPass(),plexpassUrl:t.resolveUrl("/subscription/about"),signUpUrl:t.resolveUrl("/users/sign_up")})),this},onSubmit:function(e){e.preventDefault();var r=e.currentTarget;t.trigger("command:ShowLoading",!0),n.get("myPlex").signIn(r.username.value,r.password.value,r.rememberMe.checked).always(function(){t.trigger("command:ShowLoading",!1)}).done(function(){n.fetchEverything()}).fail(function(e){var t="There was a problem signing in to myPlex.";e.status===401&&(t="The username or password is incorrect."),n.set("alert",{status:"error",message:t})})},onSignOutClick:function(e){e.preventDefault(),t.trigger("command:SignOut")}});return i}),define("hb!templates/UnsupportedBrowserView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s,o=this;return'<i class="plex-icon-sad"></i>\n\n<span class="fatal-message">\n	Sorry, this browser doesn\'t appear to be supported.\n	See <a href="http://wiki.plexapp.com/index.php/UnsupportedBrowsers">the wiki</a> for more info.\n</span>\n'})}),define("plex/view/UnsupportedBrowserView",["hb!templates/UnsupportedBrowserView.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({className:"container fatal-container",render:function(){return this.$el.html(e({})),this}});return n}),define("hb!templates/InfoView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function v(e,t){var r="",i;return r+="\n	<p>\n		<strong>",a=n.label,i=a||e.label,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"label",{hash:{}})),r+=d(i)+":</strong> ",a=n.value,i=a||e.value,typeof i===c?i=i.call(e,{hash:{}}):i===p&&(i=h.call(e,"value",{hash:{}})),r+=d(i)+"\n	</p>\n",r}n=n||e.helpers;var s="",o,u,a,f,l=this,c="function",h=n.helperMissing,p=void 0,d=this.escapeExpression;a=n.items,o=a||t.items,u=n.each,f=l.program(1,v,i),f.hash={},f.fn=f,f.inverse=l.noop,o=u.call(t,o,f);if(o||o===0)s+=o;return s+="\n",s})}),define("plex/view/InfoView",["hb!templates/InfoView.tpl","plex/model/DebugInfoModel","plex/view/BaseView"],function(e,t,n){var r={host:"Host",userAgent:"User Agent",browser:"Browser Info",clientVersion:"Bundle Version",isAuthorized:"Is Authorized",isAvailable:"Is Available",primaryServerUrl:"Server URL",primaryServerAuthToken:"Server Auth Token",primaryServerVersion:"Server Version",myPlexUrl:"myPlex URL",myPlexFeatures:"myPlex Subscriptions",myPlexUsername:"myPlex Username",myPlexAuthToken:"myPlex Auth Token"},i=n.extend({className:"info-container container well",render:function(){var n=t.toJSON(),i=_.map(_.keys(n),function(e){return{label:r[e]||e,value:t.get(e)}});return this.$el.html(e({items:i})),this}});return i}),define("hb!templates/LogView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,r,i){n=n||e.helpers;var s="",o,u,a=this,f="function",l=n.helperMissing,c=void 0,h=this.escapeExpression;return s+='<div class="banner">\n	<!--\n		TODO(schuyler): On browsers with a filesystem API, we can probably offer this content as a download...\n	-->\n	<span class="banner-title">Logs</span> <span class="banner-count"></span>\n</div>\n\n<textarea>\n',u=n.blob,o=u||t.blob,typeof o===f?o=o.call(t,{hash:{}}):o===c&&(o=l.call(t,"blob",{hash:{}})),s+=h(o)+"\n</textarea>\n",s})}),define("plex/view/LogView",["hb!templates/LogView.tpl","plex/view/BaseView","plex/control/utils/LogUtil"],function(e,t,n){var r=t.extend({className:"log-container container well",render:function(){var t=n.getLogsAsJSON(!0);return this.$el.html(e({blob:t})),this}});return r}),define("plex/control/ServerNotificationStream",["plex/control/Dispatcher","plex/model/AppModel","plex/model/SectionModel","plex/model/media/MediaModel"],function(e,t,n,r){var i={},s=function(t){var s=t.resolveUrl("/:/websockets/notifications").replace(/^http/,"ws");t.get("accessToken")&&(s+="?X-Plex-Token="+encodeURIComponent(t.get("accessToken"))),this.server=t,this.socket=new WebSocket(s),this.socket.onclose=_.bind(function(n){e.trigger("show:status",t,"Connection to "+t.get("name")+" closed"),t.trigger("websocket",{closed:!0}),delete i[t.id]},this),this.socket.onopen=_.bind(function(e){t.trigger("websocket",{opened:!0})},this),this.socket.onerror=_.bind(function(n){e.trigger("show:status",t,"Unable to receive notifications from "+t.get("name")),t.trigger("websocket",{error:!0})},this),this.socket.onmessage=_.bind(function(t){var i=JSON.parse(t.data);i.type=="preference"?_.each(i._children,function(t){t.key=t.id,t.server=this.server,this.server.trigger("preference:change",t),e.trigger("preference:change",t)},this):i.type=="timeline"?_.each(i._children,function(t){t.server=this.server;var i={server:this.server,onlyIfCached:!0},s=new n({key:t.sectionID},i);if(!_.isEmpty(s)){t.section=i.section=s;var o=new r({key:"/library/metadata/"+t.itemID},i);_.isEmpty(o)||(t.media=o,o.trigger("timeline",t)),s.trigger("timeline",t)}t.server.trigger("timeline",t),e.trigger("timeline",t)},this):i.type=="status"&&_.each(i._children,function(t){var n=t.title+(t.description?": "+t.description:"");e.trigger("show:status",this.server,n),this.server.trigger("status",t),t.notificationName==="LIBRARY_UPDATE"&&this.server.get("sections").fetch({hideLoadingAlert:!0})},this)},this)},o=function(e){if(e.get("shared"))return;e.id in i&&(i[e.id].socket.onclose=null,i[e.id].socket.close()),window.WebSocket?i[e.id]=new s(e):e.trigger("websocket",{error:!0})};t.get("servers").on("add",o),t.get("servers").on("reset",function(e){e.each(o)}),e.on("timeline",function(t){var n=t.section?t.section.get("title"):"section "+t.sectionID,r=t.media?t.media.get("title"):"item "+t.itemID,i="";switch(t.state){case 0:i="Created";break;case 1:i="Progress for";break;case 2:i="Matching";break;case 3:i="Downloading metadata for";break;case 4:i="Loading metadata for";break;case 5:i="Finished processing";break;case 6:i="Analyzing";break;case 9:i="Deleted"}i&&e.trigger("show:status",t.server,i+" "+r+" in "+n+" on "+t.server.get("name"))})}),define("plex/control/Router",["plex/control/Dispatcher","plex/model/AppModel","plex/model/HeaderModel","plex/model/media/DetailsModel","plex/model/media/PlaylistItemModel","plex/model/ChannelModel","plex/model/media/ChannelVideoModel","plex/model/collections/ChannelCollection","plex/view/AppView","plex/view/DashboardView","plex/view/setup/SetupView","plex/view/PlaylistView","plex/view/SettingsView","plex/view/preferences/ServerPreferencesView","plex/view/ServerTimelineView","plex/view/ServerView","plex/view/ManageSectionView","plex/view/SectionView","plex/view/details/DetailsView","plex/view/edit/EditView","plex/view/players/VideoPlayerView","plex/view/channels/BrowseChannelsView","plex/view/channels/ChannelDirectoryView","plex/view/channels/ChannelView","plex/view/ErrorView","plex/view/LoginView","plex/view/UnsupportedBrowserView","plex/view/InfoView","plex/view/LogView","plex/control/ServerNotificationStream","backbone"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L){var A=t.get("servers"),O=function(t){return t.get("shared")?(e.trigger("navigate:error","This view is only available for your servers."),!1):!0},M=Backbone.Router.extend({history:0,routes:{"":"empty","!/dashboard":"dashboard","!/setup":"setup","!/playlist/:playlistName":"playlist","!/playlist/:playlistName/details/:itemID":"playlistItem","!/playlist/:playlistName/player/:itemID":"playlistPlayer","!/settings":"settings","!/servers/:serverID":"server","!/servers/:serverID/prefs":"serverPrefs","!/servers/:serverID/timeline":"serverTimeline","!/servers/:serverID/sections/add":"addSection","!/servers/:serverID/sections/:sectionID/details/:mediaID":"details","!/servers/:serverID/sections/:sectionID/edit/:mediaID":"edit","!/servers/:serverID/sections/:sectionID/player/:mediaID":"player","!/servers/:serverID/sections/:sectionID/manage":"manageSection","!/servers/:serverID/sections/:sectionID":"section","!/servers/:serverID/channels/directory?filter=:filter&key=:key":"channelDirectory","!/servers/:serverID/channels/directory?filter=:filter":"channelDirectory","!/servers/:serverID/channels/directory":"channelDirectory","!/servers/:serverID/channels?key=:channelID":"channel","!/servers/:serverID/channels/player?key=:channelID":"channelPlayer","!/servers/:serverID/channels":"browseChannels","!/login":"login","!/unsupported":"unsupported","!/info":"info","!/logs":"logs","*404":"error"},authExemptRoutes:["login","unsupported","info","logs","error","setup"],historyExemptRoutes:["empty","login","unsupported"],initialize:function(){this.bind("all",this.track),t.on("change:modal",function(e,t){t.name&&this.track(t.name)},this);var n=this.authExemptRoutes.slice(0);n.unshift(_.uniq(_.values(this.routes)));var r=_.without.apply(_,n);_.each(r,function(e){this[e]=_.wrap(this[e],function(e){this.checkAuthorization()&&e.apply(this,_.toArray(arguments).slice(1))})},this),this._bindRoutes(),e.on("navigate:back",this.onNavigateBack,this),e.on("navigate:dashboard",this.onNavigateDashboard,this),e.on("navigate:setup",this.onNavigateSetup,this),e.on("navigate:playlist",this.onNavigatePlaylist,this),e.on("navigate:playlistItem",this.onNavigatePlaylistItem,this),e.on("navigate:playlistPlayer",this.onNavigatePlaylistPlayer,this),e.on("navigate:settings",this.onNavigateSettings,this),e.on("navigate:server",this.onNavigateServer,this),e.on("navigate:serverPrefs",this.onNavigateServerPrefs,this),e.on("navigate:serverTimeline",this.onNavigateServerTimeline,this),e.on("navigate:section",this.onNavigateSection,this),e.on("navigate:manageSection",this.onNavigateManageSection,this),e.on("navigate:details",this.onNavigateDetails,this),e.on("navigate:edit",this.onNavigateEdit,this),e.on("navigate:player",this.onNavigatePlayer,this),e.on("navigate:browseChannels",this.onNavigateBrowseChannels,this),e.on("navigate:channelDirectory",this.onNavigateChannelDirectory,this),e.on("navigate:channel",this.onNavigateChannel,this),e.on("navigate:channelPlayer",this.onNavigateChannelPlayer,this),e.on("navigate:login",this.onNavigateLogin,this),e.on("navigate:unsupported",this.onNavigateUnsupported,this),e.on("navigate:error",this.onNavigateError,this),e.on("navigate:info",this.onNavigateInfo,this),e.on("navigate:logs",this.onNavigateLogs,this),(new a).render(),e.trigger("command:ShowLoading",!0);var i=_.once(function(){e.trigger("command:ShowLoading",!1),Backbone.history.start()});t.get("initialized")===!0?i():t.on("change:initialized",i)},track:function(e){/^route:/.test(e)&&(e=e.replace("route:",""),_.indexOf(this.historyExemptRoutes,e)===-1&&(this.history++,n.set("showBack",this.history>1)));if(_.isString(e)&&typeof _gaq!="undefined")return _gaq.push(["_trackPageview","/"+e])},checkAuthorization:function(){return t.get("isAuthorized")?!0:t.get("isUnsupported")?(e.trigger("navigate:unsupported"),!1):(e.trigger("navigate:login"),!1)},empty:function(){e.trigger("navigate:dashboard")},dashboard:function(){n.set({activeServer:null,activeSection:null,activeMedia:null,activeChannel:null}),t.set("view",new f({collection:A}))},setup:function(){n.set({activeServer:null,activeSection:null,activeMedia:null,activeChannel:null}),t.set("view",new l({model:t.get("primaryServer")}))},playlist:function(r){n.set({activeServer:null,activeSection:null,activeMedia:null,activeChannel:null});var i=t.get("playlists")[r];i.fetch().done(function(){t.set("view",new c({collection:i}))}).fail(function(){e.trigger("navigate:error","The "+i.playlistLabel+" playlist is currently unavailable.")})},playlistItem:function(n,r){var s=new i({id:r},{server:t.get("myPlex"),playlistName:n});s.fetch().done(function(){t.set("view",new y({model:s}))}).fail(function(){e.trigger("navigate:error","This media is currently unavailable.")})},playlistPlayer:function(n,r){var s=new i({id:r},{server:t.get("myPlex"),playlistName:n});s.fetch().done(function(){t.set("view",new w({model:s}))}).fail(function(){e.trigger("navigate:error","This media is currently unavailable.")})},settings:function(){n.set({activeServer:null,activeSection:null,activeMedia:null,activeChannel:null}),t.set("view",new h({model:t.get("settings")}))},server:function(r){this.populateActiveObjects(r).done(function(e){n.set(e),t.set("view",new v({model:e.activeServer}))}).fail(function(t){e.trigger("navigate:error","The media server is not responding.")})},serverPrefs:function(r){this.populateActiveObjects(r).done(function(e){n.set(e),O(e.activeServer)&&t.set("view",new p({model:e.activeServer}))}).fail(function(t){e.trigger("navigate:error","The media server is not responding.")})},serverTimeline:function(r){this.populateActiveObjects(r).done(function(e){n.set(e),O(e.activeServer)&&t.set("view",new d({model:e.activeServer}))}).fail(function(t){e.trigger("navigate:error","The media server is not responding.")})},section:function(r,i){this.populateActiveObjects(r,i).done(function(e){n.set(e),t.set("view",new g({model:e.activeSection}))}).fail(function(t){e.trigger("navigate:error","This section is currently unavailable.")})},manageSection:function(r,i){this.populateActiveObjects(r,i).done(function(e){n.set(e),O(e.activeServer)&&t.set("view",new m({model:e.activeSection}))}).fail(function(t){e.trigger("navigate:error","This section is currently unavailable.")})},details:function(r,i,s){this.populateActiveObjects(r,i,s).done(function(e){n.set(e),t.set("view",new y({model:e.activeMedia.get("media")}))}).fail(function(t){e.trigger("navigate:error","This media is currently unavailable.")})},edit:function(r,i,s){this.populateActiveObjects(r,i,s).done(function(e){n.set(e),O(e.activeServer)&&t.set("view",new b({model:e.activeMedia.get("media")}))}).fail(function(t){e.trigger("navigate:error","This media is currently unavailable.")})},player:function(r,i,s){this.populateActiveObjects(r,i,s).done(function(e){n.set(e),t.set("view",new w({model:e.activeMedia.get("media")}))}).fail(function(t){e.trigger("navigate:error","This media is currently unavailable.")})},browseChannels:function(r){this.populateActiveObjects(r).done(function(e){n.set(e),t.set("view",new E({collection:e.activeServer.get("channels")}))}).fail(function(t){e.trigger("navigate:error","The media server is not responding.")})},channelDirectory:function(r,i,s){i&&(i=decodeURIComponent(i)),s&&(s=decodeURIComponent(s)),this.populateActiveObjects(r).done(function(r){if(O(r.activeServer)){var o=new u([],{server:r.activeServer,url:"system/appstore"});o.fetch().done(function(){n.set(r),t.set("view",new S({collection:o,activeFilter:i,activeKey:s}))}).fail(function(t){e.trigger("navigate:error","The channel directory is currently unavailable.")})}}).fail(function(t){e.trigger("navigate:error","The media server is not responding.")})},channel:function(r,i){this.populateActiveObjects(r).done(function(r){var o=new s({key:decodeURIComponent(i)},{server:r.activeServer});o.fetch().done(function(){r.activeChannel=o,n.set(r),t.set("view",new x({model:o}))}).fail(function(t){e.trigger("navigate:error","This channel is currently unavailable.")})}).fail(function(t){e.trigger("navigate:error","The media server is not responding.")})},channelPlayer:function(r,i){this.populateActiveObjects(r).done(function(r){var s=new o({key:decodeURIComponent(i)},{server:r.activeServer});s.fetch().done(function(){r.activeChannel=s,n.set(r),t.set("view",new w({model:s}))}).fail(function(t){e.trigger("navigate:error","This media is currently unavailable.")})}).fail(function(t){e.trigger("navigate:error","The media server is not responding.")})},login:function(){n.set({activeServer:null,activeSection:null,activeMedia:null,activeChannel:null}),t.set("view",new N)},unsupported:function(){n.set({activeServer:null,activeSection:null,activeMedia:null,activeChannel:null}),t.set("view",new C)},error:function(e,r){var i=r||"That page doesn't exist... yet.";n.set({activeServer:null,activeSection:null,activeMedia:null,activeChannel:null}),t.set("view",new T({error:i}))},info:function(){n.set({activeServer:null,activeSection:null,activeMedia:null,activeChannel:null}),t.set("view",new k)},logs:function(){n.set({activeServer:null,activeSection:null,activeMedia:null,activeChannel:null}),t.set("view",new L)},onNavigateBack:function(){this.history-=2,window.history.back()},onNavigateDashboard:function(){this.navigate("!/dashboard",{trigger:!0})},onNavigateSetup:function(){this.navigate("!/setup",{trigger:!0})},onNavigatePlaylist:function(e){this.navigate("!/playlist/"+e,{trigger:!0})},onNavigatePlaylistItem:function(e,t){this.navigate("!/playlist/"+e+"/details/"+t,{trigger:!0})},onNavigatePlaylistPlayer:function(e,t){this.navigate("!/playlist/"+e+"/player/"+t,{trigger:!0})},onNavigateSettings:function(){this.navigate("!/settings",{trigger:!0})},onNavigateServer:function(e){this.navigate("!/servers/"+e,{trigger:!0})},onNavigateServerPrefs:function(e){this.navigate("!/servers/"+e+"/prefs",{trigger:!0})},onNavigateServerTimeline:function(e){this.navigate("!/servers/"+e+"/timeline",{trigger:!0})},onNavigateSection:function(e,t){this.navigate("!/servers/"+e+"/sections/"+t,{trigger:!0})},onNavigateManageSection:function(e,t){this.navigate("!/servers/"+e+"/sections/"+t+"/manage",{trigger:!0})},onNavigateDetails:function(e,t,n){this.navigate("!/servers/"+e+"/sections/"+t+"/details/"+n,{trigger:!0})},onNavigateEdit:function(e,t,n){this.navigate("!/servers/"+e+"/sections/"+t+"/edit/"+n,{trigger:!0})},onNavigatePlayer:function(e,t,n){this.navigate("!/servers/"+e+"/sections/"+t+"/player/"+n,{trigger:!0})},onNavigateBrowseChannels:function(e){this.navigate("!/servers/"+e+"/channels",{trigger:!0})},onNavigateChannelDirectory:function(e){this.navigate("!/servers/"+e+"/channels/directory",{trigger:!0})},onNavigateChannel:function(e,t){this.navigate("!/servers/"+e+"/channels?key="+encodeURIComponent(t),{trigger:!0})},onNavigateChannelPlayer:function(e,t){this.navigate("!/servers/"+e+"/channels/player?key="+encodeURIComponent(t),{trigger:!0})},onNavigateLogin:function(){this.navigate("!/login",{trigger:!0})},onNavigateUnsupported:function(){this.navigate("!/unsupported",{trigger:!0})},onNavigateError:function(e){this.error("",e)},onNavigateInfo:function(){this.navigate("!/info",{trigger:!0})},onNavigateLogs:function(){this.navigate("!/logs",{trigger:!0})},populateActiveObjects:function(e,t,n){var i={activeServer:null,activeSection:null,activeMedia:null,activeChannel:null},s=A.populate().pipe(function(n){return i.activeServer=n.get(e),i.activeServer?t?i.activeServer.get("sections").populate():i:$.Deferred().reject(i)});return t&&(s=s.pipe(function(e){i.activeSection=e.get(t);if(!i.activeSection)return $.Deferred().reject(i);if(!n)return i;var s=new r({ratingKey:n},{server:i.activeServer,section:i.activeSection});return s.fetch()})),n&&(s=s.pipe(function(e){return i.activeMedia=e,i.activeMedia?i:$.Deferred().reject(i)})),s.promise()}});return M}),define("plex/app",["plex/control/init/GlobalInit","plex/control/Router"],function(e,t){return{init:function(){var e=new t}}}),require.config({baseUrl:"js",templatePathPrefix:"app/",paths:{text:"libs/require/text-2.0.1",hb:"libs/require/hb-precompile",templates:"../templates",jquery:"libs/jquery/jquery-1.8.0",xml2json:"libs/jquery/jquery.xml2json",lazyload:"libs/jquery/jquery.lazyload",chosen:"libs/jquery/jquery.chosen",sortable:"libs/jquery/jquery.sortable",underscore:"libs/underscore-1.3.3",backbone:"libs/backbone-0.9.2",handlebars:"libs/handlebars-1.0.0.beta.6",moment:"libs/moment-1.7.0",base64:"libs/base64",sha256:"libs/jssha256-0.1",soundmanagerdefer:"libs/soundmanager/soundmanager2-defer",soundmanager:"libs/soundmanager/soundmanager2-nodebug",jwplayer:"libs/jwplayer-5.10",swfobject:"libs/swfobject-2.2",spin:"libs/spin-1.2.5",fastclick:"libs/fastclick",transition:"libs/bootstrap/bootstrap-transition",button:"libs/bootstrap/bootstrap-button",tooltip:"libs/bootstrap/bootstrap-tooltip",dropdown:"libs/bootstrap/bootstrap-dropdown",popover:"libs/bootstrap/bootstrap-popover",modal:"libs/bootstrap/bootstrap-modal"},shim:{underscore:[],backbone:["jquery","underscore"],handlebars:[],hb:["handlebars"],xml2json:["jquery"],lazyload:["jquery"],chosen:["jquery"],sortable:["jquery"],moment:[],base64:[],sha256:[],soundmanagerdefer:[],soundmanager:["soundmanagerdefer"],jwplayer:[],swfobject:[],spin:[],fastclick:[],transition:["jquery"],button:["jquery"],dropdown:["jquery"],modal:["jquery"],tooltip:["jquery"],popover:["jquery","tooltip"]}}),require(["plex/app"],function(e){e.init()}),define("main",function(){})